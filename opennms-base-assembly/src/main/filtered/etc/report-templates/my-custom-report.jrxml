<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 5.6.1.final using JasperReports Library version 5.6.1  -->
<!-- 2015-08-25T10:31:03 -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="MyCustom-Report" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="2ccb7e05-ef47-49aa-83b8-9a38061a95ca">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<property name="com.jaspersoft.studio.unit." value="pixel"/>
	<template><![CDATA[$P{ONMS_REPORT_DIR} + "/assets/styles/defaultStyles.jrtx"]]></template>
	
	<subDataset name="top_20_event_nodes" uuid="08f5a3d4-3979-4e98-b715-a23431d8a861">
		<queryString>
			<![CDATA[SELECT	
				nodelabel, 
				SUM(indeterminate) AS indeterminate, 
				SUM(cleared) AS cleared, 
				SUM(normal) AS normal, 
				SUM(warning) AS warning, 
				SUM(minor) AS minor, 
				SUM(major) AS major, 
				SUM(critical) AS critical, 
				SUM(indeterminate + cleared + normal + warning + minor + major + critical) AS total
				FROM
				(
					SELECT
					node.nodelabel,
					CASE
						WHEN events.eventseverity = '1' THEN CAST('1' AS INTEGER)
						ELSE CAST('0' AS INTEGER)
					END AS indeterminate,
					CASE
						WHEN events.eventseverity = '2' THEN CAST('1' AS INTEGER)
						ELSE CAST('0' AS INTEGER)
					END AS cleared,
					CASE
						WHEN events.eventseverity = '3' THEN CAST('1' AS INTEGER)
						ELSE CAST('0' AS INTEGER)
					END AS normal,
					CASE
						WHEN events.eventseverity = '4' THEN CAST('1' AS INTEGER)
						ELSE CAST('0' AS INTEGER)
					END AS warning,
					CASE
						WHEN events.eventseverity = '5' THEN CAST('1' AS INTEGER)
						ELSE CAST('0' AS INTEGER)
					END AS minor,
					CASE
						WHEN events.eventseverity = '6' THEN CAST('1' AS INTEGER)
						ELSE CAST('0' AS INTEGER)
					END AS major,
					CASE
						WHEN events.eventseverity = '7' THEN CAST('1' AS INTEGER)
						ELSE CAST('0' AS INTEGER)
					END AS critical
				FROM
					node, events
				WHERE
					events.eventtime > now() - INTERVAL '23 hour' AND
					events.nodeid = node.nodeid) AS node_events
				GROUP BY
				nodelabel
				ORDER BY
				total DESC
			LIMIT '20']]>
		</queryString>
		<field name="nodelabel" class="java.lang.String">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="indeterminate" class="java.lang.Long">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="cleared" class="java.lang.Long">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="normal" class="java.lang.Long">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="warning" class="java.lang.Long">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="minor" class="java.lang.Long">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="major" class="java.lang.Long">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="critical" class="java.lang.Long">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="total" class="java.lang.Long">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
	</subDataset>
	
	<parameter name="ONMS_REPORT_DIR" class="java.lang.String" isForPrompting="false">
		<parameterDescription><![CDATA[The directory where all reports can be found]]></parameterDescription>
		<defaultValueExpression><![CDATA["/home/administrator/Desktop/nms_26MAY2023/stlnms/target/stlnms-27.2.0/etc/report-templates"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select now() as current_time;]]>
	</queryString>
	<field name="current_time" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	
	<group name="event_overview">
		<groupExpression><![CDATA[$F{current_time}]]></groupExpression>
		<groupHeader>
			<band height="421">
				<stackedBar3DChart>
					<chart theme="default">
						<reportElement x="0" y="231" width="555" height="185" uuid="e976041c-f8fb-4c71-b3b3-e7024b843f08"/>
						<chartTitle>
							<font fontName="SansSerif" size="10" isBold="true"/>
							<titleExpression><![CDATA["Top 20 Nodes with events"]]></titleExpression>
						</chartTitle>
						<chartSubtitle>
							<font fontName="SansSerif" size="8"/>
							<subtitleExpression><![CDATA["All events acknowledged and unacknowledged in last 24hours"]]></subtitleExpression>
						</chartSubtitle>
						<chartLegend>
							<font fontName="SansSerif" size="8"/>
						</chartLegend>
					</chart>
					<categoryDataset>
						<dataset>
							<datasetRun subDataset="top_20_event_nodes" uuid="c4c089d5-8b80-41ab-9ad3-46645edfeba9"/>
						</dataset>
						<categorySeries>
							<seriesExpression><![CDATA["indeterminate"]]></seriesExpression>
							<categoryExpression><![CDATA[$F{nodelabel}]]></categoryExpression>
							<valueExpression><![CDATA[$F{indeterminate}]]></valueExpression>
							<labelExpression><![CDATA["indeterminate"]]></labelExpression>
						</categorySeries>
						<categorySeries>
							<seriesExpression><![CDATA["cleared"]]></seriesExpression>
							<categoryExpression><![CDATA[$F{nodelabel}]]></categoryExpression>
							<valueExpression><![CDATA[$F{cleared}]]></valueExpression>
							<labelExpression><![CDATA["cleared"]]></labelExpression>
						</categorySeries>
						<categorySeries>
							<seriesExpression><![CDATA["normal"]]></seriesExpression>
							<categoryExpression><![CDATA[$F{nodelabel}]]></categoryExpression>
							<valueExpression><![CDATA[$F{normal}]]></valueExpression>
							<labelExpression><![CDATA["normal"]]></labelExpression>
						</categorySeries>
						<categorySeries>
							<seriesExpression><![CDATA["warning"]]></seriesExpression>
							<categoryExpression><![CDATA[$F{nodelabel}]]></categoryExpression>
							<valueExpression><![CDATA[$F{warning}]]></valueExpression>
							<labelExpression><![CDATA["warning"]]></labelExpression>
						</categorySeries>
						<categorySeries>
							<seriesExpression><![CDATA["minor"]]></seriesExpression>
							<categoryExpression><![CDATA[$F{nodelabel}]]></categoryExpression>
							<valueExpression><![CDATA[$F{minor}]]></valueExpression>
							<labelExpression><![CDATA["minor"]]></labelExpression>
						</categorySeries>
						<categorySeries>
							<seriesExpression><![CDATA["major"]]></seriesExpression>
							<categoryExpression><![CDATA[$F{nodelabel}]]></categoryExpression>
							<valueExpression><![CDATA[$F{major}]]></valueExpression>
							<labelExpression><![CDATA["major"]]></labelExpression>
						</categorySeries>
						<categorySeries>
							<seriesExpression><![CDATA["critical"]]></seriesExpression>
							<categoryExpression><![CDATA[$F{nodelabel}]]></categoryExpression>
							<valueExpression><![CDATA[$F{critical}]]></valueExpression>
							<labelExpression><![CDATA["critical"]]></labelExpression>
						</categorySeries>
					</categoryDataset>
					<bar3DPlot>
						<plot foregroundAlpha="0.7" labelRotation="45.0">
							<seriesColor seriesOrder="0" color="#B1A500"/>
							<seriesColor seriesOrder="1" color="#999999"/>
							<seriesColor seriesOrder="2" color="#009900"/>
							<seriesColor seriesOrder="3" color="#FCBE00"/>
							<seriesColor seriesOrder="4" color="#EE8900"/>
							<seriesColor seriesOrder="5" color="#E05000"/>
							<seriesColor seriesOrder="6" color="#CD0200"/>
						</plot>
						<itemLabel color="#000000" backgroundColor="#FFFFFF">
							<font fontName="SansSerif" size="8"/>
						</itemLabel>
						<categoryAxisFormat labelRotation="90.0">
							<axisFormat>
								<labelFont>
									<font fontName="SansSerif" size="8"/>
								</labelFont>
								<tickLabelFont>
									<font fontName="SansSerif" size="8"/>
								</tickLabelFont>
							</axisFormat>
						</categoryAxisFormat>
						<valueAxisFormat>
							<axisFormat>
								<labelFont>
									<font fontName="SansSerif" size="8"/>
								</labelFont>
								<tickLabelFont>
									<font fontName="SansSerif" size="8"/>
								</tickLabelFont>
							</axisFormat>
						</valueAxisFormat>
					</bar3DPlot>
				</stackedBar3DChart>
			</band>
		</groupHeader>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="80" splitType="Stretch">
			<property name="local_mesure_unitheight" value="pixel"/>
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<line>
				<reportElement x="0" y="79" width="555" height="1" uuid="54e62bc6-77bc-4619-b176-e5d8689b1507">
					<property name="local_mesure_unity" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
				</reportElement>
			</line>
			<staticText>
				<reportElement style="Title" x="0" y="0" width="355" height="30" uuid="a08c7e81-066c-45d8-8595-956116bf0016">
					<property name="local_mesure_unitwidth" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<textElement>
					<font fontName="SansSerif" size="24" isBold="true" isItalic="false"/>
				</textElement>
				<text><![CDATA[My Custom Report]]></text>
			</staticText>
			<textField>
				<reportElement style="Creation-Date" x="0" y="60" width="355" height="20" uuid="4435e4b9-34cc-42f8-8695-3dfae85c722f">
					<property name="local_mesure_unitheight" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="local_mesure_unity" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{current_time}]]></textFieldExpression>
			</textField>
			<image isUsingCache="false">
				<reportElement isPrintRepeatedValues="false" mode="Opaque" x="360" y="0" width="194" height="50" uuid="c14250d0-44db-43c4-8498-50dc8e64eb03">
					<property name="local_mesure_unitwidth" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="local_mesure_unitheight" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<imageExpression><![CDATA[$P{ONMS_REPORT_DIR} + "/assets/images/company-logo.png"]]></imageExpression>
			</image>
		</band>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="4" splitType="Stretch"/>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="30" splitType="Stretch">
			<property name="local_mesure_unitheight" value="pixel"/>
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<line>
				<reportElement x="0" y="0" width="555" height="1" uuid="a21b9578-03c7-4261-a7b4-b0acbdb4cc36">
					<property name="local_mesure_unity" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
				</reportElement>
			</line>
			<textField>
				<reportElement key="" style="Paging-Footer" x="435" y="5" width="80" height="20" uuid="193b95d7-efa4-4e81-be53-60177be3c4e2">
					<property name="local_mesure_unity" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
				</reportElement>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement key="" style="Paging-Footer" x="515" y="5" width="40" height="20" uuid="b7befc68-8734-416f-85ba-b12168e53b87">
					<property name="local_mesure_unity" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
				</reportElement>
				<textFieldExpression><![CDATA["Amlan Dash" + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>