!function(t,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e=n();for(var r in e)("object"==typeof exports?exports:t)[r]=e[r]}}(window,function(){return(window.webpackJsonp=window.webpackJsonp||[]).push([[46,5,11,14,21,25,28],{103:function(t,exports,n){"use strict";var jQuery=n(5);n(185),n(49),n(87),n(138),n(186),n(163),n(187),n(188),n(189),n(139),n(164),n(119),n(143),n(144),n(165),n(137),n(190),n(67),n(145),n(140),n(104),n(92),n(141),n(142),n(166),n(93),n(14),n(191),n(192),n(147),n(168),n(167),n(193),n(194),n(146),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),console.log("init: jquery-ui-js"),t.exports=jQuery},131:function(t,exports,n){"use strict";var jQuery=n(5);n(66),n(132),n(132),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),console.log("init: flot-js"),t.exports=jQuery},222:function(t,exports,n){"use strict";n(66),n(131);var e=n(327);console.log("init: backshift-js"),t.exports=window.Backshift=e},350:function(t,exports,n){"use strict";var e=n(351);console.log("init: holder-js"),t.exports=window.Holder=window.holder=e},351:function(n,exports,e){(function(t){n.exports=t.Holder=e(352)}).call(this,e(22))},352:function(n,exports,e){(function(t){n.exports=t.holder=e(353)}).call(this,e(22))},353:function(t,exports,n){n(232)(n(354))},354:function(t,exports){t.exports="/*!\n\nHolder - client side image placeholders\nVersion 2.9.6+fblyy\nÂ© 2018 Ivan Malopinsky - http://imsky.co\n\nSite:     http://holderjs.com\nIssues:   https://github.com/imsky/holder/issues\nLicense:  MIT\n\n*/\n(function (window) {\n  if (!window.document) return;\n  var document = window.document;\n\n  //https://github.com/inexorabletash/polyfill/blob/master/web.js\n    if (!document.querySelectorAll) {\n      document.querySelectorAll = function (selectors) {\n        var style = document.createElement('style'), elements = [], element;\n        document.documentElement.firstChild.appendChild(style);\n        document._qsa = [];\n\n        style.styleSheet.cssText = selectors + '{x-qsa:expression(document._qsa && document._qsa.push(this))}';\n        window.scrollBy(0, 0);\n        style.parentNode.removeChild(style);\n\n        while (document._qsa.length) {\n          element = document._qsa.shift();\n          element.style.removeAttribute('x-qsa');\n          elements.push(element);\n        }\n        document._qsa = null;\n        return elements;\n      };\n    }\n\n    if (!document.querySelector) {\n      document.querySelector = function (selectors) {\n        var elements = document.querySelectorAll(selectors);\n        return (elements.length) ? elements[0] : null;\n      };\n    }\n\n    if (!document.getElementsByClassName) {\n      document.getElementsByClassName = function (classNames) {\n        classNames = String(classNames).replace(/^|\\s+/g, '.');\n        return document.querySelectorAll(classNames);\n      };\n    }\n\n  //https://github.com/inexorabletash/polyfill\n  // ES5 15.2.3.14 Object.keys ( O )\n  // https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys\n  if (!Object.keys) {\n    Object.keys = function (o) {\n      if (o !== Object(o)) { throw TypeError('Object.keys called on non-object'); }\n      var ret = [], p;\n      for (p in o) {\n        if (Object.prototype.hasOwnProperty.call(o, p)) {\n          ret.push(p);\n        }\n      }\n      return ret;\n    };\n  }\n\n  // ES5 15.4.4.18 Array.prototype.forEach ( callbackfn [ , thisArg ] )\n  // From https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach\n  if (!Array.prototype.forEach) {\n    Array.prototype.forEach = function (fun /*, thisp */) {\n      if (this === void 0 || this === null) { throw TypeError(); }\n\n      var t = Object(this);\n      var len = t.length >>> 0;\n      if (typeof fun !== \"function\") { throw TypeError(); }\n\n      var thisp = arguments[1], i;\n      for (i = 0; i < len; i++) {\n        if (i in t) {\n          fun.call(thisp, t[i], i, t);\n        }\n      }\n    };\n  }\n\n  //https://github.com/inexorabletash/polyfill/blob/master/web.js\n  (function (global) {\n    var B64_ALPHABET = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    global.atob = global.atob || function (input) {\n      input = String(input);\n      var position = 0,\n          output = [],\n          buffer = 0, bits = 0, n;\n\n      input = input.replace(/\\s/g, '');\n      if ((input.length % 4) === 0) { input = input.replace(/=+$/, ''); }\n      if ((input.length % 4) === 1) { throw Error('InvalidCharacterError'); }\n      if (/[^+/0-9A-Za-z]/.test(input)) { throw Error('InvalidCharacterError'); }\n\n      while (position < input.length) {\n        n = B64_ALPHABET.indexOf(input.charAt(position));\n        buffer = (buffer << 6) | n;\n        bits += 6;\n\n        if (bits === 24) {\n          output.push(String.fromCharCode((buffer >> 16) & 0xFF));\n          output.push(String.fromCharCode((buffer >>  8) & 0xFF));\n          output.push(String.fromCharCode(buffer & 0xFF));\n          bits = 0;\n          buffer = 0;\n        }\n        position += 1;\n      }\n\n      if (bits === 12) {\n        buffer = buffer >> 4;\n        output.push(String.fromCharCode(buffer & 0xFF));\n      } else if (bits === 18) {\n        buffer = buffer >> 2;\n        output.push(String.fromCharCode((buffer >> 8) & 0xFF));\n        output.push(String.fromCharCode(buffer & 0xFF));\n      }\n\n      return output.join('');\n    };\n\n    global.btoa = global.btoa || function (input) {\n      input = String(input);\n      var position = 0,\n          out = [],\n          o1, o2, o3,\n          e1, e2, e3, e4;\n\n      if (/[^\\x00-\\xFF]/.test(input)) { throw Error('InvalidCharacterError'); }\n\n      while (position < input.length) {\n        o1 = input.charCodeAt(position++);\n        o2 = input.charCodeAt(position++);\n        o3 = input.charCodeAt(position++);\n\n        // 111111 112222 222233 333333\n        e1 = o1 >> 2;\n        e2 = ((o1 & 0x3) << 4) | (o2 >> 4);\n        e3 = ((o2 & 0xf) << 2) | (o3 >> 6);\n        e4 = o3 & 0x3f;\n\n        if (position === input.length + 2) {\n          e3 = 64; e4 = 64;\n        }\n        else if (position === input.length + 1) {\n          e4 = 64;\n        }\n\n        out.push(B64_ALPHABET.charAt(e1),\n                 B64_ALPHABET.charAt(e2),\n                 B64_ALPHABET.charAt(e3),\n                 B64_ALPHABET.charAt(e4));\n      }\n\n      return out.join('');\n    };\n  }(window));\n\n  //https://gist.github.com/jimeh/332357\n  if (!Object.prototype.hasOwnProperty){\n      /*jshint -W001, -W103 */\n      Object.prototype.hasOwnProperty = function(prop) {\n      var proto = this.__proto__ || this.constructor.prototype;\n      return (prop in this) && (!(prop in proto) || proto[prop] !== this[prop]);\n    };\n      /*jshint +W001, +W103 */\n  }\n\n  // @license http://opensource.org/licenses/MIT\n  // copyright Paul Irish 2015\n\n\n  // Date.now() is supported everywhere except IE8. For IE8 we use the Date.now polyfill\n  //   github.com/Financial-Times/polyfill-service/blob/master/polyfills/Date.now/polyfill.js\n  // as Safari 6 doesn't have support for NavigationTiming, we use a Date.now() timestamp for relative values\n\n  // if you want values similar to what you'd get with real perf.now, place this towards the head of the page\n  // but in reality, you're just getting the delta between now() calls, so it's not terribly important where it's placed\n\n\n  (function(){\n\n    if ('performance' in window === false) {\n        window.performance = {};\n    }\n    \n    Date.now = (Date.now || function () {  // thanks IE8\n      return new Date().getTime();\n    });\n\n    if ('now' in window.performance === false){\n      \n      var nowOffset = Date.now();\n      \n      if (performance.timing && performance.timing.navigationStart){\n        nowOffset = performance.timing.navigationStart;\n      }\n\n      window.performance.now = function now(){\n        return Date.now() - nowOffset;\n      };\n    }\n\n  })();\n\n  //requestAnimationFrame polyfill for older Firefox/Chrome versions\n  if (!window.requestAnimationFrame) {\n    if (window.webkitRequestAnimationFrame && window.webkitCancelAnimationFrame) {\n    //https://github.com/Financial-Times/polyfill-service/blob/master/polyfills/requestAnimationFrame/polyfill-webkit.js\n    (function (global) {\n      global.requestAnimationFrame = function (callback) {\n        return webkitRequestAnimationFrame(function () {\n          callback(global.performance.now());\n        });\n      };\n\n      global.cancelAnimationFrame = global.webkitCancelAnimationFrame;\n    }(window));\n    } else if (window.mozRequestAnimationFrame && window.mozCancelAnimationFrame) {\n      //https://github.com/Financial-Times/polyfill-service/blob/master/polyfills/requestAnimationFrame/polyfill-moz.js\n    (function (global) {\n      global.requestAnimationFrame = function (callback) {\n        return mozRequestAnimationFrame(function () {\n          callback(global.performance.now());\n        });\n      };\n\n      global.cancelAnimationFrame = global.mozCancelAnimationFrame;\n    }(window));\n    } else {\n    (function (global) {\n      global.requestAnimationFrame = function (callback) {\n        return global.setTimeout(callback, 1000 / 60);\n      };\n\n      global.cancelAnimationFrame = global.clearTimeout;\n    })(window);\n    }\n  }\n})(this);\n\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Holder\"] = factory();\n\telse\n\t\troot[\"Holder\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*\n\tHolder.js - client side image placeholders\n\t(c) 2012-2015 Ivan Malopinsky - http://imsky.co\n\t*/\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {/*\n\tHolder.js - client side image placeholders\n\t(c) 2012-2016 Ivan Malopinsky - http://imsky.co\n\t*/\n\n\t//Libraries and functions\n\tvar onDomReady = __webpack_require__(2);\n\tvar querystring = __webpack_require__(3);\n\n\tvar SceneGraph = __webpack_require__(6);\n\tvar utils = __webpack_require__(7);\n\tvar SVG = __webpack_require__(8);\n\tvar DOM = __webpack_require__(9);\n\tvar Color = __webpack_require__(10);\n\tvar constants = __webpack_require__(11);\n\n\tvar svgRenderer = __webpack_require__(12);\n\tvar sgCanvasRenderer = __webpack_require__(15);\n\n\tvar extend = utils.extend;\n\tvar dimensionCheck = utils.dimensionCheck;\n\n\t//Constants and definitions\n\tvar SVG_NS = constants.svg_ns;\n\n\tvar Holder = {\n\t    version: constants.version,\n\n\t    /**\n\t     * Adds a theme to default settings\n\t     *\n\t     * @param {string} name Theme name\n\t     * @param {Object} theme Theme object, with foreground, background, size, font, and fontweight properties.\n\t     */\n\t    addTheme: function(name, theme) {\n\t        name != null && theme != null && (App.settings.themes[name] = theme);\n\t        delete App.vars.cache.themeKeys;\n\t        return this;\n\t    },\n\n\t    /**\n\t     * Appends a placeholder to an element\n\t     *\n\t     * @param {string} src Placeholder URL string\n\t     * @param el A selector or a reference to a DOM node\n\t     */\n\t    addImage: function(src, el) {\n\t        //todo: use jquery fallback if available for all QSA references\n\t        var nodes = DOM.getNodeArray(el);\n\t        nodes.forEach(function (node) {\n\t            var img = DOM.newEl('img');\n\t            var domProps = {};\n\t            domProps[App.setup.dataAttr] = src;\n\t            DOM.setAttr(img, domProps);\n\t            node.appendChild(img);\n\t        });\n\t        return this;\n\t    },\n\n\t    /**\n\t     * Sets whether or not an image is updated on resize.\n\t     * If an image is set to be updated, it is immediately rendered.\n\t     *\n\t     * @param {Object} el Image DOM element\n\t     * @param {Boolean} value Resizable update flag value\n\t     */\n\t    setResizeUpdate: function(el, value) {\n\t        if (el.holderData) {\n\t            el.holderData.resizeUpdate = !!value;\n\t            if (el.holderData.resizeUpdate) {\n\t                updateResizableElements(el);\n\t            }\n\t        }\n\t    },\n\n\t    /**\n\t     * Runs Holder with options. By default runs Holder on all images with \"holder.js\" in their source attributes.\n\t     *\n\t     * @param {Object} userOptions Options object, can contain domain, themes, images, and bgnodes properties\n\t     */\n\t    run: function(userOptions) {\n\t        //todo: split processing into separate queues\n\t        userOptions = userOptions || {};\n\t        var engineSettings = {};\n\t        var options = extend(App.settings, userOptions);\n\n\t        App.vars.preempted = true;\n\t        App.vars.dataAttr = options.dataAttr || App.setup.dataAttr;\n\n\t        engineSettings.renderer = options.renderer ? options.renderer : App.setup.renderer;\n\t        if (App.setup.renderers.join(',').indexOf(engineSettings.renderer) === -1) {\n\t            engineSettings.renderer = App.setup.supportsSVG ? 'svg' : (App.setup.supportsCanvas ? 'canvas' : 'html');\n\t        }\n\n\t        var images = DOM.getNodeArray(options.images);\n\t        var bgnodes = DOM.getNodeArray(options.bgnodes);\n\t        var stylenodes = DOM.getNodeArray(options.stylenodes);\n\t        var objects = DOM.getNodeArray(options.objects);\n\n\t        engineSettings.stylesheets = [];\n\t        engineSettings.svgXMLStylesheet = true;\n\t        engineSettings.noFontFallback = !!options.noFontFallback;\n\t        engineSettings.noBackgroundSize = !!options.noBackgroundSize;\n\n\t        stylenodes.forEach(function (styleNode) {\n\t            if (styleNode.attributes.rel && styleNode.attributes.href && styleNode.attributes.rel.value == 'stylesheet') {\n\t                var href = styleNode.attributes.href.value;\n\t                //todo: write isomorphic relative-to-absolute URL function\n\t                var proxyLink = DOM.newEl('a');\n\t                proxyLink.href = href;\n\t                var stylesheetURL = proxyLink.protocol + '//' + proxyLink.host + proxyLink.pathname + proxyLink.search;\n\t                engineSettings.stylesheets.push(stylesheetURL);\n\t            }\n\t        });\n\n\t        bgnodes.forEach(function (bgNode) {\n\t            //Skip processing background nodes if getComputedStyle is unavailable, since only modern browsers would be able to use canvas or SVG to render to background\n\t            if (!global.getComputedStyle) return;\n\t            var backgroundImage = global.getComputedStyle(bgNode, null).getPropertyValue('background-image');\n\t            var dataBackgroundImage = bgNode.getAttribute('data-background-src');\n\t            var rawURL = dataBackgroundImage || backgroundImage;\n\n\t            var holderURL = null;\n\t            var holderString = options.domain + '/';\n\t            var holderStringIndex = rawURL.indexOf(holderString);\n\n\t            if (holderStringIndex === 0) {\n\t                holderURL = rawURL;\n\t            } else if (holderStringIndex === 1 && rawURL[0] === '?') {\n\t                holderURL = rawURL.slice(1);\n\t            } else {\n\t                var fragment = rawURL.substr(holderStringIndex).match(/([^\\\"]*)\"?\\)/);\n\t                if (fragment !== null) {\n\t                    holderURL = fragment[1];\n\t                } else if (rawURL.indexOf('url(') === 0) {\n\t                    throw 'Holder: unable to parse background URL: ' + rawURL;\n\t                }\n\t            }\n\n\t            if (holderURL) {\n\t                var holderFlags = parseURL(holderURL, options);\n\t                if (holderFlags) {\n\t                    prepareDOMElement({\n\t                        mode: 'background',\n\t                        el: bgNode,\n\t                        flags: holderFlags,\n\t                        engineSettings: engineSettings\n\t                    });\n\t                }\n\t            }\n\t        });\n\n\t        objects.forEach(function (object) {\n\t            var objectAttr = {};\n\n\t            try {\n\t                objectAttr.data = object.getAttribute('data');\n\t                objectAttr.dataSrc = object.getAttribute(App.vars.dataAttr);\n\t            } catch (e) {}\n\n\t            var objectHasSrcURL = objectAttr.data != null && objectAttr.data.indexOf(options.domain) === 0;\n\t            var objectHasDataSrcURL = objectAttr.dataSrc != null && objectAttr.dataSrc.indexOf(options.domain) === 0;\n\n\t            if (objectHasSrcURL) {\n\t                prepareImageElement(options, engineSettings, objectAttr.data, object);\n\t            } else if (objectHasDataSrcURL) {\n\t                prepareImageElement(options, engineSettings, objectAttr.dataSrc, object);\n\t            }\n\t        });\n\n\t        images.forEach(function (image) {\n\t            var imageAttr = {};\n\n\t            try {\n\t                imageAttr.src = image.getAttribute('src');\n\t                imageAttr.dataSrc = image.getAttribute(App.vars.dataAttr);\n\t                imageAttr.rendered = image.getAttribute('data-holder-rendered');\n\t            } catch (e) {}\n\n\t            var imageHasSrc = imageAttr.src != null;\n\t            var imageHasDataSrcURL = imageAttr.dataSrc != null && imageAttr.dataSrc.indexOf(options.domain) === 0;\n\t            var imageRendered = imageAttr.rendered != null && imageAttr.rendered == 'true';\n\n\t            if (imageHasSrc) {\n\t                if (imageAttr.src.indexOf(options.domain) === 0) {\n\t                    prepareImageElement(options, engineSettings, imageAttr.src, image);\n\t                } else if (imageHasDataSrcURL) {\n\t                    //Image has a valid data-src and an invalid src\n\t                    if (imageRendered) {\n\t                        //If the placeholder has already been render, re-render it\n\t                        prepareImageElement(options, engineSettings, imageAttr.dataSrc, image);\n\t                    } else {\n\t                        //If the placeholder has not been rendered, check if the image exists and render a fallback if it doesn't\n\t                        (function(src, options, engineSettings, dataSrc, image) {\n\t                            utils.imageExists(src, function(exists) {\n\t                                if (!exists) {\n\t                                    prepareImageElement(options, engineSettings, dataSrc, image);\n\t                                }\n\t                            });\n\t                        })(imageAttr.src, options, engineSettings, imageAttr.dataSrc, image);\n\t                    }\n\t                }\n\t            } else if (imageHasDataSrcURL) {\n\t                prepareImageElement(options, engineSettings, imageAttr.dataSrc, image);\n\t            }\n\t        });\n\n\t        return this;\n\t    }\n\t};\n\n\tvar App = {\n\t    settings: {\n\t        domain: 'holder.js',\n\t        images: 'img',\n\t        objects: 'object',\n\t        bgnodes: 'body .holderjs',\n\t        stylenodes: 'head link.holderjs',\n\t        themes: {\n\t            'gray': {\n\t                bg: '#EEEEEE',\n\t                fg: '#AAAAAA'\n\t            },\n\t            'social': {\n\t                bg: '#3a5a97',\n\t                fg: '#FFFFFF'\n\t            },\n\t            'industrial': {\n\t                bg: '#434A52',\n\t                fg: '#C2F200'\n\t            },\n\t            'sky': {\n\t                bg: '#0D8FDB',\n\t                fg: '#FFFFFF'\n\t            },\n\t            'vine': {\n\t                bg: '#39DBAC',\n\t                fg: '#1E292C'\n\t            },\n\t            'lava': {\n\t                bg: '#F8591A',\n\t                fg: '#1C2846'\n\t            }\n\t        }\n\t    },\n\t    defaults: {\n\t        size: 10,\n\t        units: 'pt',\n\t        scale: 1 / 16\n\t    }\n\t};\n\n\t/**\n\t * Processes provided source attribute and sets up the appropriate rendering workflow\n\t *\n\t * @private\n\t * @param options Instance options from Holder.run\n\t * @param renderSettings Instance configuration\n\t * @param src Image URL\n\t * @param el Image DOM element\n\t */\n\tfunction prepareImageElement(options, engineSettings, src, el) {\n\t    var holderFlags = parseURL(src.substr(src.lastIndexOf(options.domain)), options);\n\t    if (holderFlags) {\n\t        prepareDOMElement({\n\t            mode: null,\n\t            el: el,\n\t            flags: holderFlags,\n\t            engineSettings: engineSettings\n\t        });\n\t    }\n\t}\n\n\t/**\n\t * Processes a Holder URL and extracts configuration from query string\n\t *\n\t * @private\n\t * @param url URL\n\t * @param instanceOptions Instance options from Holder.run\n\t */\n\tfunction parseURL(url, instanceOptions) {\n\t    var holder = {\n\t        theme: extend(App.settings.themes.gray, null),\n\t        stylesheets: instanceOptions.stylesheets,\n\t        instanceOptions: instanceOptions\n\t    };\n\n\t    var firstQuestionMark = url.indexOf('?');\n\t    var parts = [url];\n\n\t    if (firstQuestionMark !== -1) {\n\t        parts = [url.slice(0, firstQuestionMark), url.slice(firstQuestionMark + 1)];\n\t    }\n\n\t    var basics = parts[0].split('/');\n\n\t    holder.holderURL = url;\n\n\t    var dimensions = basics[1];\n\t    var dimensionData = dimensions.match(/([\\d]+p?)x([\\d]+p?)/);\n\n\t    if (!dimensionData) return false;\n\n\t    holder.fluid = dimensions.indexOf('p') !== -1;\n\n\t    holder.dimensions = {\n\t        width: dimensionData[1].replace('p', '%'),\n\t        height: dimensionData[2].replace('p', '%')\n\t    };\n\n\t    if (parts.length === 2) {\n\t        var options = querystring.parse(parts[1]);\n\n\t        // Dimensions\n\n\t        if (utils.truthy(options.ratio)) {\n\t            holder.fluid = true;\n\t            var ratioWidth = parseFloat(holder.dimensions.width.replace('%', ''));\n\t            var ratioHeight = parseFloat(holder.dimensions.height.replace('%', ''));\n\n\t            ratioHeight = Math.floor(100 * (ratioHeight / ratioWidth));\n\t            ratioWidth = 100;\n\n\t            holder.dimensions.width = ratioWidth + '%';\n\t            holder.dimensions.height = ratioHeight + '%';\n\t        }\n\n\t        holder.auto = utils.truthy(options.auto);\n\n\t        // Colors\n\n\t        if (options.bg) {\n\t            holder.theme.bg = utils.parseColor(options.bg);\n\t        }\n\n\t        if (options.fg) {\n\t            holder.theme.fg = utils.parseColor(options.fg);\n\t        }\n\n\t        //todo: add automatic foreground to themes without foreground\n\t        if (options.bg && !options.fg) {\n\t            holder.autoFg = true;\n\t        }\n\n\t        if (options.theme && holder.instanceOptions.themes.hasOwnProperty(options.theme)) {\n\t            holder.theme = extend(holder.instanceOptions.themes[options.theme], null);\n\t        }\n\n\t        // Text\n\n\t        if (options.text) {\n\t            holder.text = options.text;\n\t        }\n\n\t        if (options.textmode) {\n\t            holder.textmode = options.textmode;\n\t        }\n\n\t        if (options.size && parseFloat(options.size)) {\n\t            holder.size = parseFloat(options.size);\n\t        }\n\n\t        if (options.font) {\n\t            holder.font = options.font;\n\t        }\n\n\t        if (options.align) {\n\t            holder.align = options.align;\n\t        }\n\n\t        if (options.lineWrap) {\n\t            holder.lineWrap = options.lineWrap;\n\t        }\n\n\t        holder.nowrap = utils.truthy(options.nowrap);\n\n\t        // Miscellaneous\n\n\t        holder.outline = utils.truthy(options.outline);\n\n\t        if (utils.truthy(options.random)) {\n\t            App.vars.cache.themeKeys = App.vars.cache.themeKeys || Object.keys(holder.instanceOptions.themes);\n\t            var _theme = App.vars.cache.themeKeys[0 | Math.random() * App.vars.cache.themeKeys.length];\n\t            holder.theme = extend(holder.instanceOptions.themes[_theme], null);\n\t        }\n\t    }\n\n\t    return holder;\n\t}\n\n\t/**\n\t * Modifies the DOM to fit placeholders and sets up resizable image callbacks (for fluid and automatically sized placeholders)\n\t *\n\t * @private\n\t * @param settings DOM prep settings\n\t */\n\tfunction prepareDOMElement(prepSettings) {\n\t    var mode = prepSettings.mode;\n\t    var el = prepSettings.el;\n\t    var flags = prepSettings.flags;\n\t    var _engineSettings = prepSettings.engineSettings;\n\t    var dimensions = flags.dimensions,\n\t        theme = flags.theme;\n\t    var dimensionsCaption = dimensions.width + 'x' + dimensions.height;\n\t    mode = mode == null ? (flags.fluid ? 'fluid' : 'image') : mode;\n\t    var holderTemplateRe = /holder_([a-z]+)/g;\n\t    var dimensionsInText = false;\n\n\t    if (flags.text != null) {\n\t        theme.text = flags.text;\n\n\t        //<object> SVG embedding doesn't parse Unicode properly\n\t        if (el.nodeName.toLowerCase() === 'object') {\n\t            var textLines = theme.text.split('\\\\n');\n\t            for (var k = 0; k < textLines.length; k++) {\n\t                textLines[k] = utils.encodeHtmlEntity(textLines[k]);\n\t            }\n\t            theme.text = textLines.join('\\\\n');\n\t        }\n\t    }\n\n\t    if (theme.text) {\n\t        var holderTemplateMatches = theme.text.match(holderTemplateRe);\n\n\t        if (holderTemplateMatches !== null) {\n\t            //todo: optimize template replacement\n\t            holderTemplateMatches.forEach(function (match) {\n\t                if (match === 'holder_dimensions') {\n\t                    theme.text = theme.text.replace(match, dimensionsCaption);\n\t                }\n\t            });\n\t        }\n\t    }\n\n\t    var holderURL = flags.holderURL;\n\t    var engineSettings = extend(_engineSettings, null);\n\n\t    if (flags.font) {\n\t        /*\n\t        If external fonts are used in a <img> placeholder rendered with SVG, Holder falls back to canvas.\n\n\t        This is done because Firefox and Chrome disallow embedded SVGs from referencing external assets.\n\t        The workaround is either to change the placeholder tag from <img> to <object> or to use the canvas renderer.\n\t        */\n\t        theme.font = flags.font;\n\t        if (!engineSettings.noFontFallback && el.nodeName.toLowerCase() === 'img' && App.setup.supportsCanvas && engineSettings.renderer === 'svg') {\n\t            engineSettings = extend(engineSettings, {\n\t                renderer: 'canvas'\n\t            });\n\t        }\n\t    }\n\n\t    //Chrome and Opera require a quick 10ms re-render if web fonts are used with canvas\n\t    if (flags.font && engineSettings.renderer == 'canvas') {\n\t        engineSettings.reRender = true;\n\t    }\n\n\t    if (mode == 'background') {\n\t        if (el.getAttribute('data-background-src') == null) {\n\t            DOM.setAttr(el, {\n\t                'data-background-src': holderURL\n\t            });\n\t        }\n\t    } else {\n\t        var domProps = {};\n\t        domProps[App.vars.dataAttr] = holderURL;\n\t        DOM.setAttr(el, domProps);\n\t    }\n\n\t    flags.theme = theme;\n\n\t    //todo consider using all renderSettings in holderData\n\t    el.holderData = {\n\t        flags: flags,\n\t        engineSettings: engineSettings\n\t    };\n\n\t    if (mode == 'image' || mode == 'fluid') {\n\t        DOM.setAttr(el, {\n\t            'alt': theme.text ? (dimensionsInText ? theme.text : theme.text + ' [' + dimensionsCaption + ']') : dimensionsCaption\n\t        });\n\t    }\n\n\t    var renderSettings = {\n\t        mode: mode,\n\t        el: el,\n\t        holderSettings: {\n\t            dimensions: dimensions,\n\t            theme: theme,\n\t            flags: flags\n\t        },\n\t        engineSettings: engineSettings\n\t    };\n\n\t    if (mode == 'image') {\n\t        if (!flags.auto) {\n\t            el.style.width = dimensions.width + 'px';\n\t            el.style.height = dimensions.height + 'px';\n\t        }\n\n\t        if (engineSettings.renderer == 'html') {\n\t            el.style.backgroundColor = theme.bg;\n\t        } else {\n\t            render(renderSettings);\n\n\t            if (flags.textmode == 'exact') {\n\t                el.holderData.resizeUpdate = true;\n\t                App.vars.resizableImages.push(el);\n\t                updateResizableElements(el);\n\t            }\n\t        }\n\t    } else if (mode == 'background' && engineSettings.renderer != 'html') {\n\t        render(renderSettings);\n\t    } else if (mode == 'fluid') {\n\t        el.holderData.resizeUpdate = true;\n\n\t        if (dimensions.height.slice(-1) == '%') {\n\t            el.style.height = dimensions.height;\n\t        } else if (flags.auto == null || !flags.auto) {\n\t            el.style.height = dimensions.height + 'px';\n\t        }\n\t        if (dimensions.width.slice(-1) == '%') {\n\t            el.style.width = dimensions.width;\n\t        } else if (flags.auto == null || !flags.auto) {\n\t            el.style.width = dimensions.width + 'px';\n\t        }\n\t        if (el.style.display == 'inline' || el.style.display === '' || el.style.display == 'none') {\n\t            el.style.display = 'block';\n\t        }\n\n\t        setInitialDimensions(el);\n\n\t        if (engineSettings.renderer == 'html') {\n\t            el.style.backgroundColor = theme.bg;\n\t        } else {\n\t            App.vars.resizableImages.push(el);\n\t            updateResizableElements(el);\n\t        }\n\t    }\n\t}\n\n\t/**\n\t * Core function that takes output from renderers and sets it as the source or background-image of the target element\n\t *\n\t * @private\n\t * @param renderSettings Renderer settings\n\t */\n\tfunction render(renderSettings) {\n\t    var image = null;\n\t    var mode = renderSettings.mode;\n\t    var el = renderSettings.el;\n\t    var holderSettings = renderSettings.holderSettings;\n\t    var engineSettings = renderSettings.engineSettings;\n\n\t    switch (engineSettings.renderer) {\n\t        case 'svg':\n\t            if (!App.setup.supportsSVG) return;\n\t            break;\n\t        case 'canvas':\n\t            if (!App.setup.supportsCanvas) return;\n\t            break;\n\t        default:\n\t            return;\n\t    }\n\n\t    //todo: move generation of scene up to flag generation to reduce extra object creation\n\t    var scene = {\n\t        width: holderSettings.dimensions.width,\n\t        height: holderSettings.dimensions.height,\n\t        theme: holderSettings.theme,\n\t        flags: holderSettings.flags\n\t    };\n\n\t    var sceneGraph = buildSceneGraph(scene);\n\n\t    function getRenderedImage() {\n\t        var image = null;\n\t        switch (engineSettings.renderer) {\n\t            case 'canvas':\n\t                image = sgCanvasRenderer(sceneGraph, renderSettings);\n\t                break;\n\t            case 'svg':\n\t                image = svgRenderer(sceneGraph, renderSettings);\n\t                break;\n\t            default:\n\t                throw 'Holder: invalid renderer: ' + engineSettings.renderer;\n\t        }\n\n\t        return image;\n\t    }\n\n\t    image = getRenderedImage();\n\n\t    if (image == null) {\n\t        throw 'Holder: couldn\\'t render placeholder';\n\t    }\n\n\t    //todo: add <object> canvas rendering\n\t    if (mode == 'background') {\n\t        el.style.backgroundImage = 'url(' + image + ')';\n\n\t        if (!engineSettings.noBackgroundSize) {\n\t            el.style.backgroundSize = scene.width + 'px ' + scene.height + 'px';\n\t        }\n\t    } else {\n\t        if (el.nodeName.toLowerCase() === 'img') {\n\t            DOM.setAttr(el, {\n\t                'src': image\n\t            });\n\t        } else if (el.nodeName.toLowerCase() === 'object') {\n\t            DOM.setAttr(el, {\n\t                'data': image,\n\t                'type': 'image/svg+xml'\n\t            });\n\t        }\n\t        if (engineSettings.reRender) {\n\t            global.setTimeout(function () {\n\t                var image = getRenderedImage();\n\t                if (image == null) {\n\t                    throw 'Holder: couldn\\'t render placeholder';\n\t                }\n\t                //todo: refactor this code into a function\n\t                if (el.nodeName.toLowerCase() === 'img') {\n\t                    DOM.setAttr(el, {\n\t                        'src': image\n\t                    });\n\t                } else if (el.nodeName.toLowerCase() === 'object') {\n\t                    DOM.setAttr(el, {\n\t                        'data': image,\n\t                        'type': 'image/svg+xml'\n\t                    });\n\t                }\n\t            }, 150);\n\t        }\n\t    }\n\t    //todo: account for re-rendering\n\t    DOM.setAttr(el, {\n\t        'data-holder-rendered': true\n\t    });\n\t}\n\n\t/**\n\t * Core function that takes a Holder scene description and builds a scene graph\n\t *\n\t * @private\n\t * @param scene Holder scene object\n\t */\n\t//todo: make this function reusable\n\t//todo: merge app defaults and setup properties into the scene argument\n\tfunction buildSceneGraph(scene) {\n\t    var fontSize = App.defaults.size;\n\t    if (parseFloat(scene.theme.size)) {\n\t        fontSize = scene.theme.size;\n\t    } else if (parseFloat(scene.flags.size)) {\n\t        fontSize = scene.flags.size;\n\t    }\n\n\t    scene.font = {\n\t        family: scene.theme.font ? scene.theme.font : 'Arial, Helvetica, Open Sans, sans-serif',\n\t        size: textSize(scene.width, scene.height, fontSize, App.defaults.scale),\n\t        units: scene.theme.units ? scene.theme.units : App.defaults.units,\n\t        weight: scene.theme.fontweight ? scene.theme.fontweight : 'bold'\n\t    };\n\n\t    scene.text = scene.theme.text || Math.floor(scene.width) + 'x' + Math.floor(scene.height);\n\n\t    scene.noWrap = scene.theme.nowrap || scene.flags.nowrap;\n\n\t    scene.align = scene.theme.align || scene.flags.align || 'center';\n\n\t    switch (scene.flags.textmode) {\n\t        case 'literal':\n\t            scene.text = scene.flags.dimensions.width + 'x' + scene.flags.dimensions.height;\n\t            break;\n\t        case 'exact':\n\t            if (!scene.flags.exactDimensions) break;\n\t            scene.text = Math.floor(scene.flags.exactDimensions.width) + 'x' + Math.floor(scene.flags.exactDimensions.height);\n\t            break;\n\t    }\n\n\t    var lineWrap = scene.flags.lineWrap || App.setup.lineWrapRatio;\n\t    var sceneMargin = scene.width * lineWrap;\n\t    var maxLineWidth = sceneMargin;\n\n\t    var sceneGraph = new SceneGraph({\n\t        width: scene.width,\n\t        height: scene.height\n\t    });\n\n\t    var Shape = sceneGraph.Shape;\n\n\t    var holderBg = new Shape.Rect('holderBg', {\n\t        fill: scene.theme.bg\n\t    });\n\n\t    holderBg.resize(scene.width, scene.height);\n\t    sceneGraph.root.add(holderBg);\n\n\t    if (scene.flags.outline) {\n\t        var outlineColor = new Color(holderBg.properties.fill);\n\t        outlineColor = outlineColor.lighten(outlineColor.lighterThan('7f7f7f') ? -0.1 : 0.1);\n\t        holderBg.properties.outline = {\n\t            fill: outlineColor.toHex(true),\n\t            width: 2\n\t        };\n\t    }\n\n\t    var holderTextColor = scene.theme.fg;\n\n\t    if (scene.flags.autoFg) {\n\t        var holderBgColor = new Color(holderBg.properties.fill);\n\t        var lightColor = new Color('fff');\n\t        var darkColor = new Color('000', {\n\t            'alpha': 0.285714\n\t        });\n\n\t        holderTextColor = holderBgColor.blendAlpha(holderBgColor.lighterThan('7f7f7f') ? darkColor : lightColor).toHex(true);\n\t    }\n\n\t    var holderTextGroup = new Shape.Group('holderTextGroup', {\n\t        text: scene.text,\n\t        align: scene.align,\n\t        font: scene.font,\n\t        fill: holderTextColor\n\t    });\n\n\t    holderTextGroup.moveTo(null, null, 1);\n\t    sceneGraph.root.add(holderTextGroup);\n\n\t    var tpdata = holderTextGroup.textPositionData = stagingRenderer(sceneGraph);\n\t    if (!tpdata) {\n\t        throw 'Holder: staging fallback not supported yet.';\n\t    }\n\t    holderTextGroup.properties.leading = tpdata.boundingBox.height;\n\n\t    var textNode = null;\n\t    var line = null;\n\n\t    function finalizeLine(parent, line, width, height) {\n\t        line.width = width;\n\t        line.height = height;\n\t        parent.width = Math.max(parent.width, line.width);\n\t        parent.height += line.height;\n\t    }\n\n\t    if (tpdata.lineCount > 1) {\n\t        var offsetX = 0;\n\t        var offsetY = 0;\n\t        var lineIndex = 0;\n\t        var lineKey;\n\t        line = new Shape.Group('line' + lineIndex);\n\n\t        //Double margin so that left/right-aligned next is not flush with edge of image\n\t        if (scene.align === 'left' || scene.align === 'right') {\n\t            maxLineWidth = scene.width * (1 - (1 - lineWrap) * 2);\n\t        }\n\n\t        for (var i = 0; i < tpdata.words.length; i++) {\n\t            var word = tpdata.words[i];\n\t            textNode = new Shape.Text(word.text);\n\t            var newline = word.text == '\\\\n';\n\t            if (!scene.noWrap && (offsetX + word.width >= maxLineWidth || newline === true)) {\n\t                finalizeLine(holderTextGroup, line, offsetX, holderTextGroup.properties.leading);\n\t                holderTextGroup.add(line);\n\t                offsetX = 0;\n\t                offsetY += holderTextGroup.properties.leading;\n\t                lineIndex += 1;\n\t                line = new Shape.Group('line' + lineIndex);\n\t                line.y = offsetY;\n\t            }\n\t            if (newline === true) {\n\t                continue;\n\t            }\n\t            textNode.moveTo(offsetX, 0);\n\t            offsetX += tpdata.spaceWidth + word.width;\n\t            line.add(textNode);\n\t        }\n\n\t        finalizeLine(holderTextGroup, line, offsetX, holderTextGroup.properties.leading);\n\t        holderTextGroup.add(line);\n\n\t        if (scene.align === 'left') {\n\t            holderTextGroup.moveTo(scene.width - sceneMargin, null, null);\n\t        } else if (scene.align === 'right') {\n\t            for (lineKey in holderTextGroup.children) {\n\t                line = holderTextGroup.children[lineKey];\n\t                line.moveTo(scene.width - line.width, null, null);\n\t            }\n\n\t            holderTextGroup.moveTo(0 - (scene.width - sceneMargin), null, null);\n\t        } else {\n\t            for (lineKey in holderTextGroup.children) {\n\t                line = holderTextGroup.children[lineKey];\n\t                line.moveTo((holderTextGroup.width - line.width) / 2, null, null);\n\t            }\n\n\t            holderTextGroup.moveTo((scene.width - holderTextGroup.width) / 2, null, null);\n\t        }\n\n\t        holderTextGroup.moveTo(null, (scene.height - holderTextGroup.height) / 2, null);\n\n\t        //If the text exceeds vertical space, move it down so the first line is visible\n\t        if ((scene.height - holderTextGroup.height) / 2 < 0) {\n\t            holderTextGroup.moveTo(null, 0, null);\n\t        }\n\t    } else {\n\t        textNode = new Shape.Text(scene.text);\n\t        line = new Shape.Group('line0');\n\t        line.add(textNode);\n\t        holderTextGroup.add(line);\n\n\t        if (scene.align === 'left') {\n\t            holderTextGroup.moveTo(scene.width - sceneMargin, null, null);\n\t        } else if (scene.align === 'right') {\n\t            holderTextGroup.moveTo(0 - (scene.width - sceneMargin), null, null);\n\t        } else {\n\t            holderTextGroup.moveTo((scene.width - tpdata.boundingBox.width) / 2, null, null);\n\t        }\n\n\t        holderTextGroup.moveTo(null, (scene.height - tpdata.boundingBox.height) / 2, null);\n\t    }\n\n\t    //todo: renderlist\n\t    return sceneGraph;\n\t}\n\n\t/**\n\t * Adaptive text sizing function\n\t *\n\t * @private\n\t * @param width Parent width\n\t * @param height Parent height\n\t * @param fontSize Requested text size\n\t * @param scale Proportional scale of text\n\t */\n\tfunction textSize(width, height, fontSize, scale) {\n\t    var stageWidth = parseInt(width, 10);\n\t    var stageHeight = parseInt(height, 10);\n\n\t    var bigSide = Math.max(stageWidth, stageHeight);\n\t    var smallSide = Math.min(stageWidth, stageHeight);\n\n\t    var newHeight = 0.8 * Math.min(smallSide, bigSide * scale);\n\t    return Math.round(Math.max(fontSize, newHeight));\n\t}\n\n\t/**\n\t * Iterates over resizable (fluid or auto) placeholders and renders them\n\t *\n\t * @private\n\t * @param element Optional element selector, specified only if a specific element needs to be re-rendered\n\t */\n\tfunction updateResizableElements(element) {\n\t    var images;\n\t    if (element == null || element.nodeType == null) {\n\t        images = App.vars.resizableImages;\n\t    } else {\n\t        images = [element];\n\t    }\n\t    for (var i = 0, l = images.length; i < l; i++) {\n\t        var el = images[i];\n\t        if (el.holderData) {\n\t            var flags = el.holderData.flags;\n\t            var dimensions = dimensionCheck(el);\n\t            if (dimensions) {\n\t                if (!el.holderData.resizeUpdate) {\n\t                    continue;\n\t                }\n\n\t                if (flags.fluid && flags.auto) {\n\t                    var fluidConfig = el.holderData.fluidConfig;\n\t                    switch (fluidConfig.mode) {\n\t                        case 'width':\n\t                            dimensions.height = dimensions.width / fluidConfig.ratio;\n\t                            break;\n\t                        case 'height':\n\t                            dimensions.width = dimensions.height * fluidConfig.ratio;\n\t                            break;\n\t                    }\n\t                }\n\n\t                var settings = {\n\t                    mode: 'image',\n\t                    holderSettings: {\n\t                        dimensions: dimensions,\n\t                        theme: flags.theme,\n\t                        flags: flags\n\t                    },\n\t                    el: el,\n\t                    engineSettings: el.holderData.engineSettings\n\t                };\n\n\t                if (flags.textmode == 'exact') {\n\t                    flags.exactDimensions = dimensions;\n\t                    settings.holderSettings.dimensions = flags.dimensions;\n\t                }\n\n\t                render(settings);\n\t            } else {\n\t                setInvisible(el);\n\t            }\n\t        }\n\t    }\n\t}\n\n\t/**\n\t * Sets up aspect ratio metadata for fluid placeholders, in order to preserve proportions when resizing\n\t *\n\t * @private\n\t * @param el Image DOM element\n\t */\n\tfunction setInitialDimensions(el) {\n\t    if (el.holderData) {\n\t        var dimensions = dimensionCheck(el);\n\t        if (dimensions) {\n\t            var flags = el.holderData.flags;\n\n\t            var fluidConfig = {\n\t                fluidHeight: flags.dimensions.height.slice(-1) == '%',\n\t                fluidWidth: flags.dimensions.width.slice(-1) == '%',\n\t                mode: null,\n\t                initialDimensions: dimensions\n\t            };\n\n\t            if (fluidConfig.fluidWidth && !fluidConfig.fluidHeight) {\n\t                fluidConfig.mode = 'width';\n\t                fluidConfig.ratio = fluidConfig.initialDimensions.width / parseFloat(flags.dimensions.height);\n\t            } else if (!fluidConfig.fluidWidth && fluidConfig.fluidHeight) {\n\t                fluidConfig.mode = 'height';\n\t                fluidConfig.ratio = parseFloat(flags.dimensions.width) / fluidConfig.initialDimensions.height;\n\t            }\n\n\t            el.holderData.fluidConfig = fluidConfig;\n\t        } else {\n\t            setInvisible(el);\n\t        }\n\t    }\n\t}\n\n\t/**\n\t * Iterates through all current invisible images, and if they're visible, renders them and removes them from further checks. Runs every animation frame.\n\t *\n\t * @private\n\t */\n\tfunction visibilityCheck() {\n\t    var renderableImages = [];\n\t    var keys = Object.keys(App.vars.invisibleImages);\n\t    var el;\n\n\t    keys.forEach(function (key) {\n\t        el = App.vars.invisibleImages[key];\n\t        if (dimensionCheck(el) && el.nodeName.toLowerCase() == 'img') {\n\t            renderableImages.push(el);\n\t            delete App.vars.invisibleImages[key];\n\t        }\n\t    });\n\n\t    if (renderableImages.length) {\n\t        Holder.run({\n\t            images: renderableImages\n\t        });\n\t    }\n\n\t    // Done to prevent 100% CPU usage via aggressive calling of requestAnimationFrame\n\t    setTimeout(function () {\n\t        global.requestAnimationFrame(visibilityCheck);\n\t    }, 10);\n\t}\n\n\t/**\n\t * Starts checking for invisible placeholders if not doing so yet. Does nothing otherwise.\n\t *\n\t * @private\n\t */\n\tfunction startVisibilityCheck() {\n\t    if (!App.vars.visibilityCheckStarted) {\n\t        global.requestAnimationFrame(visibilityCheck);\n\t        App.vars.visibilityCheckStarted = true;\n\t    }\n\t}\n\n\t/**\n\t * Sets a unique ID for an image detected to be invisible and adds it to the map of invisible images checked by visibilityCheck\n\t *\n\t * @private\n\t * @param el Invisible DOM element\n\t */\n\tfunction setInvisible(el) {\n\t    if (!el.holderData.invisibleId) {\n\t        App.vars.invisibleId += 1;\n\t        App.vars.invisibleImages['i' + App.vars.invisibleId] = el;\n\t        el.holderData.invisibleId = App.vars.invisibleId;\n\t    }\n\t}\n\n\t//todo: see if possible to convert stagingRenderer to use HTML only\n\tvar stagingRenderer = (function() {\n\t    var svg = null,\n\t        stagingText = null,\n\t        stagingTextNode = null;\n\t    return function(graph) {\n\t        var rootNode = graph.root;\n\t        if (App.setup.supportsSVG) {\n\t            var firstTimeSetup = false;\n\t            var tnode = function(text) {\n\t                return document.createTextNode(text);\n\t            };\n\t            if (svg == null || svg.parentNode !== document.body) {\n\t                firstTimeSetup = true;\n\t            }\n\n\t            svg = SVG.initSVG(svg, rootNode.properties.width, rootNode.properties.height);\n\t            //Show staging element before staging\n\t            svg.style.display = 'block';\n\n\t            if (firstTimeSetup) {\n\t                stagingText = DOM.newEl('text', SVG_NS);\n\t                stagingTextNode = tnode(null);\n\t                DOM.setAttr(stagingText, {\n\t                    x: 0\n\t                });\n\t                stagingText.appendChild(stagingTextNode);\n\t                svg.appendChild(stagingText);\n\t                document.body.appendChild(svg);\n\t                svg.style.visibility = 'hidden';\n\t                svg.style.position = 'absolute';\n\t                svg.style.top = '-100%';\n\t                svg.style.left = '-100%';\n\t                //todo: workaround for zero-dimension <svg> tag in Opera 12\n\t                //svg.setAttribute('width', 0);\n\t                //svg.setAttribute('height', 0);\n\t            }\n\n\t            var holderTextGroup = rootNode.children.holderTextGroup;\n\t            var htgProps = holderTextGroup.properties;\n\t            DOM.setAttr(stagingText, {\n\t                'y': htgProps.font.size,\n\t                'style': utils.cssProps({\n\t                    'font-weight': htgProps.font.weight,\n\t                    'font-size': htgProps.font.size + htgProps.font.units,\n\t                    'font-family': htgProps.font.family\n\t                })\n\t            });\n\n\t            //Unescape HTML entities to get approximately the right width\n\t            var txt = DOM.newEl('textarea');\n\t            txt.innerHTML = htgProps.text;\n\t            stagingTextNode.nodeValue = txt.value;\n\n\t            //Get bounding box for the whole string (total width and height)\n\t            var stagingTextBBox = stagingText.getBBox();\n\n\t            //Get line count and split the string into words\n\t            var lineCount = Math.ceil(stagingTextBBox.width / rootNode.properties.width);\n\t            var words = htgProps.text.split(' ');\n\t            var newlines = htgProps.text.match(/\\\\n/g);\n\t            lineCount += newlines == null ? 0 : newlines.length;\n\n\t            //Get bounding box for the string with spaces removed\n\t            stagingTextNode.nodeValue = htgProps.text.replace(/[ ]+/g, '');\n\t            var computedNoSpaceLength = stagingText.getComputedTextLength();\n\n\t            //Compute average space width\n\t            var diffLength = stagingTextBBox.width - computedNoSpaceLength;\n\t            var spaceWidth = Math.round(diffLength / Math.max(1, words.length - 1));\n\n\t            //Get widths for every word with space only if there is more than one line\n\t            var wordWidths = [];\n\t            if (lineCount > 1) {\n\t                stagingTextNode.nodeValue = '';\n\t                for (var i = 0; i < words.length; i++) {\n\t                    if (words[i].length === 0) continue;\n\t                    stagingTextNode.nodeValue = utils.decodeHtmlEntity(words[i]);\n\t                    var bbox = stagingText.getBBox();\n\t                    wordWidths.push({\n\t                        text: words[i],\n\t                        width: bbox.width\n\t                    });\n\t                }\n\t            }\n\n\t            //Hide staging element after staging\n\t            svg.style.display = 'none';\n\n\t            return {\n\t                spaceWidth: spaceWidth,\n\t                lineCount: lineCount,\n\t                boundingBox: stagingTextBBox,\n\t                words: wordWidths\n\t            };\n\t        } else {\n\t            //todo: canvas fallback for measuring text on android 2.3\n\t            return false;\n\t        }\n\t    };\n\t})();\n\n\t//Helpers\n\n\t/**\n\t * Prevents a function from being called too often, waits until a timer elapses to call it again\n\t *\n\t * @param fn Function to call\n\t */\n\tfunction debounce(fn) {\n\t    if (!App.vars.debounceTimer) fn.call(this);\n\t    if (App.vars.debounceTimer) global.clearTimeout(App.vars.debounceTimer);\n\t    App.vars.debounceTimer = global.setTimeout(function() {\n\t        App.vars.debounceTimer = null;\n\t        fn.call(this);\n\t    }, App.setup.debounce);\n\t}\n\n\t/**\n\t * Holder-specific resize/orientation change callback, debounced to prevent excessive execution\n\t */\n\tfunction resizeEvent() {\n\t    debounce(function() {\n\t        updateResizableElements(null);\n\t    });\n\t}\n\n\t//Set up flags\n\n\tfor (var flag in App.flags) {\n\t    if (!App.flags.hasOwnProperty(flag)) continue;\n\t    App.flags[flag].match = function(val) {\n\t        return val.match(this.regex);\n\t    };\n\t}\n\n\t//Properties set once on setup\n\n\tApp.setup = {\n\t    renderer: 'html',\n\t    debounce: 100,\n\t    ratio: 1,\n\t    supportsCanvas: false,\n\t    supportsSVG: false,\n\t    lineWrapRatio: 0.9,\n\t    dataAttr: 'data-src',\n\t    renderers: ['html', 'canvas', 'svg']\n\t};\n\n\t//Properties modified during runtime\n\n\tApp.vars = {\n\t    preempted: false,\n\t    resizableImages: [],\n\t    invisibleImages: {},\n\t    invisibleId: 0,\n\t    visibilityCheckStarted: false,\n\t    debounceTimer: null,\n\t    cache: {}\n\t};\n\n\t//Pre-flight\n\n\t(function() {\n\t    var canvas = DOM.newEl('canvas');\n\n\t    if (canvas.getContext) {\n\t        if (canvas.toDataURL('image/png').indexOf('data:image/png') != -1) {\n\t            App.setup.renderer = 'canvas';\n\t            App.setup.supportsCanvas = true;\n\t        }\n\t    }\n\n\t    if (!!document.createElementNS && !!document.createElementNS(SVG_NS, 'svg').createSVGRect) {\n\t        App.setup.renderer = 'svg';\n\t        App.setup.supportsSVG = true;\n\t    }\n\t})();\n\n\t//Starts checking for invisible placeholders\n\tstartVisibilityCheck();\n\n\tif (onDomReady) {\n\t    onDomReady(function() {\n\t        if (!App.vars.preempted) {\n\t            Holder.run();\n\t        }\n\t        if (global.addEventListener) {\n\t            global.addEventListener('resize', resizeEvent, false);\n\t            global.addEventListener('orientationchange', resizeEvent, false);\n\t        } else {\n\t            global.attachEvent('onresize', resizeEvent);\n\t        }\n\n\t        if (typeof global.Turbolinks == 'object') {\n\t            global.document.addEventListener('page:change', function() {\n\t                Holder.run();\n\t            });\n\t        }\n\t    });\n\t}\n\n\tmodule.exports = Holder;\n\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\t/*!\n\t * onDomReady.js 1.4.0 (c) 2013 Tubal Martin - MIT license\n\t *\n\t * Specially modified to work with Holder.js\n\t */\n\n\tfunction _onDomReady(win) {\n\t    //Lazy loading fix for Firefox < 3.6\n\t    //http://webreflection.blogspot.com/2009/11/195-chars-to-help-lazy-loading.html\n\t    if (document.readyState == null && document.addEventListener) {\n\t        document.addEventListener(\"DOMContentLoaded\", function DOMContentLoaded() {\n\t            document.removeEventListener(\"DOMContentLoaded\", DOMContentLoaded, false);\n\t            document.readyState = \"complete\";\n\t        }, false);\n\t        document.readyState = \"loading\";\n\t    }\n\t    \n\t    var doc = win.document,\n\t        docElem = doc.documentElement,\n\t    \n\t        LOAD = \"load\",\n\t        FALSE = false,\n\t        ONLOAD = \"on\"+LOAD,\n\t        COMPLETE = \"complete\",\n\t        READYSTATE = \"readyState\",\n\t        ATTACHEVENT = \"attachEvent\",\n\t        DETACHEVENT = \"detachEvent\",\n\t        ADDEVENTLISTENER = \"addEventListener\",\n\t        DOMCONTENTLOADED = \"DOMContentLoaded\",\n\t        ONREADYSTATECHANGE = \"onreadystatechange\",\n\t        REMOVEEVENTLISTENER = \"removeEventListener\",\n\t    \n\t        // W3C Event model\n\t        w3c = ADDEVENTLISTENER in doc,\n\t        _top = FALSE,\n\t    \n\t        // isReady: Is the DOM ready to be used? Set to true once it occurs.\n\t        isReady = FALSE,\n\t    \n\t        // Callbacks pending execution until DOM is ready\n\t        callbacks = [];\n\t    \n\t    // Handle when the DOM is ready\n\t    function ready( fn ) {\n\t        if ( !isReady ) {\n\t    \n\t            // Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).\n\t            if ( !doc.body ) {\n\t                return defer( ready );\n\t            }\n\t    \n\t            // Remember that the DOM is ready\n\t            isReady = true;\n\t    \n\t            // Execute all callbacks\n\t            while ( fn = callbacks.shift() ) {\n\t                defer( fn );\n\t            }\n\t        }\n\t    }\n\t    \n\t    // The ready event handler\n\t    function completed( event ) {\n\t        // readyState === \"complete\" is good enough for us to call the dom ready in oldIE\n\t        if ( w3c || event.type === LOAD || doc[READYSTATE] === COMPLETE ) {\n\t            detach();\n\t            ready();\n\t        }\n\t    }\n\t    \n\t    // Clean-up method for dom ready events\n\t    function detach() {\n\t        if ( w3c ) {\n\t            doc[REMOVEEVENTLISTENER]( DOMCONTENTLOADED, completed, FALSE );\n\t            win[REMOVEEVENTLISTENER]( LOAD, completed, FALSE );\n\t        } else {\n\t            doc[DETACHEVENT]( ONREADYSTATECHANGE, completed );\n\t            win[DETACHEVENT]( ONLOAD, completed );\n\t        }\n\t    }\n\t    \n\t    // Defers a function, scheduling it to run after the current call stack has cleared.\n\t    function defer( fn, wait ) {\n\t        // Allow 0 to be passed\n\t        setTimeout( fn, +wait >= 0 ? wait : 1 );\n\t    }\n\t    \n\t    // Attach the listeners:\n\t    \n\t    // Catch cases where onDomReady is called after the browser event has already occurred.\n\t    // we once tried to use readyState \"interactive\" here, but it caused issues like the one\n\t    // discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15\n\t    if ( doc[READYSTATE] === COMPLETE ) {\n\t        // Handle it asynchronously to allow scripts the opportunity to delay ready\n\t        defer( ready );\n\t    \n\t    // Standards-based browsers support DOMContentLoaded\n\t    } else if ( w3c ) {\n\t        // Use the handy event callback\n\t        doc[ADDEVENTLISTENER]( DOMCONTENTLOADED, completed, FALSE );\n\t    \n\t        // A fallback to window.onload, that will always work\n\t        win[ADDEVENTLISTENER]( LOAD, completed, FALSE );\n\t    \n\t    // If IE event model is used\n\t    } else {\n\t        // Ensure firing before onload, maybe late but safe also for iframes\n\t        doc[ATTACHEVENT]( ONREADYSTATECHANGE, completed );\n\t    \n\t        // A fallback to window.onload, that will always work\n\t        win[ATTACHEVENT]( ONLOAD, completed );\n\t    \n\t        // If IE and not a frame\n\t        // continually check to see if the document is ready\n\t        try {\n\t            _top = win.frameElement == null && docElem;\n\t        } catch(e) {}\n\t    \n\t        if ( _top && _top.doScroll ) {\n\t            (function doScrollCheck() {\n\t                if ( !isReady ) {\n\t                    try {\n\t                        // Use the trick by Diego Perini\n\t                        // http://javascript.nwbox.com/IEContentLoaded/\n\t                        _top.doScroll(\"left\");\n\t                    } catch(e) {\n\t                        return defer( doScrollCheck, 50 );\n\t                    }\n\t    \n\t                    // detach all dom ready events\n\t                    detach();\n\t    \n\t                    // and execute any waiting functions\n\t                    ready();\n\t                }\n\t            })();\n\t        }\n\t    }\n\t    \n\t    function onDomReady( fn ) {\n\t        // If DOM is ready, execute the function (async), otherwise wait\n\t        isReady ? defer( fn ) : callbacks.push( fn );\n\t    }\n\t    \n\t    // Add version\n\t    onDomReady.version = \"1.4.0\";\n\t    // Add method to check if DOM is ready\n\t    onDomReady.isReady = function(){\n\t        return isReady;\n\t    };\n\n\t    return onDomReady;\n\t}\n\n\tmodule.exports = typeof window !== \"undefined\" && _onDomReady(window);\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t//Modified version of component/querystring\n\t//Changes: updated dependencies, dot notation parsing, JSHint fixes\n\t//Fork at https://github.com/imsky/querystring\n\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar encode = encodeURIComponent;\n\tvar decode = decodeURIComponent;\n\tvar trim = __webpack_require__(4);\n\tvar type = __webpack_require__(5);\n\n\tvar arrayRegex = /(\\w+)\\[(\\d+)\\]/;\n\tvar objectRegex = /\\w+\\.\\w+/;\n\n\t/**\n\t * Parse the given query `str`.\n\t *\n\t * @param {String} str\n\t * @return {Object}\n\t * @api public\n\t */\n\n\texports.parse = function(str){\n\t  if ('string' !== typeof str) return {};\n\n\t  str = trim(str);\n\t  if ('' === str) return {};\n\t  if ('?' === str.charAt(0)) str = str.slice(1);\n\n\t  var obj = {};\n\t  var pairs = str.split('&');\n\t  for (var i = 0; i < pairs.length; i++) {\n\t    var parts = pairs[i].split('=');\n\t    var key = decode(parts[0]);\n\t    var m, ctx, prop;\n\n\t    if (m = arrayRegex.exec(key)) {\n\t      obj[m[1]] = obj[m[1]] || [];\n\t      obj[m[1]][m[2]] = decode(parts[1]);\n\t      continue;\n\t    }\n\n\t    if (m = objectRegex.test(key)) {\n\t      m = key.split('.');\n\t      ctx = obj;\n\t      \n\t      while (m.length) {\n\t        prop = m.shift();\n\n\t        if (!prop.length) continue;\n\n\t        if (!ctx[prop]) {\n\t          ctx[prop] = {};\n\t        } else if (ctx[prop] && typeof ctx[prop] !== 'object') {\n\t          break;\n\t        }\n\n\t        if (!m.length) {\n\t          ctx[prop] = decode(parts[1]);\n\t        }\n\n\t        ctx = ctx[prop];\n\t      }\n\n\t      continue;\n\t    }\n\n\t    obj[parts[0]] = null == parts[1] ? '' : decode(parts[1]);\n\t  }\n\n\t  return obj;\n\t};\n\n\t/**\n\t * Stringify the given `obj`.\n\t *\n\t * @param {Object} obj\n\t * @return {String}\n\t * @api public\n\t */\n\n\texports.stringify = function(obj){\n\t  if (!obj) return '';\n\t  var pairs = [];\n\n\t  for (var key in obj) {\n\t    var value = obj[key];\n\n\t    if ('array' == type(value)) {\n\t      for (var i = 0; i < value.length; ++i) {\n\t        pairs.push(encode(key + '[' + i + ']') + '=' + encode(value[i]));\n\t      }\n\t      continue;\n\t    }\n\n\t    pairs.push(encode(key) + '=' + encode(obj[key]));\n\t  }\n\n\t  return pairs.join('&');\n\t};\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\t\n\texports = module.exports = trim;\n\n\tfunction trim(str){\n\t  return str.replace(/^\\s*|\\s*$/g, '');\n\t}\n\n\texports.left = function(str){\n\t  return str.replace(/^\\s*/, '');\n\t};\n\n\texports.right = function(str){\n\t  return str.replace(/\\s*$/, '');\n\t};\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\t/**\n\t * toString ref.\n\t */\n\n\tvar toString = Object.prototype.toString;\n\n\t/**\n\t * Return the type of `val`.\n\t *\n\t * @param {Mixed} val\n\t * @return {String}\n\t * @api public\n\t */\n\n\tmodule.exports = function(val){\n\t  switch (toString.call(val)) {\n\t    case '[object Date]': return 'date';\n\t    case '[object RegExp]': return 'regexp';\n\t    case '[object Arguments]': return 'arguments';\n\t    case '[object Array]': return 'array';\n\t    case '[object Error]': return 'error';\n\t  }\n\n\t  if (val === null) return 'null';\n\t  if (val === undefined) return 'undefined';\n\t  if (val !== val) return 'nan';\n\t  if (val && val.nodeType === 1) return 'element';\n\n\t  if (isBuffer(val)) return 'buffer';\n\n\t  val = val.valueOf\n\t    ? val.valueOf()\n\t    : Object.prototype.valueOf.apply(val);\n\n\t  return typeof val;\n\t};\n\n\t// code borrowed from https://github.com/feross/is-buffer/blob/master/index.js\n\tfunction isBuffer(obj) {\n\t  return !!(obj != null &&\n\t    (obj._isBuffer || // For Safari 5-7 (missing Object.prototype.constructor)\n\t      (obj.constructor &&\n\t      typeof obj.constructor.isBuffer === 'function' &&\n\t      obj.constructor.isBuffer(obj))\n\t    ))\n\t}\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n\tvar SceneGraph = function(sceneProperties) {\n\t    var nodeCount = 1;\n\n\t    //todo: move merge to helpers section\n\t    function merge(parent, child) {\n\t        for (var prop in child) {\n\t            parent[prop] = child[prop];\n\t        }\n\t        return parent;\n\t    }\n\n\t    var SceneNode = function(name) {\n\t        nodeCount++;\n\t        this.parent = null;\n\t        this.children = {};\n\t        this.id = nodeCount;\n\t        this.name = 'n' + nodeCount;\n\t        if (typeof name !== 'undefined') {\n\t            this.name = name;\n\t        }\n\t        this.x = this.y = this.z = 0;\n\t        this.width = this.height = 0;\n\t    };\n\n\t    SceneNode.prototype.resize = function(width, height) {\n\t        if (width != null) {\n\t            this.width = width;\n\t        }\n\t        if (height != null) {\n\t            this.height = height;\n\t        }\n\t    };\n\n\t    SceneNode.prototype.moveTo = function(x, y, z) {\n\t        this.x = x != null ? x : this.x;\n\t        this.y = y != null ? y : this.y;\n\t        this.z = z != null ? z : this.z;\n\t    };\n\n\t    SceneNode.prototype.add = function(child) {\n\t        var name = child.name;\n\t        if (typeof this.children[name] === 'undefined') {\n\t            this.children[name] = child;\n\t            child.parent = this;\n\t        } else {\n\t            throw 'SceneGraph: child already exists: ' + name;\n\t        }\n\t    };\n\n\t    var RootNode = function() {\n\t        SceneNode.call(this, 'root');\n\t        this.properties = sceneProperties;\n\t    };\n\n\t    RootNode.prototype = new SceneNode();\n\n\t    var Shape = function(name, props) {\n\t        SceneNode.call(this, name);\n\t        this.properties = {\n\t            'fill': '#000000'\n\t        };\n\t        if (typeof props !== 'undefined') {\n\t            merge(this.properties, props);\n\t        } else if (typeof name !== 'undefined' && typeof name !== 'string') {\n\t            throw 'SceneGraph: invalid node name';\n\t        }\n\t    };\n\n\t    Shape.prototype = new SceneNode();\n\n\t    var Group = function() {\n\t        Shape.apply(this, arguments);\n\t        this.type = 'group';\n\t    };\n\n\t    Group.prototype = new Shape();\n\n\t    var Rect = function() {\n\t        Shape.apply(this, arguments);\n\t        this.type = 'rect';\n\t    };\n\n\t    Rect.prototype = new Shape();\n\n\t    var Text = function(text) {\n\t        Shape.call(this);\n\t        this.type = 'text';\n\t        this.properties.text = text;\n\t    };\n\n\t    Text.prototype = new Shape();\n\n\t    var root = new RootNode();\n\n\t    this.Shape = {\n\t        'Rect': Rect,\n\t        'Text': Text,\n\t        'Group': Group\n\t    };\n\n\t    this.root = root;\n\t    return this;\n\t};\n\n\tmodule.exports = SceneGraph;\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {/**\n\t * Shallow object clone and merge\n\t *\n\t * @param a Object A\n\t * @param b Object B\n\t * @returns {Object} New object with all of A's properties, and all of B's properties, overwriting A's properties\n\t */\n\texports.extend = function(a, b) {\n\t    var c = {};\n\t    for (var x in a) {\n\t        if (a.hasOwnProperty(x)) {\n\t            c[x] = a[x];\n\t        }\n\t    }\n\t    if (b != null) {\n\t        for (var y in b) {\n\t            if (b.hasOwnProperty(y)) {\n\t                c[y] = b[y];\n\t            }\n\t        }\n\t    }\n\t    return c;\n\t};\n\n\t/**\n\t * Takes a k/v list of CSS properties and returns a rule\n\t *\n\t * @param props CSS properties object\n\t */\n\texports.cssProps = function(props) {\n\t    var ret = [];\n\t    for (var p in props) {\n\t        if (props.hasOwnProperty(p)) {\n\t            ret.push(p + ':' + props[p]);\n\t        }\n\t    }\n\t    return ret.join(';');\n\t};\n\n\t/**\n\t * Encodes HTML entities in a string\n\t *\n\t * @param str Input string\n\t */\n\texports.encodeHtmlEntity = function(str) {\n\t    var buf = [];\n\t    var charCode = 0;\n\t    for (var i = str.length - 1; i >= 0; i--) {\n\t        charCode = str.charCodeAt(i);\n\t        if (charCode > 128) {\n\t            buf.unshift(['&#', charCode, ';'].join(''));\n\t        } else {\n\t            buf.unshift(str[i]);\n\t        }\n\t    }\n\t    return buf.join('');\n\t};\n\n\t/**\n\t * Checks if an image exists\n\t *\n\t * @param src URL of image\n\t * @param callback Callback to call once image status has been found\n\t */\n\texports.imageExists = function(src, callback) {\n\t    var image = new Image();\n\t    image.onerror = function() {\n\t        callback.call(this, false);\n\t    };\n\t    image.onload = function() {\n\t        callback.call(this, true);\n\t    };\n\t    image.src = src;\n\t};\n\n\t/**\n\t * Decodes HTML entities in a string\n\t *\n\t * @param str Input string\n\t */\n\texports.decodeHtmlEntity = function(str) {\n\t    return str.replace(/&#(\\d+);/g, function(match, dec) {\n\t        return String.fromCharCode(dec);\n\t    });\n\t};\n\n\n\t/**\n\t * Returns an element's dimensions if it's visible, `false` otherwise.\n\t *\n\t * @param el DOM element\n\t */\n\texports.dimensionCheck = function(el) {\n\t    var dimensions = {\n\t        height: el.clientHeight,\n\t        width: el.clientWidth\n\t    };\n\n\t    if (dimensions.height && dimensions.width) {\n\t        return dimensions;\n\t    } else {\n\t        return false;\n\t    }\n\t};\n\n\n\t/**\n\t * Returns true if value is truthy or if it is \"semantically truthy\"\n\t * @param val\n\t */\n\texports.truthy = function(val) {\n\t    if (typeof val === 'string') {\n\t        return val === 'true' || val === 'yes' || val === '1' || val === 'on' || val === 'â';\n\t    }\n\t    return !!val;\n\t};\n\n\t/**\n\t * Parses input into a well-formed CSS color\n\t * @param val\n\t */\n\texports.parseColor = function(val) {\n\t    var hexre = /(^(?:#?)[0-9a-f]{6}$)|(^(?:#?)[0-9a-f]{3}$)/i;\n\t    var rgbre = /^rgb\\((\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/;\n\t    var rgbare = /^rgba\\((\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(0\\.\\d{1,}|1)\\)$/;\n\n\t    var match = val.match(hexre);\n\t    var retval;\n\n\t    if (match !== null) {\n\t        retval = match[1] || match[2];\n\t        if (retval[0] !== '#') {\n\t            return '#' + retval;\n\t        } else {\n\t            return retval;\n\t        }\n\t    }\n\n\t    match = val.match(rgbre);\n\n\t    if (match !== null) {\n\t        retval = 'rgb(' + match.slice(1).join(',') + ')';\n\t        return retval;\n\t    }\n\n\t    match = val.match(rgbare);\n\n\t    if (match !== null) {\n\t        retval = 'rgba(' + match.slice(1).join(',') + ')';\n\t        return retval;\n\t    }\n\n\t    return null;\n\t};\n\n\t/**\n\t * Provides the correct scaling ratio for canvas drawing operations on HiDPI screens (e.g. Retina displays)\n\t */\n\texports.canvasRatio = function () {\n\t    var devicePixelRatio = 1;\n\t    var backingStoreRatio = 1;\n\n\t    if (global.document) {\n\t        var canvas = global.document.createElement('canvas');\n\t        if (canvas.getContext) {\n\t            var ctx = canvas.getContext('2d');\n\t            devicePixelRatio = global.devicePixelRatio || 1;\n\t            backingStoreRatio = ctx.webkitBackingStorePixelRatio || ctx.mozBackingStorePixelRatio || ctx.msBackingStorePixelRatio || ctx.oBackingStorePixelRatio || ctx.backingStorePixelRatio || 1;\n\t        }\n\t    }\n\n\t    return devicePixelRatio / backingStoreRatio;\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {var DOM = __webpack_require__(9);\n\n\tvar SVG_NS = 'http://www.w3.org/2000/svg';\n\tvar NODE_TYPE_COMMENT = 8;\n\n\t/**\n\t * Generic SVG element creation function\n\t *\n\t * @param svg SVG context, set to null if new\n\t * @param width Document width\n\t * @param height Document height\n\t */\n\texports.initSVG = function(svg, width, height) {\n\t    var defs, style, initialize = false;\n\n\t    if (svg && svg.querySelector) {\n\t        style = svg.querySelector('style');\n\t        if (style === null) {\n\t            initialize = true;\n\t        }\n\t    } else {\n\t        svg = DOM.newEl('svg', SVG_NS);\n\t        initialize = true;\n\t    }\n\n\t    if (initialize) {\n\t        defs = DOM.newEl('defs', SVG_NS);\n\t        style = DOM.newEl('style', SVG_NS);\n\t        DOM.setAttr(style, {\n\t            'type': 'text/css'\n\t        });\n\t        defs.appendChild(style);\n\t        svg.appendChild(defs);\n\t    }\n\n\t    //IE throws an exception if this is set and Chrome requires it to be set\n\t    if (svg.webkitMatchesSelector) {\n\t        svg.setAttribute('xmlns', SVG_NS);\n\t    }\n\n\t    //Remove comment nodes\n\t    for (var i = 0; i < svg.childNodes.length; i++) {\n\t        if (svg.childNodes[i].nodeType === NODE_TYPE_COMMENT) {\n\t            svg.removeChild(svg.childNodes[i]);\n\t        }\n\t    }\n\n\t    //Remove CSS\n\t    while (style.childNodes.length) {\n\t        style.removeChild(style.childNodes[0]);\n\t    }\n\n\t    DOM.setAttr(svg, {\n\t        'width': width,\n\t        'height': height,\n\t        'viewBox': '0 0 ' + width + ' ' + height,\n\t        'preserveAspectRatio': 'none'\n\t    });\n\n\t    return svg;\n\t};\n\n\t/**\n\t * Converts serialized SVG to a string suitable for data URI use\n\t * @param svgString Serialized SVG string\n\t * @param [base64] Use base64 encoding for data URI\n\t */\n\texports.svgStringToDataURI = function() {\n\t    var rawPrefix = 'data:image/svg+xml;charset=UTF-8,';\n\t    var base64Prefix = 'data:image/svg+xml;charset=UTF-8;base64,';\n\n\t    return function(svgString, base64) {\n\t        if (base64) {\n\t            return base64Prefix + btoa(global.unescape(encodeURIComponent(svgString)));\n\t        } else {\n\t            return rawPrefix + encodeURIComponent(svgString);\n\t        }\n\t    };\n\t}();\n\n\t/**\n\t * Returns serialized SVG with XML processing instructions\n\t *\n\t * @param svg SVG context\n\t * @param stylesheets CSS stylesheets to include\n\t */\n\texports.serializeSVG = function(svg, engineSettings) {\n\t    if (!global.XMLSerializer) return;\n\t    var serializer = new XMLSerializer();\n\t    var svgCSS = '';\n\t    var stylesheets = engineSettings.stylesheets;\n\n\t    //External stylesheets: Processing Instruction method\n\t    if (engineSettings.svgXMLStylesheet) {\n\t        var xml = DOM.createXML();\n\t        //Add <?xml-stylesheet ?> directives\n\t        for (var i = stylesheets.length - 1; i >= 0; i--) {\n\t            var csspi = xml.createProcessingInstruction('xml-stylesheet', 'href=\"' + stylesheets[i] + '\" rel=\"stylesheet\"');\n\t            xml.insertBefore(csspi, xml.firstChild);\n\t        }\n\n\t        xml.removeChild(xml.documentElement);\n\t        svgCSS = serializer.serializeToString(xml);\n\t    }\n\n\t    var svgText = serializer.serializeToString(svg);\n\t    svgText = svgText.replace(/\\&amp;(\\#[0-9]{2,}\\;)/g, '&$1');\n\t    return svgCSS + svgText;\n\t};\n\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {/**\n\t * Generic new DOM element function\n\t *\n\t * @param tag Tag to create\n\t * @param namespace Optional namespace value\n\t */\n\texports.newEl = function(tag, namespace) {\n\t    if (!global.document) return;\n\n\t    if (namespace == null) {\n\t        return global.document.createElement(tag);\n\t    } else {\n\t        return global.document.createElementNS(namespace, tag);\n\t    }\n\t};\n\n\t/**\n\t * Generic setAttribute function\n\t *\n\t * @param el Reference to DOM element\n\t * @param attrs Object with attribute keys and values\n\t */\n\texports.setAttr = function (el, attrs) {\n\t    for (var a in attrs) {\n\t        el.setAttribute(a, attrs[a]);\n\t    }\n\t};\n\n\t/**\n\t * Creates a XML document\n\t * @private\n\t */\n\texports.createXML = function() {\n\t    if (!global.DOMParser) return;\n\t    return new DOMParser().parseFromString('<xml />', 'application/xml');\n\t};\n\n\t/**\n\t * Converts a value into an array of DOM nodes\n\t *\n\t * @param val A string, a NodeList, a Node, or an HTMLCollection\n\t */\n\texports.getNodeArray = function(val) {\n\t    var retval = null;\n\t    if (typeof(val) == 'string') {\n\t        retval = document.querySelectorAll(val);\n\t    } else if (global.NodeList && val instanceof global.NodeList) {\n\t        retval = val;\n\t    } else if (global.Node && val instanceof global.Node) {\n\t        retval = [val];\n\t    } else if (global.HTMLCollection && val instanceof global.HTMLCollection) {\n\t        retval = val;\n\t    } else if (val instanceof Array) {\n\t        retval = val;\n\t    } else if (val === null) {\n\t        retval = [];\n\t    }\n\n\t    retval = Array.prototype.slice.call(retval);\n\n\t    return retval;\n\t};\n\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n\tvar Color = function(color, options) {\n\t    //todo: support rgba, hsla, and rrggbbaa notation\n\t    //todo: use CIELAB internally\n\t    //todo: add clamp function (with sign)\n\t    if (typeof color !== 'string') return;\n\n\t    this.original = color;\n\n\t    if (color.charAt(0) === '#') {\n\t        color = color.slice(1);\n\t    }\n\n\t    if (/[^a-f0-9]+/i.test(color)) return;\n\n\t    if (color.length === 3) {\n\t        color = color.replace(/./g, '$&$&');\n\t    }\n\n\t    if (color.length !== 6) return;\n\n\t    this.alpha = 1;\n\n\t    if (options && options.alpha) {\n\t        this.alpha = options.alpha;\n\t    }\n\n\t    this.set(parseInt(color, 16));\n\t};\n\n\t//todo: jsdocs\n\tColor.rgb2hex = function(r, g, b) {\n\t    function format (decimal) {\n\t        var hex = (decimal | 0).toString(16);\n\t        if (decimal < 16) {\n\t            hex = '0' + hex;\n\t        }\n\t        return hex;\n\t    }\n\n\t    return [r, g, b].map(format).join('');\n\t};\n\n\t//todo: jsdocs\n\tColor.hsl2rgb = function (h, s, l) {\n\t    var H = h / 60;\n\t    var C = (1 - Math.abs(2 * l - 1)) * s;\n\t    var X = C * (1 - Math.abs(parseInt(H) % 2 - 1));\n\t    var m = l - (C / 2);\n\n\t    var r = 0, g = 0, b = 0;\n\n\t    if (H >= 0 && H < 1) {\n\t        r = C;\n\t        g = X;\n\t    } else if (H >= 1 && H < 2) {\n\t        r = X;\n\t        g = C;\n\t    } else if (H >= 2 && H < 3) {\n\t        g = C;\n\t        b = X;\n\t    } else if (H >= 3 && H < 4) {\n\t        g = X;\n\t        b = C;\n\t    } else if (H >= 4 && H < 5) {\n\t        r = X;\n\t        b = C;\n\t    } else if (H >= 5 && H < 6) {\n\t        r = C;\n\t        b = X;\n\t    }\n\n\t    r += m;\n\t    g += m;\n\t    b += m;\n\n\t    r = parseInt(r * 255);\n\t    g = parseInt(g * 255);\n\t    b = parseInt(b * 255);\n\n\t    return [r, g, b];\n\t};\n\n\t/**\n\t * Sets the color from a raw RGB888 integer\n\t * @param raw RGB888 representation of color\n\t */\n\t//todo: refactor into a static method\n\t//todo: factor out individual color spaces\n\t//todo: add HSL, CIELAB, and CIELUV\n\tColor.prototype.set = function (val) {\n\t    this.raw = val;\n\n\t    var r = (this.raw & 0xFF0000) >> 16;\n\t    var g = (this.raw & 0x00FF00) >> 8;\n\t    var b = (this.raw & 0x0000FF);\n\n\t    // BT.709\n\t    var y = 0.2126 * r + 0.7152 * g + 0.0722 * b;\n\t    var u = -0.09991 * r - 0.33609 * g + 0.436 * b;\n\t    var v = 0.615 * r - 0.55861 * g - 0.05639 * b;\n\n\t    this.rgb = {\n\t        r: r,\n\t        g: g,\n\t        b: b\n\t    };\n\n\t    this.yuv = {\n\t        y: y,\n\t        u: u,\n\t        v: v\n\t    };\n\n\t    return this;\n\t};\n\n\t/**\n\t * Lighten or darken a color\n\t * @param multiplier Amount to lighten or darken (-1 to 1)\n\t */\n\tColor.prototype.lighten = function(multiplier) {\n\t    var cm = Math.min(1, Math.max(0, Math.abs(multiplier))) * (multiplier < 0 ? -1 : 1);\n\t    var bm = (255 * cm) | 0;\n\t    var cr = Math.min(255, Math.max(0, this.rgb.r + bm));\n\t    var cg = Math.min(255, Math.max(0, this.rgb.g + bm));\n\t    var cb = Math.min(255, Math.max(0, this.rgb.b + bm));\n\t    var hex = Color.rgb2hex(cr, cg, cb);\n\t    return new Color(hex);\n\t};\n\n\t/**\n\t * Output color in hex format\n\t * @param addHash Add a hash character to the beginning of the output\n\t */\n\tColor.prototype.toHex = function(addHash) {\n\t    return (addHash ? '#' : '') + this.raw.toString(16);\n\t};\n\n\t/**\n\t * Returns whether or not current color is lighter than another color\n\t * @param color Color to compare against\n\t */\n\tColor.prototype.lighterThan = function(color) {\n\t    if (!(color instanceof Color)) {\n\t        color = new Color(color);\n\t    }\n\n\t    return this.yuv.y > color.yuv.y;\n\t};\n\n\t/**\n\t * Returns the result of mixing current color with another color\n\t * @param color Color to mix with\n\t * @param multiplier How much to mix with the other color\n\t */\n\t/*\n\tColor.prototype.mix = function (color, multiplier) {\n\t    if (!(color instanceof Color)) {\n\t        color = new Color(color);\n\t    }\n\n\t    var r = this.rgb.r;\n\t    var g = this.rgb.g;\n\t    var b = this.rgb.b;\n\t    var a = this.alpha;\n\n\t    var m = typeof multiplier !== 'undefined' ? multiplier : 0.5;\n\n\t    //todo: write a lerp function\n\t    r = r + m * (color.rgb.r - r);\n\t    g = g + m * (color.rgb.g - g);\n\t    b = b + m * (color.rgb.b - b);\n\t    a = a + m * (color.alpha - a);\n\n\t    return new Color(Color.rgbToHex(r, g, b), {\n\t        'alpha': a\n\t    });\n\t};\n\t*/\n\n\t/**\n\t * Returns the result of blending another color on top of current color with alpha\n\t * @param color Color to blend on top of current color, i.e. \"Ca\"\n\t */\n\t//todo: see if .blendAlpha can be merged into .mix\n\tColor.prototype.blendAlpha = function(color) {\n\t    if (!(color instanceof Color)) {\n\t        color = new Color(color);\n\t    }\n\n\t    var Ca = color;\n\t    var Cb = this;\n\n\t    //todo: write alpha blending function\n\t    var r = Ca.alpha * Ca.rgb.r + (1 - Ca.alpha) * Cb.rgb.r;\n\t    var g = Ca.alpha * Ca.rgb.g + (1 - Ca.alpha) * Cb.rgb.g;\n\t    var b = Ca.alpha * Ca.rgb.b + (1 - Ca.alpha) * Cb.rgb.b;\n\n\t    return new Color(Color.rgb2hex(r, g, b));\n\t};\n\n\tmodule.exports = Color;\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\n\t  'version': '2.9.6',\n\t  'svg_ns': 'http://www.w3.org/2000/svg'\n\t};\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar shaven = __webpack_require__(13);\n\n\tvar SVG = __webpack_require__(8);\n\tvar constants = __webpack_require__(11);\n\tvar utils = __webpack_require__(7);\n\n\tvar SVG_NS = constants.svg_ns;\n\n\tvar templates = {\n\t  'element': function (options) {\n\t    var tag = options.tag;\n\t    var content = options.content || '';\n\t    delete options.tag;\n\t    delete options.content;\n\t    return  [tag, content, options];\n\t  }\n\t};\n\n\t//todo: deprecate tag arg, infer tag from shape object\n\tfunction convertShape (shape, tag) {\n\t  return templates.element({\n\t    'tag': tag,\n\t    'width': shape.width,\n\t    'height': shape.height,\n\t    'fill': shape.properties.fill\n\t  });\n\t}\n\n\tfunction textCss (properties) {\n\t  return utils.cssProps({\n\t    'fill': properties.fill,\n\t    'font-weight': properties.font.weight,\n\t    'font-family': properties.font.family + ', monospace',\n\t    'font-size': properties.font.size + properties.font.units\n\t  });\n\t}\n\n\tfunction outlinePath (bgWidth, bgHeight, outlineWidth) {\n\t  var outlineOffsetWidth = outlineWidth / 2;\n\n\t  return [\n\t    'M', outlineOffsetWidth, outlineOffsetWidth,\n\t    'H', bgWidth - outlineOffsetWidth,\n\t    'V', bgHeight - outlineOffsetWidth,\n\t    'H', outlineOffsetWidth,\n\t    'V', 0,\n\t    'M', 0, outlineOffsetWidth,\n\t    'L', bgWidth, bgHeight - outlineOffsetWidth,\n\t    'M', 0, bgHeight - outlineOffsetWidth,\n\t    'L', bgWidth, outlineOffsetWidth\n\t  ].join(' ');\n\t}\n\n\tmodule.exports = function (sceneGraph, renderSettings) {\n\t  var engineSettings = renderSettings.engineSettings;\n\t  var stylesheets = engineSettings.stylesheets;\n\t  var stylesheetXml = stylesheets.map(function (stylesheet) {\n\t    return '<?xml-stylesheet rel=\"stylesheet\" href=\"' + stylesheet + '\"?>';\n\t  }).join('\\n');\n\n\t  var holderId = 'holder_' + Number(new Date()).toString(16);\n\n\t  var root = sceneGraph.root;\n\t  var textGroup = root.children.holderTextGroup;\n\n\t  var css = '#' + holderId + ' text { ' + textCss(textGroup.properties) + ' } ';\n\n\t  // push text down to be equally vertically aligned with canvas renderer\n\t  textGroup.y += textGroup.textPositionData.boundingBox.height * 0.8;\n\n\t  var wordTags = [];\n\n\t  Object.keys(textGroup.children).forEach(function (lineKey) {\n\t    var line = textGroup.children[lineKey];\n\n\t    Object.keys(line.children).forEach(function (wordKey) {\n\t      var word = line.children[wordKey];\n\t      var x = textGroup.x + line.x + word.x;\n\t      var y = textGroup.y + line.y + word.y;\n\t      var wordTag = templates.element({\n\t        'tag': 'text',\n\t        'content': word.properties.text,\n\t        'x': x,\n\t        'y': y\n\t      });\n\n\t      wordTags.push(wordTag);\n\t    });\n\t  });\n\n\t  var text = templates.element({\n\t    'tag': 'g',\n\t    'content': wordTags\n\t  });\n\n\t  var outline = null;\n\n\t  if (root.children.holderBg.properties.outline) {\n\t    var outlineProperties = root.children.holderBg.properties.outline;\n\t    outline = templates.element({\n\t      'tag': 'path',\n\t      'd': outlinePath(root.children.holderBg.width, root.children.holderBg.height, outlineProperties.width),\n\t      'stroke-width': outlineProperties.width,\n\t      'stroke': outlineProperties.fill,\n\t      'fill': 'none'\n\t    });\n\t  }\n\n\t  var bg = convertShape(root.children.holderBg, 'rect');\n\n\t  var sceneContent = [];\n\n\t  sceneContent.push(bg);\n\t  if (outlineProperties) {\n\t    sceneContent.push(outline);\n\t  }\n\t  sceneContent.push(text);\n\n\t  var scene = templates.element({\n\t    'tag': 'g',\n\t    'id': holderId,\n\t    'content': sceneContent\n\t  });\n\n\t  var style = templates.element({\n\t    'tag': 'style',\n\t    //todo: figure out how to add CDATA directive\n\t    'content': css,\n\t    'type': 'text/css'\n\t  });\n\n\t  var defs = templates.element({\n\t    'tag': 'defs',\n\t    'content': style\n\t  });\n\n\t  var svg = templates.element({\n\t    'tag': 'svg',\n\t    'content': [defs, scene],\n\t    'width': root.properties.width,\n\t    'height': root.properties.height,\n\t    'xmlns': SVG_NS,\n\t    'viewBox': [0, 0, root.properties.width, root.properties.height].join(' '),\n\t    'preserveAspectRatio': 'none'\n\t  });\n\n\t  var output = shaven(svg);\n\n\t  if (/\\&amp;(x)?#[0-9A-Fa-f]/.test(output[0])) {\n\t    output[0] = output[0].replace(/&amp;#/gm, '&#');\n\t  }\n\t  \n\t  output = stylesheetXml + output[0];\n\n\t  var svgString = SVG.svgStringToDataURI(output, renderSettings.mode === 'background');\n\t  return svgString;\n\t};\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar escape = __webpack_require__(14)\n\n\t// TODO: remove namespace\n\n\tmodule.exports = function shaven (array, namespace, returnObject) {\n\n\t\t'use strict'\n\n\t\tvar i = 1\n\t\tvar doesEscape = true\n\t\tvar HTMLString\n\t\tvar attributeKey\n\t\tvar callback\n\t\tvar key\n\n\n\t\treturnObject = returnObject || {}\n\n\n\t\tfunction createElement (sugarString) {\n\n\t\t\tvar tags = sugarString.match(/^[\\w-]+/)\n\t\t\tvar element = {\n\t\t\t\ttag: tags ? tags[0] : 'div',\n\t\t\t\tattr: {},\n\t\t\t\tchildren: []\n\t\t\t}\n\t\t\tvar id = sugarString.match(/#([\\w-]+)/)\n\t\t\tvar reference = sugarString.match(/\\$([\\w-]+)/)\n\t\t\tvar classNames = sugarString.match(/\\.[\\w-]+/g)\n\n\n\t\t\t// Assign id if is set\n\t\t\tif (id) {\n\t\t\t\telement.attr.id = id[1]\n\n\t\t\t\t// Add element to the return object\n\t\t\t\treturnObject[id[1]] = element\n\t\t\t}\n\n\t\t\tif (reference)\n\t\t\t\treturnObject[reference[1]] = element\n\n\t\t\tif (classNames)\n\t\t\t\telement.attr.class = classNames.join(' ').replace(/\\./g, '')\n\n\t\t\tif (sugarString.match(/&$/g))\n\t\t\t\tdoesEscape = false\n\n\t\t\treturn element\n\t\t}\n\n\t\tfunction replacer (key, value) {\n\n\t\t\tif (value === null || value === false || value === undefined)\n\t\t\t\treturn\n\n\t\t\tif (typeof value !== 'string' && typeof value !== 'object')\n\t\t\t\treturn String(value)\n\n\t\t\treturn value\n\t\t}\n\n\t\tfunction escapeAttribute (string) {\n\t\t\treturn (string || string === 0) ?\n\t\t\t\tString(string)\n\t\t\t\t\t.replace(/&/g, '&amp;')\n\t\t\t\t\t.replace(/\"/g, '&quot;') :\n\t\t\t\t''\n\t\t}\n\n\t\tfunction escapeHTML (string) {\n\t\t\treturn String(string)\n\t\t\t\t.replace(/&/g, '&amp;')\n\t\t\t\t.replace(/\"/g, '&quot;')\n\t\t\t\t.replace(/'/g, '&apos;')\n\t\t\t\t.replace(/</g, '&lt;')\n\t\t\t\t.replace(/>/g, '&gt;')\n\t\t}\n\n\n\t\tif (typeof array[0] === 'string')\n\t\t\tarray[0] = createElement(array[0])\n\n\t\telse if (Array.isArray(array[0]))\n\t\t\ti = 0\n\n\t\telse\n\t\t\tthrow new Error(\n\t\t\t\t'First element of array must be a string, ' +\n\t\t\t\t'or an array and not ' + JSON.stringify(array[0])\n\t\t\t)\n\n\n\t\tfor (; i < array.length; i++) {\n\n\t\t\t// Don't render element if value is false or null\n\t\t\tif (array[i] === false || array[i] === null) {\n\t\t\t\tarray[0] = false\n\t\t\t\tbreak\n\t\t\t}\n\n\t\t\t// Continue with next array value if current value is undefined or true\n\t\t\telse if (array[i] === undefined || array[i] === true) {\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\telse if (typeof array[i] === 'string') {\n\t\t\t\tif (doesEscape)\n\t\t\t\t\tarray[i] = escapeHTML(array[i])\n\n\t\t\t\tarray[0].children.push(array[i])\n\t\t\t}\n\n\t\t\telse if (typeof array[i] === 'number') {\n\n\t\t\t\tarray[0].children.push(array[i])\n\t\t\t}\n\n\t\t\telse if (Array.isArray(array[i])) {\n\n\t\t\t\tif (Array.isArray(array[i][0])) {\n\t\t\t\t\tarray[i].reverse().forEach(function (subArray) {\n\t\t\t\t\t\tarray.splice(i + 1, 0, subArray)\n\t\t\t\t\t})\n\n\t\t\t\t\tif (i !== 0)\n\t\t\t\t\t\tcontinue\n\t\t\t\t\ti++\n\t\t\t\t}\n\n\t\t\t\tshaven(array[i], namespace, returnObject)\n\n\t\t\t\tif (array[i][0])\n\t\t\t\t\tarray[0].children.push(array[i][0])\n\t\t\t}\n\n\t\t\telse if (typeof array[i] === 'function')\n\t\t\t\tcallback = array[i]\n\n\n\t\t\telse if (typeof array[i] === 'object') {\n\t\t\t\tfor (attributeKey in array[i])\n\t\t\t\t\tif (array[i].hasOwnProperty(attributeKey))\n\t\t\t\t\t\tif (array[i][attributeKey] !== null &&\n\t\t\t\t\t\t\tarray[i][attributeKey] !== false)\n\t\t\t\t\t\t\tif (attributeKey === 'style' &&\n\t\t\t\t\t\t\t\ttypeof array[i][attributeKey] === 'object')\n\t\t\t\t\t\t\t\tarray[0].attr[attributeKey] = JSON\n\t\t\t\t\t\t\t\t\t.stringify(array[i][attributeKey], replacer)\n\t\t\t\t\t\t\t\t\t.slice(2, -2)\n\t\t\t\t\t\t\t\t\t.replace(/\",\"/g, ';')\n\t\t\t\t\t\t\t\t\t.replace(/\":\"/g, ':')\n\t\t\t\t\t\t\t\t\t.replace(/\\\\\"/g, '\\'')\n\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tarray[0].attr[attributeKey] = array[i][attributeKey]\n\t\t\t}\n\n\t\t\telse\n\t\t\t\tthrow new TypeError('\"' + array[i] + '\" is not allowed as a value.')\n\t\t}\n\n\n\t\tif (array[0] !== false) {\n\n\t\t\tHTMLString = '<' + array[0].tag\n\n\t\t\tfor (key in array[0].attr)\n\t\t\t\tif (array[0].attr.hasOwnProperty(key))\n\t\t\t\t\tHTMLString += ' ' + key + '=\"' +\n\t\t\t\t\t\tescapeAttribute(array[0].attr[key]) + '\"'\n\n\t\t\tHTMLString += '>'\n\n\t\t\tarray[0].children.forEach(function (child) {\n\t\t\t\tHTMLString += child\n\t\t\t})\n\n\t\t\tHTMLString += '</' + array[0].tag + '>'\n\n\t\t\tarray[0] = HTMLString\n\t\t}\n\n\t\t// Return root element on index 0\n\t\treturnObject[0] = array[0]\n\n\t\tif (callback)\n\t\t\tcallback(array[0])\n\n\t\t// returns object containing all elements with an id and the root element\n\t\treturn returnObject\n\t}\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\n\t/*!\n\t * escape-html\n\t * Copyright(c) 2012-2013 TJ Holowaychuk\n\t * Copyright(c) 2015 Andreas Lubbe\n\t * Copyright(c) 2015 Tiancheng \"Timothy\" Gu\n\t * MIT Licensed\n\t */\n\n\t'use strict';\n\n\t/**\n\t * Module variables.\n\t * @private\n\t */\n\n\tvar matchHtmlRegExp = /[\"'&<>]/;\n\n\t/**\n\t * Module exports.\n\t * @public\n\t */\n\n\tmodule.exports = escapeHtml;\n\n\t/**\n\t * Escape special characters in the given string of html.\n\t *\n\t * @param  {string} string The string to escape for inserting into HTML\n\t * @return {string}\n\t * @public\n\t */\n\n\tfunction escapeHtml(string) {\n\t  var str = '' + string;\n\t  var match = matchHtmlRegExp.exec(str);\n\n\t  if (!match) {\n\t    return str;\n\t  }\n\n\t  var escape;\n\t  var html = '';\n\t  var index = 0;\n\t  var lastIndex = 0;\n\n\t  for (index = match.index; index < str.length; index++) {\n\t    switch (str.charCodeAt(index)) {\n\t      case 34: // \"\n\t        escape = '&quot;';\n\t        break;\n\t      case 38: // &\n\t        escape = '&amp;';\n\t        break;\n\t      case 39: // '\n\t        escape = '&#39;';\n\t        break;\n\t      case 60: // <\n\t        escape = '&lt;';\n\t        break;\n\t      case 62: // >\n\t        escape = '&gt;';\n\t        break;\n\t      default:\n\t        continue;\n\t    }\n\n\t    if (lastIndex !== index) {\n\t      html += str.substring(lastIndex, index);\n\t    }\n\n\t    lastIndex = index + 1;\n\t    html += escape;\n\t  }\n\n\t  return lastIndex !== index\n\t    ? html + str.substring(lastIndex, index)\n\t    : html;\n\t}\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar DOM = __webpack_require__(9);\n\tvar utils = __webpack_require__(7);\n\n\tmodule.exports = (function() {\n\t    var canvas = DOM.newEl('canvas');\n\t    var ctx = null;\n\n\t    return function(sceneGraph) {\n\t        if (ctx == null) {\n\t            ctx = canvas.getContext('2d');\n\t        }\n\n\t        var dpr = utils.canvasRatio();\n\t        var root = sceneGraph.root;\n\t        canvas.width = dpr * root.properties.width;\n\t        canvas.height = dpr * root.properties.height ;\n\t        ctx.textBaseline = 'middle';\n\n\t        var bg = root.children.holderBg;\n\t        var bgWidth = dpr * bg.width;\n\t        var bgHeight = dpr * bg.height;\n\t        //todo: parametrize outline width (e.g. in scene object)\n\t        var outlineWidth = 2;\n\t        var outlineOffsetWidth = outlineWidth / 2;\n\n\t        ctx.fillStyle = bg.properties.fill;\n\t        ctx.fillRect(0, 0, bgWidth, bgHeight);\n\n\t        if (bg.properties.outline) {\n\t            //todo: abstract this into a method\n\t            ctx.strokeStyle = bg.properties.outline.fill;\n\t            ctx.lineWidth = bg.properties.outline.width;\n\t            ctx.moveTo(outlineOffsetWidth, outlineOffsetWidth);\n\t            // TL, TR, BR, BL\n\t            ctx.lineTo(bgWidth - outlineOffsetWidth, outlineOffsetWidth);\n\t            ctx.lineTo(bgWidth - outlineOffsetWidth, bgHeight - outlineOffsetWidth);\n\t            ctx.lineTo(outlineOffsetWidth, bgHeight - outlineOffsetWidth);\n\t            ctx.lineTo(outlineOffsetWidth, outlineOffsetWidth);\n\t            // Diagonals\n\t            ctx.moveTo(0, outlineOffsetWidth);\n\t            ctx.lineTo(bgWidth, bgHeight - outlineOffsetWidth);\n\t            ctx.moveTo(0, bgHeight - outlineOffsetWidth);\n\t            ctx.lineTo(bgWidth, outlineOffsetWidth);\n\t            ctx.stroke();\n\t        }\n\n\t        var textGroup = root.children.holderTextGroup;\n\t        ctx.font = textGroup.properties.font.weight + ' ' + (dpr * textGroup.properties.font.size) + textGroup.properties.font.units + ' ' + textGroup.properties.font.family + ', monospace';\n\t        ctx.fillStyle = textGroup.properties.fill;\n\n\t        for (var lineKey in textGroup.children) {\n\t            var line = textGroup.children[lineKey];\n\t            for (var wordKey in line.children) {\n\t                var word = line.children[wordKey];\n\t                var x = dpr * (textGroup.x + line.x + word.x);\n\t                var y = dpr * (textGroup.y + line.y + word.y + (textGroup.properties.leading / 2));\n\n\t                ctx.fillText(word.properties.text, x, y);\n\t            }\n\t        }\n\n\t        return canvas.toDataURL('image/png');\n\t    };\n\t})();\n\n/***/ })\n/******/ ])\n});\n;\n(function(ctx, isMeteorPackage) {\n    if (isMeteorPackage) {\n        Holder = ctx.Holder;\n    }\n})(this, typeof Meteor !== 'undefined' && typeof Package !== 'undefined');\n"},5:function(t,exports,n){"use strict";console.log("init: jquery-js");var jQuery=n(7);t.exports=jQuery},66:function(t,exports,n){"use strict";window.d3?console.debug("init: d3-js already loaded"):(console.info("init: d3-js"),window.d3=n(78)),t.exports=window.d3},78:function(n,exports,e){(function(t){n.exports=t.d3=e(86)}).call(this,e(22))},831:function(t,exports,n){"use strict";n(16),n(103);function e(){var l=!1,s="png";void 0!==window.onmsGraphContainers&&(s=window.onmsGraphContainers.engine),"backshift"!==s||i||(i=!0),c(".graph-container").each(function(t,n){var o=c(n),a=!1,e={resourceId:o.data("resource-id"),graphName:o.data("graph-name"),graphTitle:o.data("graph-title"),start:o.data("graph-start"),end:o.data("graph-end"),zooming:o.data("graph-zooming"),zoomable:o.data("graph-zoomable"),widthRatio:o.data("width-ratio"),heightRatio:o.data("height-ratio")};if(void 0!==e.resourceId&&null!==e.resourceId&&""!==e.resourceId&&void 0!==e.graphName&&null!==e.graphName&&""!==e.graphName){void 0!==e.end&&null!==e.end||(e.end=(new Date).getTime()),void 0!==e.start&&null!==e.start||(e.start=e.end-864e5),void 0!==e.widthRatio&&null!==e.widthRatio||(e.widthRatio=.8),void 0!==e.heightRatio&&null!==e.heightRatio||(e.heightRatio=.4);var r=function(t,n){var e=Math.round(t.width()*n.widthRatio);return{width:e,height:Math.round(e*n.heightRatio)}}(o,e),u=function(){"placeholder"===s?(function(t,n,e){var r=n.graphTitle;null==r?r=e.width+"x"+e.height:r+=" ("+e.width+"x"+e.height+")",t.html('<img class="graph-placeholder" data-src="holder.js/'+e.width+"x"+e.height+"?text="+r+'">')}(o,e,r),l=!0):"backshift"===s?function(r,i,o){c.ajax({url:window.onmsGraphContainers.baseHref+"rest/graphs/"+encodeURIComponent(i.graphName),dataType:"json"}).done(function(t){var n=new f.Utilities.RrdGraphConverter({graphDef:t,resourceId:i.resourceId}).model,e=new f.DataSource.OpenNMS({url:window.onmsGraphContainers.baseHref+"rest/measurements",metrics:n.metrics});new f.Graph.Flot({element:r[0],width:o.width,height:o.height,start:i.start,end:i.end,dataSource:e,model:n,printStatements:n.printStatements,title:n.title,verticalLabel:n.verticalLabel}).render()}).fail(function(t,n){var e="Request failed: "+n;r.html('<img class="graph-placeholder" data-src="holder.js/'+o.width+"x"+o.height+"?text="+e+'">')})}(o,e,r):function(t,n,e){var r={resourceId:n.resourceId,report:n.graphName,start:n.start,end:n.end,width:e.width,height:e.height},i=window.onmsGraphContainers.baseHref+"graph/graph.png?"+c.param(r),o=" (click to zoom)",a="";n.zooming&&(o=" (drag to zoom)",a='id="zoomImage"');var u="<img "+a+' class="graphImg" src="'+i+'" alt="Resource graph: '+n.graphTitle+o+'" />';if(n.zoomable&&!n.zooming){var l={zoom:!0,relativetime:"custom",resourceId:n.resourceId,reports:n.graphName,start:n.start,end:n.end};u='<a href="'+(window.onmsGraphContainers.baseHref+"graph/results.htm?"+c.param(l))+'">'+u+"</a>"}if(t.html(u),n.zooming){var s=c("#zoomImage");s.width(e.width),s.height(e.height)}}(o,e,r),a=!0,console.log("Rendered graph "+e.graphName),c(document).trigger("graphLoaded",[r.width,r.height])},i=function(){var t=$(window).scrollTop(),n=t+$(window).height(),e=o.offset().top,r=e+o.height(),i=o.parent().hasClass("ng-hide");t<=r&&e<=n&&!a&&!i&&u()};($(document).height()<=$(window).height()||t<=1)&&u(),$(window).scroll(function(){i()}),o.on("renderGraph",function(t){i(),t.stopPropagation()}),function(){function n(){var t=o.parent().hasClass("ng-hide");a||t||u()}window.matchMedia&&window.matchMedia("print").addListener(function(t){t.matches&&n()});window.onbeforeprint=n}()}}),l&&r.run({images:".graph-placeholder"})}var c=n(131),f=n(222),r=n(350),i=!1;c(function(){e()});var o={render:e};console.log("init: onms-graph"),t.exports=o,window.GraphContainers=o},86:function(sl,exports,cl){var fl,hl;!function(){var d3={version:"3.5.17"},i=[].slice,f=function(t){return i.call(t)},x=this.document;function u(t){return t&&(t.ownerDocument||t.document||t).documentElement}function D(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(x)try{f(x.documentElement.childNodes)[0].nodeType}catch(t){f=function(t){for(var n=t.length,e=new Array(n);n--;)e[n]=t[n];return e}}if(Date.now||(Date.now=function(){return+new Date}),x)try{x.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var n=this.Element.prototype,e=n.setAttribute,r=n.setAttributeNS,o=this.CSSStyleDeclaration.prototype,a=o.setProperty;n.setAttribute=function(t,n){e.call(this,t,n+"")},n.setAttributeNS=function(t,n,e){r.call(this,t,n,e+"")},o.setProperty=function(t,n,e){a.call(this,t,n+"",e)}}function l(t,n){return t<n?-1:n<t?1:n<=t?0:NaN}function s(t){return null===t?NaN:+t}function c(t){return!isNaN(t)}function t(o){return{left:function(t,n,e,r){for(arguments.length<3&&(e=0),arguments.length<4&&(r=t.length);e<r;){var i=e+r>>>1;o(t[i],n)<0?e=1+i:r=i}return e},right:function(t,n,e,r){for(arguments.length<3&&(e=0),arguments.length<4&&(r=t.length);e<r;){var i=e+r>>>1;0<o(t[i],n)?r=i:e=1+i}return e}}}d3.ascending=l,d3.descending=function(t,n){return n<t?-1:t<n?1:t<=n?0:NaN},d3.min=function(t,n){var e,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r<=r){e=r;break}for(;++i<o;)null!=(r=t[i])&&r<e&&(e=r)}else{for(;++i<o;)if(null!=(r=n.call(t,t[i],i))&&r<=r){e=r;break}for(;++i<o;)null!=(r=n.call(t,t[i],i))&&r<e&&(e=r)}return e},d3.max=function(t,n){var e,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r<=r){e=r;break}for(;++i<o;)null!=(r=t[i])&&e<r&&(e=r)}else{for(;++i<o;)if(null!=(r=n.call(t,t[i],i))&&r<=r){e=r;break}for(;++i<o;)null!=(r=n.call(t,t[i],i))&&e<r&&(e=r)}return e},d3.extent=function(t,n){var e,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=t[o])&&r<=r){e=i=r;break}for(;++o<a;)null!=(r=t[o])&&(r<e&&(e=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=n.call(t,t[o],o))&&r<=r){e=i=r;break}for(;++o<a;)null!=(r=n.call(t,t[o],o))&&(r<e&&(e=r),i<r&&(i=r))}return[e,i]},d3.sum=function(t,n){var e,r=0,i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)c(e=+t[o])&&(r+=e);else for(;++o<i;)c(e=+n.call(t,t[o],o))&&(r+=e);return r},d3.mean=function(t,n){var e,r=0,i=t.length,o=-1,a=i;if(1===arguments.length)for(;++o<i;)c(e=s(t[o]))?r+=e:--a;else for(;++o<i;)c(e=s(n.call(t,t[o],o)))?r+=e:--a;if(a)return r/a},d3.quantile=function(t,n){var e=(t.length-1)*n+1,r=Math.floor(e),i=+t[r-1],o=e-r;return o?i+o*(t[r]-i):i},d3.median=function(t,n){var e,r=[],i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)c(e=s(t[o]))&&r.push(e);else for(;++o<i;)c(e=s(n.call(t,t[o],o)))&&r.push(e);if(r.length)return d3.quantile(r.sort(l),.5)},d3.variance=function(t,n){var e,r,i=t.length,o=0,a=0,u=-1,l=0;if(1===arguments.length)for(;++u<i;)c(e=s(t[u]))&&(a+=(r=e-o)*(e-(o+=r/++l)));else for(;++u<i;)c(e=s(n.call(t,t[u],u)))&&(a+=(r=e-o)*(e-(o+=r/++l)));if(1<l)return a/(l-1)},d3.deviation=function(){var t=d3.variance.apply(this,arguments);return t?Math.sqrt(t):t};var h=t(l);function p(t){return t.length}d3.bisectLeft=h.left,d3.bisect=d3.bisectRight=h.right,d3.bisector=function(e){return t(1===e.length?function(t,n){return l(e(t),n)}:e)},d3.shuffle=function(t,n,e){(o=arguments.length)<3&&(e=t.length,o<2&&(n=0));for(var r,i,o=e-n;o;)i=Math.random()*o--|0,r=t[o+n],t[o+n]=t[i+n],t[i+n]=r;return t},d3.permute=function(t,n){for(var e=n.length,r=new Array(e);e--;)r[e]=t[n[e]];return r},d3.pairs=function(t){for(var n=0,e=t.length-1,r=t[0],i=new Array(e<0?0:e);n<e;)i[n]=[r,r=t[++n]];return i},d3.transpose=function(t){if(!(i=t.length))return[];for(var n=-1,e=d3.min(t,p),r=new Array(e);++n<e;)for(var i,o=-1,a=r[n]=new Array(i);++o<i;)a[o]=t[o][n];return r},d3.zip=function(){return d3.transpose(arguments)},d3.keys=function(t){var n=[];for(var e in t)n.push(e);return n},d3.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n},d3.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},d3.merge=function(t){for(var n,e,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(e=new Array(a);0<=--i;)for(n=(r=t[i]).length;0<=--n;)e[--a]=r[n];return e};var O=Math.abs;function d(t,n){for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}function y(){this._=Object.create(null)}d3.range=function(t,n,e){if(arguments.length<3&&(e=1,arguments.length<2&&(n=t,t=0)),(n-t)/e==1/0)throw new Error("infinite range");var r,i=[],o=function(t){var n=1;for(;t*n%1;)n*=10;return n}(O(e)),a=-1;if(t*=o,n*=o,(e*=o)<0)for(;(r=t+e*++a)>n;)i.push(r/o);else for(;(r=t+e*++a)<n;)i.push(r/o);return i},d3.map=function(t,n){var e=new y;if(t instanceof y)t.forEach(function(t,n){e.set(t,n)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n.call(t,r=t[i],i),r)}else for(var a in t)e.set(a,t[a]);return e};var g="__proto__",v="\0";function m(t){return(t+="")===g||t[0]===v?v+t:t}function b(t){return(t+="")[0]===v?t.slice(1):t}function w(t){return m(t)in this._}function M(t){return(t=m(t))in this._&&delete this._[t]}function S(){var t=[];for(var n in this._)t.push(b(n));return t}function _(){var t=0;for(var n in this._)++t;return t}function k(){for(var t in this._)return!1;return!0}function A(){this._=Object.create(null)}function j(t){return t}function C(n,e,r){return function(){var t=r.apply(e,arguments);return t===e?n:t}}function E(t,n){if(n in t)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var e=0,r=T.length;e<r;++e){var i=T[e]+n;if(i in t)return i}}d(y,{has:w,get:function(t){return this._[m(t)]},set:function(t,n){return this._[m(t)]=n},remove:M,keys:S,values:function(){var t=[];for(var n in this._)t.push(this._[n]);return t},entries:function(){var t=[];for(var n in this._)t.push({key:b(n),value:this._[n]});return t},size:_,empty:k,forEach:function(t){for(var n in this._)t.call(this,b(n),this._[n])}}),d3.nest=function(){var f,h,p={},d=[],n=[];function g(e,t,r){if(r>=d.length)return h?h.call(p,t):f?t.sort(f):t;for(var n,i,o,a,u=-1,l=t.length,s=d[r++],c=new y;++u<l;)(a=c.get(n=s(i=t[u])))?a.push(i):c.set(n,[i]);return o=e?(i=e(),function(t,n){i.set(t,g(e,n,r))}):(i={},function(t,n){i[t]=g(e,n,r)}),c.forEach(o),i}return p.map=function(t,n){return g(n,t,0)},p.entries=function(t){return function e(t,r){if(r>=d.length)return t;var i=[],o=n[r++];return t.forEach(function(t,n){i.push({key:t,values:e(n,r)})}),o?i.sort(function(t,n){return o(t.key,n.key)}):i}(g(d3.map,t,0),0)},p.key=function(t){return d.push(t),p},p.sortKeys=function(t){return n[d.length-1]=t,p},p.sortValues=function(t){return f=t,p},p.rollup=function(t){return h=t,p},p},d3.set=function(t){var n=new A;if(t)for(var e=0,r=t.length;e<r;++e)n.add(t[e]);return n},d(A,{has:w,add:function(t){return this._[m(t+="")]=!0,t},remove:M,values:S,size:_,empty:k,forEach:function(t){for(var n in this._)t.call(this,b(n))}}),d3.behavior={},d3.rebind=function(t,n){for(var e,r=1,i=arguments.length;++r<i;)t[e=arguments[r]]=C(t,n,n[e]);return t};var T=["webkit","ms","moz","Moz","o","O"];function N(){}function L(){}function R(i){var o=[],a=new y;function t(){for(var t,n=o,e=-1,r=n.length;++e<r;)(t=n[e].on)&&t.apply(this,arguments);return i}return t.on=function(t,n){var e,r=a.get(t);return arguments.length<2?r&&r.on:(r&&(r.on=null,o=o.slice(0,e=o.indexOf(r)).concat(o.slice(e+1)),a.remove(t)),n&&o.push(a.set(t,{on:n})),i)},t}function z(){d3.event.preventDefault()}function I(){for(var t,n=d3.event;t=n.sourceEvent;)n=t;return n}function q(i){for(var o=new L,t=0,n=arguments.length;++t<n;)o[arguments[t]]=R(o);return o.of=function(e,r){return function(t){try{var n=t.sourceEvent=d3.event;t.target=i,d3.event=t,o[t.type].apply(e,r)}finally{d3.event=n}}},o}d3.dispatch=function(){for(var t=new L,n=-1,e=arguments.length;++n<e;)t[arguments[n]]=R(t);return t},L.prototype.on=function(t,n){var e=t.indexOf("."),r="";if(0<=e&&(r=t.slice(e+1),t=t.slice(0,e)),t)return arguments.length<2?this[t].on(r):this[t].on(r,n);if(2===arguments.length){if(null==n)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},d3.event=null,d3.requote=function(t){return t.replace(H,"\\$&")};var H=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,P={}.__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)t[e]=n[e]};function F(t){return P(t,W),t}var G=function(t,n){return n.querySelector(t)},U=function(t,n){return n.querySelectorAll(t)},B=function(t,n){var e=t.matches||t[E(t,"matchesSelector")];return(B=function(t,n){return e.call(t,n)})(t,n)};"function"==typeof Sizzle&&(G=function(t,n){return Sizzle(t,n)[0]||null},U=Sizzle,B=Sizzle.matchesSelector),d3.selection=function(){return d3.select(x.documentElement)};var W=d3.selection.prototype=[];function V(t){return"function"==typeof t?t:function(){return G(t,this)}}function Y(t){return"function"==typeof t?t:function(){return U(t,this)}}W.select=function(t){var n,e,r,i,o=[];t=V(t);for(var a=-1,u=this.length;++a<u;){o.push(n=[]),n.parentNode=(r=this[a]).parentNode;for(var l=-1,s=r.length;++l<s;)(i=r[l])?(n.push(e=t.call(i,i.__data__,l,a)),e&&"__data__"in i&&(e.__data__=i.__data__)):n.push(null)}return F(o)},W.selectAll=function(t){var n,e,r=[];t=Y(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],u=-1,l=a.length;++u<l;)(e=a[u])&&(r.push(n=f(t.call(e,e.__data__,u,i))),n.parentNode=e);return F(r)};var K="http://www.w3.org/1999/xhtml",X={svg:"http://www.w3.org/2000/svg",xhtml:K,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Z(n,e){return n=d3.ns.qualify(n),null==e?n.local?function(){this.removeAttributeNS(n.space,n.local)}:function(){this.removeAttribute(n)}:"function"==typeof e?n.local?function(){var t=e.apply(this,arguments);null==t?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}:function(){var t=e.apply(this,arguments);null==t?this.removeAttribute(n):this.setAttribute(n,t)}:n.local?function(){this.setAttributeNS(n.space,n.local,e)}:function(){this.setAttribute(n,e)}}function J(t){return t.trim().replace(/\s+/g," ")}function Q(t){return new RegExp("(?:^|\\s+)"+d3.requote(t)+"(?:\\s+|$)","g")}function tt(t){return(t+"").trim().split(/^|\s+/)}function nt(e,r){var i=(e=tt(e).map(et)).length;return"function"==typeof r?function(){for(var t=-1,n=r.apply(this,arguments);++t<i;)e[t](this,n)}:function(){for(var t=-1;++t<i;)e[t](this,r)}}function et(r){var i=Q(r);return function(t,n){if(e=t.classList)return n?e.add(r):e.remove(r);var e=t.getAttribute("class")||"";n?(i.lastIndex=0,i.test(e)||t.setAttribute("class",J(e+" "+r))):t.setAttribute("class",J(e.replace(i," ")))}}function rt(n,e,r){return null==e?function(){this.style.removeProperty(n)}:"function"==typeof e?function(){var t=e.apply(this,arguments);null==t?this.style.removeProperty(n):this.style.setProperty(n,t,r)}:function(){this.style.setProperty(n,e,r)}}function it(n,e){return null==e?function(){delete this[n]}:"function"==typeof e?function(){var t=e.apply(this,arguments);null==t?delete this[n]:this[n]=t}:function(){this[n]=e}}function ot(e){return"function"==typeof e?e:(e=d3.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return n===K&&t.documentElement.namespaceURI===K?t.createElement(e):t.createElementNS(n,e)}}function at(){var t=this.parentNode;t&&t.removeChild(this)}function ut(t){return{__data__:t}}function lt(t){return function(){return B(this,t)}}function st(t,n){for(var e=0,r=t.length;e<r;e++)for(var i,o=t[e],a=0,u=o.length;a<u;a++)(i=o[a])&&n(i,a,e);return t}function ct(t){return P(t,ft),t}d3.ns={prefix:X,qualify:function(t){var n=t.indexOf(":"),e=t;return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),X.hasOwnProperty(e)?{space:X[e],local:t}:t}},W.attr=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node();return(t=d3.ns.qualify(t)).local?e.getAttributeNS(t.space,t.local):e.getAttribute(t)}for(n in t)this.each(Z(n,t[n]));return this}return this.each(Z(t,n))},W.classed=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node(),r=(t=tt(t)).length,i=-1;if(n=e.classList){for(;++i<r;)if(!n.contains(t[i]))return!1}else for(n=e.getAttribute("class");++i<r;)if(!Q(t[i]).test(n))return!1;return!0}for(n in t)this.each(nt(n,t[n]));return this}return this.each(nt(t,n))},W.style=function(t,n,e){var r=arguments.length;if(r<3){if("string"!=typeof t){for(e in r<2&&(n=""),t)this.each(rt(e,t[e],n));return this}if(r<2){var i=this.node();return D(i).getComputedStyle(i,null).getPropertyValue(t)}e=""}return this.each(rt(t,n,e))},W.property=function(t,n){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(n in t)this.each(it(n,t[n]));return this}return this.each(it(t,n))},W.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},W.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},W.append=function(t){return t=ot(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},W.insert=function(t,n){return t=ot(t),n=V(n),this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})},W.remove=function(){return this.each(at)},W.data=function(t,d){var n,e,r=-1,i=this.length;if(!arguments.length){for(t=new Array(i=(n=this[0]).length);++r<i;)(e=n[r])&&(t[r]=e.__data__);return t}function o(t,n){var e,r,i,o=t.length,a=n.length,u=Math.min(o,a),l=new Array(a),s=new Array(a),c=new Array(o);if(d){var f,h=new y,p=new Array(o);for(e=-1;++e<o;)(r=t[e])&&(h.has(f=d.call(r,r.__data__,e))?c[e]=r:h.set(f,r),p[e]=f);for(e=-1;++e<a;)(r=h.get(f=d.call(n,i=n[e],e)))?!0!==r&&((l[e]=r).__data__=i):s[e]=ut(i),h.set(f,!0);for(e=-1;++e<o;)e in p&&!0!==h.get(p[e])&&(c[e]=t[e])}else{for(e=-1;++e<u;)r=t[e],i=n[e],r?(r.__data__=i,l[e]=r):s[e]=ut(i);for(;e<a;++e)s[e]=ut(n[e]);for(;e<o;++e)c[e]=t[e]}s.update=l,s.parentNode=l.parentNode=c.parentNode=t.parentNode,g.push(s),v.push(l),m.push(c)}var g=ct([]),v=F([]),m=F([]);if("function"==typeof t)for(;++r<i;)o(n=this[r],t.call(n,n.parentNode.__data__,r));else for(;++r<i;)o(n=this[r],t);return v.enter=function(){return g},v.exit=function(){return m},v},W.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},W.filter=function(t){var n,e,r,i=[];"function"!=typeof t&&(t=lt(t));for(var o=0,a=this.length;o<a;o++){i.push(n=[]),n.parentNode=(e=this[o]).parentNode;for(var u=0,l=e.length;u<l;u++)(r=e[u])&&t.call(r,r.__data__,u,o)&&n.push(r)}return F(i)},W.order=function(){for(var t=-1,n=this.length;++t<n;)for(var e,r=this[t],i=r.length-1,o=r[i];0<=--i;)(e=r[i])&&(o&&o!==e.nextSibling&&o.parentNode.insertBefore(e,o),o=e);return this},W.sort=function(t){t=function(e){arguments.length||(e=l);return function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}.apply(this,arguments);for(var n=-1,e=this.length;++n<e;)this[n].sort(t);return this.order()},W.each=function(r){return st(this,function(t,n,e){r.call(t,t.__data__,n,e)})},W.call=function(t){var n=f(arguments);return t.apply(n[0]=this,n),this},W.empty=function(){return!this.node()},W.node=function(){for(var t=0,n=this.length;t<n;t++)for(var e=this[t],r=0,i=e.length;r<i;r++){var o=e[r];if(o)return o}return null},W.size=function(){var t=0;return st(this,function(){++t}),t};var ft=[];function ht(i,n,e){var r="__on"+i,t=i.indexOf("."),o=dt;0<t&&(i=i.slice(0,t));var a=pt.get(i);function u(){var t=this[r];t&&(this.removeEventListener(i,t,t.$),delete this[r])}return a&&(i=a,o=gt),t?n?function(){var t=o(n,f(arguments));u.call(this),this.addEventListener(i,this[r]=t,t.$=e),t._=n}:u:n?N:function(){var t,n=new RegExp("^__on([^.]+)"+d3.requote(i)+"$");for(var e in this)if(t=e.match(n)){var r=this[e];this.removeEventListener(t[1],r,r.$),delete this[e]}}}d3.selection.enter=ct,(d3.selection.enter.prototype=ft).append=W.append,ft.empty=W.empty,ft.node=W.node,ft.call=W.call,ft.size=W.size,ft.select=function(t){for(var n,e,r,i,o,a=[],u=-1,l=this.length;++u<l;){r=(i=this[u]).update,a.push(n=[]),n.parentNode=i.parentNode;for(var s=-1,c=i.length;++s<c;)(o=i[s])?(n.push(r[s]=e=t.call(i.parentNode,o.__data__,s,u)),e.__data__=o.__data__):n.push(null)}return F(a)},ft.insert=function(t,n){return arguments.length<2&&(n=function(a){var u,l;return function(t,n,e){var r,i=a[e].update,o=i.length;for(e!=l&&(l=e,u=0),u<=n&&(u=n+1);!(r=i[u])&&++u<o;);return r}}(this)),W.insert.call(this,t,n)},d3.select=function(t){var n;return"string"==typeof t?(n=[G(t,x)]).parentNode=x.documentElement:(n=[t]).parentNode=u(t),F([n])},d3.selectAll=function(t){var n;return"string"==typeof t?(n=f(U(t,x))).parentNode=x.documentElement:(n=f(t)).parentNode=null,F([n])},W.on=function(t,n,e){var r=arguments.length;if(r<3){if("string"!=typeof t){for(e in r<2&&(n=!1),t)this.each(ht(e,t[e],n));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;e=!1}return this.each(ht(t,n,e))};var pt=d3.map({mouseenter:"mouseover",mouseleave:"mouseout"});function dt(e,r){return function(t){var n=d3.event;d3.event=t,r[0]=this.__data__;try{e.apply(this,r)}finally{d3.event=n}}}function gt(t,n){var e=dt(t,n);return function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}x&&pt.forEach(function(t){"on"+t in x&&pt.remove(t)});var vt,mt=0;function yt(t){var e=".dragsuppress-"+ ++mt,r="click"+e,i=d3.select(D(t)).on("touchmove"+e,z).on("dragstart"+e,z).on("selectstart"+e,z);if(null==vt&&(vt=!("onselectstart"in t)&&E(t.style,"userSelect")),vt){var o=u(t).style,a=o[vt];o[vt]="none"}return function(t){if(i.on(e,null),vt&&(o[vt]=a),t){function n(){i.on(r,null)}i.on(r,function(){z(),n()},!0),setTimeout(n,0)}}}d3.mouse=function(t){return bt(t,I())};var xt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function bt(t,n){n.changedTouches&&(n=n.changedTouches[0]);var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();if(xt<0){var i=D(t);if(i.scrollX||i.scrollY){var o=(e=d3.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();xt=!(o.f||o.e),e.remove()}}return xt?(r.x=n.pageX,r.y=n.pageY):(r.x=n.clientX,r.y=n.clientY),[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var a=t.getBoundingClientRect();return[n.clientX-a.left-t.clientLeft,n.clientY-a.top-t.clientTop]}function wt(){return d3.event.changedTouches[0].identifier}d3.touch=function(t,n,e){if(arguments.length<3&&(e=n,n=I().changedTouches),n)for(var r,i=0,o=n.length;i<o;++i)if((r=n[i]).identifier===e)return bt(t,r)},d3.behavior.drag=function(){var g=q(e,"drag","dragstart","dragend"),v=null,t=r(N,d3.mouse,D,"mousemove","mouseup"),n=r(wt,d3.touch,j,"touchmove","touchend");function e(){this.on("mousedown.drag",t).on("touchstart.drag",n)}function r(c,f,h,p,d){return function(){var r,t=d3.event.target.correspondingElement||d3.event.target,i=this.parentNode,o=g.of(this,arguments),a=0,u=c(),n=".drag"+(null==u?"":"-"+u),e=d3.select(h(t)).on(p+n,function(){var t,n,e=f(i,u);if(!e)return;t=e[0]-s[0],n=e[1]-s[1],a|=t|n,o({type:"drag",x:(s=e)[0]+r[0],y:e[1]+r[1],dx:t,dy:n})}).on(d+n,function(){if(!f(i,u))return;e.on(p+n,null).on(d+n,null),l(a),o({type:"dragend"})}),l=yt(t),s=f(i,u);r=v?[(r=v.apply(this,arguments)).x-s[0],r.y-s[1]]:[0,0],o({type:"dragstart"})}}return e.origin=function(t){return arguments.length?(v=t,e):v},d3.rebind(e,g,"on")},d3.touches=function(e,t){return arguments.length<2&&(t=I().touches),t?f(t).map(function(t){var n=bt(e,t);return n.identifier=t.identifier,n}):[]};var Mt=1e-6,St=Mt*Mt,_t=Math.PI,kt=2*_t,At=kt-Mt,Ct=_t/2,Et=_t/180,Tt=180/_t;function Nt(t){return 0<t?1:t<0?-1:0}function Lt(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function Rt(t){return 1<t?0:t<-1?_t:Math.acos(t)}function Ot(t){return 1<t?Ct:t<-1?-Ct:Math.asin(t)}function Dt(t){return((t=Math.exp(t))+1/t)/2}function jt(t){return(t=Math.sin(t/2))*t}var zt=Math.SQRT2;d3.interpolateZoom=function(t,n){var e,i,o=t[0],a=t[1],u=t[2],r=n[0],l=n[1],s=n[2],c=r-o,f=l-a,h=c*c+f*f;if(h<St)i=Math.log(s/u)/zt,e=function(t){return[o+t*c,a+t*f,u*Math.exp(zt*t*i)]};else{var p=Math.sqrt(h),d=(s*s-u*u+4*h)/(2*u*2*p),g=(s*s-u*u-4*h)/(2*s*2*p),v=Math.log(Math.sqrt(d*d+1)-d),m=Math.log(Math.sqrt(g*g+1)-g);i=(m-v)/zt,e=function(t){var n=t*i,e=Dt(v),r=u/(2*p)*(e*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(zt*n+v)-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[o+r*c,a+r*f,u*e/Dt(zt*n+v)]}}return e.duration=1e3*i,e},d3.behavior.zoom=function(){var n,l,e,r,b,i,o,a,u,w={x:0,y:0,k:1},s=[960,500],c=Ht,f=250,h=0,M="mousedown.zoom",p="mousemove.zoom",d="mouseup.zoom",S="touchstart.zoom",_=q(g,"zoomstart","zoom","zoomend");function g(t){t.on(M,R).on(qt+".zoom",m).on("dblclick.zoom",y).on(S,O)}function k(t){return[(t[0]-w.x)/w.k,(t[1]-w.y)/w.k]}function A(t){w.k=Math.max(c[0],Math.min(c[1],t))}function C(t,n){n=function(t){return[t[0]*w.k+w.x,t[1]*w.k+w.y]}(n),w.x+=t[0]-n[0],w.y+=t[1]-n[1]}function E(t,n,e,r){t.__chart__={x:w.x,y:w.y,k:w.k},A(Math.pow(2,r)),C(l=n,e),t=d3.select(t),0<f&&(t=t.transition().duration(f)),t.call(g.event)}function v(){o&&o.domain(i.range().map(function(t){return(t-w.x)/w.k}).map(i.invert)),u&&u.domain(a.range().map(function(t){return(t-w.y)/w.k}).map(a.invert))}function T(t){h++||t({type:"zoomstart"})}function N(t){v(),t({type:"zoom",scale:w.k,translate:[w.x,w.y]})}function L(t){--h||(t({type:"zoomend"}),l=null)}function R(){var t=this,n=_.of(t,arguments),e=0,r=d3.select(D(t)).on(p,function(){e=1,C(d3.mouse(t),i),N(n)}).on(d,function(){r.on(p,null).on(d,null),o(e),L(n)}),i=k(d3.mouse(t)),o=yt(t);Ru.call(t),T(n)}function O(){var s,c=this,f=_.of(c,arguments),h={},p=0,i=".zoom-"+d3.event.changedTouches[0].identifier,d="touchmove"+i,g="touchend"+i,v=[],o=d3.select(c),a=yt(c);function m(){var t=d3.touches(c);return s=w.k,t.forEach(function(t){t.identifier in h&&(h[t.identifier]=k(t))}),t}function t(){var t=d3.event.target;d3.select(t).on(d,y).on(g,x),v.push(t);for(var n=d3.event.changedTouches,e=0,r=n.length;e<r;++e)h[n[e].identifier]=null;var i=m(),o=Date.now();if(1===i.length){if(o-b<500){var a=i[0];E(c,a,h[a.identifier],Math.floor(Math.log(w.k)/Math.LN2)+1),z()}b=o}else if(1<i.length){a=i[0];var u=i[1],l=a[0]-u[0],s=a[1]-u[1];p=l*l+s*s}}function y(){var t,n,e,r,i=d3.touches(c);Ru.call(c);for(var o=0,a=i.length;o<a;++o,r=null)if(e=i[o],r=h[e.identifier]){if(n)break;t=e,n=r}if(r){var u=(u=e[0]-t[0])*u+(u=e[1]-t[1])*u,l=p&&Math.sqrt(u/p);t=[(t[0]+e[0])/2,(t[1]+e[1])/2],n=[(n[0]+r[0])/2,(n[1]+r[1])/2],A(l*s)}b=null,C(t,n),N(f)}function x(){if(d3.event.touches.length){for(var t=d3.event.changedTouches,n=0,e=t.length;n<e;++n)delete h[t[n].identifier];for(var r in h)return void m()}d3.selectAll(v).on(i,null),o.on(M,R).on(S,O),a(),L(f)}t(),T(f),o.on(M,null).on(S,t)}function m(){var t=_.of(this,arguments);r?clearTimeout(r):(Ru.call(this),n=k(l=e||d3.mouse(this)),T(t)),r=setTimeout(function(){r=null,L(t)},50),z(),A(Math.pow(2,.002*It())*w.k),C(l,n),N(t)}function y(){var t=d3.mouse(this),n=Math.log(w.k)/Math.LN2;E(this,t,k(t),d3.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return qt=qt||("onwheel"in x?(It=function(){return-d3.event.deltaY*(d3.event.deltaMode?120:1)},"wheel"):"onmousewheel"in x?(It=function(){return d3.event.wheelDelta},"mousewheel"):(It=function(){return-d3.event.detail},"MozMousePixelScroll")),g.event=function(t){t.each(function(){var u=_.of(this,arguments),n=w;ju?d3.select(this).transition().each("start.zoom",function(){w=this.__chart__||{x:0,y:0,k:1},T(u)}).tween("zoom:zoom",function(){var r=s[0],t=s[1],i=l?l[0]:r/2,o=l?l[1]:t/2,a=d3.interpolateZoom([(i-w.x)/w.k,(o-w.y)/w.k,r/w.k],[(i-n.x)/n.k,(o-n.y)/n.k,r/n.k]);return function(t){var n=a(t),e=r/n[2];this.__chart__=w={x:i-n[0]*e,y:o-n[1]*e,k:e},N(u)}}).each("interrupt.zoom",function(){L(u)}).each("end.zoom",function(){L(u)}):(this.__chart__=w,T(u),N(u),L(u))})},g.translate=function(t){return arguments.length?(w={x:+t[0],y:+t[1],k:w.k},v(),g):[w.x,w.y]},g.scale=function(t){return arguments.length?(w={x:w.x,y:w.y,k:null},A(+t),v(),g):w.k},g.scaleExtent=function(t){return arguments.length?(c=null==t?Ht:[+t[0],+t[1]],g):c},g.center=function(t){return arguments.length?(e=t&&[+t[0],+t[1]],g):e},g.size=function(t){return arguments.length?(s=t&&[+t[0],+t[1]],g):s},g.duration=function(t){return arguments.length?(f=+t,g):f},g.x=function(t){return arguments.length?(i=(o=t).copy(),w={x:0,y:0,k:1},g):o},g.y=function(t){return arguments.length?(a=(u=t).copy(),w={x:0,y:0,k:1},g):u},d3.rebind(g,_,"on")};var It,qt,Ht=[0,1/0];function Pt(){}function Ft(t,n,e){return this instanceof Ft?(this.h=+t,this.s=+n,void(this.l=+e)):arguments.length<2?t instanceof Ft?new Ft(t.h,t.s,t.l):cn(""+t,fn,Ft):new Ft(t,n,e)}(d3.color=Pt).prototype.toString=function(){return this.rgb()+""};var Gt=(d3.hsl=Ft).prototype=new Pt;function Ut(t,n,e){var r,i;function o(t){return Math.round(255*function(t){return 360<t?t-=360:t<0&&(t+=360),t<60?r+(i-r)*t/60:t<180?i:t<240?r+(i-r)*(240-t)/60:r}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,n=isNaN(n)?0:n<0?0:1<n?1:n,r=2*(e=e<0?0:1<e?1:e)-(i=e<=.5?e*(1+n):e+n-e*n),new on(o(t+120),o(t),o(t-120))}function Bt(t,n,e){return this instanceof Bt?(this.h=+t,this.c=+n,void(this.l=+e)):arguments.length<2?t instanceof Bt?new Bt(t.h,t.c,t.l):tn(t instanceof Yt?t.l:(t=hn((t=d3.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Bt(t,n,e)}Gt.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Ft(this.h,this.s,this.l/t)},Gt.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Ft(this.h,this.s,t*this.l)},Gt.rgb=function(){return Ut(this.h,this.s,this.l)};var Wt=(d3.hcl=Bt).prototype=new Pt;function Vt(t,n,e){return isNaN(t)&&(t=0),isNaN(n)&&(n=0),new Yt(e,Math.cos(t*=Et)*n,Math.sin(t)*n)}function Yt(t,n,e){return this instanceof Yt?(this.l=+t,this.a=+n,void(this.b=+e)):arguments.length<2?t instanceof Yt?new Yt(t.l,t.a,t.b):t instanceof Bt?Vt(t.h,t.c,t.l):hn((t=on(t)).r,t.g,t.b):new Yt(t,n,e)}Wt.brighter=function(t){return new Bt(this.h,this.c,Math.min(100,this.l+Kt*(arguments.length?t:1)))},Wt.darker=function(t){return new Bt(this.h,this.c,Math.max(0,this.l-Kt*(arguments.length?t:1)))},Wt.rgb=function(){return Vt(this.h,this.c,this.l).rgb()},d3.lab=Yt;var Kt=18,Xt=.95047,$t=1,Zt=1.08883,Jt=Yt.prototype=new Pt;function Qt(t,n,e){var r=(t+16)/116,i=r+n/500,o=r-e/200;return new on(rn(3.2404542*(i=nn(i)*Xt)-1.5371385*(r=nn(r)*$t)-.4985314*(o=nn(o)*Zt)),rn(-.969266*i+1.8760108*r+.041556*o),rn(.0556434*i-.2040259*r+1.0572252*o))}function tn(t,n,e){return 0<t?new Bt(Math.atan2(e,n)*Tt,Math.sqrt(n*n+e*e),t):new Bt(NaN,NaN,t)}function nn(t){return.206893034<t?t*t*t:(t-4/29)/7.787037}function en(t){return.008856<t?Math.pow(t,1/3):7.787037*t+4/29}function rn(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function on(t,n,e){return this instanceof on?(this.r=~~t,this.g=~~n,void(this.b=~~e)):arguments.length<2?t instanceof on?new on(t.r,t.g,t.b):cn(""+t,on,Ut):new on(t,n,e)}function an(t){return new on(t>>16,t>>8&255,255&t)}function un(t){return an(t)+""}Jt.brighter=function(t){return new Yt(Math.min(100,this.l+Kt*(arguments.length?t:1)),this.a,this.b)},Jt.darker=function(t){return new Yt(Math.max(0,this.l-Kt*(arguments.length?t:1)),this.a,this.b)},Jt.rgb=function(){return Qt(this.l,this.a,this.b)};var ln=(d3.rgb=on).prototype=new Pt;function sn(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function cn(t,n,e){var r,i,o,a=0,u=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return e(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return n(dn(i[0]),dn(i[1]),dn(i[2]))}return(o=gn.get(t))?n(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a|=a>>4,u=240&o,u|=u>>4,l=15&o,l|=l<<4):7===t.length&&(a=(16711680&o)>>16,u=(65280&o)>>8,l=255&o)),n(a,u,l))}function fn(t,n,e){var r,i,o=Math.min(t/=255,n/=255,e/=255),a=Math.max(t,n,e),u=a-o,l=(a+o)/2;return u?(i=l<.5?u/(a+o):u/(2-a-o),r=t==a?(n-e)/u+(n<e?6:0):n==a?(e-t)/u+2:(t-n)/u+4,r*=60):(r=NaN,i=0<l&&l<1?0:r),new Ft(r,i,l)}function hn(t,n,e){var r=en((.4124564*(t=pn(t))+.3575761*(n=pn(n))+.1804375*(e=pn(e)))/Xt),i=en((.2126729*t+.7151522*n+.072175*e)/$t);return Yt(116*i-16,500*(r-i),200*(i-en((.0193339*t+.119192*n+.9503041*e)/Zt)))}function pn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function dn(t){var n=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*n):n}ln.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var n=this.r,e=this.g,r=this.b;return n||e||r?(n&&n<30&&(n=30),e&&e<30&&(e=30),r&&r<30&&(r=30),new on(Math.min(255,n/t),Math.min(255,e/t),Math.min(255,r/t))):new on(30,30,30)},ln.darker=function(t){return new on((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},ln.hsl=function(){return fn(this.r,this.g,this.b)},ln.toString=function(){return"#"+sn(this.r)+sn(this.g)+sn(this.b)};var gn=d3.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function vn(t){return"function"==typeof t?t:function(){return t}}function mn(r){return function(t,n,e){return 2===arguments.length&&"function"==typeof n&&(e=n,n=null),yn(t,n,r,e)}}function yn(i,o,e,t){var a={},u=d3.dispatch("beforesend","progress","load","error"),l={},s=new XMLHttpRequest,c=null;function n(){var t,n=s.status;if(!n&&function(t){var n=t.responseType;return n&&"text"!==n?t.response:t.responseText}(s)||200<=n&&n<300||304===n){try{t=e.call(a,s)}catch(t){return void u.error.call(a,t)}u.load.call(a,t)}else u.error.call(a,s)}return!this.XDomainRequest||"withCredentials"in s||!/^(http(s)?:)?\/\//.test(i)||(s=new XDomainRequest),"onload"in s?s.onload=s.onerror=n:s.onreadystatechange=function(){3<s.readyState&&n()},s.onprogress=function(t){var n=d3.event;d3.event=t;try{u.progress.call(a,s)}finally{d3.event=n}},a.header=function(t,n){return t=(t+"").toLowerCase(),arguments.length<2?l[t]:(null==n?delete l[t]:l[t]=n+"",a)},a.mimeType=function(t){return arguments.length?(o=null==t?null:t+"",a):o},a.responseType=function(t){return arguments.length?(c=t,a):c},a.response=function(t){return e=t,a},["get","post"].forEach(function(t){a[t]=function(){return a.send.apply(a,[t].concat(f(arguments)))}}),a.send=function(t,n,e){if(2===arguments.length&&"function"==typeof n&&(e=n,n=null),s.open(t,i,!0),null==o||"accept"in l||(l.accept=o+",*/*"),s.setRequestHeader)for(var r in l)s.setRequestHeader(r,l[r]);return null!=o&&s.overrideMimeType&&s.overrideMimeType(o),null!=c&&(s.responseType=c),null!=e&&a.on("error",e).on("load",function(t){e(null,t)}),u.beforesend.call(a,s),s.send(null==n?null:n),a},a.abort=function(){return s.abort(),a},d3.rebind(a,u,"on"),null==t?a:a.get(function(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}(t))}gn.forEach(function(t,n){gn.set(t,an(n))}),d3.functor=vn,d3.xhr=mn(j),d3.dsv=function(i,o){var n=new RegExp('["'+i+"\n]"),h=i.charCodeAt(0);function a(t,n,e){arguments.length<3&&(e=n,n=null);var r=yn(t,o,null==n?u:l(n),e);return r.row=function(t){return arguments.length?r.response(null==(n=t)?u:l(t)):n},r}function u(t){return a.parse(t.responseText)}function l(n){return function(t){return a.parse(t.responseText,n)}}function e(t){return t.map(s).join(i)}function s(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return a.parse=function(t,r){var i;return a.parseRows(t,function(t,n){if(i)return i(t,n-1);var e=new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}");i=r?function(t,n){return r(e(t),n)}:e})},a.parseRows=function(i,t){var n,o,a={},u={},e=[],l=i.length,s=0,r=0;function c(){if(l<=s)return u;if(o)return o=!1,a;var t=s;if(34===i.charCodeAt(t)){for(var n=t;n++<l;)if(34===i.charCodeAt(n)){if(34!==i.charCodeAt(n+1))break;++n}return s=n+2,13===(e=i.charCodeAt(n+1))?(o=!0,10===i.charCodeAt(n+2)&&++s):10===e&&(o=!0),i.slice(t+1,n).replace(/""/g,'"')}for(;s<l;){var e,r=1;if(10===(e=i.charCodeAt(s++)))o=!0;else if(13===e)o=!0,10===i.charCodeAt(s)&&(++s,++r);else if(e!==h)continue;return i.slice(t,s-r)}return i.slice(t)}for(;(n=c())!==u;){for(var f=[];n!==a&&n!==u;)f.push(n),n=c();t&&null==(f=t(f,r++))||e.push(f)}return e},a.format=function(t){if(Array.isArray(t[0]))return a.formatRows(t);var e=new A,r=[];return t.forEach(function(t){for(var n in t)e.has(n)||r.push(e.add(n))}),[r.map(s).join(i)].concat(t.map(function(n){return r.map(function(t){return s(n[t])}).join(i)})).join("\n")},a.formatRows=function(t){return t.map(e).join("\n")},a},d3.csv=d3.dsv(",","text/csv"),d3.tsv=d3.dsv("\t","text/tab-separated-values");var xn,bn,wn,Mn,Sn=this[E(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function _n(t,n,e){var r=arguments.length;r<2&&(n=0),r<3&&(e=Date.now());var i={c:t,t:e+n,n:null};return bn?bn.n=i:xn=i,bn=i,wn||(Mn=clearTimeout(Mn),wn=1,Sn(kn)),i}function kn(){var t=An(),n=Cn()-t;24<n?(isFinite(n)&&(clearTimeout(Mn),Mn=setTimeout(kn,n)),wn=0):(wn=1,Sn(kn))}function An(){for(var t=Date.now(),n=xn;n;)t>=n.t&&n.c(t-n.t)&&(n.c=null),n=n.n;return t}function Cn(){for(var t,n=xn,e=1/0;n;)n=n.c?(n.t<e&&(e=n.t),(t=n).n):t?t.n=n.n:xn=n.n;return bn=t,e}function En(t,n){return n-(t?Math.ceil(Math.log(t)/Math.LN10):1)}d3.timer=function(){_n.apply(this,arguments)},d3.timer.flush=function(){An(),Cn()},d3.round=function(t,n){return n?Math.round(t*(n=Math.pow(10,n)))/n:Math.round(t)};var Tn=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"].map(function(t,n){var e=Math.pow(10,3*O(8-n));return{scale:8<n?function(t){return t/e}:function(t){return t*e},symbol:t}});d3.formatPrefix=function(t,n){var e=0;return(t=+t)&&(t<0&&(t*=-1),n&&(t=d3.round(t,En(t,n))),e=1+Math.floor(1e-12+Math.log(t)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),Tn[8+e/3]};var Nn=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ln=d3.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,n){return t.toPrecision(n)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},r:function(t,n){return(t=d3.round(t,En(t,n))).toFixed(Math.max(0,Math.min(20,En(t*(1+1e-15),n))))}});function Rn(t){return t+""}var On=d3.time={},Dn=Date;function jn(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}jn.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){zn.setUTCDate.apply(this._,arguments)},setDay:function(){zn.setUTCDay.apply(this._,arguments)},setFullYear:function(){zn.setUTCFullYear.apply(this._,arguments)},setHours:function(){zn.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){zn.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){zn.setUTCMinutes.apply(this._,arguments)},setMonth:function(){zn.setUTCMonth.apply(this._,arguments)},setSeconds:function(){zn.setUTCSeconds.apply(this._,arguments)},setTime:function(){zn.setTime.apply(this._,arguments)}};var zn=Date.prototype;function In(r,o,a){function t(t){var n=r(t),e=i(n,1);return t-n<e-t?n:e}function u(t){return o(t=r(new Dn(t-1)),1),t}function i(t,n){return o(t=new Dn(+t),n),t}function l(t,n,e){var r=u(t),i=[];if(1<e)for(;r<n;)a(r)%e||i.push(new Date(+r)),o(r,1);else for(;r<n;)i.push(new Date(+r)),o(r,1);return i}(r.floor=r).round=t,r.ceil=u,r.offset=i,r.range=l;var n=r.utc=qn(r);return(n.floor=n).round=qn(t),n.ceil=qn(u),n.offset=qn(i),n.range=function(t,n,e){try{var r=new(Dn=jn);return r._=t,l(r,n,e)}finally{Dn=Date}},r}function qn(r){return function(t,n){try{var e=new(Dn=jn);return e._=t,r(e,n)._}finally{Dn=Date}}}On.year=In(function(t){return(t=On.day(t)).setMonth(0,1),t},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t){return t.getFullYear()}),On.years=On.year.range,On.years.utc=On.year.utc.range,On.day=In(function(t){var n=new Dn(2e3,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n},function(t,n){t.setDate(t.getDate()+n)},function(t){return t.getDate()-1}),On.days=On.day.range,On.days.utc=On.day.utc.range,On.dayOfYear=function(t){var n=On.year(t);return Math.floor((t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=On[t]=In(function(t){return(t=On.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,n){t.setDate(t.getDate()+7*Math.floor(n))},function(t){var n=On.year(t).getDay();return Math.floor((On.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});On[t+"s"]=n.range,On[t+"s"].utc=n.utc.range,On[t+"OfYear"]=function(t){var n=On.year(t).getDay();return Math.floor((On.dayOfYear(t)+(n+e)%7)/7)}}),On.week=On.sunday,On.weeks=On.sunday.range,On.weeks.utc=On.sunday.utc.range,On.weekOfYear=On.sundayOfYear;var Hn={"-":"",_:" ",0:"0"},Pn=/^\s*\d+/,Fn=/^%/;function Gn(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function Un(t){return new RegExp("^(?:"+t.map(d3.requote).join("|")+")","i")}function Bn(t){for(var n=new y,e=-1,r=t.length;++e<r;)n.set(t[e].toLowerCase(),e);return n}function Wn(t,n,e){Pn.lastIndex=0;var r=Pn.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function Vn(t,n,e){Pn.lastIndex=0;var r=Pn.exec(n.slice(e));return r?(t.U=+r[0],e+r[0].length):-1}function Yn(t,n,e){Pn.lastIndex=0;var r=Pn.exec(n.slice(e));return r?(t.W=+r[0],e+r[0].length):-1}function Kn(t,n,e){Pn.lastIndex=0;var r=Pn.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function Xn(t,n,e){Pn.lastIndex=0;var r=Pn.exec(n.slice(e,e+2));return r?(t.y=function(t){return t+(68<t?1900:2e3)}(+r[0]),e+r[0].length):-1}function $n(t,n,e){return/^[+-]\d{4}$/.test(n=n.slice(e,e+5))?(t.Z=-n,e+5):-1}function Zn(t,n,e){Pn.lastIndex=0;var r=Pn.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function Jn(t,n,e){Pn.lastIndex=0;var r=Pn.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function Qn(t,n,e){Pn.lastIndex=0;var r=Pn.exec(n.slice(e,e+3));return r?(t.j=+r[0],e+r[0].length):-1}function te(t,n,e){Pn.lastIndex=0;var r=Pn.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function ne(t,n,e){Pn.lastIndex=0;var r=Pn.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function ee(t,n,e){Pn.lastIndex=0;var r=Pn.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function re(t,n,e){Pn.lastIndex=0;var r=Pn.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function ie(t){var n=t.getTimezoneOffset(),e=0<n?"-":"+",r=O(n)/60|0,i=O(n)%60;return e+Gn(r,"0",2)+Gn(i,"0",2)}function oe(t,n,e){Fn.lastIndex=0;var r=Fn.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function ae(r){for(var t=r.length,n=-1;++n<t;)r[n][0]=this(r[n][0]);return function(t){for(var n=0,e=r[n];!e[1](t);)e=r[++n];return e[0](t)}}d3.locale=function(t){return{numberFormat:function(t){var _=t.decimal,u=t.thousands,l=t.grouping,r=t.currency,k=l&&u?function(t,n){for(var e=t.length,r=[],i=0,o=l[0],a=0;0<e&&0<o&&(n<a+o+1&&(o=Math.max(1,n-a)),r.push(t.substring(e-=o,e+o)),!((a+=o+1)>n));)o=l[i=(i+1)%l.length];return r.reverse().join(u)}:j;return function(t){var n=Nn.exec(t),c=n[1]||" ",f=n[2]||">",h=n[3]||"-",e=n[4]||"",p=n[5],d=+n[6],g=n[7],v=n[8],m=n[9],y=1,x="",b="",w=!1,M=!0;switch(v=v&&+v.substring(1),(p||"0"===c&&"="===f)&&(p=c="0",f="="),m){case"n":g=!0,m="g";break;case"%":y=100,b="%",m="f";break;case"p":y=100,b="%",m="r";break;case"b":case"o":case"x":case"X":"#"===e&&(x="0"+m.toLowerCase());case"c":M=!1;case"d":w=!0,v=0;break;case"s":y=-1,m="r"}"$"===e&&(x=r[0],b=r[1]),"r"!=m||v||(m="g"),null!=v&&("g"==m?v=Math.max(1,Math.min(21,v)):"e"!=m&&"f"!=m||(v=Math.max(0,Math.min(20,v)))),m=Ln.get(m)||Rn;var S=p&&g;return function(t){var n=b;if(w&&t%1)return"";var e=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===h?"":h;if(y<0){var r=d3.formatPrefix(t,v);t=r.scale(t),n=r.symbol+b}else t*=y;var i,o,a=(t=m(t,v)).lastIndexOf(".");if(a<0){var u=M?t.lastIndexOf("e"):-1;o=u<0?(i=t,""):(i=t.substring(0,u),t.substring(u))}else i=t.substring(0,a),o=_+t.substring(a+1);!p&&g&&(i=k(i,1/0));var l=x.length+i.length+o.length+(S?0:e.length),s=l<d?new Array(l=d-l+1).join(c):"";return S&&(i=k(s+i,s.length?d-o.length:1/0)),e+=x,t=i+o,("<"===f?e+t+s:">"===f?s+e+t:"^"===f?s.substring(0,l>>=1)+e+t+s.substring(l):e+(S?t:s+t))+n}}}(t),timeFormat:function(t){var n=t.dateTime,e=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,u=t.months,l=t.shortMonths;function s(u){var l=u.length;function t(t){for(var n,e,r,i=[],o=-1,a=0;++o<l;)37===u.charCodeAt(o)&&(i.push(u.slice(a,o)),null!=(e=Hn[n=u.charAt(++o)])&&(n=u.charAt(++o)),(r=b[n])&&(n=r(t,null==e?"e"===n?" ":"0":e)),i.push(n),a=o+1);return i.push(u.slice(a,o)),i.join("")}return t.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(c(n,u,t,0)!=t.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var e=null!=n.Z&&Dn!==jn,r=new(e?jn:Dn);return"j"in n?r.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),r.setFullYear(n.y,0,1),r.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(r.getDay()+5)%7:n.w+7*n.U-(r.getDay()+6)%7)):r.setFullYear(n.y,n.m,n.d),r.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),e?r._:r},t.toString=function(){return u},t}function c(t,n,e,r){for(var i,o,a,u=0,l=n.length,s=e.length;u<l;){if(s<=r)return-1;if(37===(i=n.charCodeAt(u++))){if(a=n.charAt(u++),!(o=w[a in Hn?n.charAt(u++):a])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}s.multi=(s.utc=function(t){var e=s(t);function n(t){try{var n=new(Dn=jn);return n._=t,e(n)}finally{Dn=Date}}return n.parse=function(t){try{Dn=jn;var n=e.parse(t);return n&&n._}finally{Dn=Date}},n.toString=e.toString,n}).multi=ae;var f=d3.map(),h=Un(o),p=Bn(o),d=Un(a),g=Bn(a),v=Un(u),m=Bn(u),y=Un(l),x=Bn(l);i.forEach(function(t,n){f.set(t.toLowerCase(),n)});var b={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:s(n),d:function(t,n){return Gn(t.getDate(),n,2)},e:function(t,n){return Gn(t.getDate(),n,2)},H:function(t,n){return Gn(t.getHours(),n,2)},I:function(t,n){return Gn(t.getHours()%12||12,n,2)},j:function(t,n){return Gn(1+On.dayOfYear(t),n,3)},L:function(t,n){return Gn(t.getMilliseconds(),n,3)},m:function(t,n){return Gn(t.getMonth()+1,n,2)},M:function(t,n){return Gn(t.getMinutes(),n,2)},p:function(t){return i[+(12<=t.getHours())]},S:function(t,n){return Gn(t.getSeconds(),n,2)},U:function(t,n){return Gn(On.sundayOfYear(t),n,2)},w:function(t){return t.getDay()},W:function(t,n){return Gn(On.mondayOfYear(t),n,2)},x:s(e),X:s(r),y:function(t,n){return Gn(t.getFullYear()%100,n,2)},Y:function(t,n){return Gn(t.getFullYear()%1e4,n,4)},Z:ie,"%":function(){return"%"}},w={a:function(t,n,e){d.lastIndex=0;var r=d.exec(n.slice(e));return r?(t.w=g.get(r[0].toLowerCase()),e+r[0].length):-1},A:function(t,n,e){h.lastIndex=0;var r=h.exec(n.slice(e));return r?(t.w=p.get(r[0].toLowerCase()),e+r[0].length):-1},b:function(t,n,e){y.lastIndex=0;var r=y.exec(n.slice(e));return r?(t.m=x.get(r[0].toLowerCase()),e+r[0].length):-1},B:function(t,n,e){v.lastIndex=0;var r=v.exec(n.slice(e));return r?(t.m=m.get(r[0].toLowerCase()),e+r[0].length):-1},c:function(t,n,e){return c(t,b.c.toString(),n,e)},d:Jn,e:Jn,H:te,I:te,j:Qn,L:re,m:Zn,M:ne,p:function(t,n,e){var r=f.get(n.slice(e,e+=2).toLowerCase());return null==r?-1:(t.p=r,e)},S:ee,U:Vn,w:Wn,W:Yn,x:function(t,n,e){return c(t,b.x.toString(),n,e)},X:function(t,n,e){return c(t,b.X.toString(),n,e)},y:Xn,Y:Kn,Z:$n,"%":oe};return s}(t)}};var ue=d3.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function le(){}d3.format=ue.numberFormat,d3.geo={},le.prototype={s:0,t:0,add:function(t){ce(t,this.t,se),ce(se.s,this.s,this),this.s?this.t+=se.t:this.s=se.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var se=new le;function ce(t,n,e){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}function fe(t,n){t&&pe.hasOwnProperty(t.type)&&pe[t.type](t,n)}d3.geo.stream=function(t,n){t&&he.hasOwnProperty(t.type)?he[t.type](t,n):fe(t,n)};var he={Feature:function(t,n){fe(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)fe(e[r].geometry,n)}},pe={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){de(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)de(e[r],n,0)},Polygon:function(t,n){ge(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)ge(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)fe(e[r],n)}};function de(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function ge(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)de(t[e],n,1);n.polygonEnd()}d3.geo.area=function(t){return ve=0,d3.geo.stream(t,Fe),ve};var ve,me,ye,xe,be,we,Me,Se,_e,ke,Ae,Ce,Ee,Te,Ne,Le,Re,Oe,De,je,ze,Ie,qe,He,Pe=new le,Fe={sphere:function(){ve+=4*_t},point:N,lineStart:N,lineEnd:N,polygonStart:function(){Pe.reset(),Fe.lineStart=Ge},polygonEnd:function(){var t=2*Pe;ve+=t<0?4*_t+t:t,Fe.lineStart=Fe.lineEnd=Fe.point=N}};function Ge(){var e,r,c,f,h;function i(t,n){n=n*Et/2+_t/4;var e=(t*=Et)-c,r=0<=e?1:-1,i=r*e,o=Math.cos(n),a=Math.sin(n),u=h*a,l=f*o+u*Math.cos(i),s=u*r*Math.sin(i);Pe.add(Math.atan2(s,l)),c=t,f=o,h=a}Fe.point=function(t,n){Fe.point=i,c=(e=t)*Et,f=Math.cos(n=(r=n)*Et/2+_t/4),h=Math.sin(n)},Fe.lineEnd=function(){i(e,r)}}function Ue(t){var n=t[0],e=t[1],r=Math.cos(e);return[r*Math.cos(n),r*Math.sin(n),Math.sin(e)]}function Be(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function We(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Ve(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Ye(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Ke(t){var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function Xe(t){return[Math.atan2(t[1],t[0]),Ot(t[2])]}function $e(t,n){return O(t[0]-n[0])<Mt&&O(t[1]-n[1])<Mt}function Ze(t,n){Ae.push(Ce=[me=t,xe=t]),n<ye&&(ye=n),be<n&&(be=n)}function Je(t,n){var e=Ue([t*Et,n*Et]);if(_e){var r=We(_e,e),i=We([r[1],-r[0],0],r);Ke(i),i=Xe(i);var o=t-we,a=0<o?1:-1,u=i[0]*Tt*a,l=180<O(o);if(l^(a*we<u&&u<a*t)){var s=i[1]*Tt;be<s&&(be=s)}else if(l^(a*we<(u=(u+360)%360-180)&&u<a*t)){(s=-i[1]*Tt)<ye&&(ye=s)}else n<ye&&(ye=n),be<n&&(be=n);l?t<we?ir(me,t)>ir(me,xe)&&(xe=t):ir(t,xe)>ir(me,xe)&&(me=t):me<=xe?(t<me&&(me=t),xe<t&&(xe=t)):we<t?ir(me,t)>ir(me,xe)&&(xe=t):ir(t,xe)>ir(me,xe)&&(me=t)}else Ze(t,n);_e=e,we=t}function Qe(){Ee.point=Je}function tr(){Ce[0]=me,Ce[1]=xe,Ee.point=Ze,_e=null}function nr(t,n){if(_e){var e=t-we;ke+=180<O(e)?e+(0<e?360:-360):e}else Me=t,Se=n;Fe.point(t,n),Je(t,n)}function er(){Fe.lineStart()}function rr(){nr(Me,Se),Fe.lineEnd(),O(ke)>Mt&&(me=-(xe=180)),Ce[0]=me,Ce[1]=xe,_e=null}function ir(t,n){return(n-=t)<0?n+360:n}function or(t,n){return t[0]-n[0]}function ar(t,n){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}d3.geo.bounds=(Ee={point:Ze,lineStart:Qe,lineEnd:tr,polygonStart:function(){Ee.point=nr,Ee.lineStart=er,Ee.lineEnd=rr,ke=0,Fe.polygonStart()},polygonEnd:function(){Fe.polygonEnd(),Ee.point=Ze,Ee.lineStart=Qe,Ee.lineEnd=tr,Pe<0?(me=-(xe=180),ye=-(be=90)):Mt<ke?be=90:ke<-Mt&&(ye=-90),Ce[0]=me,Ce[1]=xe}},function(t){if(be=xe=-(me=ye=1/0),Ae=[],d3.geo.stream(t,Ee),i=Ae.length){Ae.sort(or);for(var n=1,e=[u=Ae[0]];n<i;++n)ar((o=Ae[n])[0],u)||ar(o[1],u)?(ir(u[0],o[1])>ir(u[0],u[1])&&(u[1]=o[1]),ir(o[0],u[1])>ir(u[0],u[1])&&(u[0]=o[0])):e.push(u=o);for(var r,i,o,a=-1/0,u=(n=0,e[i=e.length-1]);n<=i;u=o,++n)o=e[n],(r=ir(u[1],o[0]))>a&&(a=r,me=o[0],xe=u[1])}return Ae=Ce=null,me===1/0||ye===1/0?[[NaN,NaN],[NaN,NaN]]:[[me,ye],[xe,be]]}),d3.geo.centroid=function(t){Te=Ne=Le=Re=Oe=De=je=ze=Ie=qe=He=0,d3.geo.stream(t,ur);var n=Ie,e=qe,r=He,i=n*n+e*e+r*r;return i<St&&(n=De,e=je,r=ze,Ne<Mt&&(n=Le,e=Re,r=Oe),(i=n*n+e*e+r*r)<St)?[NaN,NaN]:[Math.atan2(e,n)*Tt,Ot(r/Math.sqrt(i))*Tt]};var ur={sphere:N,point:lr,lineStart:cr,lineEnd:fr,polygonStart:function(){ur.lineStart=hr},polygonEnd:function(){ur.lineStart=cr}};function lr(t,n){t*=Et;var e=Math.cos(n*=Et);sr(e*Math.cos(t),e*Math.sin(t),Math.sin(n))}function sr(t,n,e){Le+=(t-Le)/++Te,Re+=(n-Re)/Te,Oe+=(e-Oe)/Te}function cr(){var u,l,s;function r(t,n){t*=Et;var e=Math.cos(n*=Et),r=e*Math.cos(t),i=e*Math.sin(t),o=Math.sin(n),a=Math.atan2(Math.sqrt((a=l*o-s*i)*a+(a=s*r-u*o)*a+(a=u*i-l*r)*a),u*r+l*i+s*o);Ne+=a,De+=a*(u+(u=r)),je+=a*(l+(l=i)),ze+=a*(s+(s=o)),sr(u,l,s)}ur.point=function(t,n){t*=Et;var e=Math.cos(n*=Et);u=e*Math.cos(t),l=e*Math.sin(t),s=Math.sin(n),ur.point=r,sr(u,l,s)}}function fr(){ur.point=lr}function hr(){var r,i,p,d,g;function o(t,n){t*=Et;var e=Math.cos(n*=Et),r=e*Math.cos(t),i=e*Math.sin(t),o=Math.sin(n),a=d*o-g*i,u=g*r-p*o,l=p*i-d*r,s=Math.sqrt(a*a+u*u+l*l),c=p*r+d*i+g*o,f=s&&-Rt(c)/s,h=Math.atan2(s,c);Ie+=f*a,qe+=f*u,He+=f*l,Ne+=h,De+=h*(p+(p=r)),je+=h*(d+(d=i)),ze+=h*(g+(g=o)),sr(p,d,g)}ur.point=function(t,n){r=t,i=n,ur.point=o,t*=Et;var e=Math.cos(n*=Et);p=e*Math.cos(t),d=e*Math.sin(t),g=Math.sin(n),sr(p,d,g)},ur.lineEnd=function(){o(r,i),ur.lineEnd=fr,ur.point=lr}}function pr(e,r){function t(t,n){return t=e(t,n),r(t[0],t[1])}return e.invert&&r.invert&&(t.invert=function(t,n){return(t=r.invert(t,n))&&e.invert(t[0],t[1])}),t}function dr(){return!0}function gr(t,n,e,r,u){var l=[],s=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e=t[0],r=t[n];if($e(e,r)){u.lineStart();for(var i=0;i<n;++i)u.point((e=t[i])[0],e[1]);u.lineEnd()}else{var o=new mr(e,t,null,!0),a=new mr(e,null,o,!1);o.o=a,l.push(o),s.push(a),a=new mr(r,null,o=new mr(r,t,null,!1),!0),o.o=a,l.push(o),s.push(a)}}}),s.sort(n),vr(l),vr(s),l.length){for(var i=0,o=e,a=s.length;i<a;++i)s[i].e=o=!o;for(var c,f,h=l[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;c=p.z,u.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(i=0,a=c.length;i<a;++i)u.point((f=c[i])[0],f[1]);else r(p.x,p.n.x,1,u);p=p.n}else{if(d)for(i=(c=p.p.z).length-1;0<=i;--i)u.point((f=c[i])[0],f[1]);else r(p.x,p.p.x,-1,u);p=p.p}c=(p=p.o).z,d=!d}while(!p.v);u.lineEnd()}}}function vr(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function mr(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function yr(y,x,b,w){return function(r,a){var u,i=x(a),n=r.invert(w[0],w[1]),e={point:o,lineStart:l,lineEnd:s,polygonStart:function(){e.point=g,e.lineStart=v,e.lineEnd=m,u=[],c=[]},polygonEnd:function(){e.point=o,e.lineStart=l,e.lineEnd=s,u=d3.merge(u);var t=function(t,n){var e=t[0],r=t[1],i=[Math.sin(e),-Math.cos(e),0],o=0,a=0;Pe.reset();for(var u=0,l=n.length;u<l;++u){var s=n[u],c=s.length;if(c)for(var f=s[0],h=f[0],p=f[1]/2+_t/4,d=Math.sin(p),g=Math.cos(p),v=1;;){v===c&&(v=0);var m=(t=s[v])[0],y=t[1]/2+_t/4,x=Math.sin(y),b=Math.cos(y),w=m-h,M=0<=w?1:-1,S=M*w,_=_t<S,k=d*x;if(Pe.add(Math.atan2(k*M*Math.sin(S),g*b+k*Math.cos(S))),o+=_?w+M*kt:w,_^e<=h^e<=m){var A=We(Ue(f),Ue(t));Ke(A);var C=We(i,A);Ke(C);var E=(_^0<=w?-1:1)*Ot(C[2]);(E<r||r===E&&(A[0]||A[1]))&&(a+=_^0<=w?1:-1)}if(!v++)break;h=m,d=x,g=b,f=t}}return(o<-Mt||o<Mt&&Pe<-Mt)^1&a}(n,c);u.length?(d||(a.polygonStart(),d=!0),gr(u,wr,t,b,a)):t&&(d||(a.polygonStart(),d=!0),a.lineStart(),b(null,null,1,a),a.lineEnd()),d&&(a.polygonEnd(),d=!1),u=c=null},sphere:function(){a.polygonStart(),a.lineStart(),b(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function o(t,n){var e=r(t,n);y(t=e[0],n=e[1])&&a.point(t,n)}function t(t,n){var e=r(t,n);i.point(e[0],e[1])}function l(){e.point=t,i.lineStart()}function s(){e.point=o,i.lineEnd()}var c,f,h=br(),p=x(h),d=!1;function g(t,n){f.push([t,n]);var e=r(t,n);p.point(e[0],e[1])}function v(){p.lineStart(),f=[]}function m(){g(f[0][0],f[0][1]),p.lineEnd();var t,n=p.clean(),e=h.buffer(),r=e.length;if(f.pop(),c.push(f),f=null,r)if(1&n){var i,o=-1;if(0<(r=(t=e[0]).length-1)){for(d||(a.polygonStart(),d=!0),a.lineStart();++o<r;)a.point((i=t[o])[0],i[1]);a.lineEnd()}}else 1<r&&2&n&&e.push(e.pop().concat(e.shift())),u.push(e.filter(xr))}return e}}function xr(t){return 1<t.length}function br(){var e,n=[];return{lineStart:function(){n.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:N,buffer:function(){var t=n;return n=[],e=null,t},rejoin:function(){1<n.length&&n.push(n.pop().concat(n.shift()))}}}function wr(t,n){return((t=t.x)[0]<0?t[1]-Ct-Mt:Ct-t[1])-((n=n.x)[0]<0?n[1]-Ct-Mt:Ct-n[1])}var Mr=yr(dr,function(i){var o,a=NaN,u=NaN,l=NaN;return{lineStart:function(){i.lineStart(),o=1},point:function(t,n){var e=0<t?_t:-_t,r=O(t-a);O(r-_t)<Mt?(i.point(a,u=0<(u+n)/2?Ct:-Ct),i.point(l,u),i.lineEnd(),i.lineStart(),i.point(e,u),i.point(t,u),o=0):l!==e&&_t<=r&&(O(a-l)<Mt&&(a-=l*Mt),O(t-e)<Mt&&(t-=e*Mt),u=function(t,n,e,r){var i,o,a=Math.sin(t-e);return O(a)>Mt?Math.atan((Math.sin(n)*(o=Math.cos(r))*Math.sin(e)-Math.sin(r)*(i=Math.cos(n))*Math.sin(t))/(i*o*a)):(n+r)/2}(a,u,t,n),i.point(l,u),i.lineEnd(),i.lineStart(),i.point(e,u),o=0),i.point(a=t,u=n),l=e},lineEnd:function(){i.lineEnd(),a=u=NaN},clean:function(){return 2-o}}},function(t,n,e,r){var i;if(null==t)i=e*Ct,r.point(-_t,i),r.point(0,i),r.point(_t,i),r.point(_t,0),r.point(_t,-i),r.point(0,-i),r.point(-_t,-i),r.point(-_t,0),r.point(-_t,i);else if(O(t[0]-n[0])>Mt){var o=t[0]<n[0]?_t:-_t;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])},[-_t,-_t/2]);function Sr(c,f,h,p){return function(t){var n,e=t.a,r=t.b,i=e.x,o=e.y,a=0,u=1,l=r.x-i,s=r.y-o;if(n=c-i,l||!(0<n)){if(n/=l,l<0){if(n<a)return;n<u&&(u=n)}else if(0<l){if(u<n)return;a<n&&(a=n)}if(n=h-i,l||!(n<0)){if(n/=l,l<0){if(u<n)return;a<n&&(a=n)}else if(0<l){if(n<a)return;n<u&&(u=n)}if(n=f-o,s||!(0<n)){if(n/=s,s<0){if(n<a)return;n<u&&(u=n)}else if(0<s){if(u<n)return;a<n&&(a=n)}if(n=p-o,s||!(n<0)){if(n/=s,s<0){if(u<n)return;a<n&&(a=n)}else if(0<s){if(n<a)return;n<u&&(u=n)}return 0<a&&(t.a={x:i+a*l,y:o+a*s}),u<1&&(t.b={x:i+u*l,y:o+u*s}),t}}}}}}var _r=1e9;function kr(b,w,M,S){return function(i){var r,c,o,a,u,l,s,f,h,p,d,g=i,t=br(),v=Sr(b,w,M,S),n={point:e,lineStart:function(){n.point=x,c&&c.push(o=[]);p=!0,h=!1,s=f=NaN},lineEnd:function(){r&&(x(a,u),l&&h&&t.rejoin(),r.push(t.buffer()));n.point=e,h&&i.lineEnd()},polygonStart:function(){i=t,r=[],c=[],d=!0},polygonEnd:function(){i=g,r=d3.merge(r);var t=function(t){for(var n=0,e=c.length,r=t[1],i=0;i<e;++i)for(var o,a=1,u=c[i],l=u.length,s=u[0];a<l;++a)o=u[a],s[1]<=r?o[1]>r&&0<Lt(s,o,t)&&++n:o[1]<=r&&Lt(s,o,t)<0&&--n,s=o;return 0!==n}([b,S]),n=d&&t,e=r.length;(n||e)&&(i.polygonStart(),n&&(i.lineStart(),m(null,null,1,i),i.lineEnd()),e&&gr(r,k,t,m,i),i.polygonEnd()),r=c=o=null}};function m(t,n,e,r){var i=0,o=0;if(null==t||(i=_(t,e))!==(o=_(n,e))||A(t,n)<0^0<e)for(;r.point(0===i||3===i?b:M,1<i?S:w),(i=(i+e+4)%4)!==o;);else r.point(n[0],n[1])}function y(t,n){return b<=t&&t<=M&&w<=n&&n<=S}function e(t,n){y(t,n)&&i.point(t,n)}function x(t,n){var e=y(t=Math.max(-_r,Math.min(_r,t)),n=Math.max(-_r,Math.min(_r,n)));if(c&&o.push([t,n]),p)a=t,u=n,p=!1,(l=e)&&(i.lineStart(),i.point(t,n));else if(e&&h)i.point(t,n);else{var r={a:{x:s,y:f},b:{x:t,y:n}};v(r)?(h||(i.lineStart(),i.point(r.a.x,r.a.y)),i.point(r.b.x,r.b.y),e||i.lineEnd(),d=!1):e&&(i.lineStart(),i.point(t,n),d=!1)}s=t,f=n,h=e}return n};function _(t,n){return O(t[0]-b)<Mt?0<n?0:3:O(t[0]-M)<Mt?0<n?2:1:O(t[1]-w)<Mt?0<n?1:0:0<n?3:2}function k(t,n){return A(t.x,n.x)}function A(t,n){var e=_(t,1),r=_(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}}function Ar(t){var n=0,e=_t/3,r=$r(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*_t/180,e=t[1]*_t/180):[n/_t*180,e/_t*180]},i}function Cr(t,n){var e=Math.sin(t),r=(e+Math.sin(n))/2,i=1+e*(2*r-e),o=Math.sqrt(i)/r;function a(t,n){var e=Math.sqrt(i-2*r*Math.sin(n))/r;return[e*Math.sin(t*=r),o-e*Math.cos(t)]}return a.invert=function(t,n){var e=o-n;return[Math.atan2(t,e)/r,Ot((i-(t*t+e*e)*r*r)/(2*r))]},a}d3.geo.clipExtent=function(){var n,e,r,i,o,a,u={stream:function(t){return o&&(o.valid=!1),(o=a(t)).valid=!0,o},extent:function(t){return arguments.length?(a=kr(n=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1]),o&&(o.valid=!1,o=null),u):[[n,e],[r,i]]}};return u.extent([[0,0],[960,500]])},(d3.geo.conicEqualArea=function(){return Ar(Cr)}).raw=Cr,d3.geo.albers=function(){return d3.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},d3.geo.albersUsa=function(){var r,i,o,a,u=d3.geo.albers(),l=d3.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=d3.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,n){r=[t,n]}};function f(t){var n=t[0],e=t[1];return r=null,i(n,e),r||(o(n,e),r)||a(n,e),r}return f.invert=function(t){var n=u.scale(),e=u.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(.12<=i&&i<.234&&-.425<=r&&r<-.214?l:.166<=i&&i<.234&&-.214<=r&&r<-.115?s:u).invert(t)},f.stream=function(t){var e=u.stream(t),r=l.stream(t),i=s.stream(t);return{point:function(t,n){e.point(t,n),r.point(t,n),i.point(t,n)},sphere:function(){e.sphere(),r.sphere(),i.sphere()},lineStart:function(){e.lineStart(),r.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),r.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),r.polygonStart(),i.polygonStart()},polygonEnd:function(){e.polygonEnd(),r.polygonEnd(),i.polygonEnd()}}},f.precision=function(t){return arguments.length?(u.precision(t),l.precision(t),s.precision(t),f):u.precision()},f.scale=function(t){return arguments.length?(u.scale(t),l.scale(.35*t),s.scale(t),f.translate(u.translate())):u.scale()},f.translate=function(t){if(!arguments.length)return u.translate();var n=u.scale(),e=+t[0],r=+t[1];return i=u.translate(t).clipExtent([[e-.455*n,r-.238*n],[e+.455*n,r+.238*n]]).stream(c).point,o=l.translate([e-.307*n,r+.201*n]).clipExtent([[e-.425*n+Mt,r+.12*n+Mt],[e-.214*n-Mt,r+.234*n-Mt]]).stream(c).point,a=s.translate([e-.205*n,r+.212*n]).clipExtent([[e-.214*n+Mt,r+.166*n+Mt],[e-.115*n-Mt,r+.234*n-Mt]]).stream(c).point,f},f.scale(1070)};var Er,Tr,Nr,Lr,Rr,Or,Dr={point:N,lineStart:N,lineEnd:N,polygonStart:function(){Tr=0,Dr.lineStart=jr},polygonEnd:function(){Dr.lineStart=Dr.lineEnd=Dr.point=N,Er+=O(Tr/2)}};function jr(){var e,r,i,o;function a(t,n){Tr+=o*t-i*n,i=t,o=n}Dr.point=function(t,n){Dr.point=a,e=i=t,r=o=n},Dr.lineEnd=function(){a(e,r)}}var zr={point:function(t,n){t<Nr&&(Nr=t);Rr<t&&(Rr=t);n<Lr&&(Lr=n);Or<n&&(Or=n)},lineStart:N,lineEnd:N,polygonStart:N,polygonEnd:N};function Ir(){var e=qr(4.5),r=[],i={point:t,lineStart:function(){i.point=n},lineEnd:a,polygonStart:function(){i.lineEnd=u},polygonEnd:function(){i.lineEnd=a,i.point=t},pointRadius:function(t){return e=qr(t),i},result:function(){if(r.length){var t=r.join("");return r=[],t}}};function t(t,n){r.push("M",t,",",n,e)}function n(t,n){r.push("M",t,",",n),i.point=o}function o(t,n){r.push("L",t,",",n)}function a(){i.point=t}function u(){r.push("Z")}return i}function qr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var Hr,Pr={point:Fr,lineStart:Gr,lineEnd:Ur,polygonStart:function(){Pr.lineStart=Br},polygonEnd:function(){Pr.point=Fr,Pr.lineStart=Gr,Pr.lineEnd=Ur}};function Fr(t,n){Le+=t,Re+=n,++Oe}function Gr(){var o,a;function e(t,n){var e=t-o,r=n-a,i=Math.sqrt(e*e+r*r);De+=i*(o+t)/2,je+=i*(a+n)/2,ze+=i,Fr(o=t,a=n)}Pr.point=function(t,n){Pr.point=e,Fr(o=t,a=n)}}function Ur(){Pr.point=Fr}function Br(){var e,r,o,a;function i(t,n){var e=t-o,r=n-a,i=Math.sqrt(e*e+r*r);De+=i*(o+t)/2,je+=i*(a+n)/2,ze+=i,Ie+=(i=a*t-o*n)*(o+t),qe+=i*(a+n),He+=3*i,Fr(o=t,a=n)}Pr.point=function(t,n){Pr.point=i,Fr(e=o=t,r=a=n)},Pr.lineEnd=function(){i(e,r)}}function Wr(e){var r=4.5,i={point:t,lineStart:function(){i.point=n},lineEnd:a,polygonStart:function(){i.lineEnd=u},polygonEnd:function(){i.lineEnd=a,i.point=t},pointRadius:function(t){return r=t,i},result:N};function t(t,n){e.moveTo(t+r,n),e.arc(t,n,r,0,kt)}function n(t,n){e.moveTo(t,n),i.point=o}function o(t,n){e.lineTo(t,n)}function a(){i.point=t}function u(){e.closePath()}return i}function Vr(T){var N=.5,L=Math.cos(30*Et),w=16;function n(t){return(w?function(i){var e,r,o,a,u,l,s,c,f,h,p,d,g={point:t,lineStart:n,lineEnd:m,polygonStart:function(){i.polygonStart(),g.lineStart=y},polygonEnd:function(){i.polygonEnd(),g.lineStart=n}};function t(t,n){t=T(t,n),i.point(t[0],t[1])}function n(){c=NaN,g.point=v,i.lineStart()}function v(t,n){var e=Ue([t,n]),r=T(t,n);R(c,f,s,h,p,d,c=r[0],f=r[1],s=t,h=e[0],p=e[1],d=e[2],w,i),i.point(c,f)}function m(){g.point=t,i.lineEnd()}function y(){n(),g.point=x,g.lineEnd=b}function x(t,n){v(e=t,n),r=c,o=f,a=h,u=p,l=d,g.point=v}function b(){R(c,f,s,h,p,d,r,o,e,a,u,l,w,i),(g.lineEnd=m)()}return g}:function(e){return Kr(e,function(t,n){t=T(t,n),e.point(t[0],t[1])})})(t)}function R(t,n,e,r,i,o,a,u,l,s,c,f,h,p){var d=a-t,g=u-n,v=d*d+g*g;if(4*N<v&&h--){var m=r+s,y=i+c,x=o+f,b=Math.sqrt(m*m+y*y+x*x),w=Math.asin(x/=b),M=O(O(x)-1)<Mt||O(e-l)<Mt?(e+l)/2:Math.atan2(y,m),S=T(M,w),_=S[0],k=S[1],A=_-t,C=k-n,E=g*A-d*C;(N<E*E/v||.3<O((d*A+g*C)/v-.5)||r*s+i*c+o*f<L)&&(R(t,n,e,r,i,o,_,k,M,m/=b,y/=b,x,h,p),p.point(_,k),R(_,k,M,m,y,x,a,u,l,s,c,f,h,p))}}return n.precision=function(t){return arguments.length?(w=0<(N=t*t)&&16,n):Math.sqrt(N)},n}function Yr(t){this.stream=t}function Kr(t,n){return{point:n,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Xr(t){return $r(function(){return t})()}function $r(t){var e,n,r,i,o,a,u=Vr(function(t,n){return[(t=e(t,n))[0]*l+i,o-t[1]*l]}),l=150,s=480,c=250,f=0,h=0,p=0,d=0,g=0,v=Mr,m=j,y=null,x=null;function b(t){return[(t=r(t[0]*Et,t[1]*Et))[0]*l+i,o-t[1]*l]}function w(t){return(t=r.invert((t[0]-i)/l,(o-t[1])/l))&&[t[0]*Tt,t[1]*Tt]}function M(){r=pr(n=ti(p,d,g),e);var t=e(f,h);return i=s-t[0]*l,o=c+t[1]*l,S()}function S(){return a&&(a.valid=!1,a=null),b}return b.stream=function(t){return a&&(a.valid=!1),(a=Zr(v(n,u(m(t))))).valid=!0,a},b.clipAngle=function(t){return arguments.length?(v=null==t?(y=t,Mr):function(i){var A=Math.cos(i),p=0<A,d=O(A)>Mt;return yr(g,function(u){var l,s,c,f,h;return{lineStart:function(){f=c=!1,h=1},point:function(t,n){var e,r=[t,n],i=g(t,n),o=p?i?0:m(t,n):i?m(t+(t<0?_t:-_t),n):0;if(!l&&(f=c=i)&&u.lineStart(),i!==c&&(e=v(l,r),($e(l,e)||$e(r,e))&&(r[0]+=Mt,r[1]+=Mt,i=g(r[0],r[1]))),i!==c)h=0,i?(u.lineStart(),e=v(r,l),u.point(e[0],e[1])):(e=v(l,r),u.point(e[0],e[1]),u.lineEnd()),l=e;else if(d&&l&&p^i){var a;o&s||!(a=v(r,l,!0))||(h=0,p?(u.lineStart(),u.point(a[0][0],a[0][1]),u.point(a[1][0],a[1][1]),u.lineEnd()):(u.point(a[1][0],a[1][1]),u.lineEnd(),u.lineStart(),u.point(a[0][0],a[0][1])))}!i||l&&$e(l,r)||u.point(r[0],r[1]),l=r,c=i,s=o},lineEnd:function(){c&&u.lineEnd(),l=null},clean:function(){return h|(f&&c)<<1}}},ii(i,6*Et),p?[0,-i]:[-_t,i-_t]);function g(t,n){return Math.cos(t)*Math.cos(n)>A}function v(t,n,e){var r=[1,0,0],i=We(Ue(t),Ue(n)),o=Be(i,i),a=i[0],u=o-a*a;if(!u)return!e&&t;var l=A*o/u,s=-A*a/u,c=We(r,i),f=Ye(r,l);Ve(f,Ye(i,s));var h=c,p=Be(f,h),d=Be(h,h),g=p*p-d*(Be(f,f)-1);if(!(g<0)){var v=Math.sqrt(g),m=Ye(h,(-p-v)/d);if(Ve(m,f),m=Xe(m),!e)return m;var y,x=t[0],b=n[0],w=t[1],M=n[1];b<x&&(y=x,x=b,b=y);var S=b-x,_=O(S-_t)<Mt;if(!_&&M<w&&(y=w,w=M,M=y),_||S<Mt?_?0<w+M^m[1]<(O(m[0]-x)<Mt?w:M):w<=m[1]&&m[1]<=M:_t<S^(x<=m[0]&&m[0]<=b)){var k=Ye(h,(-p+v)/d);return Ve(k,f),[m,Xe(k)]}}}function m(t,n){var e=p?i:_t-i,r=0;return t<-e?r|=1:e<t&&(r|=2),n<-e?r|=4:e<n&&(r|=8),r}}((y=+t)*Et),S()):y},b.clipExtent=function(t){return arguments.length?(m=(x=t)?kr(t[0][0],t[0][1],t[1][0],t[1][1]):j,S()):x},b.scale=function(t){return arguments.length?(l=+t,M()):l},b.translate=function(t){return arguments.length?(s=+t[0],c=+t[1],M()):[s,c]},b.center=function(t){return arguments.length?(f=t[0]%360*Et,h=t[1]%360*Et,M()):[f*Tt,h*Tt]},b.rotate=function(t){return arguments.length?(p=t[0]%360*Et,d=t[1]%360*Et,g=2<t.length?t[2]%360*Et:0,M()):[p*Tt,d*Tt,g*Tt]},d3.rebind(b,u,"precision"),function(){return e=t.apply(this,arguments),b.invert=e.invert&&w,M()}}function Zr(e){return Kr(e,function(t,n){e.point(t*Et,n*Et)})}function Jr(t,n){return[t,n]}function Qr(t,n){return[_t<t?t-kt:t<-_t?t+kt:t,n]}function ti(t,n,e){return t?n||e?pr(ei(t),ri(n,e)):ei(t):n||e?ri(n,e):Qr}function ni(e){return function(t,n){return[_t<(t+=e)?t-kt:t<-_t?t+kt:t,n]}}function ei(t){var n=ni(t);return n.invert=ni(-t),n}function ri(t,n){var u=Math.cos(t),l=Math.sin(t),s=Math.cos(n),c=Math.sin(n);function e(t,n){var e=Math.cos(n),r=Math.cos(t)*e,i=Math.sin(t)*e,o=Math.sin(n),a=o*u+r*l;return[Math.atan2(i*s-a*c,r*u-o*l),Ot(a*s+i*c)]}return e.invert=function(t,n){var e=Math.cos(n),r=Math.cos(t)*e,i=Math.sin(t)*e,o=Math.sin(n),a=o*s-i*c;return[Math.atan2(i*s+o*c,r*u+a*l),Ot(a*u-r*l)]},e}function ii(u,l){var s=Math.cos(u),c=Math.sin(u);return function(t,n,e,r){var i=e*l;null!=t?(t=oi(s,t),n=oi(s,n),(0<e?t<n:n<t)&&(t+=e*kt)):(t=u+e*kt,n=u-.5*i);for(var o,a=t;0<e?n<a:a<n;a-=i)r.point((o=Xe([s,-c*Math.cos(a),-c*Math.sin(a)]))[0],o[1])}}function oi(t,n){var e=Ue(n);e[0]-=t,Ke(e);var r=Rt(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Mt)%(2*Math.PI)}function ai(t,n,e){var r=d3.range(t,n-Mt,e).concat(n);return function(n){return r.map(function(t){return[n,t]})}}function ui(t,n,e){var r=d3.range(t,n-Mt,e).concat(n);return function(n){return r.map(function(t){return[t,n]})}}function li(t){return t.source}function si(t){return t.target}d3.geo.path=function(){var n,e,r,i,o,a=4.5;function u(t){return t&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=r(i)),d3.geo.stream(t,o)),i.result()}function l(){return o=null,u}return u.area=function(t){return Er=0,d3.geo.stream(t,r(Dr)),Er},u.centroid=function(t){return Le=Re=Oe=De=je=ze=Ie=qe=He=0,d3.geo.stream(t,r(Pr)),He?[Ie/He,qe/He]:ze?[De/ze,je/ze]:Oe?[Le/Oe,Re/Oe]:[NaN,NaN]},u.bounds=function(t){return Rr=Or=-(Nr=Lr=1/0),d3.geo.stream(t,r(zr)),[[Nr,Lr],[Rr,Or]]},u.projection=function(t){return arguments.length?(r=(n=t)?t.stream||function(e){var n=Vr(function(t,n){return e([t*Tt,n*Tt])});return function(t){return Zr(n(t))}}(t):j,l()):n},u.context=function(t){return arguments.length?(i=null==(e=t)?new Ir:new Wr(t),"function"!=typeof a&&i.pointRadius(a),l()):e},u.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),u):a},u.projection(d3.geo.albersUsa()).context(null)},d3.geo.transform=function(r){return{stream:function(t){var n=new Yr(t);for(var e in r)n[e]=r[e];return n}}},Yr.prototype={point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},d3.geo.projection=Xr,d3.geo.projectionMutator=$r,(d3.geo.equirectangular=function(){return Xr(Jr)}).raw=Jr.invert=Jr,d3.geo.rotation=function(n){function t(t){return(t=n(t[0]*Et,t[1]*Et))[0]*=Tt,t[1]*=Tt,t}return n=ti(n[0]%360*Et,n[1]*Et,2<n.length?n[2]*Et:0),t.invert=function(t){return(t=n.invert(t[0]*Et,t[1]*Et))[0]*=Tt,t[1]*=Tt,t},t},Qr.invert=Jr,d3.geo.circle=function(){var n,i,o=[0,0],e=6;function r(){var t="function"==typeof o?o.apply(this,arguments):o,e=ti(-t[0]*Et,-t[1]*Et,0).invert,r=[];return i(null,null,1,{point:function(t,n){r.push(t=e(t,n)),t[0]*=Tt,t[1]*=Tt}}),{type:"Polygon",coordinates:[r]}}return r.origin=function(t){return arguments.length?(o=t,r):o},r.angle=function(t){return arguments.length?(i=ii((n=+t)*Et,e*Et),r):n},r.precision=function(t){return arguments.length?(i=ii(n*Et,(e=+t)*Et),r):e},r.angle(90)},d3.geo.distance=function(t,n){var e,r=(n[0]-t[0])*Et,i=t[1]*Et,o=n[1]*Et,a=Math.sin(r),u=Math.cos(r),l=Math.sin(i),s=Math.cos(i),c=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((e=f*a)*e+(e=s*c-l*f*u)*e),l*c+s*f*u)},d3.geo.graticule=function(){var n,e,r,i,o,a,u,l,s,c,f,h,p=10,d=p,g=90,v=360,m=2.5;function y(){return{type:"MultiLineString",coordinates:t()}}function t(){return d3.range(Math.ceil(i/g)*g,r,g).map(f).concat(d3.range(Math.ceil(l/v)*v,u,v).map(h)).concat(d3.range(Math.ceil(e/p)*p,n,p).filter(function(t){return O(t%g)>Mt}).map(s)).concat(d3.range(Math.ceil(a/d)*d,o,d).filter(function(t){return O(t%v)>Mt}).map(c))}return y.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},y.outline=function(){return{type:"Polygon",coordinates:[f(i).concat(h(u).slice(1),f(r).reverse().slice(1),h(l).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.majorExtent(t).minorExtent(t):y.minorExtent()},y.majorExtent=function(t){return arguments.length?(i=+t[0][0],r=+t[1][0],l=+t[0][1],u=+t[1][1],r<i&&(t=i,i=r,r=t),u<l&&(t=l,l=u,u=t),y.precision(m)):[[i,l],[r,u]]},y.minorExtent=function(t){return arguments.length?(e=+t[0][0],n=+t[1][0],a=+t[0][1],o=+t[1][1],n<e&&(t=e,e=n,n=t),o<a&&(t=a,a=o,o=t),y.precision(m)):[[e,a],[n,o]]},y.step=function(t){return arguments.length?y.majorStep(t).minorStep(t):y.minorStep()},y.majorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],y):[g,v]},y.minorStep=function(t){return arguments.length?(p=+t[0],d=+t[1],y):[p,d]},y.precision=function(t){return arguments.length?(m=+t,s=ai(a,o,90),c=ui(e,n,m),f=ai(l,u,90),h=ui(i,r,m),y):m},y.majorExtent([[-180,-90+Mt],[180,90-Mt]]).minorExtent([[-180,-80-Mt],[180,80+Mt]])},d3.geo.greatArc=function(){var n,e,r=li,i=si;function o(){return{type:"LineString",coordinates:[n||r.apply(this,arguments),e||i.apply(this,arguments)]}}return o.distance=function(){return d3.geo.distance(n||r.apply(this,arguments),e||i.apply(this,arguments))},o.source=function(t){return arguments.length?(n="function"==typeof(r=t)?null:t,o):r},o.target=function(t){return arguments.length?(e="function"==typeof(i=t)?null:t,o):i},o.precision=function(){return arguments.length?o:0},o},d3.geo.interpolate=function(t,n){return function(t,n,e,r){var i=Math.cos(n),a=Math.sin(n),o=Math.cos(r),u=Math.sin(r),l=i*Math.cos(t),s=i*Math.sin(t),c=o*Math.cos(e),f=o*Math.sin(e),h=2*Math.asin(Math.sqrt(jt(r-n)+i*o*jt(e-t))),p=1/Math.sin(h),d=h?function(t){var n=Math.sin(t*=h)*p,e=Math.sin(h-t)*p,r=e*l+n*c,i=e*s+n*f,o=e*a+n*u;return[Math.atan2(i,r)*Tt,Math.atan2(o,Math.sqrt(r*r+i*i))*Tt]}:function(){return[t*Tt,n*Tt]};return d.distance=h,d}(t[0]*Et,t[1]*Et,n[0]*Et,n[1]*Et)},d3.geo.length=function(t){return Hr=0,d3.geo.stream(t,ci),Hr};var ci={sphere:N,point:N,lineStart:function(){var a,u,l;function e(t,n){var e=Math.sin(n*=Et),r=Math.cos(n),i=O((t*=Et)-a),o=Math.cos(i);Hr+=Math.atan2(Math.sqrt((i=r*Math.sin(i))*i+(i=l*e-u*r*o)*i),u*e+l*r*o),a=t,u=e,l=r}ci.point=function(t,n){a=t*Et,u=Math.sin(n*=Et),l=Math.cos(n),ci.point=e},ci.lineEnd=function(){ci.point=ci.lineEnd=N}},lineEnd:N,polygonStart:N,polygonEnd:N};function fi(o,a){function t(t,n){var e=Math.cos(t),r=Math.cos(n),i=o(e*r);return[i*r*Math.sin(t),i*Math.sin(n)]}return t.invert=function(t,n){var e=Math.sqrt(t*t+n*n),r=a(e),i=Math.sin(r),o=Math.cos(r);return[Math.atan2(t*i,e*o),Math.asin(e&&n*i/e)]},t}var hi=fi(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(d3.geo.azimuthalEqualArea=function(){return Xr(hi)}).raw=hi;var pi=fi(function(t){var n=Math.acos(t);return n&&n/Math.sin(n)},j);function di(t,n){function r(t){return Math.tan(_t/4+t/2)}var e=Math.cos(t),i=t===n?Math.sin(t):Math.log(e/Math.cos(n))/Math.log(r(n)/r(t)),o=e*Math.pow(r(t),i)/i;if(!i)return mi;function a(t,n){0<o?n<-Ct+Mt&&(n=-Ct+Mt):Ct-Mt<n&&(n=Ct-Mt);var e=o/Math.pow(r(n),i);return[e*Math.sin(i*t),o-e*Math.cos(i*t)]}return a.invert=function(t,n){var e=o-n,r=Nt(i)*Math.sqrt(t*t+e*e);return[Math.atan2(t,e)/i,2*Math.atan(Math.pow(o/r,1/i))-Ct]},a}function gi(t,n){var e=Math.cos(t),r=t===n?Math.sin(t):(e-Math.cos(n))/(n-t),i=e/r+t;if(O(r)<Mt)return Jr;function o(t,n){var e=i-n;return[e*Math.sin(r*t),i-e*Math.cos(r*t)]}return o.invert=function(t,n){var e=i-n;return[Math.atan2(t,e)/r,i-Nt(r)*Math.sqrt(t*t+e*e)]},o}(d3.geo.azimuthalEquidistant=function(){return Xr(pi)}).raw=pi,(d3.geo.conicConformal=function(){return Ar(di)}).raw=di,(d3.geo.conicEquidistant=function(){return Ar(gi)}).raw=gi;var vi=fi(function(t){return 1/t},Math.atan);function mi(t,n){return[t,Math.log(Math.tan(_t/4+n/2))]}function yi(t){var i,o=Xr(t),a=o.scale,u=o.translate,l=o.clipExtent;return o.scale=function(){var t=a.apply(o,arguments);return t===o?i?o.clipExtent(null):o:t},o.translate=function(){var t=u.apply(o,arguments);return t===o?i?o.clipExtent(null):o:t},o.clipExtent=function(t){var n=l.apply(o,arguments);if(n===o){if(i=null==t){var e=_t*a(),r=u();l([[r[0]-e,r[1]-e],[r[0]+e,r[1]+e]])}}else i&&(n=null);return n},o.clipExtent(null)}(d3.geo.gnomonic=function(){return Xr(vi)}).raw=vi,mi.invert=function(t,n){return[t,2*Math.atan(Math.exp(n))-Ct]},(d3.geo.mercator=function(){return yi(mi)}).raw=mi;var xi=fi(function(){return 1},Math.asin);(d3.geo.orthographic=function(){return Xr(xi)}).raw=xi;var bi=fi(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function wi(t,n){return[Math.log(Math.tan(_t/4+n/2)),-t]}function Mi(t){return t[0]}function Si(t){return t[1]}function _i(t){for(var n=t.length,e=[0,1],r=2,i=2;i<n;i++){for(;1<r&&Lt(t[e[r-2]],t[e[r-1]],t[i])<=0;)--r;e[r++]=i}return e.slice(0,r)}function ki(t,n){return t[0]-n[0]||t[1]-n[1]}(d3.geo.stereographic=function(){return Xr(bi)}).raw=bi,wi.invert=function(t,n){return[-n,2*Math.atan(Math.exp(t))-Ct]},(d3.geo.transverseMercator=function(){var t=yi(wi),n=t.center,e=t.rotate;return t.center=function(t){return t?n([-t[1],t[0]]):[(t=n())[1],-t[0]]},t.rotate=function(t){return t?e([t[0],t[1],2<t.length?t[2]+90:90]):[(t=e())[0],t[1],t[2]-90]},e([0,0,90])}).raw=wi,d3.geom={},d3.geom.hull=function(t){var h=Mi,p=Si;if(arguments.length)return n(t);function n(t){if(t.length<3)return[];var n,e=vn(h),r=vn(p),i=t.length,o=[],a=[];for(n=0;n<i;n++)o.push([+e.call(this,t[n],n),+r.call(this,t[n],n),n]);for(o.sort(ki),n=0;n<i;n++)a.push([o[n][0],-o[n][1]]);var u=_i(o),l=_i(a),s=l[0]===u[0],c=l[l.length-1]===u[u.length-1],f=[];for(n=u.length-1;0<=n;--n)f.push(t[o[u[n]][2]]);for(n=+s;n<l.length-c;++n)f.push(t[o[l[n]][2]]);return f}return n.x=function(t){return arguments.length?(h=t,n):h},n.y=function(t){return arguments.length?(p=t,n):p},n},d3.geom.polygon=function(t){return P(t,Ai),t};var Ai=d3.geom.polygon.prototype=[];function Ci(t,n,e){return(e[0]-n[0])*(t[1]-n[1])<(e[1]-n[1])*(t[0]-n[0])}function Ei(t,n,e,r){var i=t[0],o=e[0],a=n[0]-i,u=r[0]-o,l=t[1],s=e[1],c=n[1]-l,f=r[1]-s,h=(u*(l-s)-f*(i-o))/(f*a-u*c);return[i+h*a,l+h*c]}function Ti(t){var n=t[0],e=t[t.length-1];return!(n[0]-e[0]||n[1]-e[1])}Ai.area=function(){for(var t,n=-1,e=this.length,r=this[e-1],i=0;++n<e;)t=r,r=this[n],i+=t[1]*r[0]-t[0]*r[1];return.5*i},Ai.centroid=function(t){var n,e,r=-1,i=this.length,o=0,a=0,u=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)n=u,u=this[r],e=n[0]*u[1]-u[0]*n[1],o+=(n[0]+u[0])*e,a+=(n[1]+u[1])*e;return[o*t,a*t]},Ai.clip=function(t){for(var n,e,r,i,o,a,u=Ti(t),l=-1,s=this.length-Ti(this),c=this[s-1];++l<s;){for(n=t.slice(),t.length=0,i=this[l],o=n[(r=n.length-u)-1],e=-1;++e<r;)Ci(a=n[e],c,i)?(Ci(o,c,i)||t.push(Ei(o,a,c,i)),t.push(a)):Ci(o,c,i)&&t.push(Ei(o,a,c,i)),o=a;u&&t.push(t[0]),c=i}return t};var Ni,Li,Ri,Oi,Di,ji=[],zi=[];function Ii(){eo(this),this.edge=this.site=this.circle=null}function qi(t){var n=ji.pop()||new Ii;return n.site=t,n}function Hi(t){Ki(t),Ri.remove(t),ji.push(t),eo(t)}function Pi(t){var n=t.circle,e=n.x,r=n.cy,i={x:e,y:r},o=t.P,a=t.N,u=[t];Hi(t);for(var l=o;l.circle&&O(e-l.circle.x)<Mt&&O(r-l.circle.cy)<Mt;)o=l.P,u.unshift(l),Hi(l),l=o;u.unshift(l),Ki(l);for(var s=a;s.circle&&O(e-s.circle.x)<Mt&&O(r-s.circle.cy)<Mt;)a=s.N,u.push(s),Hi(s),s=a;u.push(s),Ki(s);var c,f=u.length;for(c=1;c<f;++c)s=u[c],l=u[c-1],Qi(s.edge,l.site,s.site,i);l=u[0],(s=u[f-1]).edge=Zi(l.site,s.site,null,i),Yi(l),Yi(s)}function Fi(t){for(var n,e,r,i,o=t.x,a=t.y,u=Ri._;u;)if(r=Gi(u,a)-o,Mt<r)u=u.L;else{if(i=o-Ui(u,a),!(Mt<i)){-Mt<r?(n=u.P,e=u):-Mt<i?e=(n=u).N:n=e=u;break}if(!u.R){n=u;break}u=u.R}var l=qi(t);if(Ri.insert(n,l),n||e){if(n===e)return Ki(n),e=qi(n.site),Ri.insert(l,e),l.edge=e.edge=Zi(n.site,l.site),Yi(n),void Yi(e);if(e){Ki(n),Ki(e);var s=n.site,c=s.x,f=s.y,h=t.x-c,p=t.y-f,d=e.site,g=d.x-c,v=d.y-f,m=2*(h*v-p*g),y=h*h+p*p,x=g*g+v*v,b={x:(v*y-p*x)/m+c,y:(h*x-g*y)/m+f};Qi(e.edge,s,d,b),l.edge=Zi(s,t,null,b),e.edge=Zi(t,d,null,b),Yi(n),Yi(e)}else l.edge=Zi(n.site,l.site)}}function Gi(t,n){var e=t.site,r=e.x,i=e.y,o=i-n;if(!o)return r;var a=t.P;if(!a)return-1/0;var u=(e=a.site).x,l=e.y,s=l-n;if(!s)return u;var c=u-r,f=1/o-1/s,h=c/s;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*s)-l+s/2+i-o/2)))/f+r:(r+u)/2}function Ui(t,n){var e=t.N;if(e)return Gi(e,n);var r=t.site;return r.y===n?r.x:1/0}function Bi(t){this.site=t,this.edges=[]}function Wi(t,n){return n.angle-t.angle}function Vi(){eo(this),this.x=this.y=this.arc=this.site=this.cy=null}function Yi(t){var n=t.P,e=t.N;if(n&&e){var r=n.site,i=t.site,o=e.site;if(r!==o){var a=i.x,u=i.y,l=r.x-a,s=r.y-u,c=o.x-a,f=2*(l*(v=o.y-u)-s*c);if(!(-St<=f)){var h=l*l+s*s,p=c*c+v*v,d=(v*h-s*p)/f,g=(l*p-c*h)/f,v=g+u,m=zi.pop()||new Vi;m.arc=t,m.site=i,m.x=d+a,m.y=v+Math.sqrt(d*d+g*g),m.cy=v,t.circle=m;for(var y=null,x=Di._;x;)if(m.y<x.y||m.y===x.y&&m.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}Di.insert(y,m),y||(Oi=m)}}}}function Ki(t){var n=t.circle;n&&(n.P||(Oi=n.N),Di.remove(n),zi.push(n),eo(n),t.circle=null)}function Xi(t,n){var e=t.b;if(e)return!0;var r,i,o=t.a,a=n[0][0],u=n[1][0],l=n[0][1],s=n[1][1],c=t.l,f=t.r,h=c.x,p=c.y,d=f.x,g=f.y,v=(h+d)/2,m=(p+g)/2;if(g===p){if(v<a||u<=v)return;if(d<h){if(o){if(o.y>=s)return}else o={x:v,y:l};e={x:v,y:s}}else{if(o){if(o.y<l)return}else o={x:v,y:s};e={x:v,y:l}}}else if(i=m-(r=(h-d)/(g-p))*v,r<-1||1<r)if(d<h){if(o){if(o.y>=s)return}else o={x:(l-i)/r,y:l};e={x:(s-i)/r,y:s}}else{if(o){if(o.y<l)return}else o={x:(s-i)/r,y:s};e={x:(l-i)/r,y:l}}else if(p<g){if(o){if(o.x>=u)return}else o={x:a,y:r*a+i};e={x:u,y:r*u+i}}else{if(o){if(o.x<a)return}else o={x:u,y:r*u+i};e={x:a,y:r*a+i}}return t.a=o,t.b=e,!0}function $i(t,n){this.l=t,this.r=n,this.a=this.b=null}function Zi(t,n,e,r){var i=new $i(t,n);return Ni.push(i),e&&Qi(i,t,n,e),r&&Qi(i,n,t,r),Li[t.i].edges.push(new to(i,t,n)),Li[n.i].edges.push(new to(i,n,t)),i}function Ji(t,n,e){var r=new $i(t,null);return r.a=n,r.b=e,Ni.push(r),r}function Qi(t,n,e,r){t.a||t.b?t.l===e?t.b=r:t.a=r:(t.a=r,t.l=n,t.r=e)}function to(t,n,e){var r=t.a,i=t.b;this.edge=t,this.site=n,this.angle=e?Math.atan2(e.y-n.y,e.x-n.x):t.l===n?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function no(){this._=null}function eo(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ro(t,n){var e=n,r=n.R,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function io(t,n){var e=n,r=n.L,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function oo(t){for(;t.L;)t=t.L;return t}function ao(t,n){var e,r,i,o=t.sort(uo).pop();for(Ni=[],Li=new Array(t.length),Ri=new no,Di=new no;;)if(i=Oi,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===e&&o.y===r||(Li[o.i]=new Bi(o),Fi(o),e=o.x,r=o.y),o=t.pop();else{if(!i)break;Pi(i.arc)}n&&(function(t){for(var n,e=Ni,r=Sr(t[0][0],t[0][1],t[1][0],t[1][1]),i=e.length;i--;)Xi(n=e[i],t)&&r(n)&&!(O(n.a.x-n.b.x)<Mt&&O(n.a.y-n.b.y)<Mt)||(n.a=n.b=null,e.splice(i,1))}(n),function(t){for(var n,e,r,i,o,a,u,l,s,c,f=t[0][0],h=t[1][0],p=t[0][1],d=t[1][1],g=Li,v=g.length;v--;)if((o=g[v])&&o.prepare())for(l=(u=o.edges).length,a=0;a<l;)r=(c=u[a].end()).x,i=c.y,n=(s=u[++a%l].start()).x,e=s.y,(O(r-n)>Mt||O(i-e)>Mt)&&(u.splice(a,0,new to(Ji(o.site,c,O(r-f)<Mt&&Mt<d-i?{x:f,y:O(n-f)<Mt?e:d}:O(i-d)<Mt&&Mt<h-r?{x:O(e-d)<Mt?n:h,y:d}:O(r-h)<Mt&&Mt<i-p?{x:h,y:O(n-h)<Mt?e:p}:O(i-p)<Mt&&Mt<r-f?{x:O(e-p)<Mt?n:f,y:p}:null),o.site,null)),++l)}(n));var a={cells:Li,edges:Ni};return Ri=Di=Ni=Li=null,a}function uo(t,n){return n.y-t.y||n.x-t.x}Bi.prototype.prepare=function(){for(var t,n=this.edges,e=n.length;e--;)(t=n[e].edge).b&&t.a||n.splice(e,1);return n.sort(Wi),n.length},to.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},no.prototype={insert:function(t,n){var e,r,i;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;e=t}else e=this._?(t=oo(this._),n.P=null,(n.N=t).P=t.L=n,t):(n.P=n.N=null,this._=n,null);for(n.L=n.R=null,n.U=e,n.C=!0,t=n;e&&e.C;)e===(r=e.U).L?(i=r.R)&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.R&&(ro(this,e),e=(t=e).U),e.C=!1,r.C=!0,io(this,r)):(i=r.L)&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.L&&(io(this,e),e=(t=e).U),e.C=!1,r.C=!0,ro(this,r)),e=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,e,r,i=t.U,o=t.L,a=t.R;if(e=o?a?oo(a):o:a,i?i.L===t?i.L=e:i.R=e:this._=e,o&&a?(r=e.C,e.C=t.C,((e.L=o).U=e)!==a?(i=e.U,e.U=t.U,t=e.R,i.L=t,(e.R=a).U=e):(e.U=i,t=(i=e).R)):(r=t.C,t=e),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((n=i.R).C&&(n.C=!1,i.C=!0,ro(this,i),n=i.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,io(this,n),n=i.R),n.C=i.C,i.C=n.R.C=!1,ro(this,i),t=this._;break}}else if((n=i.L).C&&(n.C=!1,i.C=!0,io(this,i),n=i.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,ro(this,n),n=i.L),n.C=i.C,i.C=n.L.C=!1,io(this,i),t=this._;break}n.C=!0,i=(t=i).U}while(!t.C);t&&(t.C=!1)}}},d3.geom.voronoi=function(t){var n=Mi,e=Si,r=n,i=e,c=lo;if(t)return o(t);function o(i){var o=new Array(i.length),a=c[0][0],u=c[0][1],l=c[1][0],s=c[1][1];return ao(f(i),c).cells.forEach(function(t,n){var e=t.edges,r=t.site;(o[n]=e.length?e.map(function(t){var n=t.start();return[n.x,n.y]}):r.x>=a&&r.x<=l&&r.y>=u&&r.y<=s?[[a,s],[l,s],[l,u],[a,u]]:[]).point=i[n]}),o}function f(t){return t.map(function(t,n){return{x:Math.round(r(t,n)/Mt)*Mt,y:Math.round(i(t,n)/Mt)*Mt,i:n}})}return o.links=function(n){return ao(f(n)).edges.filter(function(t){return t.l&&t.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},o.triangles=function(h){var p=[];return ao(f(h)).cells.forEach(function(t,n){for(var e,r,i,o,a=t.site,u=t.edges.sort(Wi),l=-1,s=u.length,c=u[s-1].edge,f=c.l===a?c.r:c.l;++l<s;)c,e=f,f=(c=u[l].edge).l===a?c.r:c.l,n<e.i&&n<f.i&&(i=e,o=f,((r=a).x-o.x)*(i.y-r.y)-(r.x-i.x)*(o.y-r.y)<0)&&p.push([h[n],h[e.i],h[f.i]])}),p},o.x=function(t){return arguments.length?(r=vn(n=t),o):n},o.y=function(t){return arguments.length?(i=vn(e=t),o):e},o.clipExtent=function(t){return arguments.length?(c=null==t?lo:t,o):c===lo?null:c},o.size=function(t){return arguments.length?o.clipExtent(t&&[[0,0],t]):c===lo?null:c&&c[1]},o};var lo=[[-1e6,-1e6],[1e6,1e6]];function so(t){return t.x}function co(t){return t.y}function fo(t,n){t=d3.rgb(t),n=d3.rgb(n);var e=t.r,r=t.g,i=t.b,o=n.r-e,a=n.g-r,u=n.b-i;return function(t){return"#"+sn(Math.round(e+o*t))+sn(Math.round(r+a*t))+sn(Math.round(i+u*t))}}function ho(t,n){var e,r={},i={};for(e in t)e in n?r[e]=yo(t[e],n[e]):i[e]=t[e];for(e in n)e in t||(i[e]=n[e]);return function(t){for(e in r)i[e]=r[e](t);return i}}function po(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function go(t,r){var n,e,i,o=vo.lastIndex=mo.lastIndex=0,a=-1,u=[],l=[];for(t+="",r+="";(n=vo.exec(t))&&(e=mo.exec(r));)(i=e.index)>o&&(i=r.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(n=n[0])===(e=e[0])?u[a]?u[a]+=e:u[++a]=e:(u[++a]=null,l.push({i:a,x:po(n,e)})),o=mo.lastIndex;return o<r.length&&(i=r.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?l[0]?(r=l[0].x,function(t){return r(t)+""}):function(){return r}:(r=l.length,function(t){for(var n,e=0;e<r;++e)u[(n=l[e]).i]=n.x(t);return u.join("")})}d3.geom.delaunay=function(t){return d3.geom.voronoi().triangles(t)},d3.geom.quadtree=function(t,x,b,w,M){var S,_=Mi,k=Si;if(S=arguments.length)return _=so,k=co,3===S&&(M=b,w=x,b=x=0),n(t);function n(t){var n,e,r,i,o,a,u,l,s,c=vn(_),f=vn(k);if(null!=x)a=x,u=b,l=w,s=M;else if(l=s=-(a=u=1/0),e=[],r=[],o=t.length,S)for(i=0;i<o;++i)(n=t[i]).x<a&&(a=n.x),n.y<u&&(u=n.y),n.x>l&&(l=n.x),n.y>s&&(s=n.y),e.push(n.x),r.push(n.y);else for(i=0;i<o;++i){var h=+c(n=t[i],i),p=+f(n,i);h<a&&(a=h),p<u&&(u=p),l<h&&(l=h),s<p&&(s=p),e.push(h),r.push(p)}var d=l-a,g=s-u;function v(t,n,e,r,i,o,a,u){if(!isNaN(e)&&!isNaN(r))if(t.leaf){var l=t.x,s=t.y;if(null!=l)if(O(l-e)+O(s-r)<.01)m(t,n,e,r,i,o,a,u);else{var c=t.point;t.x=t.y=t.point=null,m(t,c,l,s,i,o,a,u),m(t,n,e,r,i,o,a,u)}else t.x=e,t.y=r,t.point=n}else m(t,n,e,r,i,o,a,u)}function m(t,n,e,r,i,o,a,u){var l=.5*(i+a),s=.5*(o+u),c=l<=e,f=s<=r,h=f<<1|c;t.leaf=!1,c?i=l:a=l,f?o=s:u=s,v(t=t.nodes[h]||(t.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null}),n,e,r,i,o,a,u)}g<d?s=u+d:l=a+g;var y={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){v(y,t,+c(t,++i),+f(t,i),a,u,l,s)}};if(y.visit=function(t){!function t(n,e,r,i,o,a){if(!n(e,r,i,o,a)){var u=.5*(r+o),l=.5*(i+a),s=e.nodes;s[0]&&t(n,s[0],r,i,u,l),s[1]&&t(n,s[1],u,i,o,l),s[2]&&t(n,s[2],r,l,u,a),s[3]&&t(n,s[3],u,l,o,a)}}(t,y,a,u,l,s)},y.find=function(t){return function(t,v,m,y,x,b,w){var M,S=1/0;return function t(n,e,r,i,o){if(!(b<e||w<r||i<y||o<x)){if(a=n.point){var a,u=v-n.x,l=m-n.y,s=u*u+l*l;if(s<S){var c=Math.sqrt(S=s);y=v-c,x=m-c,b=v+c,w=m+c,M=a}}for(var f=n.nodes,h=.5*(e+i),p=.5*(r+o),d=(p<=m)<<1|h<=v,g=d+4;d<g;++d)if(n=f[3&d])switch(3&d){case 0:t(n,e,r,h,p);break;case 1:t(n,h,r,i,p);break;case 2:t(n,e,p,h,o);break;case 3:t(n,h,p,i,o)}}}(t,y,x,b,w),M}(y,t[0],t[1],a,u,l,s)},i=-1,null==x){for(;++i<o;)v(y,t[i],e[i],r[i],a,u,l,s);--i}else t.forEach(y.add);return e=r=t=n=null,y}return n.x=function(t){return arguments.length?(_=t,n):_},n.y=function(t){return arguments.length?(k=t,n):k},n.extent=function(t){return arguments.length?(null==t?x=b=w=M=null:(x=+t[0][0],b=+t[0][1],w=+t[1][0],M=+t[1][1]),n):null==x?null:[[x,b],[w,M]]},n.size=function(t){return arguments.length?(null==t?x=b=w=M=null:(x=b=0,w=+t[0],M=+t[1]),n):null==x?null:[w-x,M-b]},n},d3.interpolateRgb=fo,d3.interpolateObject=ho,d3.interpolateNumber=po,d3.interpolateString=go;var vo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mo=new RegExp(vo.source,"g");function yo(t,n){for(var e,r=d3.interpolators.length;0<=--r&&!(e=d3.interpolators[r](t,n)););return e}function xo(t,n){var e,r=[],i=[],o=t.length,a=n.length,u=Math.min(t.length,n.length);for(e=0;e<u;++e)r.push(yo(t[e],n[e]));for(;e<o;++e)i[e]=t[e];for(;e<a;++e)i[e]=n[e];return function(t){for(e=0;e<u;++e)i[e]=r[e](t);return i}}d3.interpolate=yo,d3.interpolators=[function(t,n){var e=typeof n;return("string"==e?gn.has(n.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(n)?fo:go:n instanceof Pt?fo:Array.isArray(n)?xo:"object"==e&&isNaN(n)?ho:po)(t,n)}],d3.interpolateArray=xo;function bo(){return j}var wo=d3.map({linear:bo,poly:function(n){return function(t){return Math.pow(t,n)}},quad:function(){return ko},cubic:function(){return Ao},sin:function(){return Eo},exp:function(){return To},circle:function(){return No},elastic:function(n,e){var r;arguments.length<2&&(e=.45);r=arguments.length?e/kt*Math.asin(1/n):(n=1,e/4);return function(t){return 1+n*Math.pow(2,-10*t)*Math.sin((t-r)*kt/e)}},back:function(n){n=n||1.70158;return function(t){return t*t*((n+1)*t-n)}},bounce:function(){return Lo}}),Mo=d3.map({in:j,out:So,"in-out":_o,"out-in":function(t){return _o(So(t))}});function So(n){return function(t){return 1-n(1-t)}}function _o(n){return function(t){return.5*(t<.5?n(2*t):2-n(2-2*t))}}function ko(t){return t*t}function Ao(t){return t*t*t}function Co(t){if(t<=0)return 0;if(1<=t)return 1;var n=t*t,e=n*t;return 4*(t<.5?e:3*(t-n)+e-.75)}function Eo(t){return 1-Math.cos(t*Ct)}function To(t){return Math.pow(2,10*(t-1))}function No(t){return 1-Math.sqrt(1-t*t)}function Lo(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Ro(n,e){return e-=n,function(t){return Math.round(n+e*t)}}function Oo(t){var n=[t.a,t.b],e=[t.c,t.d],r=jo(n),i=Do(n,e),o=jo(function(t,n,e){return t[0]+=e*n[0],t[1]+=e*n[1],t}(e,n,-i))||0;n[0]*e[1]<e[0]*n[1]&&(n[0]*=-1,n[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(n[1],n[0]):Math.atan2(-e[0],e[1]))*Tt,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*Tt:0}function Do(t,n){return t[0]*n[0]+t[1]*n[1]}function jo(t){var n=Math.sqrt(Do(t,t));return n&&(t[0]/=n,t[1]/=n),n}d3.ease=function(t){var n=t.indexOf("-"),e=0<=n?t.slice(0,n):t,r=0<=n?t.slice(n+1):"in";return e=wo.get(e)||bo,function(n){return function(t){return t<=0?0:1<=t?1:n(t)}}((r=Mo.get(r)||j)(e.apply(null,i.call(arguments,1))))},d3.interpolateHcl=function(t,n){t=d3.hcl(t),n=d3.hcl(n);var e=t.h,r=t.c,i=t.l,o=n.h-e,a=n.c-r,u=n.l-i;isNaN(a)&&(a=0,r=isNaN(r)?n.c:r);isNaN(o)?(o=0,e=isNaN(e)?n.h:e):180<o?o-=360:o<-180&&(o+=360);return function(t){return Vt(e+o*t,r+a*t,i+u*t)+""}},d3.interpolateHsl=function(t,n){t=d3.hsl(t),n=d3.hsl(n);var e=t.h,r=t.s,i=t.l,o=n.h-e,a=n.s-r,u=n.l-i;isNaN(a)&&(a=0,r=isNaN(r)?n.s:r);isNaN(o)?(o=0,e=isNaN(e)?n.h:e):180<o?o-=360:o<-180&&(o+=360);return function(t){return Ut(e+o*t,r+a*t,i+u*t)+""}},d3.interpolateLab=function(t,n){t=d3.lab(t),n=d3.lab(n);var e=t.l,r=t.a,i=t.b,o=n.l-e,a=n.a-r,u=n.b-i;return function(t){return Qt(e+o*t,r+a*t,i+u*t)+""}},d3.interpolateRound=Ro,d3.transform=function(t){var e=x.createElementNS(d3.ns.prefix.svg,"g");return(d3.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Oo(n?n.matrix:zo)})(t)},Oo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var zo={a:1,b:0,c:0,d:1,e:0,f:0};function Io(t){return t.length?t.pop()+",":""}function qo(t,n){var i=[],o=[];return t=d3.transform(t),n=d3.transform(n),function(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var i=e.push("translate(",null,",",null,")");r.push({i:i-4,x:po(t[0],n[0])},{i:i-2,x:po(t[1],n[1])})}else(n[0]||n[1])&&e.push("translate("+n+")")}(t.translate,n.translate,i,o),function(t,n,e,r){t!==n?(180<t-n?n+=360:180<n-t&&(t+=360),r.push({i:e.push(Io(e)+"rotate(",null,")")-2,x:po(t,n)})):n&&e.push(Io(e)+"rotate("+n+")")}(t.rotate,n.rotate,i,o),function(t,n,e,r){t!==n?r.push({i:e.push(Io(e)+"skewX(",null,")")-2,x:po(t,n)}):n&&e.push(Io(e)+"skewX("+n+")")}(t.skew,n.skew,i,o),function(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var i=e.push(Io(e)+"scale(",null,",",null,")");r.push({i:i-4,x:po(t[0],n[0])},{i:i-2,x:po(t[1],n[1])})}else 1===n[0]&&1===n[1]||e.push(Io(e)+"scale("+n+")")}(t.scale,n.scale,i,o),t=n=null,function(t){for(var n,e=-1,r=o.length;++e<r;)i[(n=o[e]).i]=n.x(t);return i.join("")}}function Ho(n,e){return e=(e-=n=+n)||1/e,function(t){return(t-n)/e}}function Po(n,e){return e=(e-=n=+n)||1/e,function(t){return Math.max(0,Math.min(1,(t-n)/e))}}function Fo(t){for(var n=t.source,e=t.target,r=function(t,n){if(t===n)return t;var e=Go(t),r=Go(n),i=e.pop(),o=r.pop(),a=null;for(;i===o;)a=i,i=e.pop(),o=r.pop();return a}(n,e),i=[n];n!==r;)n=n.parent,i.push(n);for(var o=i.length;e!==r;)i.splice(o,0,e),e=e.parent;return i}function Go(t){for(var n=[],e=t.parent;null!=e;)n.push(t),e=(t=e).parent;return n.push(t),n}function Uo(t){t.fixed|=2}function Bo(t){t.fixed&=-7}function Wo(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Vo(t){t.fixed&=-5}d3.interpolateTransform=qo,d3.layout={},d3.layout.bundle=function(){return function(t){for(var n=[],e=-1,r=t.length;++e<r;)n.push(Fo(t[e]));return n}},d3.layout.chord=function(){var v,m,y,x,b,w,M,n={},S=0;function t(){var t,n,e,r,i,o={},a=[],u=d3.range(x),l=[];for(v=[],m=[],t=0,r=-1;++r<x;){for(n=0,i=-1;++i<x;)n+=y[r][i];a.push(n),l.push(d3.range(x)),t+=n}for(b&&u.sort(function(t,n){return b(a[t],a[n])}),w&&l.forEach(function(t,e){t.sort(function(t,n){return w(y[e][t],y[e][n])})}),t=(kt-S*x)/t,n=0,r=-1;++r<x;){for(e=n,i=-1;++i<x;){var s=u[r],c=l[s][i],f=y[s][c],h=n,p=n+=f*t;o[s+"-"+c]={index:s,subindex:c,startAngle:h,endAngle:p,value:f}}m[s]={index:s,startAngle:e,endAngle:n,value:a[s]},n+=S}for(r=-1;++r<x;)for(i=r-1;++i<x;){var d=o[r+"-"+i],g=o[i+"-"+r];(d.value||g.value)&&v.push(d.value<g.value?{source:g,target:d}:{source:d,target:g})}M&&_()}function _(){v.sort(function(t,n){return M((t.source.value+t.target.value)/2,(n.source.value+n.target.value)/2)})}return n.matrix=function(t){return arguments.length?(x=(y=t)&&y.length,v=m=null,n):y},n.padding=function(t){return arguments.length?(S=t,v=m=null,n):S},n.sortGroups=function(t){return arguments.length?(b=t,v=m=null,n):b},n.sortSubgroups=function(t){return arguments.length?(w=t,v=null,n):w},n.sortChords=function(t){return arguments.length?(M=t,v&&_(),n):M},n.chords=function(){return v||t(),v},n.groups=function(){return m||t(),m},n},d3.layout.force=function(){var f,t,h,p,d,g,i={},v=d3.dispatch("start","tick","end"),m=[1,1],y=.9,o=Yo,a=Ko,x=-30,c=Xo,b=.1,w=.64,M=[],S=[];function _(s){return function(t,n,e,r){if(t.point!==s){var i=t.cx-s.x,o=t.cy-s.y,a=r-n,u=i*i+o*o;if(a*a/w<u){if(u<c){var l=t.charge/u;s.px-=i*l,s.py-=o*l}return!0}if(t.point&&u&&u<c){l=t.pointCharge/u;s.px-=i*l,s.py-=o*l}}return!t.charge}}function n(t){t.px=d3.event.x,t.py=d3.event.y,i.resume()}return i.tick=function(){if((h*=.99)<.005)return f=null,v.end({type:"end",alpha:h=0}),!0;var t,n,e,r,i,o,a,u,l,s=M.length,c=S.length;for(n=0;n<c;++n)r=(e=S[n]).source,(o=(u=(i=e.target).x-r.x)*u+(l=i.y-r.y)*l)&&(u*=o=h*d[n]*((o=Math.sqrt(o))-p[n])/o,l*=o,i.x-=u*(a=r.weight+i.weight?r.weight/(r.weight+i.weight):.5),i.y-=l*a,r.x+=u*(a=1-a),r.y+=l*a);if((a=h*b)&&(u=m[0]/2,l=m[1]/2,n=-1,a))for(;++n<s;)(e=M[n]).x+=(u-e.x)*a,e.y+=(l-e.y)*a;if(x)for(!function t(n,e,r){var i=0,o=0;n.charge=0;if(!n.leaf)for(var a,u=n.nodes,l=u.length,s=-1;++s<l;)null!=(a=u[s])&&(t(a,e,r),n.charge+=a.charge,i+=a.charge*a.cx,o+=a.charge*a.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var c=e*r[n.point.index];n.charge+=n.pointCharge=c,i+=c*n.point.x,o+=c*n.point.y}n.cx=i/n.charge;n.cy=o/n.charge}(t=d3.geom.quadtree(M),h,g),n=-1;++n<s;)(e=M[n]).fixed||t.visit(_(e));for(n=-1;++n<s;)(e=M[n]).fixed?(e.x=e.px,e.y=e.py):(e.x-=(e.px-(e.px=e.x))*y,e.y-=(e.py-(e.py=e.y))*y);v.tick({type:"tick",alpha:h})},i.nodes=function(t){return arguments.length?(M=t,i):M},i.links=function(t){return arguments.length?(S=t,i):S},i.size=function(t){return arguments.length?(m=t,i):m},i.linkDistance=function(t){return arguments.length?(o="function"==typeof t?t:+t,i):o},i.distance=i.linkDistance,i.linkStrength=function(t){return arguments.length?(a="function"==typeof t?t:+t,i):a},i.friction=function(t){return arguments.length?(y=+t,i):y},i.charge=function(t){return arguments.length?(x="function"==typeof t?t:+t,i):x},i.chargeDistance=function(t){return arguments.length?(c=t*t,i):Math.sqrt(c)},i.gravity=function(t){return arguments.length?(b=+t,i):b},i.theta=function(t){return arguments.length?(w=t*t,i):Math.sqrt(w)},i.alpha=function(t){return arguments.length?(t=+t,h?0<t?h=t:(f.c=null,f.t=NaN,f=null,v.end({type:"end",alpha:h=0})):0<t&&(v.start({type:"start",alpha:h=t}),f=_n(i.tick)),i):h},i.start=function(){var u,l,t,s=M.length,c=S.length,n=m[0],e=m[1];for(u=0;u<s;++u)(t=M[u]).index=u,t.weight=0;for(u=0;u<c;++u)"number"==typeof(t=S[u]).source&&(t.source=M[t.source]),"number"==typeof t.target&&(t.target=M[t.target]),++t.source.weight,++t.target.weight;for(u=0;u<s;++u)t=M[u],isNaN(t.x)&&(t.x=r("x",n)),isNaN(t.y)&&(t.y=r("y",e)),isNaN(t.px)&&(t.px=t.x),isNaN(t.py)&&(t.py=t.y);if(p=[],"function"==typeof o)for(u=0;u<c;++u)p[u]=+o.call(this,S[u],u);else for(u=0;u<c;++u)p[u]=o;if(d=[],"function"==typeof a)for(u=0;u<c;++u)d[u]=+a.call(this,S[u],u);else for(u=0;u<c;++u)d[u]=a;if(g=[],"function"==typeof x)for(u=0;u<s;++u)g[u]=+x.call(this,M[u],u);else for(u=0;u<s;++u)g[u]=x;function r(t,n){if(!l){for(l=new Array(s),o=0;o<s;++o)l[o]=[];for(o=0;o<c;++o){var e=S[o];l[e.source.index].push(e.target),l[e.target.index].push(e.source)}}for(var r,i=l[u],o=-1,a=i.length;++o<a;)if(!isNaN(r=i[o][t]))return r;return Math.random()*n}return i.resume()},i.resume=function(){return i.alpha(.1)},i.stop=function(){return i.alpha(0)},i.drag=function(){if(t=t||d3.behavior.drag().origin(j).on("dragstart.force",Uo).on("drag.force",n).on("dragend.force",Bo),!arguments.length)return t;this.on("mouseover.force",Wo).on("mouseout.force",Vo).call(t)},d3.rebind(i,v,"on")};var Yo=20,Ko=1,Xo=1/0;function $o(t,n){return d3.rebind(t,n,"sort","children","value"),(t.nodes=t).links=ea,t}function Zo(t,n){for(var e=[t];null!=(t=e.pop());)if(n(t),(i=t.children)&&(r=i.length))for(var r,i;0<=--r;)e.push(i[r])}function Jo(t,n){for(var e=[t],r=[];null!=(t=e.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)e.push(o[a]);for(;null!=(t=r.pop());)n(t)}function Qo(t){return t.children}function ta(t){return t.value}function na(t,n){return n.value-t.value}function ea(t){return d3.merge(t.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}d3.layout.hierarchy=function(){var u=na,l=Qo,s=ta;function c(t){var n,e=[t],r=[];for(t.depth=0;null!=(n=e.pop());)if(r.push(n),(o=l.call(c,n,n.depth))&&(i=o.length)){for(var i,o,a;0<=--i;)e.push(a=o[i]),a.parent=n,a.depth=n.depth+1;s&&(n.value=0),n.children=o}else s&&(n.value=+s.call(c,n,n.depth)||0),delete n.children;return Jo(t,function(t){var n,e;u&&(n=t.children)&&n.sort(u),s&&(e=t.parent)&&(e.value+=t.value)}),r}return c.sort=function(t){return arguments.length?(u=t,c):u},c.children=function(t){return arguments.length?(l=t,c):l},c.value=function(t){return arguments.length?(s=t,c):s},c.revalue=function(t){return s&&(Zo(t,function(t){t.children&&(t.value=0)}),Jo(t,function(t){var n;t.children||(t.value=+s.call(c,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},c},d3.layout.partition=function(){var r=d3.layout.hierarchy(),i=[1,1];function n(t,n){var e=r.call(this,t,n);return function t(n,e,r,i){var o=n.children;if(n.x=e,n.y=n.depth*i,n.dx=r,n.dy=i,o&&(a=o.length)){var a,u,l,s=-1;for(r=n.value?r/n.value:0;++s<a;)t(u=o[s],e,l=u.value*r,i),e+=l}}(e[0],0,i[0],i[1]/function t(n){var e=n.children,r=0;if(e&&(i=e.length))for(var i,o=-1;++o<i;)r=Math.max(r,t(e[o]));return 1+r}(e[0])),e}return n.size=function(t){return arguments.length?(i=t,n):i},$o(n,r)},d3.layout.pie=function(){var h=Number,p=ra,d=0,g=kt,v=0;function m(e){var n,t=e.length,r=e.map(function(t,n){return+h.call(m,t,n)}),i=+("function"==typeof d?d.apply(this,arguments):d),o=("function"==typeof g?g.apply(this,arguments):g)-i,a=Math.min(Math.abs(o)/t,+("function"==typeof v?v.apply(this,arguments):v)),u=a*(o<0?-1:1),l=d3.sum(r),s=l?(o-t*u)/l:0,c=d3.range(t),f=[];return null!=p&&c.sort(p===ra?function(t,n){return r[n]-r[t]}:function(t,n){return p(e[t],e[n])}),c.forEach(function(t){f[t]={data:e[t],value:n=r[t],startAngle:i,endAngle:i+=n*s+u,padAngle:a}}),f}return m.value=function(t){return arguments.length?(h=t,m):h},m.sort=function(t){return arguments.length?(p=t,m):p},m.startAngle=function(t){return arguments.length?(d=t,m):d},m.endAngle=function(t){return arguments.length?(g=t,m):g},m.padAngle=function(t){return arguments.length?(v=t,m):v},m};var ra={};function ia(t){return t.x}function oa(t){return t.y}function aa(t,n,e){t.y0=n,t.y=e}d3.layout.stack=function(){var f=j,h=sa,p=ca,d=aa,g=ia,v=oa;function m(t,n){if(!(o=t.length))return t;var e=t.map(function(t,n){return f.call(m,t,n)}),r=e.map(function(t){return t.map(function(t,n){return[g.call(m,t,n),v.call(m,t,n)]})}),i=h.call(m,r,n);e=d3.permute(e,i),r=d3.permute(r,i);var o,a,u,l,s=p.call(m,r,n),c=e[0].length;for(u=0;u<c;++u)for(d.call(m,e[0][u],l=s[u],r[0][u][1]),a=1;a<o;++a)d.call(m,e[a][u],l+=r[a-1][u][1],r[a][u][1]);return t}return m.values=function(t){return arguments.length?(f=t,m):f},m.order=function(t){return arguments.length?(h="function"==typeof t?t:ua.get(t)||sa,m):h},m.offset=function(t){return arguments.length?(p="function"==typeof t?t:la.get(t)||ca,m):p},m.x=function(t){return arguments.length?(g=t,m):g},m.y=function(t){return arguments.length?(v=t,m):v},m.out=function(t){return arguments.length?(d=t,m):d},m};var ua=d3.map({"inside-out":function(t){var n,e,r=t.length,i=t.map(fa),o=t.map(ha),a=d3.range(r).sort(function(t,n){return i[t]-i[n]}),u=0,l=0,s=[],c=[];for(n=0;n<r;++n)e=a[n],u<l?(u+=o[e],s.push(e)):(l+=o[e],c.push(e));return c.reverse().concat(s)},reverse:function(t){return d3.range(t.length).reverse()},default:sa}),la=d3.map({silhouette:function(t){var n,e,r,i=t.length,o=t[0].length,a=[],u=0,l=[];for(e=0;e<o;++e){for(r=n=0;n<i;n++)r+=t[n][e][1];u<r&&(u=r),a.push(r)}for(e=0;e<o;++e)l[e]=(u-a[e])/2;return l},wiggle:function(t){var n,e,r,i,o,a,u,l,s,c=t.length,f=t[0],h=f.length,p=[];for(p[0]=l=s=0,e=1;e<h;++e){for(i=n=0;n<c;++n)i+=t[n][e][1];for(o=n=0,u=f[e][0]-f[e-1][0];n<c;++n){for(r=0,a=(t[n][e][1]-t[n][e-1][1])/(2*u);r<n;++r)a+=(t[r][e][1]-t[r][e-1][1])/u;o+=a*t[n][e][1]}p[e]=l-=i?o/i*u:0,l<s&&(s=l)}for(e=0;e<h;++e)p[e]-=s;return p},expand:function(t){var n,e,r,i=t.length,o=t[0].length,a=1/i,u=[];for(e=0;e<o;++e){for(r=n=0;n<i;n++)r+=t[n][e][1];if(r)for(n=0;n<i;n++)t[n][e][1]/=r;else for(n=0;n<i;n++)t[n][e][1]=a}for(e=0;e<o;++e)u[e]=0;return u},zero:ca});function sa(t){return d3.range(t.length)}function ca(t){for(var n=-1,e=t[0].length,r=[];++n<e;)r[n]=0;return r}function fa(t){for(var n,e=1,r=0,i=t[0][1],o=t.length;e<o;++e)(n=t[e][1])>i&&(r=e,i=n);return r}function ha(t){return t.reduce(pa,0)}function pa(t,n){return t+n[1]}function da(t,n){return ga(t,Math.ceil(Math.log(n.length)/Math.LN2+1))}function ga(t,n){for(var e=-1,r=+t[0],i=(t[1]-r)/n,o=[];++e<=n;)o[e]=i*e+r;return o}function va(t){return[d3.min(t),d3.max(t)]}function ma(t,n){return t.value-n.value}function ya(t,n){var e=t._pack_next;(t._pack_next=n)._pack_prev=t,(n._pack_next=e)._pack_prev=n}function xa(t,n){(t._pack_next=n)._pack_prev=t}function ba(t,n){var e=n.x-t.x,r=n.y-t.y,i=t.r+n.r;return e*e+r*r<.999*i*i}function wa(t){if((n=t.children)&&(l=n.length)){var n,e,r,i,o,a,u,l,s=1/0,c=-1/0,f=1/0,h=-1/0;if(n.forEach(Ma),(e=n[0]).x=-e.r,e.y=0,x(e),1<l&&((r=n[1]).x=r.r,r.y=0,x(r),2<l))for(_a(e,r,i=n[2]),x(i),ya(e,i),ya(e._pack_prev=i,r),r=e._pack_next,o=3;o<l;o++){_a(e,r,i=n[o]);var p=0,d=1,g=1;for(a=r._pack_next;a!==r;a=a._pack_next,d++)if(ba(a,i)){p=1;break}if(1==p)for(u=e._pack_prev;u!==a._pack_prev&&!ba(u,i);u=u._pack_prev,g++);p?(d<g||d==g&&r.r<e.r?xa(e,r=a):xa(e=u,r),o--):(ya(e,i),x(r=i))}var v=(s+c)/2,m=(f+h)/2,y=0;for(o=0;o<l;o++)(i=n[o]).x-=v,i.y-=m,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=y,n.forEach(Sa)}function x(t){s=Math.min(t.x-t.r,s),c=Math.max(t.x+t.r,c),f=Math.min(t.y-t.r,f),h=Math.max(t.y+t.r,h)}}function Ma(t){t._pack_next=t._pack_prev=t}function Sa(t){delete t._pack_next,delete t._pack_prev}function _a(t,n,e){var r=t.r+e.r,i=n.x-t.x,o=n.y-t.y;if(r&&(i||o)){var a=n.r+e.r,u=i*i+o*o,l=.5+((r*=r)-(a*=a))/(2*u),s=Math.sqrt(Math.max(0,2*a*(r+u)-(r-=u)*r-a*a))/(2*u);e.x=t.x+l*i+s*o,e.y=t.y+l*o-s*i}else e.x=t.x+r,e.y=t.y}function ka(t,n){return t.parent==n.parent?1:2}function Aa(t){var n=t.children;return n.length?n[0]:t.t}function Ca(t){var n,e=t.children;return(n=e.length)?e[n-1]:t.t}function Ea(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function Ta(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Na(t,n){var e=t.x+n[3],r=t.y+n[0],i=t.dx-n[1]-n[3],o=t.dy-n[0]-n[2];return i<0&&(e+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:e,y:r,dx:i,dy:o}}function La(t){var n=t[0],e=t[t.length-1];return n<e?[n,e]:[e,n]}function Ra(t){return t.rangeExtent?t.rangeExtent():La(t.range())}function Oa(t,n,e,r){var i=e(t[0],t[1]),o=r(n[0],n[1]);return function(t){return o(i(t))}}function Da(t,n){var e,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(e=r,r=i,i=e,e=o,o=a,a=e),t[r]=n.floor(o),t[i]=n.ceil(a),t}function ja(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:za}d3.layout.histogram=function(){var f=!0,h=Number,p=va,d=da;function e(t,n){for(var e,r,i=[],o=t.map(h,this),a=p.call(this,o,n),u=d.call(this,a,o,n),l=(n=-1,o.length),s=u.length-1,c=f?1:1/l;++n<s;)(e=i[n]=[]).dx=u[n+1]-(e.x=u[n]),e.y=0;if(0<s)for(n=-1;++n<l;)(r=o[n])>=a[0]&&r<=a[1]&&((e=i[d3.bisect(u,r,1,s)-1]).y+=c,e.push(t[n]));return i}return e.value=function(t){return arguments.length?(h=t,e):h},e.range=function(t){return arguments.length?(p=vn(t),e):p},e.bins=function(n){return arguments.length?(d="number"==typeof n?function(t){return ga(t,n)}:vn(n),e):d},e.frequency=function(t){return arguments.length?(f=!!t,e):f},e},d3.layout.pack=function(){var l,s=d3.layout.hierarchy().sort(ma),c=0,f=[1,1];function n(t,n){var e=s.call(this,t,n),r=e[0],i=f[0],o=f[1],a=null==l?Math.sqrt:"function"==typeof l?l:function(){return l};if(r.x=r.y=0,Jo(r,function(t){t.r=+a(t.value)}),Jo(r,wa),c){var u=c*(l?1:Math.max(2*r.r/i,2*r.r/o))/2;Jo(r,function(t){t.r+=u}),Jo(r,wa),Jo(r,function(t){t.r-=u})}return function t(n,e,r,i){var o=n.children;n.x=e+=i*n.x;n.y=r+=i*n.y;n.r*=i;if(o)for(var a=-1,u=o.length;++a<u;)t(o[a],e,r,i)}(r,i/2,o/2,l?1:1/Math.max(2*r.r/i,2*r.r/o)),e}return n.size=function(t){return arguments.length?(f=t,n):f},n.radius=function(t){return arguments.length?(l=null==t||"function"==typeof t?t:+t,n):l},n.padding=function(t){return arguments.length?(c=+t,n):c},$o(n,s)},d3.layout.tree=function(){var f=d3.layout.hierarchy().sort(null).value(null),g=ka,h=[1,1],p=null;function n(t,n){var e=f.call(this,t,n),r=e[0],i=function(t){var n,e={A:null,children:[t]},r=[e];for(;null!=(n=r.pop());)for(var i,o=n.children,a=0,u=o.length;a<u;++a)r.push((o[a]=i={_:o[a],parent:n,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return e.children[0]}(r);if(Jo(i,d),i.parent.m=-i.z,Zo(i,v),p)Zo(r,m);else{var o=r,a=r,u=r;Zo(r,function(t){t.x<o.x&&(o=t),t.x>a.x&&(a=t),t.depth>u.depth&&(u=t)});var l=g(o,a)/2-o.x,s=h[0]/(a.x+g(a,o)/2+l),c=h[1]/(u.depth||1);Zo(r,function(t){t.x=(t.x+l)*s,t.y=t.depth*c})}return e}function d(t){var n=t.children,e=t.parent.children,r=t.i?e[t.i-1]:null;if(n.length){!function(t){var n,e=0,r=0,i=t.children,o=i.length;for(;0<=--o;)(n=i[o]).z+=e,n.m+=e,e+=n.s+(r+=n.c)}(t);var i=(n[0].z+n[n.length-1].z)/2;r?(t.z=r.z+g(t._,r._),t.m=t.z-i):t.z=i}else r&&(t.z=r.z+g(t._,r._));t.parent.A=function(t,n,e){if(n){for(var r,i=t,o=t,a=n,u=i.parent.children[0],l=i.m,s=o.m,c=a.m,f=u.m;a=Ca(a),i=Aa(i),a&&i;)u=Aa(u),(o=Ca(o)).a=t,0<(r=a.z+c-i.z-l+g(a._,i._))&&(Ea((p=t,d=e,(h=a).a.parent===p.parent?h.a:d),t,r),l+=r,s+=r),c+=a.m,l+=i.m,f+=u.m,s+=o.m;a&&!Ca(o)&&(o.t=a,o.m+=c-s),i&&!Aa(u)&&(u.t=i,u.m+=l-f,e=t)}var h,p,d;return e}(t,r,t.parent.A||e[0])}function v(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function m(t){t.x*=h[0],t.y=t.depth*h[1]}return n.separation=function(t){return arguments.length?(g=t,n):g},n.size=function(t){return arguments.length?(p=null==(h=t)?m:null,n):p?null:h},n.nodeSize=function(t){return arguments.length?(p=null==(h=t)?null:m,n):p?h:null},$o(n,f)},d3.layout.cluster=function(){var c=d3.layout.hierarchy().sort(null).value(null),f=ka,h=[1,1],p=!1;function n(t,n){var e,r=c.call(this,t,n),i=r[0],o=0;Jo(i,function(t){var n=t.children;n&&n.length?(t.x=function(t){return t.reduce(function(t,n){return t+n.x},0)/t.length}(n),t.y=function(t){return 1+d3.max(t,function(t){return t.y})}(n)):(t.x=e?o+=f(t,e):0,t.y=0,e=t)});var a=function t(n){var e=n.children;return e&&e.length?t(e[0]):n}(i),u=function t(n){var e,r=n.children;return r&&(e=r.length)?t(r[e-1]):n}(i),l=a.x-f(a,u)/2,s=u.x+f(u,a)/2;return Jo(i,p?function(t){t.x=(t.x-i.x)*h[0],t.y=(i.y-t.y)*h[1]}:function(t){t.x=(t.x-l)/(s-l)*h[0],t.y=(1-(i.y?t.y/i.y:1))*h[1]}),r}return n.separation=function(t){return arguments.length?(f=t,n):f},n.size=function(t){return arguments.length?(p=null==(h=t),n):p?null:h},n.nodeSize=function(t){return arguments.length?(p=null!=(h=t),n):p?h:null},$o(n,c)},d3.layout.treemap=function(){var r,i=d3.layout.hierarchy(),c=Math.round,o=[1,1],a=null,f=Ta,u=!1,h="squarify",l=.5*(1+Math.sqrt(5));function p(t,n){for(var e,r,i=-1,o=t.length;++i<o;)r=(e=t[i]).value*(n<0?0:n),e.area=isNaN(r)||r<=0?0:r}function d(t){var n=t.children;if(n&&n.length){var e,r,i,o=f(t),a=[],u=n.slice(),l=1/0,s="slice"===h?o.dx:"dice"===h?o.dy:"slice-dice"===h?1&t.depth?o.dy:o.dx:Math.min(o.dx,o.dy);for(p(u,o.dx*o.dy/t.value),a.area=0;0<(i=u.length);)a.push(e=u[i-1]),a.area+=e.area,l="squarify"!==h||(r=g(a,s))<=l?(u.pop(),r):(a.area-=a.pop().area,v(a,s,o,!1),s=Math.min(o.dx,o.dy),a.length=a.area=0,1/0);a.length&&(v(a,s,o,!0),a.length=a.area=0),n.forEach(d)}}function s(t){var n=t.children;if(n&&n.length){var e,r=f(t),i=n.slice(),o=[];for(p(i,r.dx*r.dy/t.value),o.area=0;e=i.pop();)o.push(e),o.area+=e.area,null!=e.z&&(v(o,e.z?r.dx:r.dy,r,!i.length),o.length=o.area=0);n.forEach(s)}}function g(t,n){for(var e,r=t.area,i=0,o=1/0,a=-1,u=t.length;++a<u;)(e=t[a].area)&&(e<o&&(o=e),i<e&&(i=e));return n*=n,(r*=r)?Math.max(n*i*l/r,r/(n*o*l)):1/0}function v(t,n,e,r){var i,o=-1,a=t.length,u=e.x,l=e.y,s=n?c(t.area/n):0;if(n==e.dx){for((r||s>e.dy)&&(s=e.dy);++o<a;)(i=t[o]).x=u,i.y=l,i.dy=s,u+=i.dx=Math.min(e.x+e.dx-u,s?c(i.area/s):0);i.z=!0,i.dx+=e.x+e.dx-u,e.y+=s,e.dy-=s}else{for((r||s>e.dx)&&(s=e.dx);++o<a;)(i=t[o]).x=u,i.y=l,i.dx=s,l+=i.dy=Math.min(e.y+e.dy-l,s?c(i.area/s):0);i.z=!1,i.dy+=e.y+e.dy-l,e.x+=s,e.dx-=s}}function m(t){var n=r||i(t),e=n[0];return e.x=e.y=0,e.value?(e.dx=o[0],e.dy=o[1]):e.dx=e.dy=0,r&&i.revalue(e),p([e],e.dx*e.dy/e.value),(r?s:d)(e),u&&(r=n),n}return m.size=function(t){return arguments.length?(o=t,m):o},m.padding=function(e){if(!arguments.length)return a;function t(t){return Na(t,e)}var n;return f=null==(a=e)?Ta:"function"==(n=typeof e)?function(t){var n=e.call(m,t,t.depth);return null==n?Ta(t):Na(t,"number"==typeof n?[n,n,n,n]:n)}:("number"==n&&(e=[e,e,e,e]),t),m},m.round=function(t){return arguments.length?(c=t?Math.round:Number,m):c!=Number},m.sticky=function(t){return arguments.length?(u=t,r=null,m):u},m.ratio=function(t){return arguments.length?(l=t,m):l},m.mode=function(t){return arguments.length?(h=t+"",m):h},$o(m,i)},d3.random={normal:function(r,i){var t=arguments.length;return t<2&&(i=1),t<1&&(r=0),function(){for(var t,n,e;!(e=(t=2*Math.random()-1)*t+(n=2*Math.random()-1)*n)||1<e;);return r+i*t*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var t=d3.random.normal.apply(d3,arguments);return function(){return Math.exp(t())}},bates:function(t){var n=d3.random.irwinHall(t);return function(){return n()/t}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},d3.scale={};var za={floor:j,ceil:j};function Ia(e,t,n,r){var i=[],o=[],a=0,u=Math.min(e.length,t.length)-1;for(e[u]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<=u;)i.push(n(e[a-1],e[a])),o.push(r(t[a-1],t[a]));return function(t){var n=d3.bisect(e,t,1,u)-1;return o[n](i[n](t))}}function qa(t,n){return d3.rebind(t,n,"range","rangeRound","interpolate","clamp")}function Ha(t,n){return Da(t,ja(Pa(t,n)[2])),Da(t,ja(Pa(t,n)[2])),t}function Pa(t,n){null==n&&(n=10);var e=La(t),r=e[1]-e[0],i=Math.pow(10,Math.floor(Math.log(r/n)/Math.LN10)),o=n/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),e[0]=Math.ceil(e[0]/i)*i,e[1]=Math.floor(e[1]/i)*i+.5*i,e[2]=i,e}function Fa(t,n){return d3.range.apply(d3,Pa(t,n))}function Ga(t,n,e){var r=Pa(t,n);if(e){var i=Nn.exec(e);if(i.shift(),"s"===i[8]){var o=d3.formatPrefix(Math.max(O(r[0]),O(r[1])));return i[7]||(i[7]="."+Ba(o.scale(r[2]))),i[8]="f",e=d3.format(i.join("")),function(t){return e(o.scale(t))+o.symbol}}i[7]||(i[7]="."+function(t,n){var e=Ba(n[2]);return t in Ua?Math.abs(e-Ba(Math.max(O(n[0]),O(n[1]))))+ +("e"!==t):e-2*("%"===t)}(i[8],r)),e=i.join("")}else e=",."+Ba(r[2])+"f";return d3.format(e)}d3.scale.linear=function(){return function t(e,r,i,o){var a,u;function n(){var t=2<Math.min(e.length,r.length)?Ia:Oa,n=o?Po:Ho;return a=t(e,r,n,i),u=t(r,e,n,yo),l}function l(t){return a(t)}l.invert=function(t){return u(t)};l.domain=function(t){return arguments.length?(e=t.map(Number),n()):e};l.range=function(t){return arguments.length?(r=t,n()):r};l.rangeRound=function(t){return l.range(t).interpolate(Ro)};l.clamp=function(t){return arguments.length?(o=t,n()):o};l.interpolate=function(t){return arguments.length?(i=t,n()):i};l.ticks=function(t){return Fa(e,t)};l.tickFormat=function(t,n){return Ga(e,t,n)};l.nice=function(t){return Ha(e,t),n()};l.copy=function(){return t(e,r,i,o)};return n()}([0,1],[0,1],yo,!1)};var Ua={s:1,g:1,p:1,r:1,e:1};function Ba(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}d3.scale.log=function(){return function t(n,l,s,c){function f(t){return(s?Math.log(t<0?0:t):-Math.log(0<t?0:-t))/Math.log(l)}function h(t){return s?Math.pow(l,t):-Math.pow(l,-t)}function i(t){return n(f(t))}i.invert=function(t){return h(n.invert(t))};i.domain=function(t){return arguments.length?(s=0<=t[0],n.domain((c=t.map(Number)).map(f)),i):c};i.base=function(t){return arguments.length?(l=+t,n.domain(c.map(f)),i):l};i.nice=function(){var t=Da(c.map(f),s?Math:Va);return n.domain(t),c=t.map(h),i};i.ticks=function(){var t=La(c),n=[],e=t[0],r=t[1],i=Math.floor(f(e)),o=Math.ceil(f(r)),a=l%1?2:l;if(isFinite(o-i)){if(s){for(;i<o;i++)for(var u=1;u<a;u++)n.push(h(i)*u);n.push(h(i))}else for(n.push(h(i));i++<o;)for(var u=a-1;0<u;u--)n.push(h(i)*u);for(i=0;n[i]<e;i++);for(o=n.length;n[o-1]>r;o--);n=n.slice(i,o)}return n};i.tickFormat=function(t,e){if(!arguments.length)return Wa;arguments.length<2?e=Wa:"function"!=typeof e&&(e=d3.format(e));var r=Math.max(1,l*t/i.ticks().length);return function(t){var n=t/h(Math.round(f(t)));return n*l<l-.5&&(n*=l),n<=r?e(t):""}};i.copy=function(){return t(n.copy(),l,s,c)};return qa(i,n)}(d3.scale.linear().domain([0,1]),10,!0,[1,10])};var Wa=d3.format(".0e"),Va={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function Ya(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}d3.scale.pow=function(){return function t(n,e,r){var i=Ya(e),o=Ya(1/e);function a(t){return n(i(t))}a.invert=function(t){return o(n.invert(t))};a.domain=function(t){return arguments.length?(n.domain((r=t.map(Number)).map(i)),a):r};a.ticks=function(t){return Fa(r,t)};a.tickFormat=function(t,n){return Ga(r,t,n)};a.nice=function(t){return a.domain(Ha(r,t))};a.exponent=function(t){return arguments.length?(i=Ya(e=t),o=Ya(1/e),n.domain(r.map(i)),a):e};a.copy=function(){return t(n.copy(),e,r)};return qa(a,n)}(d3.scale.linear(),1,[0,1])},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return function t(u,l){var i,s,c;function f(t){return s[((i.get(t)||("range"===l.t?i.set(t,u.push(t)):NaN))-1)%s.length]}function h(n,e){return d3.range(u.length).map(function(t){return n+e*t})}f.domain=function(t){if(!arguments.length)return u;u=[],i=new y;for(var n,e=-1,r=t.length;++e<r;)i.has(n=t[e])||i.set(n,u.push(n));return f[l.t].apply(f,l.a)};f.range=function(t){return arguments.length?(s=t,c=0,l={t:"range",a:arguments},f):s};f.rangePoints=function(t,n){arguments.length<2&&(n=0);var e=t[0],r=t[1],i=u.length<2?(e=(e+r)/2,0):(r-e)/(u.length-1+n);return s=h(e+i*n/2,i),c=0,l={t:"rangePoints",a:arguments},f};f.rangeRoundPoints=function(t,n){arguments.length<2&&(n=0);var e=t[0],r=t[1],i=u.length<2?(e=r=Math.round((e+r)/2),0):(r-e)/(u.length-1+n)|0;return s=h(e+Math.round(i*n/2+(r-e-(u.length-1+n)*i)/2),i),c=0,l={t:"rangeRoundPoints",a:arguments},f};f.rangeBands=function(t,n,e){arguments.length<2&&(n=0),arguments.length<3&&(e=n);var r=t[1]<t[0],i=t[r-0],o=t[1-r],a=(o-i)/(u.length-n+2*e);return s=h(i+a*e,a),r&&s.reverse(),c=a*(1-n),l={t:"rangeBands",a:arguments},f};f.rangeRoundBands=function(t,n,e){arguments.length<2&&(n=0),arguments.length<3&&(e=n);var r=t[1]<t[0],i=t[r-0],o=t[1-r],a=Math.floor((o-i)/(u.length-n+2*e));return s=h(i+Math.round((o-i-(u.length-n)*a)/2),a),r&&s.reverse(),c=Math.round(a*(1-n)),l={t:"rangeRoundBands",a:arguments},f};f.rangeBand=function(){return c};f.rangeExtent=function(){return La(l.a[0])};f.copy=function(){return t(u,l)};return f.domain(u)}([],{t:"range",a:[[]]})},d3.scale.category10=function(){return d3.scale.ordinal().range(Ka)},d3.scale.category20=function(){return d3.scale.ordinal().range(Xa)},d3.scale.category20b=function(){return d3.scale.ordinal().range($a)},d3.scale.category20c=function(){return d3.scale.ordinal().range(Za)};var Ka=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(un),Xa=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(un),$a=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(un),Za=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(un);function Ja(){return 0}d3.scale.quantile=function(){return function t(e,r){var i;function n(){var t=0,n=r.length;for(i=[];++t<n;)i[t-1]=d3.quantile(e,t/n);return o}function o(t){if(!isNaN(t=+t))return r[d3.bisect(i,t)]}o.domain=function(t){return arguments.length?(e=t.map(s).filter(c).sort(l),n()):e};o.range=function(t){return arguments.length?(r=t,n()):r};o.quantiles=function(){return i};o.invertExtent=function(t){return(t=r.indexOf(t))<0?[NaN,NaN]:[0<t?i[t-1]:e[0],t<i.length?i[t]:e[e.length-1]]};o.copy=function(){return t(e,r)};return n()}([],[])},d3.scale.quantize=function(){return function t(n,e,r){var i,o;function a(t){return r[Math.max(0,Math.min(o,Math.floor(i*(t-n))))]}function u(){return i=r.length/(e-n),o=r.length-1,a}a.domain=function(t){return arguments.length?(n=+t[0],e=+t[t.length-1],u()):[n,e]};a.range=function(t){return arguments.length?(r=t,u()):r};a.invertExtent=function(t){return[t=(t=r.indexOf(t))<0?NaN:t/i+n,t+1/i]};a.copy=function(){return t(n,e,r)};return u()}(0,1,[0,1])},d3.scale.threshold=function(){return function t(n,e){function r(t){if(t<=t)return e[d3.bisect(n,t)]}r.domain=function(t){return arguments.length?(n=t,r):n};r.range=function(t){return arguments.length?(e=t,r):e};r.invertExtent=function(t){return t=e.indexOf(t),[n[t-1],n[t]]};r.copy=function(){return t(n,e)};return r}([.5],[0,1])},d3.scale.identity=function(){return function t(e){function n(t){return+t}n.invert=n;n.domain=n.range=function(t){return arguments.length?(e=t.map(n),n):e};n.ticks=function(t){return Fa(e,t)};n.tickFormat=function(t,n){return Ga(e,t,n)};n.copy=function(){return t(e)};return n}([0,1])},d3.svg={},d3.svg.arc=function(){var q=tu,H=nu,P=Ja,F=Qa,G=eu,U=ru,B=iu;function n(){var t=Math.max(0,+q.apply(this,arguments)),n=Math.max(0,+H.apply(this,arguments)),e=G.apply(this,arguments)-Ct,r=U.apply(this,arguments)-Ct,i=Math.abs(r-e),o=r<e?0:1;if(n<t&&(a=n,n=t,t=a),At<=i)return W(n,o)+(t?W(t,1-o):"")+"Z";var a,u,l,s,c,f,h,p,d,g,v,m,y=0,x=0,b=[];if((s=(+B.apply(this,arguments)||0)/2)&&(l=F===Qa?Math.sqrt(t*t+n*n):+F.apply(this,arguments),o||(x*=-1),n&&(x=Ot(l/n*Math.sin(s))),t&&(y=Ot(l/t*Math.sin(s)))),n){c=n*Math.cos(e+x),f=n*Math.sin(e+x),h=n*Math.cos(r-x),p=n*Math.sin(r-x);var w=Math.abs(r-e-2*x)<=_t?0:1;if(x&&ou(c,f,h,p)===o^w){var M=(e+r)/2;c=n*Math.cos(M),f=n*Math.sin(M),h=p=null}}else c=f=0;if(t){d=t*Math.cos(r-y),g=t*Math.sin(r-y),v=t*Math.cos(e+y),m=t*Math.sin(e+y);var S=Math.abs(e-r+2*y)<=_t?0:1;if(y&&ou(d,g,v,m)===1-o^S){var _=(e+r)/2;d=t*Math.cos(_),g=t*Math.sin(_),v=m=null}}else d=g=0;if(Mt<i&&.001<(a=Math.min(Math.abs(n-t)/2,+P.apply(this,arguments)))){u=t<n^o?0:1;var k=a,A=a;if(i<_t){var C=null==v?[d,g]:null==h?[c,f]:Ei([c,f],[v,m],[h,p],[d,g]),E=c-C[0],T=f-C[1],N=h-C[0],L=p-C[1],R=1/Math.sin(Math.acos((E*N+T*L)/(Math.sqrt(E*E+T*T)*Math.sqrt(N*N+L*L)))/2),O=Math.sqrt(C[0]*C[0]+C[1]*C[1]);A=Math.min(a,(t-O)/(R-1)),k=Math.min(a,(n-O)/(1+R))}if(null!=h){var D=au(null==v?[d,g]:[v,m],[c,f],n,k,o),j=au([h,p],[d,g],n,k,o);a===k?b.push("M",D[0],"A",k,",",k," 0 0,",u," ",D[1],"A",n,",",n," 0 ",1-o^ou(D[1][0],D[1][1],j[1][0],j[1][1]),",",o," ",j[1],"A",k,",",k," 0 0,",u," ",j[0]):b.push("M",D[0],"A",k,",",k," 0 1,",u," ",j[0])}else b.push("M",c,",",f);if(null!=v){var z=au([c,f],[v,m],t,-A,o),I=au([d,g],null==h?[c,f]:[h,p],t,-A,o);a===A?b.push("L",I[0],"A",A,",",A," 0 0,",u," ",I[1],"A",t,",",t," 0 ",o^ou(I[1][0],I[1][1],z[1][0],z[1][1]),",",1-o," ",z[1],"A",A,",",A," 0 0,",u," ",z[0]):b.push("L",I[0],"A",A,",",A," 0 0,",u," ",z[0])}else b.push("L",d,",",g)}else b.push("M",c,",",f),null!=h&&b.push("A",n,",",n," 0 ",w,",",o," ",h,",",p),b.push("L",d,",",g),null!=v&&b.push("A",t,",",t," 0 ",S,",",1-o," ",v,",",m);return b.push("Z"),b.join("")}function W(t,n){return"M0,"+t+"A"+t+","+t+" 0 1,"+n+" 0,"+-t+"A"+t+","+t+" 0 1,"+n+" 0,"+t}return n.innerRadius=function(t){return arguments.length?(q=vn(t),n):q},n.outerRadius=function(t){return arguments.length?(H=vn(t),n):H},n.cornerRadius=function(t){return arguments.length?(P=vn(t),n):P},n.padRadius=function(t){return arguments.length?(F=t==Qa?Qa:vn(t),n):F},n.startAngle=function(t){return arguments.length?(G=vn(t),n):G},n.endAngle=function(t){return arguments.length?(U=vn(t),n):U},n.padAngle=function(t){return arguments.length?(B=vn(t),n):B},n.centroid=function(){var t=(+q.apply(this,arguments)+ +H.apply(this,arguments))/2,n=(+G.apply(this,arguments)+ +U.apply(this,arguments))/2-Ct;return[Math.cos(n)*t,Math.sin(n)*t]},n};var Qa="auto";function tu(t){return t.innerRadius}function nu(t){return t.outerRadius}function eu(t){return t.startAngle}function ru(t){return t.endAngle}function iu(t){return t&&t.padAngle}function ou(t,n,e,r){return 0<(t-e)*n-(n-r)*t?0:1}function au(t,n,e,r,i){var o=t[0]-n[0],a=t[1]-n[1],u=(i?r:-r)/Math.sqrt(o*o+a*a),l=u*a,s=-u*o,c=t[0]+l,f=t[1]+s,h=n[0]+l,p=n[1]+s,d=(c+h)/2,g=(f+p)/2,v=h-c,m=p-f,y=v*v+m*m,x=e-r,b=c*p-h*f,w=(m<0?-1:1)*Math.sqrt(Math.max(0,x*x*y-b*b)),M=(b*m-v*w)/y,S=(-b*v-m*w)/y,_=(b*m+v*w)/y,k=(-b*v+m*w)/y,A=M-d,C=S-g,E=_-d,T=k-g;return E*E+T*T<A*A+C*C&&(M=_,S=k),[[M-l,S-s],[M*e/x,S*e/x]]}function uu(s){var c=Mi,f=Si,h=dr,p=su,n=p.key,d=.7;function e(t){var n,e=[],r=[],i=-1,o=t.length,a=vn(c),u=vn(f);function l(){e.push("M",p(s(r),d))}for(;++i<o;)h.call(this,n=t[i],i)?r.push([+a.call(this,n,i),+u.call(this,n,i)]):r.length&&(l(),r=[]);return r.length&&l(),e.length?e.join(""):null}return e.x=function(t){return arguments.length?(c=t,e):c},e.y=function(t){return arguments.length?(f=t,e):f},e.defined=function(t){return arguments.length?(h=t,e):h},e.interpolate=function(t){return arguments.length?(n="function"==typeof t?p=t:(p=lu.get(t)||su).key,e):n},e.tension=function(t){return arguments.length?(d=t,e):d},e}d3.svg.line=function(){return uu(j)};var lu=d3.map({linear:su,"linear-closed":cu,step:function(t){var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];for(;++n<e;)i.push("H",(r[0]+(r=t[n])[0])/2,"V",r[1]);1<e&&i.push("H",r[0]);return i.join("")},"step-before":fu,"step-after":hu,basis:gu,"basis-open":function(t){if(t.length<4)return su(t);var n,e=[],r=-1,i=t.length,o=[0],a=[0];for(;++r<3;)n=t[r],o.push(n[0]),a.push(n[1]);e.push(vu(xu,o)+","+vu(xu,a)),--r;for(;++r<i;)n=t[r],o.shift(),o.push(n[0]),a.shift(),a.push(n[1]),bu(e,o,a);return e.join("")},"basis-closed":function(t){var n,e,r=-1,i=t.length,o=i+4,a=[],u=[];for(;++r<4;)e=t[r%i],a.push(e[0]),u.push(e[1]);n=[vu(xu,a),",",vu(xu,u)],--r;for(;++r<o;)e=t[r%i],a.shift(),a.push(e[0]),u.shift(),u.push(e[1]),bu(n,a,u);return n.join("")},bundle:function(t,n){var e=t.length-1;if(e)for(var r,i,o=t[0][0],a=t[0][1],u=t[e][0]-o,l=t[e][1]-a,s=-1;++s<=e;)r=t[s],i=s/e,r[0]=n*r[0]+(1-n)*(o+i*u),r[1]=n*r[1]+(1-n)*(a+i*l);return gu(t)},cardinal:function(t,n){return t.length<3?su(t):t[0]+pu(t,du(t,n))},"cardinal-open":function(t,n){return t.length<4?su(t):t[1]+pu(t.slice(1,-1),du(t,n))},"cardinal-closed":function(t,n){return t.length<3?cu(t):t[0]+pu((t.push(t[0]),t),du([t[t.length-2]].concat(t,[t[1]]),n))},monotone:function(t){return t.length<3?su(t):t[0]+pu(t,function(t){var n,e,r,i,o=[],a=function(t){var n=0,e=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=wu(i,o);for(;++n<e;)r[n]=(a+(a=wu(i=o,o=t[n+1])))/2;return r[n]=a,r}(t),u=-1,l=t.length-1;for(;++u<l;)n=wu(t[u],t[u+1]),O(n)<Mt?a[u]=a[u+1]=0:(e=a[u]/n,r=a[u+1]/n,9<(i=e*e+r*r)&&(i=3*n/Math.sqrt(i),a[u]=i*e,a[u+1]=i*r));u=-1;for(;++u<=l;)i=(t[Math.min(l,u+1)][0]-t[Math.max(0,u-1)][0])/(6*(1+a[u]*a[u])),o.push([i||0,a[u]*i||0]);return o}(t))}});function su(t){return 1<t.length?t.join("L"):t+"Z"}function cu(t){return t.join("L")+"Z"}function fu(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("V",(r=t[n])[1],"H",r[0]);return i.join("")}function hu(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("H",(r=t[n])[0],"V",r[1]);return i.join("")}function pu(t,n){if(n.length<1||t.length!=n.length&&t.length!=n.length+2)return su(t);var e=t.length!=n.length,r="",i=t[0],o=t[1],a=n[0],u=a,l=1;if(e&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],l=2),1<n.length){u=n[1],o=t[l],l++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1];for(var s=2;s<n.length;s++,l++)o=t[l],u=n[s],r+="S"+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1]}if(e){var c=t[l];r+="Q"+(o[0]+2*u[0]/3)+","+(o[1]+2*u[1]/3)+","+c[0]+","+c[1]}return r}function du(t,n){for(var e,r=[],i=(1-n)/2,o=t[0],a=t[1],u=1,l=t.length;++u<l;)e=o,o=a,a=t[u],r.push([i*(a[0]-e[0]),i*(a[1]-e[1])]);return r}function gu(t){if(t.length<3)return su(t);var n=1,e=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],u=[o,o,o,r[1]],l=[i,",",o,"L",vu(xu,a),",",vu(xu,u)];for(t.push(t[e-1]);++n<=e;)r=t[n],a.shift(),a.push(r[0]),u.shift(),u.push(r[1]),bu(l,a,u);return t.pop(),l.push("L",r),l.join("")}function vu(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}lu.forEach(function(t,n){n.key=t,n.closed=/-closed$/.test(t)});var mu=[0,2/3,1/3,0],yu=[0,1/3,2/3,0],xu=[0,1/6,2/3,1/6];function bu(t,n,e){t.push("C",vu(mu,n),",",vu(mu,e),",",vu(yu,n),",",vu(yu,e),",",vu(xu,n),",",vu(xu,e))}function wu(t,n){return(n[1]-t[1])/(n[0]-t[0])}function Mu(t){for(var n,e,r,i=-1,o=t.length;++i<o;)e=(n=t[i])[0],r=n[1]-Ct,n[0]=e*Math.cos(r),n[1]=e*Math.sin(r);return t}function Su(d){var g=Mi,v=Mi,m=0,y=Si,x=dr,b=su,n=b.key,w=b,M="L",S=.7;function e(t){var n,e,r,i=[],o=[],a=[],u=-1,l=t.length,s=vn(g),c=vn(m),f=g===v?function(){return e}:vn(v),h=m===y?function(){return r}:vn(y);function p(){i.push("M",b(d(a),S),M,w(d(o.reverse()),S),"Z")}for(;++u<l;)x.call(this,n=t[u],u)?(o.push([e=+s.call(this,n,u),r=+c.call(this,n,u)]),a.push([+f.call(this,n,u),+h.call(this,n,u)])):o.length&&(p(),o=[],a=[]);return o.length&&p(),i.length?i.join(""):null}return e.x=function(t){return arguments.length?(g=v=t,e):v},e.x0=function(t){return arguments.length?(g=t,e):g},e.x1=function(t){return arguments.length?(v=t,e):v},e.y=function(t){return arguments.length?(m=y=t,e):y},e.y0=function(t){return arguments.length?(m=t,e):m},e.y1=function(t){return arguments.length?(y=t,e):y},e.defined=function(t){return arguments.length?(x=t,e):x},e.interpolate=function(t){return arguments.length?(n="function"==typeof t?b=t:(b=lu.get(t)||su).key,w=b.reverse||b,M=b.closed?"M":"L",e):n},e.tension=function(t){return arguments.length?(S=t,e):S},e}function _u(t){return t.radius}function ku(t){return[t.x,t.y]}function Au(){return 64}function Cu(){return"circle"}function Eu(t){var n=Math.sqrt(t/_t);return"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z"}d3.svg.line.radial=function(){var t=uu(Mu);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},(fu.reverse=hu).reverse=fu,d3.svg.area=function(){return Su(j)},d3.svg.area.radial=function(){var t=Su(Mu);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},d3.svg.chord=function(){var i=li,o=si,l=_u,s=eu,c=ru;function n(t,n){var e=a(this,i,t,n),r=a(this,o,t,n);return"M"+e.p0+u(e.r,e.p1,e.a1-e.a0)+(function(t,n){return t.a0==n.a0&&t.a1==n.a1}(e,r)?f(e.r,e.p1,e.r,e.p0):f(e.r,e.p1,r.r,r.p0)+u(r.r,r.p1,r.a1-r.a0)+f(r.r,r.p1,e.r,e.p0))+"Z"}function a(t,n,e,r){var i=n.call(t,e,r),o=l.call(t,i,r),a=s.call(t,i,r)-Ct,u=c.call(t,i,r)-Ct;return{r:o,a0:a,a1:u,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(u),o*Math.sin(u)]}}function u(t,n,e){return"A"+t+","+t+" 0 "+ +(_t<e)+",1 "+n}function f(t,n,e,r){return"Q 0,0 "+r}return n.radius=function(t){return arguments.length?(l=vn(t),n):l},n.source=function(t){return arguments.length?(i=vn(t),n):i},n.target=function(t){return arguments.length?(o=vn(t),n):o},n.startAngle=function(t){return arguments.length?(s=vn(t),n):s},n.endAngle=function(t){return arguments.length?(c=vn(t),n):c},n},d3.svg.diagonal=function(){var a=li,u=si,l=ku;function n(t,n){var e=a.call(this,t,n),r=u.call(this,t,n),i=(e.y+r.y)/2,o=[e,{x:e.x,y:i},{x:r.x,y:i},r];return"M"+(o=o.map(l))[0]+"C"+o[1]+" "+o[2]+" "+o[3]}return n.source=function(t){return arguments.length?(a=vn(t),n):a},n.target=function(t){return arguments.length?(u=vn(t),n):u},n.projection=function(t){return arguments.length?(l=t,n):l},n},d3.svg.diagonal.radial=function(){var t=d3.svg.diagonal(),n=ku,e=t.projection;return t.projection=function(t){return arguments.length?e(function(r){return function(){var t=r.apply(this,arguments),n=t[0],e=t[1]-Ct;return[n*Math.cos(e),n*Math.sin(e)]}}(n=t)):n},t},d3.svg.symbol=function(){var e=Cu,r=Au;function n(t,n){return(Tu.get(e.call(this,t,n))||Eu)(r.call(this,t,n))}return n.type=function(t){return arguments.length?(e=vn(t),n):e},n.size=function(t){return arguments.length?(r=vn(t),n):r},n};var Tu=d3.map({circle:Eu,cross:function(t){var n=Math.sqrt(t/5)/2;return"M"+-3*n+","+-n+"H"+-n+"V"+-3*n+"H"+n+"V"+-n+"H"+3*n+"V"+n+"H"+n+"V"+3*n+"H"+-n+"V"+n+"H"+-3*n+"Z"},diamond:function(t){var n=Math.sqrt(t/(2*Lu)),e=n*Lu;return"M0,"+-n+"L"+e+",0 0,"+n+" "+-e+",0Z"},square:function(t){var n=Math.sqrt(t)/2;return"M"+-n+","+-n+"L"+n+","+-n+" "+n+","+n+" "+-n+","+n+"Z"},"triangle-down":function(t){var n=Math.sqrt(t/Nu),e=n*Nu/2;return"M0,"+e+"L"+n+","+-e+" "+-n+","+-e+"Z"},"triangle-up":function(t){var n=Math.sqrt(t/Nu),e=n*Nu/2;return"M0,"+-e+"L"+n+","+e+" "+-n+","+e+"Z"}});d3.svg.symbolTypes=Tu.keys();var Nu=Math.sqrt(3),Lu=Math.tan(30*Et);W.transition=function(t){for(var n,e,r=ju||++qu,i=Fu(t),o=[],a=zu||{time:Date.now(),ease:Co,delay:0,duration:250},u=-1,l=this.length;++u<l;){o.push(n=[]);for(var s=this[u],c=-1,f=s.length;++c<f;)(e=s[c])&&Gu(e,c,i,r,a),n.push(e)}return Du(o,i,r)},W.interrupt=function(t){return this.each(null==t?Ru:Ou(Fu(t)))};var Ru=Ou(Fu());function Ou(r){return function(){var t,n,e;(t=this[r])&&(e=t[n=t.active])&&(e.timer.c=null,e.timer.t=NaN,--t.count?delete t[n]:delete this[r],t.active+=.5,e.event&&e.event.interrupt.call(this,this.__data__,e.index))}}function Du(t,n,e){return P(t,Iu),t.namespace=n,t.id=e,t}var ju,zu,Iu=[],qu=0;function Hu(t,r,i,o){var a=t.id,u=t.namespace;return st(t,"function"==typeof i?function(t,n,e){t[u][a].tween.set(r,o(i.call(t,t.__data__,n,e)))}:(i=o(i),function(t){t[u][a].tween.set(r,i)}))}function Pu(t){return null==t&&(t=""),function(){this.textContent=t}}function Fu(t){return null==t?"__transition__":"__transition_"+t+"__"}function Gu(o,a,i,u,t){var l,s,c,f,h,p=o[i]||(o[i]={active:0,count:0}),d=p[u];function e(t){var n=p.active,e=p[n];for(var r in e&&(e.timer.c=null,e.timer.t=NaN,--p.count,delete p[n],e.event&&e.event.interrupt.call(o,o.__data__,e.index)),p)if(+r<u){var i=p[r];i.timer.c=null,i.timer.t=NaN,--p.count,delete p[r]}s.c=g,_n(function(){return s.c&&g(t||1)&&(s.c=null,s.t=NaN),1},0,l),p.active=u,d.event&&d.event.start.call(o,o.__data__,a),h=[],d.tween.forEach(function(t,n){(n=n.call(o,o.__data__,a))&&h.push(n)}),f=d.ease,c=d.duration}function g(t){for(var n=t/c,e=f(n),r=h.length;0<r;)h[--r].call(o,e);if(1<=n)return d.event&&d.event.end.call(o,o.__data__,a),--p.count?delete p[u]:delete o[i],1}d||(l=t.time,s=_n(function(t){var n=d.delay;if(s.t=n+l,n<=t)return e(t-n);s.c=e},0,l),d=p[u]={tween:new y,time:l,timer:s,delay:t.delay,duration:t.duration,ease:t.ease,index:a},t=null,++p.count)}Iu.call=W.call,Iu.empty=W.empty,Iu.node=W.node,Iu.size=W.size,d3.transition=function(t,n){return t&&t.transition?ju?t.transition(n):t:d3.selection().transition(t)},(d3.transition.prototype=Iu).select=function(t){var n,e,r,i=this.id,o=this.namespace,a=[];t=V(t);for(var u=-1,l=this.length;++u<l;){a.push(n=[]);for(var s=this[u],c=-1,f=s.length;++c<f;)(r=s[c])&&(e=t.call(r,r.__data__,c,u))?("__data__"in r&&(e.__data__=r.__data__),Gu(e,c,o,i,r[o][i]),n.push(e)):n.push(null)}return Du(a,o,i)},Iu.selectAll=function(t){var n,e,r,i,o,a=this.id,u=this.namespace,l=[];t=Y(t);for(var s=-1,c=this.length;++s<c;)for(var f=this[s],h=-1,p=f.length;++h<p;)if(r=f[h]){o=r[u][a],e=t.call(r,r.__data__,h,s),l.push(n=[]);for(var d=-1,g=e.length;++d<g;)(i=e[d])&&Gu(i,d,u,a,o),n.push(i)}return Du(l,u,a)},Iu.filter=function(t){var n,e,r=[];"function"!=typeof t&&(t=lt(t));for(var i=0,o=this.length;i<o;i++){r.push(n=[]);for(var a,u=0,l=(a=this[i]).length;u<l;u++)(e=a[u])&&t.call(e,e.__data__,u,i)&&n.push(e)}return Du(r,this.namespace,this.id)},Iu.tween=function(n,e){var r=this.id,i=this.namespace;return arguments.length<2?this.node()[i][r].tween.get(n):st(this,null==e?function(t){t[i][r].tween.remove(n)}:function(t){t[i][r].tween.set(n,e)})},Iu.attr=function(t,n){if(arguments.length<2){for(n in t)this.attr(n,t[n]);return this}var r="transform"==t?qo:yo,i=d3.ns.qualify(t);function o(){this.removeAttribute(i)}function a(){this.removeAttributeNS(i.space,i.local)}return Hu(this,"attr."+t,n,i.local?function(e){return null==e?a:(e+="",function(){var n,t=this.getAttributeNS(i.space,i.local);return t!==e&&(n=r(t,e),function(t){this.setAttributeNS(i.space,i.local,n(t))})})}:function(e){return null==e?o:(e+="",function(){var n,t=this.getAttribute(i);return t!==e&&(n=r(t,e),function(t){this.setAttribute(i,n(t))})})})},Iu.attrTween=function(t,r){var i=d3.ns.qualify(t);return this.tween("attr."+t,i.local?function(t,n){var e=r.call(this,t,n,this.getAttributeNS(i.space,i.local));return e&&function(t){this.setAttributeNS(i.space,i.local,e(t))}}:function(t,n){var e=r.call(this,t,n,this.getAttribute(i));return e&&function(t){this.setAttribute(i,e(t))}})},Iu.style=function(r,t,i){var n=arguments.length;if(n<3){if("string"!=typeof r){for(i in n<2&&(t=""),r)this.style(i,r[i],t);return this}i=""}function o(){this.style.removeProperty(r)}return Hu(this,"style."+r,t,function(e){return null==e?o:(e+="",function(){var n,t=D(this).getComputedStyle(this,null).getPropertyValue(r);return t!==e&&(n=yo(t,e),function(t){this.style.setProperty(r,n(t),i)})})})},Iu.styleTween=function(r,i,o){return arguments.length<3&&(o=""),this.tween("style."+r,function(t,n){var e=i.call(this,t,n,D(this).getComputedStyle(this,null).getPropertyValue(r));return e&&function(t){this.style.setProperty(r,e(t),o)}})},Iu.text=function(t){return Hu(this,"text",t,Pu)},Iu.remove=function(){var n=this.namespace;return this.each("end.transition",function(){var t;this[n].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Iu.ease=function(n){var e=this.id,r=this.namespace;return arguments.length<1?this.node()[r][e].ease:("function"!=typeof n&&(n=d3.ease.apply(d3,arguments)),st(this,function(t){t[r][e].ease=n}))},Iu.delay=function(r){var i=this.id,o=this.namespace;return arguments.length<1?this.node()[o][i].delay:st(this,"function"==typeof r?function(t,n,e){t[o][i].delay=+r.call(t,t.__data__,n,e)}:(r=+r,function(t){t[o][i].delay=r}))},Iu.duration=function(r){var i=this.id,o=this.namespace;return arguments.length<1?this.node()[o][i].duration:st(this,"function"==typeof r?function(t,n,e){t[o][i].duration=Math.max(1,r.call(t,t.__data__,n,e))}:(r=Math.max(1,r),function(t){t[o][i].duration=r}))},Iu.each=function(r,e){var i=this.id,o=this.namespace;if(arguments.length<2){var t=zu,n=ju;try{ju=i,st(this,function(t,n,e){zu=t[o][i],r.call(t,t.__data__,n,e)})}finally{zu=t,ju=n}}else st(this,function(t){var n=t[o][i];(n.event||(n.event=d3.dispatch("start","end","interrupt"))).on(r,e)});return this},Iu.transition=function(){for(var t,n,e,r=this.id,i=++qu,o=this.namespace,a=[],u=0,l=this.length;u<l;u++){a.push(t=[]);for(var s,c=0,f=(s=this[u]).length;c<f;c++)(n=s[c])&&Gu(n,c,o,i,{time:(e=n[o][r]).time,ease:e.ease,delay:e.delay+e.duration,duration:e.duration}),t.push(n)}return Du(a,o,i)},d3.svg.axis=function(){var A,C=d3.scale.linear(),E=Uu,T=6,N=6,L=3,R=[10],O=null;function e(t){t.each(function(){var t,n=d3.select(this),e=this.__chart__||C,r=this.__chart__=C.copy(),i=null==O?r.ticks?r.ticks.apply(r,R):r.domain():O,o=null==A?r.tickFormat?r.tickFormat.apply(r,R):j:A,a=n.selectAll(".tick").data(i,r),u=a.enter().insert("g",".domain").attr("class","tick").style("opacity",Mt),l=d3.transition(a.exit()).style("opacity",Mt).remove(),s=d3.transition(a.order()).style("opacity",1),c=Math.max(T,0)+L,f=Ra(r),h=n.selectAll(".domain").data([0]),p=(h.enter().append("path").attr("class","domain"),d3.transition(h));u.append("line"),u.append("text");var d,g,v,m,y=u.select("line"),x=s.select("line"),b=a.select("text").text(o),w=u.select("text"),M=s.select("text"),S="top"===E||"left"===E?-1:1;if("bottom"===E||"top"===E?(t=Wu,d="x",v="y",g="x2",m="y2",b.attr("dy",S<0?"0em":".71em").style("text-anchor","middle"),p.attr("d","M"+f[0]+","+S*N+"V0H"+f[1]+"V"+S*N)):(t=Vu,d="y",v="x",g="y2",m="x2",b.attr("dy",".32em").style("text-anchor",S<0?"end":"start"),p.attr("d","M"+S*N+","+f[0]+"H0V"+f[1]+"H"+S*N)),y.attr(m,S*T),w.attr(v,S*c),x.attr(g,0).attr(m,S*T),M.attr(d,0).attr(v,S*c),r.rangeBand){var _=r,k=_.rangeBand()/2;e=r=function(t){return _(t)+k}}else e.rangeBand?e=r:l.call(t,r,e);u.call(t,e,r),s.call(t,r,r)})}return e.scale=function(t){return arguments.length?(C=t,e):C},e.orient=function(t){return arguments.length?(E=t in Bu?t+"":Uu,e):E},e.ticks=function(){return arguments.length?(R=f(arguments),e):R},e.tickValues=function(t){return arguments.length?(O=t,e):O},e.tickFormat=function(t){return arguments.length?(A=t,e):A},e.tickSize=function(t){var n=arguments.length;return n?(T=+t,N=+arguments[n-1],e):T},e.innerTickSize=function(t){return arguments.length?(T=+t,e):T},e.outerTickSize=function(t){return arguments.length?(N=+t,e):N},e.tickPadding=function(t){return arguments.length?(L=+t,e):L},e.tickSubdivide=function(){return arguments.length&&e},e};var Uu="bottom",Bu={top:1,right:1,bottom:1,left:1};function Wu(t,e,r){t.attr("transform",function(t){var n=e(t);return"translate("+(isFinite(n)?n:r(t))+",0)"})}function Vu(t,e,r){t.attr("transform",function(t){var n=e(t);return"translate(0,"+(isFinite(n)?n:r(t))+")"})}d3.svg.brush=function(){var y,x,b=q(C,"brushstart","brush","brushend"),w=null,M=null,S=[0,0],_=[0,0],k=!0,A=!0,a=Ku[0];function C(t){t.each(function(){var t=d3.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",u).on("touchstart.brush",u),n=t.selectAll(".background").data([0]);n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var e=t.selectAll(".resize").data(a,j);e.exit().remove(),e.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Yu[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),e.style("display",C.empty()?"none":null);var r,i=d3.transition(t),o=d3.transition(n);w&&(r=Ra(w),o.attr("x",r[0]).attr("width",r[1]-r[0]),T(i)),M&&(r=Ra(M),o.attr("y",r[0]).attr("height",r[1]-r[0]),N(i)),E(i)})}function E(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+S[+/e$/.test(t)]+","+_[+/^s/.test(t)]+")"})}function T(t){t.select(".extent").attr("x",S[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",S[1]-S[0])}function N(t){t.select(".extent").attr("y",_[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",_[1]-_[0])}function u(){var f,e,r=this,t=d3.select(d3.event.target),i=b.of(r,arguments),o=d3.select(r),n=t.datum(),a=!/^(n|s)$/.test(n)&&w,u=!/^(e|w)$/.test(n)&&M,h=t.classed("extent"),l=yt(r),p=d3.mouse(r),s=d3.select(D(r)).on("keydown.brush",function(){32==d3.event.keyCode&&(h||(f=null,p[0]-=S[1],p[1]-=_[1],h=2),z())}).on("keyup.brush",function(){32==d3.event.keyCode&&2==h&&(p[0]+=S[1],p[1]+=_[1],h=0,z())});if(d3.event.changedTouches?s.on("touchmove.brush",g).on("touchend.brush",m):s.on("mousemove.brush",g).on("mouseup.brush",m),o.interrupt().selectAll("*").interrupt(),h)p[0]=S[0]-p[0],p[1]=_[0]-p[1];else if(n){var c=+/w$/.test(n),d=+/^n/.test(n);e=[S[1-c]-p[0],_[1-d]-p[1]],p[0]=S[c],p[1]=_[d]}else d3.event.altKey&&(f=p.slice());function g(){var t=d3.mouse(r),n=!1;e&&(t[0]+=e[0],t[1]+=e[1]),h||(d3.event.altKey?(f=f||[(S[0]+S[1])/2,(_[0]+_[1])/2],p[0]=S[+(t[0]<f[0])],p[1]=_[+(t[1]<f[1])]):f=null),a&&v(t,w,0)&&(T(o),n=!0),u&&v(t,M,1)&&(N(o),n=!0),n&&(E(o),i({type:"brush",mode:h?"move":"resize"}))}function v(t,n,e){var r,i,o=Ra(n),a=o[0],u=o[1],l=p[e],s=e?_:S,c=s[1]-s[0];if(h&&(a-=l,u-=c+l),r=(e?A:k)?Math.max(a,Math.min(u,t[e])):t[e],h?i=(r+=l)+c:(f&&(l=Math.max(a,Math.min(u,2*f[e]-r))),l<r?(i=r,r=l):i=l),s[0]!=r||s[1]!=i)return e?x=null:y=null,s[0]=r,s[1]=i,!0}function m(){g(),o.style("pointer-events","all").selectAll(".resize").style("display",C.empty()?"none":null),d3.select("body").style("cursor",null),s.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),l(),i({type:"brushend"})}o.style("pointer-events","none").selectAll(".resize").style("display",null),d3.select("body").style("cursor",t.style("cursor")),i({type:"brushstart"}),g()}return C.event=function(t){t.each(function(){var r=b.of(this,arguments),i={x:S,y:_,i:y,j:x},t=this.__chart__||i;this.__chart__=i,ju?d3.select(this).transition().each("start.brush",function(){y=t.i,x=t.j,S=t.x,_=t.y,r({type:"brushstart"})}).tween("brush:brush",function(){var n=xo(S,i.x),e=xo(_,i.y);return y=x=null,function(t){S=i.x=n(t),_=i.y=e(t),r({type:"brush",mode:"resize"})}}).each("end.brush",function(){y=i.i,x=i.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})}):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))})},C.x=function(t){return arguments.length?(a=Ku[!(w=t)<<1|!M],C):w},C.y=function(t){return arguments.length?(a=Ku[!w<<1|!(M=t)],C):M},C.clamp=function(t){return arguments.length?(w&&M?(k=!!t[0],A=!!t[1]):w?k=!!t:M&&(A=!!t),C):w&&M?[k,A]:w?k:M?A:null},C.extent=function(t){var n,e,r,i,o;return arguments.length?(w&&(n=t[0],e=t[1],M&&(n=n[0],e=e[0]),y=[n,e],w.invert&&(n=w(n),e=w(e)),e<n&&(o=n,n=e,e=o),n==S[0]&&e==S[1]||(S=[n,e])),M&&(r=t[0],i=t[1],w&&(r=r[1],i=i[1]),x=[r,i],M.invert&&(r=M(r),i=M(i)),i<r&&(o=r,r=i,i=o),r==_[0]&&i==_[1]||(_=[r,i])),C):(w&&(y?(n=y[0],e=y[1]):(n=S[0],e=S[1],w.invert&&(n=w.invert(n),e=w.invert(e)),e<n&&(o=n,n=e,e=o))),M&&(x?(r=x[0],i=x[1]):(r=_[0],i=_[1],M.invert&&(r=M.invert(r),i=M.invert(i)),i<r&&(o=r,r=i,i=o))),w&&M?[[n,r],[e,i]]:w?[n,e]:M&&[r,i])},C.clear=function(){return C.empty()||(S=[0,0],_=[0,0],y=x=null),C},C.empty=function(){return!!w&&S[0]==S[1]||!!M&&_[0]==_[1]},d3.rebind(C,b,"on")};var Yu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ku=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Xu=On.format=ue.timeFormat,$u=Xu.utc,Zu=$u("%Y-%m-%dT%H:%M:%S.%LZ");function Ju(t){return t.toISOString()}function Qu(n,i,t){function a(t){return n(t)}function u(t,n){var e=(t[1]-t[0])/n,r=d3.bisect(nl,e);return r==nl.length?[i.year,Pa(t.map(function(t){return t/31536e6}),n)[2]]:r?i[e/nl[r-1]<nl[r]/e?r-1:r]:[il,Pa(t,n)[2]]}return a.invert=function(t){return tl(n.invert(t))},a.domain=function(t){return arguments.length?(n.domain(t),a):n.domain().map(tl)},a.nice=function(n,e){var t=a.domain(),r=La(t),i=null==n?u(r,10):"number"==typeof n&&u(r,n);function o(t){return!isNaN(t)&&!n.range(t,tl(+t+1),e).length}return i&&(n=i[0],e=i[1]),a.domain(Da(t,1<e?{floor:function(t){for(;o(t=n.floor(t));)t=tl(t-1);return t},ceil:function(t){for(;o(t=n.ceil(t));)t=tl(+t+1);return t}}:n))},a.ticks=function(t,n){var e=La(a.domain()),r=null==t?u(e,10):"number"==typeof t?u(e,t):!t.range&&[{range:t},n];return r&&(t=r[0],n=r[1]),t.range(e[0],tl(+e[1]+1),n<1?1:n)},a.tickFormat=function(){return t},a.copy=function(){return Qu(n.copy(),i,t)},qa(a,n)}function tl(t){return new Date(t)}Xu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ju:Zu,Ju.parse=function(t){var n=new Date(t);return isNaN(n)?null:n},Ju.toString=Zu.toString,On.second=In(function(t){return new Dn(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(t.getTime()+1e3*Math.floor(n))},function(t){return t.getSeconds()}),On.seconds=On.second.range,On.seconds.utc=On.second.utc.range,On.minute=In(function(t){return new Dn(6e4*Math.floor(t/6e4))},function(t,n){t.setTime(t.getTime()+6e4*Math.floor(n))},function(t){return t.getMinutes()}),On.minutes=On.minute.range,On.minutes.utc=On.minute.utc.range,On.hour=In(function(t){var n=t.getTimezoneOffset()/60;return new Dn(36e5*(Math.floor(t/36e5-n)+n))},function(t,n){t.setTime(t.getTime()+36e5*Math.floor(n))},function(t){return t.getHours()}),On.hours=On.hour.range,On.hours.utc=On.hour.utc.range,On.month=In(function(t){return(t=On.day(t)).setDate(1),t},function(t,n){t.setMonth(t.getMonth()+n)},function(t){return t.getMonth()}),On.months=On.month.range,On.months.utc=On.month.utc.range;var nl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],el=[[On.second,1],[On.second,5],[On.second,15],[On.second,30],[On.minute,1],[On.minute,5],[On.minute,15],[On.minute,30],[On.hour,1],[On.hour,3],[On.hour,6],[On.hour,12],[On.day,1],[On.day,2],[On.week,1],[On.month,1],[On.month,3],[On.year,1]],rl=Xu.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",dr]]),il={range:function(t,n,e){return d3.range(Math.ceil(t/e)*e,+n,e).map(tl)},floor:j,ceil:j};el.year=On.year,On.scale=function(){return Qu(d3.scale.linear(),el,rl)};var ol=el.map(function(t){return[t[0].utc,t[1]]}),al=$u.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",dr]]);function ul(t){return JSON.parse(t.responseText)}function ll(t){var n=x.createRange();return n.selectNode(x.body),n.createContextualFragment(t.responseText)}ol.year=On.year.utc,On.scale.utc=function(){return Qu(d3.scale.linear(),ol,al)},d3.text=mn(function(t){return t.responseText}),d3.json=function(t,n){return yn(t,"application/json",ul,n)},d3.html=function(t,n){return yn(t,"text/html",ll,n)},d3.xml=mn(function(t){return t.responseXML}),this.d3=d3,void 0===(hl="function"==typeof(fl=d3)?fl.call(exports,cl,exports,sl):fl)||(sl.exports=hl)}()}},[[831,0]]])});
//# sourceMappingURL=onms-graph.min.js.map