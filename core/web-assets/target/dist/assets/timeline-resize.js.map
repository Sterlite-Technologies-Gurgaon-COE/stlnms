{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///./src/main/assets/js/apps/timeline-resize/index.js"],"names":["debounce","require","DEBOUNCE_RATE","RELATIVE_SIZE","getSize","element","td","closest","undefined","Math","round","offsetWidth","container","width","recalculateBox","e","$","imgs","i","length","img","w","imgsrc","data","attr","spans","span","htmlsrc","load","String","document","ready","window","addEventListener"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;;;;;;;ACVA;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,IAAMA,QAAQ,GAAGC,mBAAO,CAAC,sFAAR,CAAkBD,QAAnC;;AAEA,IAAME,aAAa,GAAG,GAAtB,C,CAA2B;;AAC3B,IAAMC,aAAa,GAAG,GAAtB;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAASC,OAAT,EAAkB;AAChC;AACA,MAAMC,EAAE,GAAGD,OAAO,CAACE,OAAR,CAAgB,IAAhB,EAAsB,CAAtB,CAAX;;AACA,MAAID,EAAE,KAAKE,SAAX,EAAsB;AACpB,WAAOC,IAAI,CAACC,KAAL,CAAWJ,EAAE,CAACK,WAAd,CAAP;AACD,GAL+B,CAOhC;;;AACA,MAAMC,SAAS,GAAGP,OAAO,CAACE,OAAR,CAAgB,KAAhB,CAAlB,CARgC,CAQU;;AAC1C,SAAOE,IAAI,CAACC,KAAL,CAAWE,SAAS,CAACC,KAAV,KAAoBV,aAA/B,CAAP;AACD,CAVD;;AAYA,IAAMW,cAAc,GAAGd,QAAQ,CAAC,YAAM;AACpC,MAAMe,CAAC,GAAGC,CAAC,CAAC,mBAAD,CAAX,CADoC,CAEpC;;AACA,MAAMC,IAAI,GAAG,mBAAAF,CAAC,MAAD,CAAAA,CAAC,EAAM,KAAN,CAAd;;AACA,OAAK,IAAIG,CAAC,GAAC,CAAX,EAAcA,CAAC,GAAGD,IAAI,CAACE,MAAvB,EAA+BD,CAAC,EAAhC,EAAoC;AAClC,QAAME,GAAG,GAAGJ,CAAC,CAACC,IAAI,CAACC,CAAD,CAAL,CAAb;AACA,QAAMG,CAAC,GAAGjB,OAAO,CAACgB,GAAD,CAAjB;;AACA,QAAIC,CAAJ,EAAO;AACL,UAAMC,MAAM,GAAGF,GAAG,CAACG,IAAJ,CAAS,QAAT,IAAqBF,CAApC;AACAD,SAAG,CAACI,IAAJ,CAAS,KAAT,EAAgBF,MAAhB;AACD;AACF,GAXmC,CAYpC;;;AACA,MAAMG,KAAK,GAAG,mBAAAV,CAAC,MAAD,CAAAA,CAAC,EAAM,MAAN,CAAf;;AACA,OAAK,IAAIG,EAAC,GAAC,CAAX,EAAcA,EAAC,GAAGO,KAAK,CAACN,MAAxB,EAAgCD,EAAC,EAAjC,EAAqC;AACnC,QAAMQ,IAAI,GAAGV,CAAC,CAACS,KAAK,CAACP,EAAD,CAAN,CAAd;;AACA,QAAMG,EAAC,GAAGjB,OAAO,CAACsB,IAAD,CAAjB;;AACA,QAAIL,EAAC,IAAIK,IAAI,CAACH,IAAL,CAAU,KAAV,CAAT,EAA2B;AACzB,UAAMI,OAAO,GAAGD,IAAI,CAACH,IAAL,CAAU,KAAV,IAAmBF,EAAnC;;AACAK,UAAI,CAACE,IAAL,CAAUC,MAAM,CAACF,OAAD,CAAhB;AACD;AACF;AACF,CAtB8B,EAsB5BzB,aAtB4B,CAA/B;AAwBAc,CAAC,CAACc,QAAD,CAAD,CAAYC,KAAZ,CAAkBjB,cAAlB;AACAkB,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkCnB,cAAlC,E","file":"timeline-resize.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn ","/*******************************************************************************\n * This file is part of OpenNMS(R).\n *\n * Copyright (C) 2015-2021 The OpenNMS Group, Inc.\n * OpenNMS(R) is Copyright (C) 1999-2021 The OpenNMS Group, Inc.\n *\n * OpenNMS(R) is a registered trademark of The OpenNMS Group, Inc.\n *\n * OpenNMS(R) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * OpenNMS(R) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with OpenNMS(R).  If not, see:\n *      http://www.gnu.org/licenses/\n *\n * For more information contact:\n *     OpenNMS(R) Licensing <license@opennms.org>\n *     http://www.opennms.org/\n *     http://www.opennms.com/\n *******************************************************************************/\n\nconst debounce = require('lodash').debounce;\n\nconst DEBOUNCE_RATE = 200; // ms\nconst RELATIVE_SIZE = 0.5;\n\nconst getSize = function(element) {\n  // if we can get the offset width of the actual <td>, use it\n  const td = element.closest('td')[0];\n  if (td !== undefined) {\n    return Math.round(td.offsetWidth);\n  }\n\n  // otherwise, fall back to the old way of calculating\n  const container = element.closest('div'); // This is the panel, not the cell that contains the IMG\n  return Math.round(container.width() * RELATIVE_SIZE);\n}\n\nconst recalculateBox = debounce(() => {\n  const e = $('#availability-box');\n  // Update the timeline headers\n  const imgs = e.find('img');\n  for (let i=0; i < imgs.length; i++) {\n    const img = $(imgs[i]);\n    const w = getSize(img);\n    if (w) {\n      const imgsrc = img.data('imgsrc') + w;\n      img.attr('src', imgsrc);\n    }\n  }\n  // Update the timeline html/images\n  const spans = e.find('span');\n  for (let i=0; i < spans.length; i++) {\n    const span = $(spans[i]);\n    const w = getSize(span);\n    if (w && span.data('src')) {\n      const htmlsrc = span.data('src') + w;\n      span.load(String(htmlsrc));\n    }\n  }\n}, DEBOUNCE_RATE);\n\n$(document).ready(recalculateBox);\nwindow.addEventListener('resize', recalculateBox);\n"],"sourceRoot":""}