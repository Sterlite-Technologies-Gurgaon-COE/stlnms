{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///./src/main/assets/js/apps/notifications/index.js","webpack:///./src/main/assets/js/vendor/jquery-js.js","webpack:///./src/main/assets/modules/lib/util/index.js"],"names":["window","notificationSocket","connect","WebSocket","Util","getBaseHref","replace","onclose","event","close","onmessage","message","JSON","parse","data","notification","Notification","head","body","icon","badge","tag","id","permission","requestPermission","then","console","log","jQuery","require","module","exports","base","document","getElementsByTagName","href","url","location","booleanValue","elementName","checkboxes","getElementsByName","index","hasOwnProperty","checked"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;ACVA;;;AAIa;;;;;;;;AAEb;;AACA;;;;AAEA,uBAAE,YAAW;AACT,MAAI,kBAAkBA,MAAtB,EAA8B;AAC1B,QAAIC,kBAAkB,GAAG,IAAzB;;AAEA,QAAIC,OAAO,GAAG,SAAVA,OAAU,GAAY;AACtBD,wBAAkB,GAAG,IAAIE,SAAJ,CAAc,CAACC,cAAKC,WAAL,KAAqB,qBAAtB,EAA6CC,OAA7C,CAAqD,OAArD,EAA8D,IAA9D,CAAd,CAArB;;AAEAL,wBAAkB,CAACM,OAAnB,GAA6B,UAAUC,KAAV,EAAiB;AAC1CP,0BAAkB,CAACQ,KAAnB;AACAR,0BAAkB,GAAG,IAArB;AAEA,kCAAWC,OAAX,EAAoB,IAApB;AACH,OALD;;AAOAD,wBAAkB,CAACS,SAAnB,GAA+B,UAAUF,KAAV,EAAiB;AAC5C,YAAIG,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWL,KAAK,CAACM,IAAjB,CAAd;AACA,YAAIC,YAAY,GAAG,IAAIC,YAAJ,CAAiBL,OAAO,CAACM,IAAzB,EAA+B;AAC9CC,cAAI,EAAEP,OAAO,CAACO,IADgC;AAE9CC,cAAI,EAAEf,cAAKC,WAAL,KAAqB,kBAFmB;AAG9Ce,eAAK,EAAEhB,cAAKC,WAAL,KAAqB,aAHkB;AAI9CgB,aAAG,EAAE,0BAA0BV,OAAO,CAACW;AAJO,SAA/B,CAAnB;AAMH,OARD;AASH,KAnBD;;AAqBA,QAAIN,YAAY,CAACO,UAAb,KAA4B,SAAhC,EAA2C;AACvCrB,aAAO;AACV,KAFD,MAEO,IAAIc,YAAY,CAACO,UAAb,KAA4B,QAAhC,EAA0C;AAC7CP,kBAAY,CAACQ,iBAAb,GACKC,IADL,CACU,UAAUF,UAAV,EAAsB;AACxB,YAAIA,UAAU,KAAK,SAAnB,EAA8B;AAC1BrB,iBAAO;AACV;AACJ,OALL;AAMH;AACJ;AACJ,CApCD,E;;;;;;;;;;;;;;ACTAwB,OAAO,CAACC,GAAR,CAAY,iBAAZ,E,CAAgC;;AAEhC,IAAMC,MAAM,GAAGC,mBAAO,CAAC,qGAAvB;;AACAC,MAAM,CAACC,OAAP,GAAiBH,MAAjB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICHqBxB,I;;;;;;;;;kCACC;AACpB,UAAM4B,IAAI,GAAGC,QAAQ,CAACC,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CAAb;;AACA,UAAIF,IAAJ,EAAU;AACT,eAAOA,IAAI,CAACG,IAAZ;AACA;;AACD,aAAO,EAAP;AACA;;;gCACkBC,G,EAAK;AACvB,UAAIpC,MAAM,IAAIA,MAAM,CAACqC,QAArB,EAA+B;AAC9BrC,cAAM,CAACqC,QAAP,CAAgBF,IAAhB,GAAuB/B,IAAI,CAACC,WAAL,KAAqB+B,GAA5C;AACA;AACD;;;2BACaE,Y,EAAcC,W,EAAa;AACxC,UAAIC,UAAU,GAAGP,QAAQ,CAACQ,iBAAT,CAA2BF,WAA3B,CAAjB;;AACA,WAAK,IAAIG,KAAT,IAAkBF,UAAlB,EAA8B;AAC7B,YAAIA,UAAU,CAACG,cAAX,CAA0BD,KAA1B,CAAJ,EAAsC;AACrCF,oBAAU,CAACE,KAAD,CAAV,CAAkBE,OAAlB,GAA4BN,YAA5B;AACA;AACD;AACD","file":"notifications.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn ","/**\n * @copyright 2016-2019 The OpenNMS Group, Inc.\n */\n\n'use strict';\n\nimport Util from 'lib/util';\nimport $ from 'vendor/jquery-js';\n\n$(function() {\n    if ('Notification' in window) {\n        let notificationSocket = null;\n\n        let connect = function () {\n            notificationSocket = new WebSocket((Util.getBaseHref() + 'notification/stream').replace(/^http/, 'ws'));\n\n            notificationSocket.onclose = function (event) {\n                notificationSocket.close();\n                notificationSocket = null;\n\n                setTimeout(connect, 1000);\n            };\n\n            notificationSocket.onmessage = function (event) {\n                let message = JSON.parse(event.data);\n                let notification = new Notification(message.head, {\n                    body: message.body,\n                    icon: Util.getBaseHref() + 'images/o-512.png',\n                    badge: Util.getBaseHref() + 'favicon.ico',\n                    tag: 'opennms:notification:' + message.id\n                });\n            };\n        };\n\n        if (Notification.permission === 'granted') {\n            connect();\n        } else if (Notification.permission !== 'denied') {\n            Notification.requestPermission()\n                .then(function (permission) {\n                    if (permission === 'granted') {\n                        connect();\n                    }\n                });\n        }\n    }\n});\n","console.log('init: jquery-js'); // eslint-disable-line no-console\n\nconst jQuery = require('jquery');\nmodule.exports = jQuery;\n","export default class Util {\n\tstatic getBaseHref() {\n\t\tconst base = document.getElementsByTagName('base')[0];\n\t\tif (base) {\n\t\t\treturn base.href;\n\t\t}\n\t\treturn '';\n\t}\n\tstatic setLocation(url) {\n\t\tif (window && window.location) {\n\t\t\twindow.location.href = Util.getBaseHref() + url;\n\t\t}\n\t}\n\tstatic toggle(booleanValue, elementName) {\n\t\tvar checkboxes = document.getElementsByName(elementName);\n\t\tfor (var index in checkboxes) {\n\t\t\tif (checkboxes.hasOwnProperty(index)) {\n\t\t\t\tcheckboxes[index].checked = booleanValue;\n\t\t\t}\n\t\t}\n\t}\n}"],"sourceRoot":""}