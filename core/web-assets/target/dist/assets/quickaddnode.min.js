!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t=n();for(var i in t)("object"==typeof exports?exports:e)[i]=t[i]}}(window,function(){return(window.webpackJsonp=window.webpackJsonp||[]).push([[60,2,8,24,25,38,40,42,48,63,65,71],{10:function(e,exports,n){"use strict";console.log("init: bootstrap-js");var jQuery=n(5);n(27),e.exports=jQuery},105:function(e,exports,n){"use strict";var t,i=(t=n(20))&&t.__esModule?t:{default:t};var r,angular=n(3),a=n(106);function o(){}n(203),o.prototype.init=function(n){var t=this,i="yyyy-MM-dd'T'HH:mm:ssxxx";window._onmsZoneId=void 0;var r=new XMLHttpRequest;r.onreadystatechange=function(){try{if(r.readyState===XMLHttpRequest.DONE){if(200===r.status){var e=JSON.parse(r.responseText);e.datetimeformatConfig&&e.datetimeformatConfig.datetimeformat?(window._onmsDateTimeFormat=e.datetimeformatConfig.datetimeformat||i,window._onmsZoneId=e.datetimeformatConfig.zoneId):(console.log("Error: datetimeformatConfig property not found:",e),window._onmsDateTimeFormat=i)}else console.log("Error: failed to request format info: "+r.status+" "+r.statusText),window._onmsDateTimeFormat=i;n(t,r.status)}}catch(e){console.log("Error: failed to request format info: ",e),window._onmsDateTimeFormat=i,n(t,r.status)}},r.open("GET","rest/info"),r.setRequestHeader("Accept","application/json"),r.send()},o.prototype.assertInitialized=function(){if(!window._onmsDateTimeFormat)throw console.log("OnmsDateFormatter.init() must complete before using!"),new Error("OnmsDateFormatter.init() must complete before using!")},o.prototype.getZoneId=function(){return this.assertInitialized(),this._zoneId||(window._onmsZoneId?this._zoneId=window._onmsZoneId:(console.warn("No zone ID specified from the server; guessing based on browser."),this._zoneId=a.tz.guess())),this._zoneId},o.prototype.format=function(e){if(this.assertInitialized(),null==e)return e;var n=this.getZoneId();return a.tz(e,n).formatJavaDTF(window._onmsDateTimeFormat)},function(){if("undefined"==typeof jest){var e=new o;e.init(function(){window._onmsFormatter=e})}else console.log("Running in a test environment. Skipping automatic initialization.")}(),window.angular?(angular.module("onmsDateFormatter",["ng"]).factory("DateFormatterService",["$interval","$q",function(e,n){console.log("Initializing DateFormatterService");var t=n.defer(),i=0,r=e(function(){window._onmsFormatter&&(console.log("Global formatter found: "+window._onmsDateTimeFormat),t.resolve(window._onmsFormatter),e.cancel(r)),300<i++&&(console.log("DateFormatterService: giving up waiting for global formatter."),e.cancel(r))},100);return{raw:window._onmsFormatter,formatter:t.promise,format:function(n){return t.promise.then(function(e){return e.format(n)})}}}]),(0,i.default)(r=angular.module("onmsDateFormatter")).call(r,"onmsDate",["$filter","DateFormatterService",function(i,e){return function(e,n){var t;return null!=(t=window._onmsFormatter?window._onmsFormatter.format(e):i("date")(e,"yyyy-MM-ddTHH:mm:ss.sssZ"))?t:n}}]),angular.module("onmsDateFormatter").directive("onmsDate",["DateFormatterService",function(e){return{restrict:"E",compile:function(n){e.format(n.text()).then(function(e){n.replaceWith(e)}).catch(function(e){console.error("Failed to format "+n.text(),e)})}}}])):console.log("Angular not found.  Not initializing OnmsDateFormatter Angular components."),e.exports=o},107:function(e,exports,n){"use strict";n(133);var r=t(n(11)),a=t(n(8)),o=t(n(160));function t(e){return e&&e.__esModule?e:{default:e}}var s=n(68);e.exports=function(e,t){var i=this;return i.deployed=t,i.modified=!1,i.foreignSource=e["foreign-source"],i.dateStamp=e["date-stamp"]||(0,o.default)(),i.lastImport=e["last-import"],i.nodes=[],(0,a.default)(angular).call(angular,e.node,function(e){var n=new s(i.foreignSource,e,t);i.nodes.push(n)}),i.nodesInDatabase=0,i.nodesDefined=i.nodes.length,i.isModified=function(){return!!i.modified||!i.deployed},i.indexOf=function(e){for(var n=0;n<i.nodes.length;n++)if(i.nodes[n].foreignId===e)return n;return-1},i.getNode=function(e){var n=(0,r.default)(i).call(i,e);return n<0?null:i.nodes[n]},i.setNode=function(e){var n=(0,r.default)(i).call(i,e.foreignId);n<0?(i.nodes.push(e),i.nodesDefined++):i.nodes[n]=e,i.modified=!0,i.dateStamp=(0,o.default)()},i.setDeployed=function(n){i.deployed=n,i.modified=!1,(0,a.default)(angular).call(angular,i.nodes,function(e){e.deployed=n,e.modified=!1}),i.lastImport=n?(0,o.default)():null},i.reset=function(){i.nodes=[],i.nodesDefined=0,i.nodesInDatabase=0,i.modified=!0,i.dateStamp=(0,o.default)()},i.className="Requisition",i}},108:function(e,exports,n){"use strict";n(60),n(61);var t,i=(t=n(8))&&t.__esModule?t:{default:t};var r=n(83);e.exports=function(e){var n=this;return n.ipAddress=e["ip-addr"],n.description=e.descr,n.snmpPrimary=e["snmp-primary"],n.status="managed",e&&e.status&&(n.status="1"===e.status?"managed":"unmanaged"),n.services=[],(0,i.default)(angular).call(angular,e["monitored-service"],function(e){n.services.push(new r(e))}),n.className="RequisitionInterface",n}},109:function(e,exports,n){"use strict";n(12);var t=n(110),i=t.Scope;e.exports=function(){var e=this;return e.scope=i.NODE,e.scoped_interface=null,e.scoped_service=null,e.context=t.RequisitionContext,e.key=null,e.value=null,e.displayScope=function(){return e.scope===i.INTERFACE?"Interface":e.scope===i.SERVICE?"Service":"Node"},e.displayInterface=function(){return null!==e.scoped_interface?e.scoped_interface.ipAddress:null},e.displayService=function(){return null!==e.scoped_service?e.scoped_service.name:null},e.className="RequisitionMetaDataEntry",e}},110:function(e,exports,n){"use strict";e.exports={Scope:{NODE:"node",INTERFACE:"interface",SERVICE:"service"},RequisitionContext:"requisition"}},111:function(e,exports,n){"use strict";var a=n(63);n(17),angular.module("onms-requisitions").factory("SynchronizeService",["RequisitionsService","growl",function(i,r){return{synchronize:function(n,t){a.prompt({title:"Synchronize Requisition  "+_.escape(n.foreignSource),message:"<p><b>Choose a scan option: </b></p>",inputType:"radio",inputOptions:[{text:"Scan all nodes",value:"true"},{text:"Scan added nodes only",value:"false"},{text:"No scanning",value:"dbonly"}],buttons:{confirm:{label:"Synchronize"},cancel:{label:"Cancel"}},swapButtonOrder:"true",callback:function(e){null!==e&&function(e,n){i.startTiming(),i.synchronizeRequisition(e.foreignSource,n).then(function(){r.success("The import operation has been started for "+_.escape(e.foreignSource)+" (rescanExisting? "+n+")<br/>Use <b>refresh</b> to update the deployed statistics"),e.setDeployed(!0)},t)}(n,e)}})}}}])},148:function(e,exports,n){"use strict";n(133);var t,i=(t=n(11))&&t.__esModule?t:{default:t};e.exports=function(){var t=this;return t.requisitions=[],t.indexOf=function(e){for(var n=0;n<t.requisitions.length;n++)if(t.requisitions[n].foreignSource===e)return n;return-1},t.getRequisition=function(e){var n=(0,i.default)(t).call(t,e);return n<0?null:t.requisitions[n]},t.setRequisition=function(e){var n=(0,i.default)(t).call(t,e.foreignSource);n<0?t.requisitions.push(e):t.requisitions[n]=e},t.className="RequisitionsData",t}},149:function(e,exports,n){"use strict";n(16);var t,o=(t=n(34))&&t.__esModule?t:{default:t};var s=n(68);e.exports=function(){var a=this;return a.foreignSource=null,a.foreignId=String((new Date).getTime()),a.nodeLabel=null,a.ipAddress=null,a.snmpCommunity="public",a.snmpVersion="v2c",a.noSnmp=!1,a.deviceUsername=null,a.devicePassword=null,a.enablePassword=null,a.accessMethod=null,a.autoEnable=!1,a.categories=[],a.createRequisitionedNode=function(){var e,n,t,i,r=new s(a.foreignSource,{"foreign-id":a.foreignId,"node-label":a.nodeLabel,interface:[{"ip-addr":a.ipAddress,"snmp-primary":a.noSnmp?"N":"P"}],category:a.categories},!1);return a.deviceUsername&&""!==(0,o.default)(e=a.deviceUsername).call(e)&&r.assets.push({name:"username",value:a.deviceUsername}),a.devicePassword&&""!==(0,o.default)(n=a.devicePassword).call(n)&&r.assets.push({name:"password",value:a.devicePassword}),a.enablePassword&&""!==(0,o.default)(t=a.enablePassword).call(t)&&r.assets.push({name:"enable",value:a.enablePassword}),a.accessMethod&&""!==(0,o.default)(i=a.accessMethod).call(i)&&r.assets.push({name:"connection",value:a.accessMethod}),a.autoEnable&&r.assets.push({name:"autoenable",value:"A"}),r},a.addNewCategory=function(){return a.categories.push({name:""}),a.categories.length-1},a.className="QuickNode",a}},15:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/lib/onms-http/403-permission-denied.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=modal-header> <h3><i class="fa fa-exclamation-triangle text-warning"></i> Permission Denied</h3> </div> <div class=modal-body> <h5> You are not allowed to perform the requested action. </h5> <p class=text-muted> This is not supposed to happen. Please reload the page and contact your administrator if this occurs more often. </p> </div> <div class=modal-footer> <button class="btn btn-primary" ng-click=reload()>Reload</button> </div>')}]),e.exports=n},150:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/quick-add-panel-basic.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <div class=form-group> <label class=col-form-label for=foreignSource>Requisition</label> <input class=form-control type=text id=foreignSource name=foreignSource placeholder="Select a Requisition (hit space bar to see the options or start typing the name)" ng-model=node.foreignSource typeahead-editable=false typeahead-min-length=0 uib-typeahead="fs for fs in foreignSources | filter:$viewValue" required ng-class="{ \'is-invalid\' : quickAddNodeForm.foreignSource.$invalid }"> </div> <div class=form-group> <label class=col-form-label for=ipAddress>IP Address</label> <input class=form-control type=text id=ipAddress name=ipAddress placeholder="A valid IPv4 or IPv6 address" ng-model=node.ipAddress required valid-ip-address ng-class="{ \'is-invalid\' : quickAddNodeForm.ipAddress.$invalid }"> <p ng-show=quickAddNodeForm.ipAddress.$invalid class=invalid-feedback>A valid IPv4 or IPv6 address is required</p> </div> <div class=form-group> <label class=col-form-label for=nodeLabel>Node Label</label> <input class=form-control type=text id=nodeLabel name=nodeLabel placeholder="The Node Label" ng-model=node.nodeLabel required ng-class="{ \'is-invalid\' : quickAddNodeForm.nodeLabel.$invalid }"> </div> </div> ')}]),e.exports=n},151:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/quick-add-panel-snmp.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <div class=form-group> <div class=checkbox> <label> <input type=checkbox id=noSnmp name=noSnmp ng-model=node.noSnmp> No SNMP </label> </div> </div> <div class=form-group> <label class=col-form-label for=snmpVersion>Version</label> <select class="form-control custom-select" id=snmpVersion name=snmpVersion ng-model=node.snmpVersion ng-disabled=node.noSnmp> <option>v1</option> <option selected=selected>v2c</option> </select> </div> <div class=form-group> <label class=col-form-label for=snmpCommunity>Community String</label> <input class=form-control type=text id=snmpCommunity name=snmpCommunity placeholder="SNMP Community String" ng-model=node.snmpCommunity ng-disabled=node.noSnmp> </div> </div> ')}]),e.exports=n},152:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/quick-add-panel-categories.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <button class="btn btn-secondary my-2" id=add-category ng-click=addCategory()><i class="fa fa-plus"/> Add Category</button> <br/> <ng-form name=categoryForm ng-repeat="category in node.categories"> <div class=form-group> <div class=input-group> <div class=input-group-prepend> <div class=input-group-text><i class="fa fa-pencil"></i></div> </div> <input class=form-control type=text name=categoryName placeholder="Category Name" ng-model=category.name typeahead-min-length=0 typeahead-editable=true uib-typeahead="category for category in getAvailableCategories() | filter:$viewValue" required ng-class="{ \'is-invalid\' : categoryForm.categoryName.$invalid }"> <div class=input-group-append> <button class="btn btn-secondary" type=button ng-click=removeCategory($index)> <span class="fa fa-trash"></span> </button> </div> <p ng-show=categoryForm.categoryName.$invalid class=invalid-feedback>Category name is required and should be unique on the node.</p> </div> </div> </ng-form> </div> ')}]),e.exports=n},153:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/quick-add-panel-cli.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <div class=form-group> <label class=col-form-label for=descr>Device username</label> <input class=form-control type=text id=deviceUsername name=deviceUsername placeholder="The device username [optional]" ng-model=node.deviceUsername> </div> <div class=form-group> <label class=col-form-label for=descr>Device password</label> <input class=form-control type=text id=devicePassword name=devicePassword placeholder="The device password [optional]" ng-model=node.devicePassword> </div> <div class=form-group> <label class=col-form-label for=descr>Enable Password</label> <input class=form-control type=text id=enablePassword name=enablePassword placeholder="The enable password [optional]" ng-model=node.enablePassword> </div> <div class=form-group> <label class=col-form-label for=descr>Access Method</label> <input class=form-control type=text id=accessmethod name=accessMethod placeholder="Access Method (hit space bar to see the options) [optional]" ng-model=node.accessMethod typeahead-editable=false typeahead-min-length=0 uib-typeahead="m for m in availableAccessMethods | filter:$viewValue" required> </div> <div class=form-group> <div class=checkbox> <label> <input type=checkbox id=autoEnable name=autoEnable ng-model=node.autoEnable> Auto Enable </label> </div> </div> </div> ')}]),e.exports=n},154:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/quick-add-panel-help.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <p> This workflow provides a quick way to add a node to an existing provisioning requisition in this OpenNMS system. </p> <p> <strong>Note: This operation <em>will</em> override any un-synchronized modifications made to the selected requisition.</strong> </p> <p> <em>Basic Attributes</em> are common to all nodes. Select the requisition into which this node should be added, provide an IP address on which OpenNMS will communicate with the node, and enter a node label. The node label will serve as the display name for the node throughout OpenNMS. </p> <p> <em>Surveillance Category Memberships</em> are optional and work like tags. A node can be a member of any number of surveillance categories, and the names of those categories can be used in a variety of powerful ways throughout the OpenNMS system. </p> <p> <em>SNMP Parameters</em> are optional and apply only to the node being requisitioned. If no values are specified here, OpenNMS\' system-wide SNMP configuration will be used to determine the appropriate values for the IP address entered in the <em>Basic Attributes</em> section. If the node does not support SNMP, the "No SNMP" box should be checked. Configuring SNMPv3 parameters via the web UI is not supported; contact your OpenNMS administrator if this node requires SNMPv3 parameters that differ from those in the system-wide configuration. </p> <p> <em>CLI Authentication Parameters</em> are optional and will be used only if one or more provisioning adapters are configured to use them. Typically this is the case if OpenNMS is integrated with an external configuration management system. </p> </div> ')}]),e.exports=n},17:function(e,exports,n){"use strict";n(12);var i=t(n(34)),a=t(n(162)),o=t(n(79)),s=t(n(20)),l=t(n(160)),p=t(n(8)),m=t(n(13)),g=t(n(11));function t(e){return e&&e.__esModule?e:{default:e}}var r=n(148),v=n(107),h=n(68);angular.module("onms-requisitions").factory("RequisitionsService",["$q","$cacheFactory","$window","$http","$timeout","$log",function(c,e,n,d,t,u){u.debug("Initializing RequisitionsService");var f={internal:{}};return f.internal.cacheEnabled=!0,f.internal.cache=e("RequisitionsService"),f.internal.requisitionsUrl="rest/requisitions",f.internal.requisitionNamesUrl="rest/requisitionNames",f.internal.foreignSourcesUrl="rest/foreignSources",f.internal.foreignSourcesConfigUrl="rest/foreignSourcesConfig",f.internal.monitoringLocationsUrl="rest/monitoringLocations",f.internal.snmpConfigUrl="rest/snmpConfig",f.internal.errorHelp=" Check the OpenNMS logs for more details, or try again later.",f.internal.defaultTimeout=3,f.internal.timingStatus={isRunning:!1},f.internal.getCatchedConfigData=function(e){return f.internal.cache.get(e)},f.internal.setCatchedConfigData=function(e,n){f.internal.cacheEnabled&&f.internal.cache.put(e,n)},f.internal.getCachedRequisitionsData=function(){return f.internal.getCatchedConfigData("requisitionsData")},f.internal.setCachedRequisitionsData=function(e){return f.internal.setCatchedConfigData("requisitionsData",e)},f.internal.getCachedRequisition=function(e){var n=f.internal.getCachedRequisitionsData();return n?n.getRequisition(e):null},f.internal.getCachedNode=function(e,n){var t=f.internal.getCachedRequisition(e);return t?t.getNode(n):null},f.internal.addQuickNode=function(e){var n=e.createRequisitionedNode();return f.saveNode(n).then(function(){return u.debug("addQuickNode: the node "+n.nodeLabel+" has been saved."),f.synchronizeRequisition(n.foreignSource,"false").then(function(){return u.debug("addQuickNode: the requisition "+n.foreignSource+" has been synchronized."),n},function(){return c.reject("Cannot synchronize requisition "+n.foreignSource)})},function(){return c.reject("Cannot quick-add node to requisition "+n.foreignSource)})},f.internal.updateRequisition=function(e,n){u.debug("updateRequisition: updating deployed statistics for requisition "+n.name+".");var t=n["foreign-id"];e.nodesInDatabase=t.length,e.deployed=0<t.length,e.lastImport=n["last-imported"];for(var i=0;i<t.length;i++){var r=e.getNode(t[i]);r&&(r.deployed=!0)}return e},f.clearCache=function(){return u.debug("clearCache: removing everything from the internal cache"),f.internal.cache.removeAll(),!0},f.removeRequisitionFromCache=function(e){var n=f.internal.getCachedRequisitionsData();if(n){var t,i=(0,g.default)(n).call(n,e);if(0<=i)return u.debug("clearRequisitionCache: removing requisition "+e+" from the internal cache"),(0,m.default)(t=n.requisitions).call(t,i,1),!0}return!1},f.startTiming=function(e){var n=e||f.internal.defaultTimeout;u.debug("startTiming: starting timeout of "+n+" seconds."),f.internal.timingStatus.isRunning=!0,t(function(){f.internal.timingStatus.isRunning=!1},1e3*n)},f.getTiming=function(){return f.internal.timingStatus},f.getRequisitions=function(){var e=f.internal.getCachedRequisitionsData();if(e)return u.debug("getRequisitions: returning a cached copy of the requisitions data"),c.when(e);var i=c.defer(),t=f.internal.requisitionsUrl;return u.debug("getRequisitions: retrieving requisitions."),d.get(t).success(function(e){var t=new r;(0,p.default)(angular).call(angular,e["model-import"],function(e){var n=new v(e,!1);u.debug("getRequisitions: adding requisition "+n.foreignSource+"."),t.requisitions.push(n)}),f.updateDeployedStats(t).then(function(){f.internal.setCachedRequisitionsData(t),i.resolve(t)},function(e){i.reject(e)})}).error(function(e,n){u.error("getRequisitions: GET "+t+" failed:",e,n),i.reject("Cannot retrieve the requisitions."+f.internal.errorHelp)}),i.promise},f.getRequisitionNames=function(){var e=f.internal.getCatchedConfigData("requisitionNames");if(e)return u.debug("getRequisitionNames: returning a cached copy of requisition names"),c.when(e);var t=c.defer(),i=f.internal.requisitionNamesUrl;return u.debug("getRequisitionNames: getting requisition names"),d.get(i).success(function(e){u.debug("getRequisitionNames: got requisition names"),f.internal.setCatchedConfigData("requisitionNames",e["foreign-source"]),t.resolve(e["foreign-source"])}).error(function(e,n){u.error("getRequisitionNames: GET "+i+" failed:",e,n),t.reject("Cannot retrieve requisition names."+f.internal.errorHelp)}),t.promise},f.updateDeployedStats=function(n){var t=c.defer(),i=f.internal.requisitionsUrl+"/deployed/stats";return u.debug("updateDeployedStats: retrieving deployed statistics."),d.get(i).success(function(e){(0,p.default)(angular).call(angular,n.requisitions,function(n){var t=null;(0,p.default)(angular).call(angular,e["foreign-source"],function(e){e.name===n.foreignSource&&(t=e)}),t?f.internal.updateRequisition(n,t):n.setDeployed(!1)}),t.resolve(n)}).error(function(e,n){u.error("updateDeployedStats: GET "+i+" failed:",e,n),t.reject("Cannot retrieve the deployed statistics."+f.internal.errorHelp)}),t.promise},f.updateDeployedStatsForRequisition=function(t){var i=c.defer(),r=f.internal.requisitionsUrl+"/deployed/stats/"+encodeURIComponent(t.foreignSource);return u.debug("updateDeployedStatsForRequisition: retrieving deployed statistics for requisition "+t.foreignSource),d.get(r).success(function(e){f.internal.updateRequisition(t,e),i.resolve(t)}).error(function(e,n){u.error("updateDeployedStatsForRequisition: GET "+r+" failed:",e,n),i.resolve(t)}),i.promise},f.getRequisition=function(t){var e=f.internal.getCachedRequisition(t);if(e)return u.debug("getRequisition: returning a cached copy of "+t),c.when(e);var i=c.defer(),r=f.internal.requisitionsUrl+"/"+encodeURIComponent(t);return u.debug("getRequisition: getting requisition "+t),d.get(r).success(function(e){var n=new v(e);u.debug("getRequisition: got requisition "+t),f.updateDeployedStatsForRequisition(n).then(function(e){var n=f.internal.getCachedRequisitionsData();n&&(u.debug("getRequisition: updating cache for requisition "+t),n.setRequisition(e)),i.resolve(e)})}).error(function(e,n){u.error("getRequisition: GET "+r+" failed:",e,n),i.reject("Cannot retrieve the requisition "+t+"."+f.internal.errorHelp)}),i.promise},f.synchronizeRequisition=function(t,e){var n=f.internal.getCachedRequisitionsData();if(n&&(0,g.default)(n).call(n,t)<0)return c.reject("The foreignSource "+t+" does not exist.");var i=c.defer(),r=f.internal.requisitionsUrl+"/"+encodeURIComponent(t)+"/import";return u.debug("synchronizeRequisition: synchronizing requisition "+t+" with rescanExisting="+e),d({method:"PUT",url:r,params:{rescanExisting:e}}).success(function(e){u.debug("synchronizeRequisition: synchronized requisition "+t);var n=f.internal.getCachedRequisition(t);n&&(u.debug("synchronizeRequisition: updating deployed status of requisition "+t),n.setDeployed(!0)),i.resolve(e)}).error(function(e,n){u.error("synchronizeRequisition: PUT "+r+" failed:",e,n),i.reject("Cannot synchronize the requisition "+t+"."+f.internal.errorHelp)}),i.promise},f.addRequisition=function(t){if(f.internal.getCachedRequisition(t))return c.reject("Invalid foreignSource "+t+", it already exist.");var i=c.defer(),r={"foreign-source":t,node:[]},a=f.internal.requisitionsUrl;return u.debug("addRequisition: adding requisition "+t),d.post(a,r).success(function(){var e=new v(r,!1);u.debug("addRequisition: added requisition "+e.foreignSource);var n=f.internal.getCachedRequisitionsData();n&&(u.debug("addRequisition: pushing requisition "+t+" into the internal cache"),n.requisitions.push(e)),i.resolve(e)}).error(function(e,n){u.error("addRequisition: POST "+a+" failed:",e,n),i.reject("Cannot add the requisition "+t+"."+f.internal.errorHelp)}),i.promise},f.deleteRequisition=function(t){var e=f.internal.getCachedRequisitionsData();if(e){var n=(0,g.default)(e).call(e,t);if(n<0)return c.reject("The foreignSource "+t+" does not exist.");var i=e.requisitions[n];if(0<i.nodesInDatabase)return c.reject("The foreignSource "+t+" contains "+i.nodesInDatabase+" nodes on the database, it cannot be deleted.")}var r=c.defer();u.debug("deleteRequisition: deleting requisition "+t);var a=d.delete(f.internal.requisitionsUrl+"/"+encodeURIComponent(t)),o=d.delete(f.internal.requisitionsUrl+"/deployed/"+encodeURIComponent(t)),s=d.delete(f.internal.foreignSourcesUrl+"/"+encodeURIComponent(t)),l=d.delete(f.internal.foreignSourcesUrl+"/deployed/"+encodeURIComponent(t));return c.all([a,o,s,l]).then(function(e){u.debug("deleteRequisition: deleted requisition "+t),f.removeRequisitionFromCache(t),r.resolve(e)},function(e,n){u.error("deleteRequisition: DELETE operation failed:",e,n),r.reject("Cannot delete the requisition "+t+"."+f.internal.errorHelp)}),r.promise},f.removeAllNodesFromRequisition=function(t){var e=f.internal.getCachedRequisitionsData();if(e&&!e.getRequisition(t))return c.reject("The foreignSource "+t+" does not exist.");var i=c.defer(),n={"foreign-source":t,node:[]};u.debug("removeAllNodesFromRequisition: removing nodes from requisition "+t);var r=f.internal.requisitionsUrl;return d.post(r,n).success(function(n){u.debug("removeAllNodesFromRequisition: removed nodes from requisition "+t),f.synchronizeRequisition(t,"false").then(function(){u.debug("removeAllNodesFromRequisition: rhe requisition "+t+" has been synchronized.");var e=f.internal.getCachedRequisition(t);e&&(u.debug("removeAllNodesFromRequisition: updating requisition "+t+" on the internal cache"),e.reset()),i.resolve(n)},function(){i.reject("Cannot synchronize requisition "+t)})}).error(function(e,n){u.error("removeAllNodesFromRequisition: POST "+r+" failed:",e,n),i.reject("Cannot remove all nodes from requisition "+t+"."+f.internal.errorHelp)}),i.promise},f.getNode=function(i,r){var e=f.internal.getCachedNode(i,r);if(e)return u.debug("getNode: returning a cached copy of "+r+"@"+i),c.when(e);var a=c.defer(),t=f.internal.requisitionsUrl+"/"+encodeURIComponent(i)+"/nodes/"+encodeURIComponent(r);return u.debug("getNode: getting node "+r+"@"+i),d.get(t).success(function(e){var n=new h(i,e);u.debug("getNode: got node "+r+"@"+i);var t=f.internal.getCachedRequisition(i);t&&(u.debug("getNode: updating cache for requisition "+i),t.setNode(n)),a.resolve(n)}).error(function(e,n){u.error("getNode: GET "+t+" failed:",e,n),a.reject("Cannot retrieve node "+r+" from requisition "+i+"."+f.internal.errorHelp)}),a.promise},f.saveNode=function(o){var s=c.defer(),e=o.getOnmsRequisitionNode(),t=f.internal.requisitionsUrl+"/"+encodeURIComponent(o.foreignSource)+"/nodes";return u.debug("saveNode: saving node "+o.nodeLabel+" on requisition "+o.foreignSource),d.post(t,e).success(function(e){u.debug("saveNode: saved node "+o.nodeLabel+" on requisition "+o.foreignSource),o.modified=!0;var n=f.internal.getCachedRequisition(o.foreignSource);n&&n.setNode(o);var t=f.internal.getCatchedConfigData("categoriesConfig");if(t){var i=!1;(0,p.default)(angular).call(angular,o.categories,function(e){-1===(0,g.default)(t).call(t,e.name)&&(i=!0,t.push(e.name))}),i&&f.internal.setCatchedConfigData("categoriesConfig",t)}var r=f.internal.getCatchedConfigData("servicesConfig");if(r){var a=!1;(0,p.default)(angular).call(angular,o.interfaces,function(e){(0,p.default)(angular).call(angular,e.services,function(e){-1===(0,g.default)(r).call(r,e.name)&&(a=!0,r.push(e.name))})}),a&&f.internal.setCatchedConfigData("servicesConfig",r)}s.resolve(e)}).error(function(e,n){u.error("saveNode: POST "+t+" failed:",e,n),s.reject("Cannot save node "+o.foreignId+" on requisition "+o.foreignSource+"."+f.internal.errorHelp)}),s.promise},f.deleteNode=function(r){var a=c.defer(),t=f.internal.requisitionsUrl+"/"+encodeURIComponent(r.foreignSource)+"/nodes/"+encodeURIComponent(r.foreignId);return u.debug("deleteNode: deleting node "+r.nodeLabel+" from requisition "+r.foreignSource),d.delete(t).success(function(e){u.debug("deleteNode: deleted node "+r.nodeLabel+" on requisition "+r.foreignSource);var n=f.internal.getCachedRequisition(r.foreignSource);if(n){var t,i=(0,g.default)(n).call(n,r.foreignId);-1<i&&(u.debug("deleteNode: removing node "+r.foreignId+"@"+r.foreignSource+" from the internal cache"),(0,m.default)(t=n.nodes).call(t,i,1),n.nodesDefined--,n.modified=!0,n.dateStamp=(0,l.default)())}a.resolve(e)}).error(function(e,n){u.error("deleteNode: DELETE "+t+" failed:",e,n),a.reject("Cannot delete node "+r.foreignId+" from requisition "+r.foreignSource+"."+f.internal.errorHelp)}),a.promise},f.getForeignSourceDefinition=function(t){var i=c.defer(),r=f.internal.foreignSourcesUrl+"/"+encodeURIComponent(t);return u.debug("getForeignSourceDefinition: getting definition for requisition "+t),d.get(r).success(function(e){u.debug("getForeignSourceDefinition: got definition for requisition "+t),i.resolve(e)}).error(function(e,n){u.error("getForeignSourceDefinition: GET "+r+" failed:",e,n),i.reject("Cannot retrieve foreign source definition (detectors and policies) for requisition "+t+"."+f.internal.errorHelp)}),i.promise},f.saveForeignSourceDefinition=function(e){var t=c.defer(),i=e.name,r=f.internal.foreignSourcesUrl;return u.debug("saveForeignSourceDefinition: saving definition for requisition "+i),d.post(r,e).success(function(e){u.debug("saveForeignSourceDefinition: saved definition for requisition "+i),t.resolve(e)}).error(function(e,n){u.error("saveForeignSourceDefinition: POST "+r+" failed:",e,n),t.reject("Cannot save foreign source definition (detectors and policies) for requisition "+i+"."+f.internal.errorHelp)}),t.promise},f.cloneForeignSourceDefinition=function(n,t){var i=c.defer();return f.getRequisitionNames().then(function(e){(0,g.default)(e).call(e,n)<0?i.reject("The source requisition "+n+" does not exist."):(0,g.default)(e).call(e,t)<0?i.reject("The target requisition "+t+" does not exist."):f.getForeignSourceDefinition(n).then(function(e){e.name=t,f.saveForeignSourceDefinition(e).then(function(){i.resolve(e)},function(){i.reject("Cannot save foreign source definition for requisition "+t)})},function(){i.reject("Cannot get foreign source definition for requisition "+n)})},function(){i.reject("Cannot validate the existance of the source and target requisitions.")}),i.promise},f.deleteForeignSourceDefinition=function(t){var i=c.defer();u.debug("deleteForeignSourceDefinition: deleting foreign source definition "+t);var e=d.delete(f.internal.foreignSourcesUrl+"/"+encodeURIComponent(t)),n=d.delete(f.internal.foreignSourcesUrl+"/deployed/"+encodeURIComponent(t));return c.all([e,n]).then(function(e){u.debug("deleteForeignSourceDefinition: deleted foreign source definition "+t),i.resolve(e)},function(e,n){u.error("deleteForeignSourceDefinition: DELETE operation failed:",e,n),i.reject("Cannot delete the foreign source definition "+t+"."+f.internal.errorHelp)}),i.promise},f.getAvailableDetectors=function(){var e=f.internal.getCatchedConfigData("detectorsConfig");if(e)return u.debug("getAvailableDetectors: returning a cached copy of detectors configuration"),c.when(e);var t=c.defer(),i=f.internal.foreignSourcesConfigUrl+"/detectors";return u.debug("getAvailableDetectors: getting available detectors"),d.get(i).success(function(e){u.debug("getAvailableDetectors: got available detectors"),f.internal.setCatchedConfigData("detectorsConfig",e.plugins),t.resolve(e.plugins)}).error(function(e,n){u.error("getAvailableDetectors: GET "+i+" failed:",e,n),t.reject("Cannot retrieve available detectors."+f.internal.errorHelp)}),t.promise},f.getAvailablePolicies=function(){var e=f.internal.getCatchedConfigData("policiesConfig");if(e)return u.debug("getAvailablePolicies: returning a cached copy of policies configuration"),c.when(e);var t=c.defer(),i=f.internal.foreignSourcesConfigUrl+"/policies";return u.debug("getAvailablePolicies: getting available policies"),d.get(i).success(function(e){u.debug("getAvailablePolicies: got available policies"),f.internal.setCatchedConfigData("policiesConfig",e.plugins),t.resolve(e.plugins)}).error(function(e,n){u.error("getAvailablePolicies: GET "+i+" failed:",e,n),t.reject("Cannot retrieve available policies."+f.internal.errorHelp)}),t.promise},f.getAvailableServices=function(e){var n=f.internal.getCatchedConfigData("servicesConfig");if(n)return u.debug("getAvailableServices: returning a cached copy of services configuration"),c.when(n);var t=c.defer(),i=f.internal.foreignSourcesConfigUrl+"/services/"+encodeURIComponent(e);return u.debug("getAvailableServices: getting available services"),d.get(i).success(function(e){u.debug("getAvailableServices: got available services"),f.internal.setCatchedConfigData("servicesConfig",e.element),t.resolve(e.element)}).error(function(e,n){u.error("getAvailableServices: GET "+i+" failed:",e,n),t.reject("Cannot retrieve available services."+f.internal.errorHelp)}),t.promise},f.getAvailableAssets=function(){var e=f.internal.getCatchedConfigData("assetsConfig");if(e)return u.debug("getAvailableAssets: returning a cached copy of assets configuration"),c.when(e);var t=c.defer(),i=f.internal.foreignSourcesConfigUrl+"/assets";return u.debug("getAvailableAssets: getting available assets"),d.get(i).success(function(e){u.debug("getAvailableAssets: got available assets"),f.internal.setCatchedConfigData("assetsConfig",e.element),t.resolve(e.element)}).error(function(e,n){u.error("getAvailableAssets: GET "+i+" failed:",e,n),t.reject("Cannot retrieve available assets."+f.internal.errorHelp)}),t.promise},f.getAvailableCategories=function(){var e=f.internal.getCatchedConfigData("categoriesConfig");if(e)return u.debug("getAvailableCategories: returning a cached copy of categories configuration"),c.when(e);var t=c.defer(),i=f.internal.foreignSourcesConfigUrl+"/categories";return u.debug("getAvailableCategories: getting available categories"),d.get(i).success(function(e){u.debug("getAvailableCategories: got available categories"),f.internal.setCatchedConfigData("categoriesConfig",e.element),t.resolve(e.element)}).error(function(e,n){u.error("getAvailableCategories: GET "+i+" failed:",e,n),t.reject("Cannot retrieve available categories."+f.internal.errorHelp)}),t.promise},f.getAvailableLocations=function(){var r=c.defer(),t=f.internal.monitoringLocationsUrl;return u.debug("getAvailableLocations: getting available locations"),d.get(t).success(function(e){var n,t;u.debug("getAvailableLocations: got available locations");var i=(0,s.default)(n=(0,o.default)(t=e.location).call(t,function(e){return e["location-name"]})).call(n,function(e){return e&&0<e.length&&"Default"!==e});u.debug("Locations ="+(0,a.default)(i)),r.resolve(i)}).error(function(e,n){u.error("getAvailableLocations: GET "+t+" failed:",e,n),r.reject("Cannot retrieve available locations."+f.internal.errorHelp)}),r.promise},f.isForeignIdOnRequisition=function(t,i){var r=c.defer();return f.getRequisition(t).then(function(e){var n=!1;(0,p.default)(angular).call(angular,e.nodes,function(e){e.foreignId===i&&(n=!0)}),r.resolve(n)},function(e){var n="cannot verify foreignId "+i+"@"+t+". ";u.error("isForeignIdOnRequisition: "+n,e),r.reject(n+f.internal.errorHelp)}),r.promise},f.isNodeLabelOnRequisition=function(t,i){var r=c.defer();return f.getRequisition(t).then(function(e){var n=!1;(0,p.default)(angular).call(angular,e.nodes,function(e){e.nodeLabel===i&&(n=!0)}),r.resolve(n)},function(e){var n="cannot verify nodeLabel "+i+"@"+t+". ";u.error("isForeignIdOnRequisition: "+n,e),r.reject(n+f.internal.errorHelp)}),r.promise},f.isIpAddressOnNode=function(t,i,r){var a=c.defer();return f.getNode(t,i).then(function(e){var n,t=0<(0,s.default)(n=e.interfaces).call(n,function(e){return e.ipAddress===r}).length;a.resolve(t)},function(e){var n="cannot verify ipAddress on node "+i+"@"+t+". ";u.error("isIpAddressOnNode: "+n,e),a.reject(n+f.internal.errorHelp)}),a.promise},f.isCategoryOnNode=function(t,i,r){var a=c.defer();return f.getNode(t,i).then(function(e){var n,t=0<(0,s.default)(n=e.categories).call(n,function(e){return e.name===r}).length;a.resolve(t)},function(e){var n="cannot verify category on node "+i+"@"+t+". ";u.error("isCategoryOnNode: "+n,e),a.reject(n+f.internal.errorHelp)}),a.promise},f.isServiceOnNode=function(t,i,r,a){var o=c.defer();return f.getNode(t,i).then(function(e){var n,t=0<(0,s.default)(n=e.interfaces).call(n,function(e){var n;return e.ipAddress===r&&0<(0,s.default)(n=e.services).call(n,function(e){return e.name===a}).length}).length;o.resolve(t)},function(e){var n="cannot verify category on node "+i+"@"+t+". ";u.error("isIpAddressOnNode: "+n,e),o.reject(n+f.internal.errorHelp)}),o.promise},f.updateSnmpCommunity=function(t,e,n){var i=c.defer(),r=f.internal.snmpConfigUrl+"/"+t;return u.debug("updateSnmpCommunity: updating snmp community for "+t),d.put(r,{readCommunity:e,version:n}).success(function(){u.debug("updateSnmpCommunity: updated snmp community for "+t),i.resolve(t)}).error(function(e,n){u.error("updateSnmpCommunity: PUT "+r+" failed:",e,n),i.reject("Cannot update snmp community for "+t+"."+f.internal.errorHelp)}),i.promise},f.quickAddNode=function(e){var n;if(!1===e.noSnmp&&e.snmpCommunity&&""!==(0,i.default)(n=e.snmpCommunity).call(n)){var t=c.defer();return f.updateSnmpCommunity(e.ipAddress,e.snmpCommunity,e.snmpVersion).then(function(){f.internal.addQuickNode(e).then(function(e){t.resolve(e)},function(e){t.reject(e)})},function(){t.reject("Cannot update SNMP credentials for "+e.ipAddress)}),t.promise}return f.internal.addQuickNode(e)},f}])},172:function(e,exports,n){"use strict";var t,i=(t=n(233))&&t.__esModule?t:{default:t};function r(e){return new o.Address4(e).isValid()}function a(e){return new o.Address6(e).isValid()}var o=n(307);console.log("init: ipaddress-js"),e.exports={Address4:o.Address4,Address6:o.Address6,v6:o.v6,verifyIPv4Address:r,verifyIPv6Address:a,isValidIPAddress:function(e){return r(e)||a(e)},checkIpRange:function(e,n){if(r(e)&&r(n))return new o.Address4(e).bigInteger()<=new o.Address4(n).bigInteger();if(a(e)&&a(n)){var t=new o.Address6(e).bigInteger();return 0<=new o.Address6(n).bigInteger().compareTo(t)}return!1}},(0,i.default)(window,e.exports)},18:function(e,exports,n){"use strict";n(6)(exports,"__esModule",{value:!0}),exports.default=void 0;var t,r=(t=n(6))&&t.__esModule?t:{default:t};function i(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(e,i.key,i)}}var a=function(){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n)}return function(e,n,t){n&&i(e.prototype,n),t&&i(e,t)}(n,null,[{key:"getBaseHref",value:function(){var e=document.getElementsByTagName("base")[0];return e?e.href:""}},{key:"setLocation",value:function(e){window&&window.location&&(window.location.href=n.getBaseHref()+e)}},{key:"toggle",value:function(e,n){var t=document.getElementsByName(n);for(var i in t)t.hasOwnProperty(i)&&(t[i].checked=e)}}]),n}();exports.default=a},238:function(e,exports,n){"use strict";n(9),n(105),n(47),n(239),n(241),n(242),n(243),n(247),n(248),n(249),n(250),n(260),n(265),n(266),n(267),n(268),n(271),n(273),n(149),n(107),n(108),n(68),n(83),n(148),n(17),n(111)},239:function(e,exports,n){"use strict";var r=t(n(11)),a=t(n(8));function t(e){return e&&e.__esModule?e:{default:e}}n(17),angular.module("onms-requisitions").controller("AssetController",["$scope","$uibModalInstance","RequisitionsService","asset","assetsBlackList",function($scope,e,n,t,i){$scope.asset=t,$scope.assetFields=[],$scope.assetsBlackList=i,$scope.save=function(){e.close($scope.asset)},$scope.cancel=function(){e.dismiss("cancel")},$scope.getAvailableAssetFields=function(){var t=[];return(0,a.default)(angular).call(angular,$scope.assetFields,function(e){var n;-1===(0,r.default)(n=$scope.assetsBlackList).call(n,e)&&t.push(e)}),t},n.getAvailableAssets().then(function(e){$scope.assetFields=e})}])},240:function(e,exports,n){"use strict";n(12);var o=t(n(79)),s=t(n(204)),l=t(n(8));function t(e){return e&&e.__esModule?e:{default:e}}var c=n(109),d=n(108),u=n(83),f=n(110),p=f.Scope;e.exports=function(e,t){var i=this;i.requisition=[],i.other=[];function r(e){var n=new c;return n.context=e.context,n.key=e.key,n.value=e.value,n}var a=[];return(0,l.default)(angular).call(angular,e["meta-data"],function(e){var n=r(e);n.scope=p.NODE,a.push(n)}),(0,l.default)(angular).call(angular,e.interface,function(e){var i=new d(e);(0,l.default)(angular).call(angular,e["meta-data"],function(e){var n=r(e);n.scope=p.INTERFACE,n.scoped_interface=i,a.push(n)}),(0,l.default)(angular).call(angular,e["monitored-service"],function(t){(0,l.default)(angular).call(angular,t["meta-data"],function(e){var n=r(e);n.scope=p.SERVICE,n.scoped_interface=i,n.scoped_service=new u(t),a.push(n)})})}),i.removeEntriesForMissingScopedEntities=function(){_.remove(i.requisition,function(e){return!i.doesReferencedEntityExist(e)}),_.remove(i.other,function(e){return!i.doesReferencedEntityExist(e)})},i.doesReferencedEntityExist=function(n){if(n.scope===p.INTERFACE||n.scope===p.SERVICE){var e=(0,s.default)(_).call(_,t.interfaces,function(e){return e.ipAddress===n.scoped_interface.ipAddress});if(void 0===e)return!1;if(n.scope===p.SERVICE)if(void 0===(0,s.default)(_).call(_,e.services,function(e){return e.name===n.scoped_service.name}))return!1}return!0},i.addEntry=function(e){e.context===f.RequisitionContext?i.requisition.push(e):i.other.push(e)},i.removeEntry=function(n){_.remove(i.requisition,function(e){return e===n}),_.remove(i.other,function(e){return e===n})},(0,l.default)(angular).call(angular,a,function(e){i.addEntry(e)}),i.getOnmsMetaData=function(n){var t=[];return(0,l.default)(angular).call(angular,i.requisition,function(e){n(e)&&t.push({context:f.RequisitionContext,key:e.key,value:e.value})}),(0,l.default)(angular).call(angular,i.other,function(e){n(e)&&t.push({context:e.context,key:e.key,value:e.value})}),t},i.getOnmsMetaDataForNode=function(){return i.getOnmsMetaData(function(e){return e.scope===p.NODE})},i.getOnmsMetaDataForInterface=function(n){return i.getOnmsMetaData(function(e){return e.scope===p.INTERFACE&&e.scoped_interface.ipAddress===n.ipAddress})},i.getOnmsMetaDataForService=function(n,t){return i.getOnmsMetaData(function(e){return e.scope===p.SERVICE&&e.scoped_interface.ipAddress===n.ipAddress&&e.scoped_service.name===t.name})},i.getKeysInScopeOf=function(n){var e=i.getOnmsMetaData(function(e){if(e.scope!==n.scope||e.context!==n.context)return!1;if(n.scope===p.INTERFACE||n.scope===p.SERVICE){if(e.scoped_interface.ipAddress!==n.scoped_interface.ipAddress)return!1;if(n.scope===p.SERVICE&&e.scoped_service.name!==n.scoped_service.name)return!1}return!0});return(0,o.default)(_).call(_,e,function(e){return e.key})},i.className="RequisitionMetaData",i}},241:function(e,exports,n){"use strict";angular.module("onms-requisitions").controller("CloneForeignSourceController",["$scope","$uibModalInstance","foreignSource","availableForeignSources",function($scope,e,n,t){$scope.foreignSource=n,$scope.targetForeignSource=null,$scope.availableForeignSources=t,$scope.save=function(){e.close($scope.targetForeignSource)},$scope.cancel=function(){e.dismiss("cancel")}}])},242:function(e,exports,n){"use strict";var i=t(n(13)),r=t(n(8));function t(e){return e&&e.__esModule?e:{default:e}}n(17),angular.module("onms-requisitions").controller("DetectorController",["$scope","$uibModalInstance","RequisitionsService","detector",function($scope,e,n,t){$scope.detector=t,$scope.availableDetectors=[],$scope.availableParameters=[],$scope.getAvailableParameters=function(){var e=[];return(0,r.default)(angular).call(angular,$scope.availableParameters,function(n){var t=!1;(0,r.default)(angular).call(angular,$scope.detector.parameter,function(e){e.key===n.key&&(t=!0)}),t||e.push(n)}),e},$scope.save=function(){e.close($scope.detector)},$scope.cancel=function(){e.dismiss("cancel")},$scope.addParameter=function(){$scope.detector.parameter.push({key:"",value:""})},$scope.removeParameter=function(e){var n;(0,i.default)(n=$scope.detector.parameter).call(n,e,1)},$scope.updateAvailableParameters=function(n){n&&($scope.detector.parameter=[],(0,r.default)(angular).call(angular,$scope.availableDetectors,function(e){e.class===n.class&&($scope.availableParameters=e.parameters)}))},n.getAvailableDetectors().then(function(e){$scope.availableDetectors=e,$scope.detector.class&&(0,r.default)(angular).call(angular,e,function(e){if(e.class===$scope.detector.class){$scope.availableParameters=e.parameters;for(var n=[],t=0;t<e.parameters.length;t++)for(var i=e.parameters[t].key,r=0;r<$scope.detector.parameter.length;r++){var a=$scope.detector.parameter[r];a.key===i&&n.push(a)}$scope.detector.parameter=n}})})}])},243:function(e,exports,n){"use strict";n(12);var t,s=(t=n(13))&&t.__esModule?t:{default:t};var l,c,d,u=n(63);n(17),l=n(244),c=n(245),d=n(246),angular.module("onms-requisitions").controller("ForeignSourceController",["$scope","$routeParams","$window","$uibModal","filterFilter","Configuration","RequisitionsService","growl",function($scope,e,n,o,t,i,r,a){$scope.timingStatus=r.getTiming(),$scope.foreignSource=e.foreignSource,$scope.foreignSourceDef={detectors:[],policies:[]},$scope.filters={detector:null,policy:null},$scope.filteredDetectors=[],$scope.detectorsPageSize=10,$scope.detectorsMaxSize=5,$scope.detectorsTotalItems=0,$scope.filteredPolicies=[],$scope.policiesPageSize=10,$scope.policiesMaxSize=5,$scope.policiesTotalItems=0,$scope.goTo=function(e){this.fsForm.$dirty?u.dialog({message:"There are changes on the current requisition. Are you sure you want to cancel ?",title:"Cancel Changes",buttons:{success:{label:"Yes",className:"btn-primary",callback:e},main:{label:"No",className:"btn-secondary"}}}):e()},$scope.goTop=function(){$scope.goTo(function(){n.location.href=i.baseHref+"#/requisitions"})},$scope.goBack=function(){$scope.goTo(function(){"default"===$scope.foreignSource?n.location.href=i.baseHref+"#/requisitions":n.location.href=i.baseHref+"#/requisitions/"+encodeURIComponent($scope.foreignSource)})},$scope.errorHandler=function(e){a.error(e,{ttl:1e4})},$scope.indexOfPolicy=function(e){for(var n=0;n<$scope.foreignSourceDef.policies.length;n++)if($scope.foreignSourceDef.policies[n].name===e.name)return n;return-1},$scope.indexOfDetector=function(e){for(var n=0;n<$scope.foreignSourceDef.detectors.length;n++)if($scope.foreignSourceDef.detectors[n].name===e.name)return n;return-1},$scope.editPolicy=function(n,e){var t=this.fsForm;o.open({backdrop:"static",keyboard:!1,controller:"PolicyController",templateUrl:l,resolve:{policy:function(){return angular.copy(n)}}}).result.then(function(e){angular.copy(e,n),t.$dirty=!0},function(){e&&$scope.foreignSourceDef.policies.pop()})},$scope.movePolicy=function(i){var r=this.fsForm,a=$scope.indexOfPolicy(i),e=$scope.foreignSourceDef.policies.length-1;o.open({backdrop:"static",keyboard:!1,size:"sm",controller:"MoveController",templateUrl:c,resolve:{label:function(){return i.name},position:function(){return a},maximum:function(){return e}}}).result.then(function(e){var n,t;r.$dirty=!0,(0,s.default)(n=$scope.foreignSourceDef.policies).call(n,a,1),(0,s.default)(t=$scope.foreignSourceDef.policies).call(t,e,0,i)})},$scope.removePolicy=function(e){var n,t=$scope.indexOfPolicy(e);-1<t&&((0,s.default)(n=$scope.foreignSourceDef.policies).call(n,t,1),this.fsForm.$dirty=!0)},$scope.addPolicy=function(){$scope.foreignSourceDef.policies.push({name:"",class:"",parameter:[]});var e=$scope.foreignSourceDef.policies.length-1;$scope.editPolicy($scope.foreignSourceDef.policies[e],!0)},$scope.editDetector=function(n,e){var t=this.fsForm;o.open({backdrop:"static",keyboard:!1,controller:"DetectorController",templateUrl:d,resolve:{detector:function(){return angular.copy(n)}}}).result.then(function(e){angular.copy(e,n),t.$dirty=!0},function(){e&&$scope.foreignSourceDef.detectors.pop()})},$scope.moveDetector=function(i){var r=this.fsForm,a=$scope.indexOfDetector(i),e=$scope.foreignSourceDef.detectors.length-1;o.open({backdrop:"static",keyboard:!1,size:"sm",controller:"MoveController",templateUrl:c,resolve:{label:function(){return i.name},position:function(){return a},maximum:function(){return e}}}).result.then(function(e){var n,t;r.$dirty=!0,(0,s.default)(n=$scope.foreignSourceDef.detectors).call(n,a,1),(0,s.default)(t=$scope.foreignSourceDef.detectors).call(t,e,0,i)})},$scope.removeDetector=function(e){var n,t=$scope.indexOfDetector(e);-1<t&&((0,s.default)(n=$scope.foreignSourceDef.detectors).call(n,t,1),this.fsForm.$dirty=!0)},$scope.addDetector=function(){$scope.foreignSourceDef.detectors.push({name:"",class:"",parameter:[]});var e=$scope.foreignSourceDef.detectors.length-1;$scope.editDetector($scope.foreignSourceDef.detectors[e],!0)},$scope.save=function(){var e=this.fsForm;r.startTiming(),r.saveForeignSourceDefinition($scope.foreignSourceDef).then(function(){a.success("The definition for the requisition "+_.escape($scope.foreignSource)+" has been saved."),e.$dirty=!1},$scope.errorHandler)},$scope.reset=function(){u.confirm("Are you sure you want to reset the foreign source definition to the default ?",function(e){e&&(r.startTiming(),r.deleteForeignSourceDefinition($scope.foreignSource).then(function(){a.success("The foreign source definition for "+_.escape($scope.foreignSource)+"has been reseted."),$scope.initialize()},$scope.errorHandler))})},$scope.updateFilteredPolicies=function(){$scope.policiesCurrentPage=1,$scope.policiesTotalItems=$scope.filteredPolicies.length,$scope.policiesNumPages=Math.ceil($scope.policiesTotalItems/$scope.policiesPageSize)},$scope.updateFilteredDetectors=function(){$scope.detectorsCurrentPage=1,$scope.detectorsTotalItems=$scope.filteredDetectors.length,$scope.detectorsNumPages=Math.ceil($scope.detectorsTotalItems/$scope.detectorsPageSize)},$scope.initialize=function(){a.success("Retrieving definition for requisition "+_.escape($scope.foreignSource)+"..."),r.getForeignSourceDefinition($scope.foreignSource).then(function(e){$scope.foreignSourceDef=e,$scope.filteredDetectors=$scope.foreignSourceDef.detectors,$scope.updateFilteredDetectors(),$scope.filteredPolicies=$scope.foreignSourceDef.policies,$scope.updateFilteredPolicies()},$scope.errorHandler)},$scope.$watch("filters.detector",function(){$scope.filteredDetectors=t($scope.foreignSourceDef.detectors,$scope.filters.detector),$scope.updateFilteredDetectors()}),$scope.$watch("filters.policy",function(){$scope.filteredPolicies=t($scope.foreignSourceDef.policies,$scope.filters.policy),$scope.updateFilteredPolicies()}),$scope.foreignSource&&$scope.initialize()}])},244:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/policy.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <div class=modal-header> <h3 class=modal-title>Policy</h3> </div> <div class=modal-body> <form name=policyForm> <div class=form-group> <label class=col-form-label for=name>Name</label> <input class=form-control type=text id=name name=name placeholder="Policy Name" ng-model=policy.name required ng-class="{ \'is-invalid\' : policyForm.name.$invalid }"> <p ng-show=policyForm.name.$invalid class=invalid-feedback>A non empty name is required.</p> </div> <div class=form-group> <label class=col-form-label for=clazz>Class</label> <input class=form-control type=text id=clazz name=clazz placeholder="Implementation Class (choose one from the list)" ng-model=policy.class typeahead-min-length=0 typeahead-editable=false typeahead-on-select=updatePolicyParameters($item) uib-typeahead="policy.class as policy.name for policy in availablePolicies | filter:$viewValue" required ng-class="{ \'is-invalid\' : policyForm.clazz.$invalid }"> <p ng-show=policyForm.clazz.$invalid class=invalid-feedback>A valid class name is required.</p> </div> <ng-form name=paramForm ng-repeat="parameter in policy.parameter" ng-include=getTemplate(parameter)> </ng-form> </form> </div> <div class=modal-footer> <button type=button class="btn btn-secondary" id=add-policy-parameter ng-click=addParameter() ng-disabled=policyForm.clazz.$invalid>Add Parameter</button> <button type=button class="btn btn-primary" id=save-policy ng-click=save() ng-disabled=policyForm.$invalid>Save</button> <button type=button class="btn btn-secondary" id="cancel=policy" ng-click=cancel()>Cancel</button> </div> </div> ')}]),e.exports=n},245:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/move.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <div class=modal-header> <h3 class=modal-title>Move</h3> </div> <div class=modal-body> <form name=moveForm> <label class=col-form-label>{{ label }}</label> <div class=input-group> <span class=input-group-prepend> <button type=button class="btn btn-secondary btn-number" ng-disabled="position == 0 || moveForm.$invalid" ng-click=substract()> <span class="fa fa-minus"></span> </button> </span> <input type=text ng-model=position class="form-control input-number" ng-pattern=/\\d+/ required> <span class=input-group-append> <button type=button class="btn btn-secondary btn-number" ng-disabled="position == maximum || moveForm.$invalid" ng-click=add()> <span class="fa fa-plus"></span> </button> </span> </div> <p class="form-text text-muted">Choose a index between 0 and {{ maximum }}.</p> </form> </div> <div class=modal-footer> <button type=button class="btn btn-primary" id=save-detector ng-click=move() ng-disabled="position > maximum || moveForm.$invalid">Move</button> <button type=button class="btn btn-secondary" id=cancel-detector ng-click=cancel()>Cancel</button> </div> </div> ')}]),e.exports=n},246:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/detector.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <div class=modal-header> <h3 class=modal-title>Detector</h3> </div> <div class=modal-body> <form name=detectorForm> <div class=form-group> <label class=col-form-label for=name>Name</label> <input class=form-control type=text id=name name=name placeholder="Detector Name" ng-model=detector.name required ng-class="{ \'is-invalid\' : detectorForm.name.$invalid }"> <p ng-show=detectorForm.name.$invalid class=invalid-feedback>A non empty name is required.</p> </div> <div class=form-group> <label class=col-form-label for=clazz>Class</label> <input class=form-control type=text id=clazz name=clazz placeholder="Implementation Class (choose one from the list)" ng-model=detector.class typeahead-min-length=0 typeahead-editable=false typeahead-on-select=updateAvailableParameters($item) uib-typeahead="detector.class as detector.name for detector in availableDetectors | filter:$viewValue" required ng-class="{ \'is-invalid\' : detectorForm.clazz.$invalid }"> <p ng-show=detectorForm.clazz.$invalid class=invalid-feedback>A valid class name is required.</p> </div> <ng-form name=paramForm ng-repeat="parameter in detector.parameter"> <div class=form-group> <input class=form-control type=text name=paramName ng-if=!parameter.key placeholder="Parameter Name (choose one from the list)" ng-model=parameter.key typeahead-min-length=0 typeahead-editable=false uib-typeahead="param.key as param.key for param in getAvailableParameters() | filter:$viewValue" required ng-class="{ \'is-invalid\' : paramForm.paramName.$invalid }"> <p ng-show=paramForm.paramName.$invalid class=invalid-feedback>Parameter name is required.</p> </div> <div class=form-group> <label ng-if=parameter.key class=col-form-label>{{parameter.key}}</label> <div class=input-group> <input class=form-control type=text name=paramValue placeholder="Parameter Value" ng-model=parameter.value required ng-class="{ \'is-invalid\' : paramForm.paramValue.$invalid }"> <div class=input-group-append> <button type=button class="btn btn-secondary" ng-click=removeParameter($index)> <span class="fa fa-trash"></span> </button> </div> <p ng-show=paramForm.paramValue.$invalid class=invalid-feedback>Parameter value is required.</p> </div> </div> </ng-form> </form> </div> <div class=modal-footer> <button type=button class="btn btn-secondary" id=add-detector-parameter ng-click=addParameter() ng-disabled="detectorForm.clazz.$invalid || getAvailableParameters().length == 0">Add Parameter</button> <button type=button class="btn btn-primary" id=save-detector ng-click=save() ng-disabled=detectorForm.$invalid>Save</button> <button type=button class="btn btn-secondary" id=cancel-detector ng-click=cancel()>Cancel</button> </div> </div> ')}]),e.exports=n},247:function(e,exports,n){"use strict";n(12);var s=t(n(8)),l=t(n(13)),c=t(n(20));function t(e){return e&&e.__esModule?e:{default:e}}n(17);var d=n(83);angular.module("onms-requisitions").controller("InterfaceController",["$scope","$uibModalInstance","RequisitionsService","foreignSource","foreignId","requisitionInterface","ipBlackList","primaryInterface",function($scope,e,n,t,i,r,a,o){$scope.foreignSource=t,$scope.foreignId=i,$scope.requisitionInterface=r,$scope.ipBlackList=a,$scope.primaryInterface=o,$scope.snmpPrimaryFields=[{id:"P",title:"Primary"},{id:"S",title:"Secondary"},{id:"N",title:"Not Eligible"}],$scope.availableServices=[],$scope.save=function(){e.close($scope.requisitionInterface)},$scope.getSnmpPrimaryValues=function(e){var n;return null!==$scope.primaryInterface&&e!==$scope.primaryInterface?(0,c.default)(n=$scope.snmpPrimaryFields).call(n,function(e){return"P"!==e.id}):$scope.snmpPrimaryFields},$scope.cancel=function(){e.dismiss("cancel")},$scope.addService=function(){$scope.requisitionInterface.services.push(new d({"service-name":""}))},$scope.removeService=function(e){var n;(0,l.default)(n=$scope.requisitionInterface.services).call(n,e,1)},$scope.getAvailableServices=function(){var e=[];return(0,s.default)(angular).call(angular,$scope.availableServices,function(n){var t=!1;(0,s.default)(angular).call(angular,$scope.requisitionInterface.services,function(e){e.name===n&&(t=!0)}),t||e.push(n)}),e},n.getAvailableServices($scope.foreignSource).then(function(e){$scope.availableServices=e})}])},248:function(e,exports,n){"use strict";n(12);var i=t(n(374)),r=t(n(8));function t(e){return e&&e.__esModule?e:{default:e}}n(17);n(109);var a=n(110).Scope,o=n(126);angular.module("onms-requisitions").controller("MetaDataController",["$scope","$uibModalInstance","node","entry",function($scope,e,n,t){$scope.node=n,$scope.entry=t,$scope.resolveScopeReferences=function(e){e.scope===a.INTERFACE?e.scoped_interface=$scope.node.interfaces[e.interface_idx]:e.scope===a.SERVICE&&(e.scoped_interface=$scope.interfacesWithServices[e.interface_idx],e.scoped_service=e.scoped_interface.services[e.service_idx])},$scope.save=function(){$scope.resolveScopeReferences($scope.entry),e.close($scope.entry)},$scope.cancel=function(){e.dismiss("cancel")},$scope.interfacesWithServices=[],$scope.availableScopes={},$scope.availableScopes[a.NODE]="Node",$scope.node.interfaces&&0<$scope.node.interfaces.length&&($scope.availableScopes[a.INTERFACE]="Interface",(0,r.default)(o).call(o,$scope.node.interfaces,function(e){e.services&&0<e.services.length&&$scope.interfacesWithServices.push(e)}),0<$scope.interfacesWithServices.length&&($scope.availableScopes[a.SERVICE]="Service")),$scope.entry.interface_idx=0,$scope.entry.service_idx=0,$scope.entry.scope===a.INTERFACE&&$scope.entry.scoped_interface?($scope.entry.interface_idx=(0,i.default)(o).call(o,$scope.node.interfaces,function(e){return e.ipAddress===$scope.entry.scoped_interface.ipAddress}),$scope.entry.interface_idx<0&&($scope.entry.interface_idx=0)):$scope.entry.scope===a.SERVICE&&$scope.entry.scoped_service&&0<$scope.interfacesWithServices.length&&($scope.entry.interface_idx=(0,i.default)(o).call(o,$scope.interfacesWithServices,function(e){return e.ipAddress===$scope.entry.scoped_interface.ipAddress}),$scope.entry.interface_idx<0&&($scope.entry.interface_idx=0),$scope.entry.service_idx=(0,i.default)(o).call(o,$scope.interfacesWithServices[$scope.entry.interface_idx].services,function(e){return e.name===$scope.entry.scoped_service.name}),$scope.entry.service_idx<0&&($scope.entry.service_idx=0)),$scope.entry.interface_idx=String($scope.entry.interface_idx),$scope.entry.service_idx=String($scope.entry.service_idx),$scope.originalKey=$scope.entry.key}])},249:function(e,exports,n){"use strict";angular.module("onms-requisitions").controller("MoveController",["$controller","$scope","$uibModalInstance","label","position","maximum",function(e,$scope,n,t,i,r){$scope.label=t,$scope.position=i,$scope.maximum=r,$scope.add=function(){$scope.position++},$scope.substract=function(){$scope.position--},$scope.move=function(){n.close($scope.position)},$scope.cancel=function(){n.dismiss("cancel")}}])},250:function(e,exports,n){"use strict";n(16),n(12);var o=t(n(13)),l=t(n(8));function t(e){return e&&e.__esModule?e:{default:e}}var c=n(63);n(17);var d,u,f,p,m,g,v,h,b,y=n(68),q=n(109);d=n(251),u=n(252),f=n(253),p=n(254),m=n(255),g=n(256),v=n(257),h=n(258),b=n(259),angular.module("onms-requisitions").controller("NodeController",["$scope","$routeParams","$cookies","$window","$uibModal","Configuration","RequisitionsService","growl",function($scope,e,n,t,s,i,r,a){$scope.nodeBasicView=p,$scope.nodePathoutagesView=m,$scope.nodeInterfacesView=g,$scope.nodeAssetsView=v,$scope.nodeMetaDataView=h,$scope.nodeCategoriesView=b,$scope.timingStatus=r.getTiming(),$scope.foreignSource=e.foreignSource,$scope.foreignId=e.foreignId,$scope.isNew="__new__"===$scope.foreignId,$scope.node={},$scope.availableCategories=[],$scope.availableLocations=[],$scope.foreignIdBlackList=[],$scope.goTo=function(e){function n(){t.location.href=e}this.nodeForm.$dirty?c.dialog({message:"There are changes on the current node. Are you sure you want to cancel ?",title:"Cancel Changes",buttons:{success:{label:"Yes",className:"btn-primary",callback:n},main:{label:"No",className:"btn-secondary"}}}):n()},$scope.goTop=function(){$scope.goTo(i.baseHref+"#/requisitions")},$scope.goBack=function(){$scope.goTo(i.baseHref+"#/requisitions/"+encodeURIComponent($scope.foreignSource))},$scope.goVerticalLayout=function(){n.put("use_requisitions_node_vertical_layout","true"),$scope.goTo(i.baseHref+"#/requisitions/"+encodeURIComponent($scope.foreignSource)+"/nodes/"+encodeURIComponent($scope.foreignId)+"/vertical")},$scope.goHorizontalLayout=function(){n.put("use_requisitions_node_vertical_layout","false"),$scope.goTo(i.baseHref+"#/requisitions/"+encodeURIComponent($scope.foreignSource)+"/nodes/"+encodeURIComponent($scope.foreignId))},$scope.errorHandler=function(e){a.error(e,{ttl:1e4})},$scope.generateForeignId=function(e){$scope.node.foreignId=String((new Date).getTime()),e.$invalid=!1},$scope.editAsset=function(e,n){var t=this.nodeForm,i=$scope.node.assets[e],r=[];(0,l.default)(angular).call(angular,$scope.node.assets,function(e){r.push(e.name)}),s.open({backdrop:"static",keyboard:!1,controller:"AssetController",templateUrl:d,resolve:{asset:function(){return angular.copy(i)},assetsBlackList:function(){return r}}}).result.then(function(e){angular.copy(e,i),t.$dirty=!0},function(){n&&$scope.node.assets.pop()})},$scope.removeAsset=function(e){var n;(0,o.default)(n=$scope.node.assets).call(n,e,1),this.nodeForm.$dirty=!0},$scope.addAsset=function(){$scope.editAsset($scope.node.addNewAsset(),!0)},$scope.onMetadataTabSelect=function(){$scope.node.metaData.removeEntriesForMissingScopedEntities()},$scope.deleteNode=function(n){c.confirm("Are you sure you want to delete the current node?",function(e){e&&(r.startTiming(),r.deleteNode(n).then(function(){$scope.nodeForm.$setPristine(),$scope.goBack(),n.nodeLabel?a.success("The node "+_.escape(n.nodeLabel)+" has been deleted."):a.success("The node has been deleted.")},$scope.errorHandler))})},$scope.editMetaData=function(n,t){var i=this.nodeForm;s.open({backdrop:"static",keyboard:!1,controller:"MetaDataController",templateUrl:u,resolve:{node:function(){return angular.copy($scope.node)},entry:function(){return angular.copy(n)}}}).result.then(function(e){angular.copy(e,n),i.$dirty=!0,t&&$scope.node.metaData.addEntry(n)})},$scope.removeMetaData=function(e){$scope.node.metaData.removeEntry(e),this.nodeForm.$dirty=!0},$scope.addMetaData=function(){$scope.editMetaData(new q,!0)},$scope.editInterface=function(e,n){var t=this.nodeForm,i=$scope.node.interfaces[e],r=$scope.foreignSource,a=$scope.foreignId,o=[];(0,l.default)(angular).call(angular,$scope.node.interfaces,function(e){o.push(e.ipAddress)}),s.open({backdrop:"static",keyboard:!1,controller:"InterfaceController",templateUrl:f,resolve:{foreignId:function(){return a},foreignSource:function(){return r},requisitionInterface:function(){return angular.copy(i)},ipBlackList:function(){return o},primaryInterface:function(){return $scope.getPrimaryAddress()}}}).result.then(function(e){angular.copy(e,i),t.$dirty=!0},function(){n&&$scope.node.interfaces.pop()})},$scope.removeInterface=function(e){var n;(0,o.default)(n=$scope.node.interfaces).call(n,e,1),this.nodeForm.$dirty=!0},$scope.addInterface=function(){$scope.editInterface($scope.node.addNewInterface(),!0)},$scope.removeCategory=function(e){var n;(0,o.default)(n=$scope.node.categories).call(n,e,1),this.nodeForm.$dirty=!0},$scope.addCategory=function(){$scope.node.addNewCategory(),this.nodeForm.$dirty=!0},$scope.save=function(){var e=this.nodeForm;r.startTiming(),r.saveNode($scope.node).then(function(){a.success("The node "+_.escape($scope.node.nodeLabel)+" has been saved."),$scope.foreignId=$scope.node.foreignId,e.$dirty=!1},$scope.errorHandler)},$scope.refresh=function(){a.success("Retrieving node "+_.escape($scope.foreignId)+" from requisition "+_.escape($scope.foreignSource)+"..."),r.getNode($scope.foreignSource,$scope.foreignId).then(function(e){$scope.node=e},$scope.errorHandler)},$scope.getAvailableCategories=function(){var e=[];return(0,l.default)(angular).call(angular,$scope.availableCategories,function(n){var t=!1;(0,l.default)(angular).call(angular,$scope.node.categories,function(e){e.name===n&&(t=!0)}),t||e.push(n)}),e},$scope.getPrimaryAddress=function(){var e=$scope.node.getPrimaryIpAddress();return e||null},$scope.isNew?$scope.node=new y($scope.foreignSource,{}):$scope.refresh(),r.getAvailableCategories().then(function(e){$scope.availableCategories=e},$scope.errorHandler),r.getAvailableLocations().then(function(e){$scope.availableLocations=e},$scope.errorHandler),r.getRequisition($scope.foreignSource).then(function(e){(0,l.default)(angular).call(angular,e.nodes,function(e){$scope.foreignIdBlackList.push(e.foreignId)})},$scope.errorHandler)}])},251:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/asset.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <div class=modal-header> <h3 class=modal-title>Asset Field</h3> </div> <div class=modal-body> <form name=assetForm> <div class=form-group> <div class=form-group> <label class=col-form-label for=name>Name</label> <input class=form-control type=text id=asset-name name=name placeholder="Asset Name (choose one from the list)" ng-model=asset.name typeahead-min-length=0 uib-typeahead="asset for asset in getAvailableAssetFields() | filter:$viewValue" typeahead-editable=false required ng-class="{ \'is-invalid\' : assetForm.name.$invalid }"> <p ng-show=assetForm.name.$invalid class=invalid-feedback>A valid asset field name is required.</p> </div> <div class=form-group> <label class=col-form-label for=value>Value</label> <input class=form-control type=text id=asset-value name=value placeholder="Asset Value" ng-model=asset.value required ng-class="{ \'is-invalid\' : assetForm.value.$invalid }"> <p ng-show=assetForm.value.$invalid class=invalid-feedback>A non empty value is required.</p> </div> </div> </form> </div> <div class=modal-footer> <button type=button class="btn btn-primary" id=save-asset ng-click=save() ng-disabled=assetForm.$invalid>Save</button> <button type=button class="btn btn-secondary" id=cancel-asset ng-click=cancel()>Cancel</button> </div> </div> ')}]),e.exports=n},252:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/metadata.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <div class=modal-header> <h3 class=modal-title>Meta-Data Entry</h3> </div> <div class=modal-body> <form name=metaDataForm> <div class=form-group> <div class=form-group> <label class=control-label for=metadata-context>Scope</label> <select class=form-control id=metadata-context ng-model=entry.scope required> <option ng-repeat="(scope, displayString) in availableScopes" value="{{ scope }}">{{ displayString }}</option> </select> </div> <div ng-if="entry.scope == \'interface\'"> <div class=form-group> <label class=control-label for=metadata-interface>Interface</label> <select class=form-control id=metadata-interface ng-model=entry.interface_idx required> <option ng-repeat="iff in node.interfaces" value="{{ $index }}">{{ iff.ipAddress }}</option> </select> </div> </div> <div ng-if="entry.scope == \'service\'"> <div> <label class=control-label for=metadata-service-interface>Interface</label> <select class=form-control id=metadata-service-interface ng-model=entry.interface_idx required> <option ng-repeat="iff in interfacesWithServices" value="{{ $index }}">{{ iff.ipAddress }}</option> </select> </div> <div class=form-group> <label class=control-label for=metadata-service-service>Service</label> <select class=form-control id=metadata-service-service ng-model=entry.service_idx required> <option ng-repeat="svc in interfacesWithServices[entry.interface_idx].services" value="{{ $index }}">{{ svc.name }}</option> </select> </div> </div> <div class=form-group ng-class="{ \'has-error\' : metaDataForm.value.$invalid }"> <label class=control-label for=metadata-key>Key</label> <input class=form-control type=text id=metadata-key name=key placeholder=Key ng-model=entry.key required valid-meta-data-key=entry /> <p ng-show=metaDataForm.key.$invalid class=help-block>A unique key is required.</p> </div> <div class=form-group ng-class="{ \'has-error\' : metaDataForm.value.$invalid }"> <label class=control-label for=metadata-value>Value</label> <input class=form-control type=text id=metadata-value name=value placeholder=Value ng-model=entry.value required/> <p ng-show=metaDataForm.value.$invalid class=help-block>A non empty value is required.</p> </div> </div> </form> </div> <div class=modal-footer> <button type=button class="btn btn-primary" id=save-metadata ng-click=save() ng-disabled=metaDataForm.$invalid>Save</button> <button type=button class="btn btn-default" id=cancel-metadata ng-click=cancel()>Cancel</button> </div> </div> ')}]),e.exports=n},253:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/interface.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <div class=modal-header> <h3 class=modal-title>Interface</h3> </div> <div class=modal-body> <form name=intfForm> <div class=form-group> <label class=col-form-label for=ipAddress>IP Address</label> <input class=form-control type=text id=ipAddress name=ipAddress placeholder="A valid IPv4 or IPv6 address" ng-model=requisitionInterface.ipAddress required valid-ip-address ng-class="{ \'is-invalid\' : intfForm.ipAddress.$invalid }"> <p ng-show=intfForm.ipAddress.$invalid class=invalid-feedback>A valid IPv4 or IPv6 address is required, and must be unique within the node.</p> </div> <div class=form-group> <label class=col-form-label for=descr>Description</label> <input class=form-control type=text id=descr name=descr placeholder="Description [optional]" ng-model=requisitionInterface.description> </div> <div class=form-group> <label class=col-form-label for=snmpPrimary>SNMP Primary</label> <input class=form-control type=text id=snmpPrimary name=snmpPrimary placeholder="SNMP Primary Flag (choose one from the list)" ng-model=requisitionInterface.snmpPrimary typeahead-editable=false typeahead-min-length=0 uib-typeahead="a.id as a.title for a in getSnmpPrimaryValues(requisitionInterface.ipAddress) | filter:$viewValue" required ng-class="{ \'is-invalid\' : intfForm.snmpPrimary.$invalid }"> <p ng-show=intfForm.snmpPrimary.$invalid class=invalid-feedback>A valid SNMP Primary Flag is required, only one primary interface is allowed within the node.</p> </div> <label ng-show="requisitionInterface.services.length > 0">Services</label> <ng-form name=serviceForm ng-repeat="service in requisitionInterface.services"> <div class=form-group> <div class=input-group> <div class=input-group-prepend> <div class=input-group-text> <i class="fa fa-pencil"></i> </div> </div> <input class=form-control type=text name=serviceName placeholder="Service Name (choose one from the list or type a custom text for a new one)" ng-model=service.name typeahead-editable=true typeahead-min-length=0 uib-typeahead="service for service in getAvailableServices() | filter:$viewValue | orderBy:\'toString()\'" required valid-service ng-class="{ \'is-invalid\' : serviceForm.serviceName.$invalid }"> <span class=input-group-append> <button class="btn btn-secondary" type=button ng-click=removeService($index)> <i class="fa fa-trash"></i> </button> </span> <p ng-show=serviceForm.serviceName.$invalid class=invalid-feedback>Service name is required and should be unique on the interface.</p> </div> </div> </ng-form> </form> </div> <div class=modal-footer> <button type=button class="btn btn-secondary" id=add-service ng-click=addService() ng-disabled=intfForm.$invalid>Add Service</button> <button type=button class="btn btn-primary" id=save-interface ng-click=save() ng-disabled=intfForm.$invalid>Save</button> <button type=button class="btn btn-secondary" id=cancel-interface ng-click=cancel()>Cancel</button> </div> </div> ')}]),e.exports=n},254:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/node-basic.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <br/> <div class=form-group> <label class=col-form-label for=foreignId>Foreign ID</label> <div class=input-group> <input class=form-control type=text id=foreignId name=foreignId placeholder="Foreign ID (must be unique within the requisition)" ng-model=node.foreignId ng-disabled=!isNew required valid-foreign-id ng-class="{ \'is-invalid\' : nodeForm.foreignId.$invalid }"> <div class=input-group-append> <button class="btn btn-secondary" type=button ng-click=generateForeignId(nodeForm.foreignId) ng-disabled=!isNew><span class="fa fa-tag"/> Auto-generate</button> </div> <p ng-show=nodeForm.foreignId.$invalid class=invalid-feedback>Foreign ID is required and must be unique within the requisition, and it cannot contain, :, /, \\, ?, &amp;, *, \', "</p> </div> </div> <div class=form-group> <label class=col-form-label for=nodeLabel>Node Label</label> <input class=form-control type=text id=nodeLabel name=nodeLabel placeholder="Node Label" ng-model=node.nodeLabel required ng-class="{ \'is-invalid\' : nodeForm.nodeLabel.$invalid }"> <p ng-show=nodeForm.nodeLabel.$invalid class=invalid-feedback>Node Label is required.</p> </div> <div class=form-group> <label class=col-form-label for=nodeLabel>Minion Location</label> <input class=form-control type=text id=location name=location placeholder="Location [optional]" ng-model=node.location ng-disabled="availableLocations.length == 0" typeahead-min-length=0 typeahead-editable=false uib-typeahead="location for location in availableLocations" typeahead-on-select=nodeForm.$setDirty();> <p ng-show="availableLocations.length == 0" class="form-text text-muted">There are no locations available. (Set to Location "Default")</p> </div> <div class=form-group> <label class=col-form-label for=building>Building</label> <input class=form-control type=text id=building name=building placeholder="Building [optional]" ng-model=node.building /> </div> <div class=form-group> <label class=col-form-label for=city>City</label> <input class=form-control type=text id=city name=city placeholder="City [optional]" ng-model=node.city /> </div> </div> ')}]),e.exports=n},255:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/node-pathoutages.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <br/> <div class=form-group> <label class=col-form-label for=parentForeignSource>Parent Foreign Source</label> <input class=form-control type=text id=parentForeignSource name=parentForeignSource placeholder="Parent Foreign Source (leave it blank to use the current requisition)" ng-model=node.parentForeignSource /> </div> <div class=form-group ng-show="node.parentNodeLabel == null || node.parentNodeLabel == \'\'"> <label class=col-form-label for=parentForeignId>Parent Foreign ID</label> <input class=form-control type=text id=parentForeignId name=parentForeignId placeholder="Parent Foreign ID (use either this or Parent Node Label)" ng-model=node.parentForeignId /> </div> <div class=form-group ng-show="node.parentForeignId == null || node.parentForeignId == \'\'"> <label class=col-form-label for=parentNodeLabel>Parent Node Label</label> <input class=form-control type=text id=parentNodeLabel name=parentNodeLabel placeholder="Parent Node Label (use either this or Parent Foreign ID)" ng-model=node.parentNodeLabel /> </div> </div> ')}]),e.exports=n},256:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/node-interfaces.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <div class=row> <div class=col> <div class="mt-4 pull-right"> <button type=button class="btn btn-secondary btn-sm" id=add-interface ng-click=addInterface()> <span class="fa fa-plus"/> Add Interface </button> </div> </div> </div> <p/> <div class=table-responsive> <table class="table table-striped table-sm"> <thead> <tr> <th>IP Address</th> <th>Description</th> <th>SNMP Primary</th> <th>Services</th> <th><span class=pull-right>Actions</span></th> </tr> </thead> <tbody> <tr ng-repeat="intf in node.interfaces"> <td>{{ intf.ipAddress }}</td> <td>{{ intf.description || \'N/A\' }}</td> <td>{{ intf.snmpPrimary }}</td> <td> <div ng-hide="intf.services.length > 0">[No services]</div> <div ng-repeat="service in intf.services"> <p>{{ service.name }}</p> </div> </td> <td> <div class=pull-right> <button type=button class="btn btn-secondary btn-sm" uib-tooltip="Edit the interface" ng-click=editInterface($index)> <span class="fa fa-pencil"/> </button> <button type=button class="btn btn-secondary btn-sm" uib-tooltip="Remove the interface" ng-click=removeInterface($index)> <span class="fa fa-trash"/> </button> </div> </td> </tr> </tbody> </table> </div> </div> ')}]),e.exports=n},257:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/node-assets.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <div class=row> <div class=col> <div class="mt-4 pull-right"> <button type=button class="btn btn-secondary btn-sm" id=add-asset ng-click=addAsset()> <span class="fa fa-plus"/> Add Asset </button> </div> </div> </div> <p/> <div class=table-responsive> <table class="table table-striped table-sm"> <thead> <tr> <th>Name</th> <th>Value</th> <th><span class=pull-right>Actions</span></th> </tr> </thead> <tbody> <tr ng-repeat="asset in node.assets"> <td>{{asset.name}}</td> <td>{{asset.value}}</td> <td> <span class=pull-right> <button type=button class="btn btn-secondary btn-sm" uib-tooltip="Edit the asset" ng-click=editAsset($index)> <span class="fa fa-pencil"/> </button> <button type=button class="btn btn-secondary btn-sm" uib-tooltip="Remove the asset" ng-click=removeAsset($index)> <span class="fa fa-trash"/> </button> </span> </td> </tr> </tbody> </table> </div> </div> ')}]),e.exports=n},258:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/node-metadata.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <div class=row> <div class=col> <div class="mt-4 pull-right"> <button type=button class="btn btn-secondary btn-sm" id=add-metadata ng-click=addMetaData()> <span class="fa fa-plus"/> Add Meta-Data </button> </div> </div> </div> <p/> <div class=table-responsive> <table class="table table-striped table-sm"> <thead> <tr> <th>Scope</th> <th>Interface</th> <th>Service</th> <th>Key</th> <th>Value</th> <th><span class=pull-right>Actions</span></th> </tr> </thead> <tbody> <tr ng-repeat="entry in node.metaData.requisition | orderBy:[\'scope\',\'scoped_interface\',\'scoped_service\',\'key\']"> <td>{{ entry.displayScope() }}</td> <td ng-if="entry.displayInterface() != null">{{ entry.displayInterface() }}</td> <td ng-if="entry.displayInterface() == null" class=text-muted>*</td> <td ng-if="entry.displayService() != null">{{ entry.displayService() }}</td> <td ng-if="entry.displayService() == null" class=text-muted>*</td> <td>{{ entry.key }}</td> <td>{{ entry.value }}</td> <td> <span class=pull-right> <button type=button class="btn btn-secondary btn-sm" uib-tooltip="Edit the meta-data entry" ng-click=editMetaData(entry)> <span class="fa fa-pencil"/> </button> <button type=button class="btn btn-secondary btn-sm" uib-tooltip="Remove the meta-data entry" ng-click=removeMetaData(entry)> <span class="fa fa-trash"/> </button> </span> </td> </tr> </tbody> </table> </div> </div> ')}]),e.exports=n},259:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/node-categories.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <div class=row> <div class=col> <div class="pull-right mt-4"> <button type=button class="btn btn-secondary btn-sm" id=add-category ng-click=addCategory()> <span class="fa fa-plus"/> Add Category </button> </div> </div> </div> <p/> <ng-form name=categoryForm ng-repeat="category in node.categories"> <div class=form-group> <div class=input-group> <div class=input-group-prepend> <div class=input-group-text> <i class="fa fa-pencil"></i> </div> </div> <input class=form-control type=text name=categoryName placeholder="Category Name (choose one from the list or type a custom text for a new one)" ng-model=category.name typeahead-min-length=0 typeahead-editable=true uib-typeahead="category for category in getAvailableCategories() | filter:$viewValue | orderBy:\'toString()\'" required valid-category=category ng-class="{ \'is-invalid\' : categoryForm.categoryName.$invalid }"> <div class=input-group-append> <button type=button class="btn btn-secondary" ng-click=removeCategory($index)> <span class="fa fa-trash"></span> </button> </div> <p ng-show=categoryForm.categoryName.$invalid class=invalid-feedback>Category name is required and should be unique on the node.</p> </div> </div> </ng-form> </div> ')}]),e.exports=n},260:function(e,exports,n){"use strict";n(16),n(73),n(118);var a,o,s,l,i=t(n(11)),r=t(n(8)),c=t(n(13));function t(e){return e&&e.__esModule?e:{default:e}}n(17),a=n(261),o=n(262),s=n(263),l=n(264),angular.module("onms-requisitions").controller("PolicyController",["$scope","$uibModalInstance","RequisitionsService","policy",function($scope,e,n,t){$scope.policy=t,$scope.availablePolicies=[],$scope.optionalParameters=[],$scope.save=function(){e.close($scope.policy)},$scope.cancel=function(){e.dismiss("cancel")},$scope.addParameter=function(){$scope.policy.parameter.push({key:"",value:""})},$scope.removeParameter=function(e){var n;(0,c.default)(n=$scope.policy.parameter).call(n,e,1)},$scope.updatePolicyParameters=function(n){n&&($scope.policy.parameter=[],(0,r.default)(angular).call(angular,$scope.availablePolicies,function(e){e.class===n.class&&(0,r.default)(angular).call(angular,n.parameters,function(e){e.required&&$scope.policy.parameter.push({key:e.key,value:null})})}))},$scope.isNonEmptyArray=function(e){var n;return-1<(0,i.default)(n=e.constructor.toString()).call(n,"Array")&&0<e.length},$scope.getTemplate=function(e){var n=$scope.policy.class;$scope.optionalParameters=[];for(var t=0;t<$scope.availablePolicies.length;t++)if($scope.availablePolicies[t].class===n)for(var i=0;i<$scope.availablePolicies[t].parameters.length;i++){var r=$scope.availablePolicies[t].parameters[i];if(r.key===e.key&&r.required)return $scope.isNonEmptyArray(r.options)?a:o;r.required||$scope.optionalParameters.push(r.key)}return e.key?s:l},$scope.getParameterOptions=function(e){for(var n=0;n<$scope.availablePolicies.length;n++)if($scope.availablePolicies[n].class===$scope.policy.class)for(var t=0;t<$scope.availablePolicies[n].parameters.length;t++){var i=$scope.availablePolicies[n].parameters[t];if(i.key===e)return i.options}return[]},$scope.getOptionalParameters=function(){var e=[];return(0,r.default)(angular).call(angular,$scope.optionalParameters,function(n){var t=!1;(0,r.default)(angular).call(angular,$scope.policy.parameter,function(e){e.key===n&&(t=!0)}),t||e.push(n)}),e},n.getAvailablePolicies().then(function(e){$scope.availablePolicies=e,(0,r.default)(angular).call(angular,e,function(e){if(e.class===$scope.policy.class){for(var n=[],t=0;t<e.parameters.length;t++)for(var i=e.parameters[t].key,r=0;r<$scope.policy.parameter.length;r++){var a=$scope.policy.parameter[r];a.key===i&&n.push(a)}$scope.policy.parameter=n}})})}])},261:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/policy-param.options.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <div class=form-group> <label class=col-form-label>{{ parameter.key }}</label> <input required class=form-control type=text name=paramValue placeholder="Select an option for {{ parameter.key }} (hit space bar to see the options and choose one)" ng-model=parameter.value typeahead-min-length=0 typeahead-editable=false uib-typeahead="param for param in getParameterOptions(parameter.key) | filter:$viewValue" ng-class="{ \'is-invalid\' : paramForm.paramValue.$invalid }"> <p ng-show=paramForm.paramValue.$invalid class=invalid-feedback>Parameter value is required.</p> </div> </div> ')}]),e.exports=n},262:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/policy-param.string.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <div class=form-group> <label class=col-form-label>{{ parameter.key }}</label> <input class=form-control type=text name=paramValue placeholder="Parameter Value" ng-model=parameter.value required ng-class="{ \'is-invalid\' : paramForm.paramValue.$invalid }"> <p ng-show=paramForm.paramValue.$invalid class=invalid-feedback>Parameter value is required.</p> </div> </div> ')}]),e.exports=n},263:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/policy-param.fixed.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <div class=form-group> <label class=col-form-label>{{ parameter.key }}</label> <div class=input-group> <input class=form-control type=text name=paramValue placeholder="Parameter Value" ng-model=parameter.value required ng-class="{ \'is-invalid\' : paramForm.paramValue.$invalid }"> <span class=input-group-append> <button type=button class="btn btn-secondary" ng-click=removeParameter($index)> <span class="fa fa-trash"></span> </button> </span> <p ng-show=paramForm.paramValue.$invalid class=invalid-feedback>Parameter value is required.</p> </div> </div> </div> ')}]),e.exports=n},264:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/policy-param.editable.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <div class=form-group> <input required class=form-control type=text name=paramName placeholder="Parameter Name (hit space bar to see the options, and choose one)" ng-model=parameter.key typeahead-min-length=0 typeahead-editable=false uib-typeahead="param for param in getOptionalParameters() | filter:$viewValue" ng-class="{ \'is-invalid\' : paramForm.paramName.$invalid }"> <p ng-show=paramForm.paramName.$invalid class=invalid-feedback>Parameter name is required.</p> </div> <div class=form-group> <div class=input-group> <input class=form-control type=text name=paramValue placeholder="Parameter Value" ng-model=parameter.value required ng-class="{ \'is-invalid\' : paramForm.paramValue.$invalid }"> <span class=input-group-append> <button type=button class="btn btn-secondary" ng-click=removeParameter($index)> <span class="fa fa-trash"></span> </button> </span> <p ng-show=paramForm.paramValue.$invalid class=invalid-feedback>Parameter value is required.</p> </div> </div> </div> ')}]),e.exports=n},265:function(e,exports,n){"use strict";n(16),n(12);var r=t(n(13)),a=t(n(8)),o=t(n(18));function t(e){return e&&e.__esModule?e:{default:e}}n(17);var s,l,c,d,u,f=n(149);s=n(150),l=n(151),c=n(152),d=n(153),u=n(154),angular.module("onms-requisitions").controller("QuickAddNodeController",["$scope","foreignSources","RequisitionsService","growl","$sanitize",function($scope,e,n,t,i){$scope.quickAddPanelBasicView=s,$scope.quickAddPanelSnmpView=l,$scope.quickAddPanelCategoriesView=c,$scope.quickAddPanelCliView=d,$scope.quickAddPanelHelpView=u,$scope.foreignSources=[],$scope.availableCategories=[],$scope.availableAccessMethods=["RSH","SSH","Telnet"],$scope.isSaving=!1,$scope.node=new f,$scope.generateForeignId=function(e){$scope.node.foreignId=String((new Date).getTime()),e.$invalid=!1},$scope.provision=function(){$scope.isSaving=!0,t.info("The node "+_.escape($scope.node.nodeLabel)+" is being added to requisition "+_.escape($scope.node.foreignSource)+". Please wait...");var e="The node "+_.escape($scope.node.nodeLabel)+" has been added to requisition "+_.escape($scope.node.foreignSource);n.quickAddNode($scope.node).then(function(){$scope.reset(),bootbox.dialog({message:e,title:"Success",buttons:{main:{label:"Ok",className:"btn-secondary"}}})},$scope.errorHandler)},$scope.reset=function(){$scope.node=new f,$scope.isSaving=!1},$scope.getAvailableCategories=function(){var e=[];return(0,a.default)(angular).call(angular,$scope.availableCategories,function(n){var t=!1;(0,a.default)(angular).call(angular,$scope.node.categories,function(e){e.name===n&&(t=!0)}),t||e.push(n)}),e},$scope.removeCategory=function(e){var n;(0,r.default)(n=$scope.node.categories).call(n,e,1),this.quickAddNodeForm.$dirty=!0},$scope.addCategory=function(){$scope.node.addNewCategory(),this.quickAddNodeForm.$dirty=!0},$scope.isInvalid=function(){return!(this.quickAddNodeForm&&this.quickAddNodeForm.foreignSource&&this.quickAddNodeForm.ipAddress&&this.quickAddNodeForm.nodeLabel)||this.quickAddNodeForm.foreignSource.$invalid||this.quickAddNodeForm.ipAddress.$invalid||this.quickAddNodeForm.nodeLabel.$invalid},$scope.errorHandler=function(e){t.error(e,{ttl:1e4})},$scope.addRequisition=function(){bootbox.prompt("A requisition is required, please enter the name for a new requisition",function(e){e?n.addRequisition(e).then(function(){n.synchronizeRequisition(e,!1).then(function(){t.success("The requisition "+_.escape(e)+" has been created and synchronized."),$scope.foreignSources.push(e)},$scope.errorHandler)},$scope.errorHandler):window.location.href=o.default.getBaseHref()+"admin/opennms/index.jsp"})},n.getAvailableCategories().then(function(e){$scope.availableCategories=e},$scope.errorHandler),e?$scope.foreignSources=e:n.getRequisitionNames().then(function(e){$scope.foreignSources=e,0===$scope.foreignSources.length&&$scope.addRequisition()},$scope.errorHandler)}])},266:function(e,exports,n){"use strict";var a,o,s,l,c;n(17),a=n(150),o=n(151),s=n(152),l=n(153),c=n(154),angular.module("onms-requisitions").controller("QuickAddNodeModalController",["$controller","$scope","$uibModalInstance","foreignSources","RequisitionsService","growl",function(e,$scope,n,t,i,r){$scope.quickAddPanelBasicView=a,$scope.quickAddPanelSnmpView=o,$scope.quickAddPanelCategoriesView=s,$scope.quickAddPanelCliView=l,$scope.quickAddPanelHelpView=c,$scope.modalProvision=function(){$scope.provision(),n.close($scope.node)},$scope.modalCancel=function(){n.dismiss("cancel")},angular.extend(this,e("QuickAddNodeController",{$scope:$scope,foreignSources:t,RequisitionsService:i,growl:r}))}])},267:function(e,exports,n){"use strict";var t,l=(t=n(13))&&t.__esModule?t:{default:t};var c=n(63),d=n(107);n(17),n(111),angular.module("onms-requisitions").controller("RequisitionController",["$scope","$filter","$cookies","$window","$routeParams","Configuration","RequisitionsService","SynchronizeService","growl",function($scope,e,t,n,i,r,a,o,s){$scope.timingStatus=a.getTiming(),$scope.foreignSource=i.foreignSource,$scope.requisition=new d({}),$scope.filteredNodes=[],$scope.pageSize=10,$scope.maxSize=5,$scope.totalItems=0,$scope.goBack=function(){n.location.href=r.baseHref+"#/requisitions"},$scope.editForeignSource=function(){n.location.href=r.baseHref+"#/requisitions/"+encodeURIComponent($scope.foreignSource)+"/foreignSource"},$scope.errorHandler=function(e){s.error(e,{ttl:1e4})},$scope.synchronize=function(){o.synchronize($scope.requisition,$scope.errorHandler)},$scope.getVerticalLayout=function(){return"true"===t.get("use_requisitions_node_vertical_layout")?"/vertical":""},$scope.addNode=function(){n.location.href=r.baseHref+"#/requisitions/"+encodeURIComponent($scope.foreignSource)+"/nodes/__new__"+$scope.getVerticalLayout()},$scope.editNode=function(e){n.location.href=r.baseHref+"#/requisitions/"+encodeURIComponent($scope.foreignSource)+"/nodes/"+encodeURIComponent(e.foreignId)+$scope.getVerticalLayout()},$scope.deleteNode=function(i){c.confirm("Are you sure you want to remove the node "+_.escape(i.nodeLabel)+"?",function(e){e&&(a.startTiming(),a.deleteNode(i).then(function(){for(var e,n=-1,t=0;t<$scope.filteredNodes.length;t++)$scope.filteredNodes[t].foreignId===i.foreignId&&(n=t);-1<n&&(0,l.default)(e=$scope.filteredNodes).call(e,n,1),s.success("The node "+_.escape(i.nodeLabel)+" has been deleted.")},$scope.errorHandler))})},$scope.updateFilteredNodes=function(){$scope.currentPage=1,$scope.totalItems=$scope.filteredNodes.length},$scope.refreshDeployedStats=function(){a.startTiming(),a.updateDeployedStatsForRequisition($scope.requisition).then(function(){s.success("The deployed statistics has been updated.")},$scope.errorHandler)},$scope.refreshRequisition=function(){c.confirm("Are you sure you want to reload the requisition?<br/>All current changes will be lost.",function(e){e&&(a.startTiming(),$scope.requisition=new d({}),a.removeRequisitionFromCache(),$scope.initialize(function(){$scope.refreshDeployedStats()}))})},$scope.savePageSize=function(){t.put("requisitions_page_size",$scope.pageSize)},$scope.initialize=function(n){var e=t.get("requisitions_page_size");e&&($scope.pageSize=e),s.success("Retrieving requisition "+_.escape($scope.foreignSource)+"..."),a.getRequisition($scope.foreignSource).then(function(e){$scope.requisition=e,$scope.filteredNodes=e.nodes,$scope.updateFilteredNodes(),n&&n()},$scope.errorHandler)},$scope.$watch("reqFilter",function(){$scope.filteredNodes=e("filter")($scope.requisition.nodes,$scope.reqFilter),$scope.updateFilteredNodes()}),$scope.foreignSource&&$scope.initialize()}])},268:function(e,exports,n){"use strict";n(73),n(227),n(230),n(24),n(134);var t,c=(t=n(8))&&t.__esModule?t:{default:t};var d,u,f=n(63);n(17),n(111),d=n(269),u=n(270),angular.module("onms-requisitions").controller("RequisitionsController",["$scope","$filter","$cookies","$window","$uibModal","Configuration","DateFormatterService","RequisitionsService","SynchronizeService","growl",function($scope,e,n,t,i,r,a,o,s,l){$scope.timingStatus=o.getTiming(),$scope.loaded=!1,$scope.requisitionsData={requisitions:[]},$scope.filteredRequisitions=[],$scope.pageSize=10,$scope.maxSize=5,$scope.totalItems=0,$scope.errorHandler=function(e){l.error(e,{ttl:1e4})},$scope.quickAddNode=function(){var n=[];(0,c.default)(angular).call(angular,$scope.requisitionsData.requisitions,function(e){n.push(e.foreignSource)}),i.open({backdrop:"static",keyboard:!1,controller:"QuickAddNodeModalController",templateUrl:d,size:"lg",resolve:{foreignSources:function(){return n}}}).result.then(function(e){$scope.requisitionsData.getRequisition(e.foreignSource).setNode(e)})},$scope.clone=function(t){var n=[];(0,c.default)(angular).call(angular,$scope.requisitionsData.requisitions,function(e){e.foreignSource!==t&&n.push(e.foreignSource)}),i.open({backdrop:"static",keyboard:!1,controller:"CloneForeignSourceController",templateUrl:u,resolve:{foreignSource:function(){return t},availableForeignSources:function(){return n}}}).result.then(function(n){f.confirm("This action will override the existing foreign source definition for the requisition named "+_.escape(n)+", using "+_.escape(t)+" as a template. Are you sure you want to continue ? This cannot be undone.",function(e){e&&(o.startTiming(),o.cloneForeignSourceDefinition(t,n).then(function(){l.success("The foreign source definition for "+_.escape(t)+" has been cloned to "+_.escape(n))},$scope.errorHandler))})})},$scope.add=function(){f.prompt("Please enter the name for the new requisition",function(e){if(e){if(e.match(/[/\\?:&*'"]/))return void f.alert("Cannot add the requisition "+_.escape(e)+" because the following characters are invalid:<br/>:, /, \\, ?, &, *, ', \"");if($scope.requisitionsData.getRequisition(e))return void f.alert("Cannot add the requisition "+_.escape(e)+" because there is already a requisition with that name");o.addRequisition(e).then(function(e){l.success("The requisition "+_.escape(e.foreignSource)+" has been created.")},$scope.errorHandler)}})},$scope.editForeignSource=function(e){t.location.href=r.baseHref+"#/requisitions/"+encodeURIComponent(e)+"/foreignSource"},$scope.edit=function(e){t.location.href=r.baseHref+"#/requisitions/"+encodeURIComponent(e)},$scope.synchronize=function(e){o.startTiming(),s.synchronize(e,$scope.errorHandler)},$scope.refresh=function(e){o.startTiming(),o.updateDeployedStatsForRequisition(e).then(function(){l.success("The deployed statistics for "+_.escape(e.foreignSource)+" has been updated.")},$scope.errorHandler)},$scope.removeAllNodes=function(n){f.confirm("Are you sure you want to remove all the nodes from "+_.escape(n)+"?",function(e){e&&(o.startTiming(),o.removeAllNodesFromRequisition(n).then(function(){l.success("All the nodes from "+_.escape(n)+" have been removed, and the requisition has been synchronized."),$scope.requisitionsData.getRequisition(n).reset()},$scope.errorHandler))})},$scope.delete=function(n){f.confirm("Are you sure you want to remove the requisition "+_.escape(n)+"?",function(e){e&&(o.startTiming(),o.deleteRequisition(n).then(function(){l.success("The requisition "+_.escape(n)+" has been deleted.")},$scope.errorHandler))})},$scope.editDefaultForeignSource=function(){t.location.href=r.baseHref+"#/requisitions/default/foreignSource"},$scope.resetDefaultForeignSource=function(){f.confirm("Are you sure you want to reset the default foreign source definition ?",function(e){e&&(o.startTiming(),o.deleteForeignSourceDefinition("default").then(function(){l.success("The default foreign source definition has been reseted."),$scope.initialize()},$scope.errorHandler))})},$scope.refreshData=function(){f.dialog({message:"Are you sure you want to refresh the content of the page ?<br/><hr/>Choose <b>Reload Everything</b> to retrieve all the requisitions from the server (any existing unsaved change will be lost).<br/>Choose <b>Reload Deployed Data</b> to retrieve the deployed statistics and update the UI.<br/>Choose <b>Cancel</b> to abort the request.",title:"Refresh",buttons:{reloadAll:{label:"Reload Everything",className:"btn-primary",callback:function(){$scope.refreshRequisitions()}},reloadDeployed:{label:"Reload Deployed Data",className:"btn-secondary",callback:function(){$scope.refreshDeployedStats()}},main:{label:"Cancel",className:"btn-secondary"}}})},$scope.refreshDeployedStats=function(){o.startTiming(),l.success("Refreshing deployed statistics..."),o.updateDeployedStats($scope.requisitionsData).then(function(){l.success("The deployed statistics has been updated.")},$scope.errorHandler)},$scope.refreshRequisitions=function(){f.confirm("Are you sure you want to reload all the requisitions?<br/>All current changes will be lost.",function(e){e&&(o.startTiming(),l.success("Refreshing requisitions..."),o.clearCache(),$scope.requisitionsData={requisitions:[]},$scope.initialize())})},$scope.updateFilteredRequisitions=function(){$scope.currentPage=1,$scope.totalItems=$scope.filteredRequisitions.length},$scope.savePageSize=function(){n.put("requisitions_page_size",$scope.pageSize)},$scope.initialize=function(){var e=n.get("requisitions_page_size");e&&($scope.pageSize=e),$scope.loaded=!1,a.formatter.finally(function(){o.getRequisitions().then(function(e){$scope.requisitionsData=e,$scope.filteredRequisitions=$scope.requisitionsData.requisitions,$scope.updateFilteredRequisitions(),$scope.loaded=!0,l.success("Loaded "+$scope.requisitionsData.requisitions.length+" requisitions...")},$scope.errorHandler)})},$scope.$watch("reqFilter",function(){$scope.filteredRequisitions=e("filter")($scope.requisitionsData.requisitions,$scope.reqFilter),$scope.updateFilteredRequisitions()}),0===$scope.filteredRequisitions.length&&$scope.initialize()}])},269:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/quick-add-node.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <div class=modal-header> <h3 class=modal-title>Quick-Add Node</h3> </div> <div class=modal-body> <form name=quickAddNodeForm> <uib-tabset> <uib-tab heading="Basic Attributes" id=tab-basic-information> <ng-include src=quickAddPanelBasicView /> </uib-tab> <uib-tab heading="SNMP Parameters" id=tab-snmp-parameters> <ng-include src=quickAddPanelSnmpView /> </uib-tab> <uib-tab heading="Surveillance Categories" id=tab-categories> <ng-include src=quickAddPanelCategoriesView /> </uib-tab> <uib-tab heading="CLI Authentication" id=tab-cli-auth-parameters> <ng-include src=quickAddPanelCliView /> </uib-tab> <uib-tab heading=Help id=tab-help> <ng-include src=quickAddPanelHelpView /> </uib-tab> </uib-tabset> </form> </div> <div class=modal-footer> <button type=button class="btn btn-primary" id=provision ng-click=modalProvision() ng-disabled=isInvalid()>Provision</button> <button type=button class="btn btn-secondary" id=cancel ng-click=modalCancel()>Cancel</button> </div> </div> ')}]),e.exports=n},270:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/clone-foreignsource.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <div class=modal-header> <h3 class=modal-title>Clone Foreign Source Definition</h3> </div> <div class=modal-body> <form name=cloneForm> <div class=form-group> <div class=form-group> <label class=col-form-label for=sourceFS>Source Foreign Source</label> <input class=form-control type=text name=sourceFS ng-disabled=true ng-model=foreignSource> </div> <div class=form-group> <label class=col-form-label for=targetFS>Target Foreign Source</label> <input class=form-control type=text name=targetFS placeholder="Target Foreign Source to override (hit space bar to see the options)" ng-model=targetForeignSource typeahead-min-length=0 typeahead-editable=false uib-typeahead="fs for fs in availableForeignSources | filter:$viewValue" required> </div> </div> </form> </div> <div class=modal-footer> <button type=button class="btn btn-primary" ng-click=save() ng-disabled=cloneForm.$invalid>Clone</button> <button type=button class="btn btn-secondary" ng-click=cancel()>Cancel</button> </div> </div> ')}]),e.exports=n},271:function(e,exports,n){"use strict";n(12),n(24),n(134);var a=t(n(34)),o=t(n(8)),s=t(n(11));function t(e){return e&&e.__esModule?e:{default:e}}var i=n(172),l=i.Address4,c=i.Address6,d=n(126);angular.module("onms-requisitions").directive("validIpAddress",function(){return{restrict:"A",require:"ngModel",link:function(i,e,n,r){r.$parsers.unshift(function(e){var n;if(i.ipBlackList&&-1!==(0,s.default)(n=i.ipBlackList).call(n,e))r.$setValidity("valid",!1);else{var t=!1;if(new l(e).isValid()?t=!0:new c(e).isValid()&&(t=!0),t)return r.$setValidity("valid",!0),e;r.$setValidity("valid",!1)}})}}}).directive("validService",function(){return{restrict:"A",require:"ngModel",link:function(i,e,n,r){r.$parsers.unshift(function(n){var t=!1;if(i.requisitionInterface&&i.requisitionInterface.services&&(0,o.default)(angular).call(angular,i.requisitionInterface.services,function(e){e.$$hashKey!==i.service.$$hashKey&&e.name===n&&(t=!0)}),!t)return r.$setValidity("unique",!0),n;r.$setValidity("unique",!1)})}}}).directive("validForeignId",function(){return{restrict:"A",require:"ngModel",link:function(t,e,n,i){i.$parsers.unshift(function(e){var n;if(!(t.foreignIdBlackList&&-1!==(0,s.default)(n=t.foreignIdBlackList).call(n,e)||e.match(/[/\\?:&*'"]/)))return i.$setValidity("valid",!0),e;i.$setValidity("valid",!1)})}}}).directive("validCategory",function(){return{restrict:"A",require:"ngModel",transclude:!0,scope:{category:"=validCategory"},link:function(i,e,n,r){r.$parsers.unshift(function(n){if(n&&""!==(0,a.default)(n).call(n)){var t=!1;if((0,o.default)(angular).call(angular,i.$parent.node.categories,function(e){e.$$hashKey!==i.category.$$hashKey&&e.name===n&&(t=!0)}),!t)return r.$setValidity("unique",!0),n;r.$setValidity("unique",!1)}else r.$setValidity("unique",!1)})}}}).directive("validMetaDataKey",function(){return{restrict:"A",require:"ngModel",transclude:!0,scope:{entry:"=validMetaDataKey"},link:function(i,e,n,r){r.$parsers.unshift(function(e){var n=!0;if(e!==i.$parent.originalKey){i.$parent.resolveScopeReferences(i.entry);var t=i.$parent.node.metaData.getKeysInScopeOf(i.entry);n=(0,s.default)(d).call(d,t,e)<0}if(n)return r.$setValidity("unique",!0),e;r.$setValidity("unique",!1)})}}})},273:function(e,exports,n){"use strict";n(91);var t,i=r(n(32));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(n(20)).default)(t=angular.module("onms-requisitions")).call(t,"startFrom",function(){return function(e,n){var t=Number(n);return e?e.length<t?e:(0,i.default)(e).call(e,t):[]}})},28:function(e,exports,n){"use strict";var t,i=(t=n(18))&&t.__esModule?t:{default:t};var angular=n(3);n(9);var r=n(29),a=n(30);angular.module("onms-search",["onms.http","ui.bootstrap"]).directive("onmsSearchNodes",function(){return{restrict:"E",transclude:!0,templateUrl:a,controller:"NodeSearchCtrl"}}).directive("onmsSearchKsc",function(){return{restrict:"E",transclude:!0,templateUrl:r,controller:"KscSearchCtrl"}}).controller("NodeSearchCtrl",["$scope","$window","$http",function($scope,n,t){$scope.getNodes=function(e){return t({url:"rest/nodes",method:"GET",params:{label:e,comparator:"contains"}}).then(function(e){return e.data.node})},$scope.goToChooseResources=function(e){n.location.href=i.default.getBaseHref()+"graph/chooseresource.jsp?node="+e.id}}]).controller("KscSearchCtrl",["$scope","$window","$http","$filter",function($scope,n,e,t){$scope.getKscReports=function(n){return e({url:"rest/ksc",method:"GET"}).then(function(e){return t("filter")(e.data.kscReport,n)})},$scope.goToKscReport=function(e){n.location.href=i.default.getBaseHref()+"KSC/customView.htm?type=custom&report="+e.id}}])},29:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/search/template.ksc.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=form-group> <div class=input-group> <input type=text class=form-control ng-model=asyncKsc placeholder="Type the KSC report name" uib-typeahead="ksc as ksc.label for ksc in getKscReports($viewValue)" typeahead-editable=false typeahead-loading=kscLoadingNodes typeahead-no-results=kscNoResults typeahead-min-length=1 typeahead-on-select=goToKscReport($item) /> <div class=input-group-append> <span class=input-group-text><i class="fa fa-search"></i></span> </div> </div> <i ng-show=kscLoadingNodes class="fa fa-refresh"></i> <p class="form-text text-muted" ng-show=kscNoResults> <i class="fa fa-remove"></i> No Results Found </p> </div> ')}]),e.exports=n},3:function(e,exports,n){"use strict";var angular=n(26);n(37),n(38),n(39),n(40),n(36),n(41),n(42),n(43),n(44),n(10),n(45),n(46),console.log("init: angular-js"),e.exports=window.angular=angular},30:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/search/template.nodes.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=form-group> <div class=input-group> <input type=text class=form-control ng-model=asyncNode placeholder="Type the node label" uib-typeahead="node as node.label for node in getNodes($viewValue)" typeahead-editable=false typeahead-loading=nodeLoadingNodes typeahead-no-results=nodeNoResults typeahead-min-length=1 typeahead-on-select=goToChooseResources($item) /> <div class=input-group-append> <span class=input-group-text><i class="fa fa-search"></i></span> </div> </div> <i ng-show=nodeLoadingNodes class="fa fa-refresh"></i> <p class="form-text text-muted" ng-show=nodeNoResults> <i class="fa fa-remove"></i> No Results Found </p> </div> ')}]),e.exports=n},31:function(e,exports,n){"use strict";n(16),n(12);var f=t(n(13)),p=t(n(32)),m=t(n(11)),g=t(n(8)),a=t(n(53));function t(e){return e&&e.__esModule?e:{default:e}}var angular=n(3);n(9),n(71),n(72),n(59);function v(e,n){n.data?e.error=n.data:e.error="An unexpected error occurred while handling the request"}var i=n(33);angular.module("onms.central.search",["angular-loading-bar","ngResource","ui.router","onms.http"]).directive("onmsCentralSearch",function(){return{restrict:"E",transclude:!1,templateUrl:i,controller:"QuickSearchController"}}).factory("SearchResource",["$resource",function(e){return e("api/v2/search",{},{query:{method:"GET",isArray:!0,cancellable:!0}})}]).controller("QuickSearchController",["$scope","SearchResource","$timeout","$document",function($scope,i,o,e){var s=13,n=16,t=27,l=38,c=40,r="Group",d="Item",u="More";$scope.query="",$scope.results={},$scope.performSearchExecuted=!1,$scope.showLoadingIndicator=!1,$scope.showLoadingIndicatorDelay=250,$scope.performSearchDelay=500,$scope.performSearchPromise=void 0,$scope.performSearchHandle=void 0,$scope.showLoadingIndicatorPromise=void 0,$scope.shiftLastPressed=void 0,($scope.selectedIndex=0,a.default)(e).call(e,"mousedown",function(e){var n=0<$("#onms-search-form").has(e.target).length,t=$("#onms-search-form").is(e.target);n||t||o(function(){$scope.resetQuery(),$scope.cancelRequest()})}),(0,a.default)(e).call(e,"keyup",function(e){o(function(){e.keyCode===n&&new Date-$scope.shiftLastPressed<=350?(angular.element("#onms-search-query").focus(),angular.element("#onms-search-query").select(),$scope.shiftLastPressed=void 0):e.keyCode===n&&($scope.shiftLastPressed=new Date),e.keyCode===t&&($scope.resetQuery(),$scope.cancelRequest())})}),(0,a.default)(e).call(e,"keydown",function(a){o(function(){if(0<$scope.results.length){var e=document.getElementById("onms-search-result-item-"+$scope.selectedIndex);if(a.keyCode===l||a.keyCode===c){$scope.navigateSearchResult(a.keyCode);var n=document.getElementById("onms-search-result"),t=n.clientHeight,i=e.clientHeight,r=e.offsetTop;r+i+25>=t+n.scrollTop&&(n.scrollTop=r),0!==n.scrollTop&&n.scrollTop>r-i&&(n.scrollTop=r-i)}a.keyCode===s&&($scope.results[$scope.selectedIndex].type===u?o(function(){angular.element(e).triggerHandler("click")},0):($scope.resetQuery(),$scope.cancelRequest(),e.click()))}})}),$scope.navigateSearchResult=function(e){switch($scope.results[$scope.selectedIndex].selected=!1,e){case l:$scope.selectedIndex--;break;case c:$scope.selectedIndex++}$scope.selectedIndex<1&&($scope.selectedIndex=1),$scope.selectedIndex>=$scope.results.length&&($scope.selectedIndex=$scope.results.length-1),$scope.results[$scope.selectedIndex].type===r?$scope.navigateSearchResult(e):$scope.results[$scope.selectedIndex].selected=!0},$scope.resetQuery=function(){$scope.query="",$scope.results=[],$scope.performSearchExecuted=!1,$scope.performSearchHandle&&$scope.performSearchHandle.$cancelRequest()},$scope.cancelRequest=function(){$scope.performSearchHandle&&$scope.performSearchHandle.$cancelRequest(),$scope.showLoadingIndicator=!1,o.cancel($scope.showLoadingIndicatorPromise)},$scope.select=function(e){var n=e||1;1<=$scope.selectedIndex&&($scope.results[$scope.selectedIndex].selected=!1),$scope.selectedIndex=n,$scope.results[$scope.selectedIndex].selected=!0},$scope.onQueryChange=function(){0!=$scope.query.length?$scope.query.length<3||(o.cancel($scope.performSearchPromise),$scope.results=[],$scope.performSearchExecuted=!1,$scope.performSearchPromise=o(function(){o.cancel($scope.showLoadingIndicatorPromise),$scope.showLoadingIndicatorPromise=o(function(){$scope.showLoadingIndicator=!0},$scope.showLoadingIndicatorDelay),$scope.performSearchHandle&&$scope.performSearchHandle.$cancelRequest(),$scope.error=void 0,$scope.performSearchHandle=i.query({_s:$scope.query},function(e){$scope.cancelRequest(),$scope.performSearchExecuted=!0;var t=[];(0,g.default)(e).call(e,function(e){var n;if(t.push({context:e.context.name,label:1<e.results.length?e.context.name+"s":e.context.name,type:r,count:e.results.length,more:e.more}),(0,g.default)(n=e.results).call(n,function(e){e.type=d,t.push(e)}),!0===e.more){var l={context:e.context.name,count:e.results.length,type:u,loadMore:function(){$scope.error=void 0,i.query({_s:$scope.query,_l:this.count+10,_c:this.context},function(e){var n,t,i,r,a=(0,m.default)(n=$scope.results).call(n,l),o=e[0],s=(0,p.default)(t=o.results).call(t,a-1);(0,g.default)(s).call(s,function(e,n){var t;e.type=d,(0,f.default)(t=$scope.results).call(t,a+n,0,e),l.count++}),l.selected=!1,!($scope.results[$scope.selectedIndex].selected=!0)===o.more&&(0,f.default)(i=$scope.results).call(i,(0,m.default)(r=$scope.results).call(r,l),1)},function(e){$scope.performSearchExecuted=!0,v($scope,e)})},selected:!1};t.push(l)}}),$scope.results=t,0!=$scope.results.length&&($scope.selectedIndex=1,$scope.results[$scope.selectedIndex].selected=!0)},function(e){0<=e.status&&($scope.performSearchExecuted=!0,v($scope,e),$scope.cancelRequest())})},$scope.performSearchDelay)):$scope.resetQuery()}}])},33:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-central-search/quicksearch.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<style type=text/css>.search-result{max-height:700px;min-width:280px;max-width:60%;position:absolute;top:100%;z-index:100000;overflow:auto;border:#343a40 solid 1px}.search-result .list-group-item{padding:.25rem .75rem;font-size:90%}.search-result .list-group-item:last-child{border-bottom-right-radius:0;border-bottom-left-radius:0}.search-bar .form-control{border:none;outline:0;box-shadow:none;border-radius:1rem;padding:0}.search-bar .input-group-text{border-top-left-radius:1rem;border-bottom-left-radius:1rem;background-color:#fff;border-color:#fff}.search-result .list-group-item:hover{background-color:#e9ecef}.selected{background-color:#e9ecef}</style> <form id=onms-search-form autocomplete=off novalidate class=form-inline> <input autocomplete=false name=hidden type=text style=display:none> <div class="input-group search-bar"> <div class=input-group-prepend> <div class=input-group-text><i class="fa fa-search"></i></div> </div> <label class=form-control> <input id=onms-search-query ng-change=onQueryChange() ng-focus="input.focus=true" ng-blur="input.focus=false" ng-model=query type=text class=form-control placeholder=Search... aria-label=Search> <small class="text-muted mr-4" ng-show=!input.focus>2x </small> </label> <div ng-if=showLoadingIndicator class="btn btn-secondary rounded-0"> <div class="spinner-border spinner-border-sm text-white" role=status /> <span class=sr-only>Loading...</span> </div> <div ng-if="performSearchExecuted === true && !showLoadingIndicator" class=input-group-append> <button class="btn btn-secondary" type=button title="Reset Search" ng-click=resetQuery()><i class="fa fa-times"></i></button> </div> <div ng-if=showLoadingIndicator class=input-group-append> <button class="btn btn-secondary" type=button title="Cancel Request" ng-click=cancelRequest()><i class="fa fa-times"></i></button> </div> </div> <div ng-if="performSearchExecuted === true" class="bg-dark search-result rounded-bottom" id=onms-search-result> <div class=list-group ng-if="results.length > 0"> <div id=onms-search-result-item-{{$index}} ng-repeat-start="item in results track by $index" ng-if="item.type === \'Group\'" class="list-group-item bg-dark text-grey border-0 pl-2"> <span ng-if=!item.t>{{item.label}}</span> </div> <a id=onms-search-result-item-{{$index}} ng-class="{\'selected\': item.selected}" ng-if="item.type === \'More\'" ng-click=item.loadMore() class="list-group-item list-group-item-action" href ng-mouseover=select($index)>more...</a> <a id=onms-search-result-item-{{$index}} ng-class="{\'selected\': item.selected}" ng-repeat-end ng-if="item.type === \'Item\'" href={{item.url}} class="list-group-item list-group-item-action" ng-mouseover=select($index) ng-click=resetQuery()> <h6 class=mb-0><i class={{item.icon}} ng-if=item.icon>&nbsp;</i>{{item.label}} <i style=-webkit-transform:scaleY(-1);transform:scaleY(-1) class="fa fa-reply pull-right" ng-if=item.selected></i></h6> <small class=mr-4 ng-class="{\'text-muted\': !item.selected}" ng-repeat="match in item.matches">{{match.label}}: {{match.value}}</small> </a> </div> <div ng-if="!error && results.length === 0" class=text-grey> <span>No Results found</span> </div> <div ng-if=error class="alert alert-danger mx-2 my-2"> <span>{{error}}</span> </div> </div> </form> ')}]),e.exports=n},47:function(e,exports,n){"use strict";var angular=n(3);n(28),n(31);angular.module("onms.default.apps",["onms.central.search","onms-search"])},5:function(e,exports,n){"use strict";console.log("init: jquery-js");var jQuery=n(7);e.exports=jQuery},68:function(e,exports,n){"use strict";n(60),n(61),n(16),n(12);var o=t(n(34)),s=t(n(8));function t(e){return e&&e.__esModule?e:{default:e}}function l(e){return null==e||0===e.length}var c=n(108),d=n(240);e.exports=function(e,n,t){var r=this;r.foreignSource=e,r.deployed=t,r.modified=!1,r.foreignId=n["foreign-id"],l(r.foreignId)&&(r.foreignId=String((new Date).getTime())),r.nodeLabel=n["node-label"],r.location=n.location,r.city=n.city,r.building=n.building,r.parentForeignSource=n["parent-foreign-source"];var i=n["parent-foreign-id"];r.parentForeignId=l(i)?null:i;var a=n["parent-node-label"];return r.parentNodeLabel=l(a)?null:a,r.interfaces=[],r.categories=[],r.assets=[],(0,s.default)(angular).call(angular,n.interface,function(e){r.interfaces.push(new c(e))}),(0,s.default)(angular).call(angular,n.asset,function(e){r.assets.push(e)}),(0,s.default)(angular).call(angular,n.category,function(e){r.categories.push(e)}),r.metaData=new d(n,this),r.isModified=function(){return!!r.modified||!r.deployed},r.addNewInterface=function(){var n=!1;return(0,s.default)(angular).call(angular,r.interfaces,function(e){"P"===e.snmpPrimary&&(n=!0)}),r.interfaces.push(new c({"snmp-primary":n?"N":"P"})),r.interfaces.length-1},r.addNewAsset=function(){return r.assets.push({name:"",value:""}),r.assets.length-1},r.addNewCategory=function(){return r.categories.push({name:""}),r.categories.length-1},r.getPrimaryIpAddress=function(){var n=null;return(0,s.default)(angular).call(angular,r.interfaces,function(e){"P"===e.snmpPrimary&&(n=e.ipAddress)}),n},r.hasParentInformation=function(){var e,n,t;return!(!r.parentForeignSource||""===(0,o.default)(e=r.parentForeignSource).call(e))||(!(!r.parentForeignId||""===(0,o.default)(n=r.parentForeignId).call(n))||!(!r.parentNodeLabel||""===(0,o.default)(t=r.parentNodeLabel).call(t)))},r.getOnmsRequisitionNode=function(){var n={"foreign-id":r.foreignId,"node-label":r.nodeLabel,location:r.location,city:r.city,building:r.building,interface:[],"parent-foreign-source":r.parentForeignSource,"parent-foreign-id":r.parentForeignId,"parent-node-label":r.parentNodeLabel,asset:[],"meta-data":r.metaData.getOnmsMetaDataForNode(),category:[]};return(0,s.default)(angular).call(angular,r.interfaces,function(t){var i={"ip-addr":t.ipAddress,descr:t.description,"snmp-primary":t.snmpPrimary,status:t.status||"managed"===t.status?"1":"3","meta-data":r.metaData.getOnmsMetaDataForInterface(t),"monitored-service":[]};(0,s.default)(angular).call(angular,t.services,function(e){var n={"service-name":e.name,"meta-data":r.metaData.getOnmsMetaDataForService(t,e)};i["monitored-service"].push(n)}),n.interface.push(i)}),(0,s.default)(angular).call(angular,r.assets,function(e){n.asset.push(e)}),(0,s.default)(angular).call(angular,r.categories,function(e){n.category.push(e)}),n},r.className="RequisitionNode",r}},83:function(e,exports,n){"use strict";n(12);e.exports=function(e){return this.name=e["service-name"],this.className="RequisitionService",this}},9:function(e,exports,n){"use strict";var t,a=(t=n(51))&&t.__esModule?t:{default:t};var angular=n(3),i=n(15);angular.module("onms.http",["ui.bootstrap"]).factory("InterceptorService",["$q","$rootScope",function(i,r){return{responseError:function(e){var n,t;401===e.status&&e.config&&e.config.url&&((0,a.default)(n=e.config.url).call(n,"rest/")||(0,a.default)(t=e.config.url).call(t,"api/v2/"))&&(console.error("Login Required",e,e.headers),r.$emit("loginRequired"));return 403===e.status&&r.$emit("permissionDenied"),i.reject(e)}}}]).config(["$httpProvider",function(e){e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",e.interceptors.push("InterceptorService")}]).run(["$rootScope","$uibModal",function(e,n){e.$on("loginRequired",function(){var e=document.getElementsByTagName("base");e&&0<e.length&&e[0].href?window.location.href=e[0].href+"login.jsp?session_expired=true":console.warn("Login is required, but cannot forward to login page due to missing base tag.")}),e.$on("permissionDenied",function(){n.open({templateUrl:i,controller:["$scope","$uibModalInstance",function($scope,e){$scope.reload=function(){e.dismiss(),window.location.reload()}}],size:"",backdrop:"static",keyboard:!1})})}]),e.exports=angular},948:function(e,exports,n){"use strict";n(3);n(949),n(238)},949:function(e,exports,n){"use strict";var t;t=n(950),angular.module("onms-requisitions",["onms.http","onms.default.apps","ngRoute","ngAnimate","ui.bootstrap","angular-growl","angular-loading-bar","ngSanitize","onmsDateFormatter"]).config(["$routeProvider",function(e){e.when("/",{templateUrl:t,controller:"QuickAddNodeController",resolve:{foreignSources:function(){return null}}}).otherwise({redirectTo:"/"})}]).config(["growlProvider",function(e){e.globalTimeToLive(3e3),e.globalPosition("bottom-center")}])},950:function(e,exports){var n="/home/kevlin/Documents/gracybranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/quick-add-node-standalone.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div> <ol class=breadcrumb> <li class=breadcrumb-item><a href=/opennms/index.jsp>Home</a></li> <li class=breadcrumb-item><a href=/opennms/admin/index.jsp>Admin</a></li> <li class=breadcrumb-item><a href=/opennms/admin/ng-requisitions/index.jsp>Provisioning Requisitions</a></li> <li class="breadcrumb-item active">Quick-Add Node</li> </ol> <div class=row> <div class=col-md-6> <form name=quickAddNodeForm> <fieldset ng-disabled=isSaving> <div class=card> <div class=card-header><span>Basic Attributes (required)</span></div> <div class=card-body ng-include=quickAddPanelBasicView></div> </div> <div class=card> <div class=card-header><span>SNMP Parameters (optional)</span></div> <div class=card-body ng-include=quickAddPanelSnmpView></div> </div> <div class=card> <div class=card-header><span>Surveillance Category Memberships (optional)</span></div> <div class=card-body ng-include=quickAddPanelCategoriesView></div> </div> <div class=card> <div class=card-header><span>CLI Authentication Parameters (optional)</span></div> <div class=card-body ng-include=quickAddPanelCliView></div> </div> <div class=form-group> <button type=button class="btn btn-primary" id=provision ng-click=provision() ng-disabled=isInvalid()>Provision</button> <button type=button class="btn btn-primary" id=reset ng-click=reset()>Reset</button> </div> </fieldset> </form> </div> <div class=col-md-6> <div class=card> <div class=card-header><span>Node Quick-Add Help</span></div> <div class=card-body ng-include=quickAddPanelHelpView></div> </div> </div> </div> </div> ')}]),e.exports=n}},[[948,0]]])});
//# sourceMappingURL=quickaddnode.min.js.map