{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///./src/main/assets/modules/lib/loader/index.ts"],"names":["root","factory","exports","module","define","amd","a","i","window","OnmsLoader","prefix","extension","this","mappings","modules","console","log","length","fragment","document","createDocumentFragment","loaded","debug","el","createElement","src","async","appendChild","error","body","name","check","onready","retry","nextRetry","Math","round","waitFor"],"mappings":"CAAA,SAA2CA,EAAMC,GAChD,GAAsB,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,SACb,GAAqB,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,OACP,CACJ,IAAIK,EAAIL,IACR,IAAI,IAAIM,KAAKD,GAAuB,iBAAZJ,QAAuBA,QAAUF,GAAMO,GAAKD,EAAEC,IAPxE,CASGC,OAAQ,WACX,O,wgBCRqBC,E,WAMnB,WAAmBC,EAAiBC,I,4FAAoB,yBALxC,oBAKwC,mBAJrC,cAIqC,gBAHvC,IAAI,EAAJ,SAGuC,0BAClDD,IACFE,KAAKF,OAASA,GAEZC,IACFC,KAAKD,UAAYA,GAGnBC,KAAKC,SAAW,CACd,UAAaD,KAAKF,OAAS,eAAiBE,KAAKD,UACjD,UAAaC,KAAKF,OAAS,eAAiBE,KAAKD,UACjD,GAAMC,KAAKF,OAAS,QAAUE,KAAKD,UACnC,KAAQC,KAAKF,OAAS,UAAYE,KAAKD,UACvC,OAAUC,KAAKF,OAAS,SAAWE,KAAKD,UACxC,OAAUC,KAAKF,OAAS,YAAcE,KAAKD,UAC3C,eAAgBC,KAAKF,OAAS,eAAiBE,KAAKD,UACpD,OAAUC,KAAKF,OAAS,YAAcE,KAAKD,UAC3C,YAAaC,KAAKF,OAAS,eAAiBE,KAAKD,UACjD,QAAWC,KAAKF,OAAS,aAAeE,KAAKD,UAC7C,SAAYC,KAAKF,OAAS,WAAaE,KAAKD,UAC5C,aAAcC,KAAKF,OAAS,aAAeE,KAAKD,UAEhD,OAAUC,KAAKF,OAAS,SAAWE,KAAKD,W,sFAIV,2BAAnBG,EAAmB,yBAAnBA,EAAmB,gBAChCC,QAAQC,IAAI,uBAAyBF,EAAQG,OAAS,aAGtD,IADA,IAAMC,EAAWC,SAASC,yBAC1B,MAAqBN,EAArB,eAA8B,CAAzB,IAAMX,EAAM,KACf,GAAIS,KAAKS,OAAOlB,GACdY,QAAQC,IAAI,wBAA0Bb,EAAS,0BAE/C,GAAIS,KAAKC,SAASV,GAAS,CACzBY,QAAQO,MAAM,uBAAyBnB,GACvC,IAAMoB,EAAKJ,SAASK,cAAc,UAClCD,EAAGE,IAAMb,KAAKC,SAASV,GACvBoB,EAAGG,OAAQ,EACXR,EAASS,YAAYJ,GACrBX,KAAKS,OAAOlB,IAAU,OAEtBY,QAAQa,MAAM,sCAAwCzB,EAAS,MAIrEgB,SAASU,KAAKF,YAAYT,GAC1BH,QAAQC,IAAI,0C,8BAGCc,EAAcC,EAAsBC,E,GAAiC,WAAZC,EAAY,6B,IAAJ,GAC9E,GAAIF,IACFhB,QAAQC,IAAI,eAAiBc,EAAO,cACpCE,SACK,GAAIC,EAAQ,IAAO,CACxB,IAAMC,EAAYC,KAAKC,MAAc,IAARH,GAC7BlB,QAAQC,IAAI,eAAiBc,EAAO,kCAAoCI,EAAY,QACpF,aAAW,WACT,EAAKG,QAAQP,EAAMC,EAAOC,EAASE,IAClCA,QAEHnB,QAAQC,IAAI,4BAA8Bc,O","file":"loader.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn ","/* eslint no-console: 0 */\n\nexport default class OnmsLoader {\n  public prefix = '/opennms/assets/';\n  public extension = '.vaadin.js';\n  private loaded = new Set<string>();\n  private mappings: object;\n\n  public constructor(prefix?: string, extension?: string) {\n    if (prefix) {\n      this.prefix = prefix;\n    }\n    if (extension) {\n      this.extension = extension;\n    }\n\n    this.mappings = {\n      'backshift': this.prefix + 'backshift-js' + this.extension,\n      'bootstrap': this.prefix + 'bootstrap-js' + this.extension,\n      'd3': this.prefix + 'd3-js' + this.extension,\n      'flot': this.prefix + 'flot-js' + this.extension,\n      'global': this.prefix + 'global' + this.extension,\n      'holder': this.prefix + 'holder-js' + this.extension,\n      'ionicons-css': this.prefix + 'ionicons-css' + this.extension,\n      'jquery': this.prefix + 'jquery-js' + this.extension,\n      'jquery-ui': this.prefix + 'jquery-ui-js' + this.extension,\n      'leaflet': this.prefix + 'leaflet-js' + this.extension,\n      'manifest': this.prefix + 'manifest' + this.extension,\n      'onms-graph': this.prefix + 'onms-graph' + this.extension,\n//      'openlayers': this.prefix + 'legacy/openlayers-2.10/OpenLayers.js',\n      'vendor': this.prefix + 'vendor' + this.extension,\n    };\n  }\n\n  public load(...modules: string[]) {\n    console.log('OnmsLoader: loading ' + modules.length + ' modules.');\n\n    const fragment = document.createDocumentFragment();\n    for (const module of modules) {\n      if (this.loaded[module]) {\n        console.log('OnmsLoader: skipping ' + module + ' (already loaded)');\n      } else {\n        if (this.mappings[module]) {\n          console.debug('OnmsLoader: loading ' + module);\n          const el = document.createElement('script');\n          el.src = this.mappings[module];\n          el.async = false;\n          fragment.appendChild(el);\n          this.loaded[module] = true;\n        } else {\n          console.error('OnmsLoader: no mapping for module \"' + module + '\"!');\n        }\n      }\n    }\n    document.body.appendChild(fragment);\n    console.log('OnmsLoader: finished loading modules');\n  }\n\n  public waitFor(name: string, check: () => boolean, onready: () => void, retry = 50) {\n    if (check()) {\n      console.log('OnmsLoader: ' + name + ' is ready.');\n      onready();\n    } else if (retry < 10000) {\n      const nextRetry = Math.round(retry * 1.5);\n      console.log('OnmsLoader: ' + name + ' is not ready. Trying again in ' + nextRetry + 'ms.');\n      setTimeout(() => {\n        this.waitFor(name, check, onready, nextRetry);\n      }, nextRetry);\n    } else {\n      console.log('OnmsLoader: giving up on ' + name);\n    }\n  }\n}\n"],"sourceRoot":""}