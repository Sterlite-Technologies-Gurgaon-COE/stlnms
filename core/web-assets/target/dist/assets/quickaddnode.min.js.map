{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///./src/main/assets/js/vendor/bootstrap-js.js","webpack:///./src/main/assets/js/apps/onms-date-formatter/index.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/model/Requisition.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/model/RequisitionInterface.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/model/RequisitionMetaDataEntry.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/model/MetaDataConstants.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/services/Synchronize.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/model/RequisitionsData.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/model/QuickNode.js","webpack:///./src/main/assets/js/lib/onms-http/403-permission-denied.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/quick-add-panel-basic.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/quick-add-panel-snmp.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/quick-add-panel-categories.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/quick-add-panel-cli.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/quick-add-panel-help.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/services/Requisitions.js","webpack:///./src/main/assets/js/vendor/ipaddress-js.js","webpack:///./src/main/assets/modules/lib/util/index.js","webpack:///./src/main/assets/js/apps/onms-requisitions/requisitions-core/index.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/controllers/Asset.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/model/RequisitionMetaData.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/controllers/CloneForeignSource.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/controllers/Detector.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/controllers/ForeignSource.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/policy.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/move.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/detector.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/controllers/Interface.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/controllers/MetaData.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/controllers/Move.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/controllers/Node.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/asset.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/metadata.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/interface.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/node-basic.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/node-pathoutages.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/node-interfaces.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/node-assets.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/node-metadata.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/node-categories.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/controllers/Policy.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/policy-param.options.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/policy-param.string.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/policy-param.fixed.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/policy-param.editable.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/controllers/QuickAddNode.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/controllers/QuickAddNodeModal.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/controllers/Requisition.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/controllers/Requisitions.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/quick-add-node.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/clone-foreignsource.html","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/directives/requisitionConstraints.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/filters/startFrom.js","webpack:///./src/main/assets/js/apps/search/index.js","webpack:///./src/main/assets/js/apps/search/template.ksc.html","webpack:///./src/main/assets/js/vendor/angular-js.js","webpack:///./src/main/assets/js/apps/search/template.nodes.html","webpack:///./src/main/assets/js/apps/onms-central-search/index.js","webpack:///./src/main/assets/js/apps/onms-central-search/quicksearch.html","webpack:///./src/main/assets/js/apps/onms-default-apps/index.js","webpack:///./src/main/assets/js/vendor/jquery-js.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/model/RequisitionNode.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/scripts/model/RequisitionService.js","webpack:///./src/main/assets/js/lib/onms-http/index.js","webpack:///./src/main/assets/js/apps/onms-requisitions/quickaddnode/index.js","webpack:///./src/main/assets/js/apps/onms-requisitions/quickaddnode/main.js","webpack:///./src/main/assets/js/apps/onms-requisitions/lib/views/quick-add-node-standalone.html"],"names":["root","factory","exports","module","define","amd","a","i","window","console","log","jQuery","require","angular","moment","OnmsDateFormatter","prototype","init","readyCallback","self","this","defaultFormat","_onmsZoneId","undefined","xhr","XMLHttpRequest","onreadystatechange","readyState","DONE","status","config","JSON","parse","responseText","datetimeformatConfig","datetimeformat","_onmsDateTimeFormat","zoneId","statusText","e","open","setRequestHeader","send","assertInitialized","Error","getZoneId","_zoneId","warn","tz","guess","format","date","formatJavaDTF","jest","f","_onmsFormatter","$interval","$q","deferred","defer","count","resolve","cancel","raw","formatter","promise","then","$filter","DateFormatterService","input","ifEmpty","ret","directive","dateFormatterService","restrict","compile","element","text","formatted","replaceWith","catch","error","RequisitionNode","requisition","isDeployed","deployed","modified","foreignSource","dateStamp","lastImport","nodes","node","requisitionNode","push","nodesInDatabase","nodesDefined","length","isModified","indexOf","foreignId","getNode","idx","setNode","setDeployed","reset","className","RequisitionService","intf","ipAddress","description","snmpPrimary","services","svc","MetaDataConstants","Scope","scope","NODE","scoped_interface","scoped_service","context","RequisitionContext","key","value","displayScope","INTERFACE","SERVICE","displayInterface","displayService","name","bootbox","RequisitionsService","growl","synchronize","errorHandler","prompt","title","_","escape","message","inputType","inputOptions","buttons","confirm","label","swapButtonOrder","callback","result","rescanExisting","startTiming","synchronizeRequisition","success","doSynchronize","requisitions","getRequisition","setRequisition","String","Date","getTime","nodeLabel","snmpCommunity","snmpVersion","noSnmp","deviceUsername","devicePassword","enablePassword","accessMethod","autoEnable","categories","createRequisitionedNode","reqNode","assets","addNewCategory","path","run","c","put","RequisitionsData","Requisition","$cacheFactory","$window","$http","$timeout","$log","debug","requisitionsService","internal","cacheEnabled","cache","requisitionsUrl","requisitionNamesUrl","foreignSourcesUrl","foreignSourcesConfigUrl","monitoringLocationsUrl","snmpConfigUrl","errorHelp","defaultTimeout","timingStatus","isRunning","getCatchedConfigData","configName","get","setCatchedConfigData","configObject","getCachedRequisitionsData","setCachedRequisitionsData","requisitionsData","getCachedRequisition","getCachedNode","addQuickNode","quickNode","saveNode","reject","updateRequisition","existingReq","deployedReq","foreignIds","existingNode","clearCache","removeAll","removeRequisitionFromCache","reqIdx","ts","seconds","getTiming","getRequisitions","rd","when","url","data","onmsRequisition","updateDeployedStats","getRequisitionNames","r","updateDeployedStatsForRequisition","encodeURIComponent","req","updatedReq","method","params","addRequisition","emptyReq","post","deleteRequisition","deferredReqPending","delete","deferredReqDeployed","deferredFSPending","deferredFSDeployed","all","results","removeAllNodesFromRequisition","getOnmsRequisitionNode","categoriesChanged","cat","servicesChanged","interfaces","deleteNode","getForeignSourceDefinition","saveForeignSourceDefinition","foreignSourceDef","cloneForeignSourceDefinition","sourceRequisition","targetRequisition","fsDef","deleteForeignSourceDefinition","getAvailableDetectors","plugins","getAvailablePolicies","getAvailableServices","getAvailableAssets","getAvailableCategories","getAvailableLocations","locations","location","loc","isForeignIdOnRequisition","found","n","err","isNodeLabelOnRequisition","isIpAddressOnNode","isCategoryOnNode","category","isServiceOnNode","service","updateSnmpCommunity","quickAddNode","msg","verifyIPv4Address","ip","ipaddress","Address4","isValid","verifyIPv6Address","Address6","v6","isValidIPAddress","checkIpRange","ip1","ip2","bigInteger","compareTo","Util","base","document","getElementsByTagName","href","getBaseHref","booleanValue","elementName","checkboxes","getElementsByName","index","hasOwnProperty","checked","controller","$scope","$uibModalInstance","asset","assetsBlackList","assetFields","save","close","dismiss","getAvailableAssetFields","RequisitionMetaDataEntry","RequisitionInterface","other","toMetaDataEntry","entry","entryObj","allEntries","interface","iff","ri","removeEntriesForMissingScopedEntities","remove","doesReferencedEntityExist","addEntry","removeEntry","existingEntry","getOnmsMetaData","predicate","metaDataObject","getOnmsMetaDataForNode","getOnmsMetaDataForInterface","getOnmsMetaDataForService","getKeysInScopeOf","lookup","metaData","availableForeignSources","targetForeignSource","detector","availableDetectors","availableParameters","getAvailableParameters","availParam","parameter","param","addParameter","removeParameter","updateAvailableParameters","selectedDetector","class","parameters","detectors","orderedParams","pkey","j","p","policyView","moveView","detectorView","$routeParams","$uibModal","filterFilter","Configuration","policies","filters","policy","filteredDetectors","detectorsPageSize","detectorsMaxSize","detectorsTotalItems","filteredPolicies","policiesPageSize","policiesMaxSize","policiesTotalItems","goTo","handler","fsForm","$dirty","dialog","main","goTop","baseHref","goBack","ttl","indexOfPolicy","indexOfDetector","editPolicy","isNew","form","backdrop","keyboard","templateUrl","copy","pop","movePolicy","pos","max","size","position","maximum","dst","removePolicy","addPolicy","editDetector","moveDetector","removeDetector","addDetector","ok","initialize","updateFilteredPolicies","policiesCurrentPage","policiesNumPages","Math","ceil","updateFilteredDetectors","detectorsCurrentPage","detectorsNumPages","$watch","requisitionInterface","ipBlackList","primaryInterface","snmpPrimaryFields","id","availableServices","getSnmpPrimaryValues","field","addService","removeService","avail","resolveScopeReferences","interface_idx","interfacesWithServices","service_idx","availableScopes","originalKey","$controller","add","substract","move","assetView","metaDataView","interfaceView","nodeBasicView","nodePathoutagesView","nodeInterfacesView","nodeAssetsView","nodeMetaDataView","nodeCategoriesView","$cookies","availableCategories","availableLocations","foreignIdBlackList","doGoTo","nodeForm","goVerticalLayout","goHorizontalLayout","generateForeignId","formObj","$invalid","editAsset","assetToEdit","removeAsset","addAsset","addNewAsset","onMetadataTabSelect","$setPristine","editMetaData","removeMetaData","addMetaData","editInterface","intfToEdit","getPrimaryAddress","removeInterface","addInterface","addNewInterface","removeCategory","addCategory","refresh","getPrimaryIpAddress","policyParamOptionsView","policyParamStringView","policyParamFixedView","policyParamEditableView","availablePolicies","optionalParameters","updatePolicyParameters","policyConfig","required","isNonEmptyArray","myArray","constructor","toString","getTemplate","selectedPolicyClass","paramCfg","options","getParameterOptions","parameterKey","getOptionalParameters","quickAddPanelBasicView","quickAddPanelSnmpView","quickAddPanelCategoriesView","quickAddPanelCliView","quickAddPanelHelpView","QuickNode","foreignSources","$sanitize","availableAccessMethods","isSaving","provision","info","successMessage","quickAddNodeForm","isInvalid","modalProvision","modalCancel","extend","SynchronizeService","filteredNodes","pageSize","maxSize","totalItems","editForeignSource","getVerticalLayout","addNode","editNode","updateFilteredNodes","currentPage","refreshDeployedStats","refreshRequisition","savePageSize","customHandler","reqFilter","quickAddNodeView","cloneForeignsourceView","loaded","filteredRequisitions","clone","match","alert","edit","removeAllNodes","editDefaultForeignSource","resetDefaultForeignSource","refreshData","reloadAll","refreshRequisitions","reloadDeployed","updateFilteredRequisitions","finally","link","attrs","ctrl","$parsers","unshift","$setValidity","serviceName","s","$$hashKey","transclude","categoryName","$parent","keyName","isUnique","existingKeys","start","Number","kscTemplate","nodesTemplate","getNodes","criteria","comparator","response","goToChooseResources","getKscReports","kscReport","goToKscReport","ksc","globalErrorHandling","errorResponse","quickSearchTemplate","$resource","isArray","cancellable","SearchResource","$document","KeyCodes","Types","query","performSearchExecuted","showLoadingIndicator","showLoadingIndicatorDelay","performSearchDelay","performSearchPromise","performSearchHandle","showLoadingIndicatorPromise","shiftLastPressed","selectedIndex","event","isChild","$","has","target","isSelf","is","resetQuery","cancelRequest","keyCode","focus","select","getElementById","navigateSearchResult","parentComponent","parentHeight","clientHeight","resultHeight","resultOffset","offsetTop","scrollTop","type","triggerHandler","click","selected","$cancelRequest","selectIndex","onQueryChange","eachResult","more","item","showMoreElement","loadMore","endIndex","searchResult","isEmpty","str","RequisitionMetaData","city","building","parentForeignSource","_parentForeignId","parentForeignId","_parentNodeLabel","parentNodeLabel","hasParentInformation","nodeObject","interfaceObject","serviceObject","permissionDeniedTemplate","$rootScope","responseError","rejection","headers","$emit","$httpProvider","defaults","common","interceptors","$on","baseTags","reload","quickAddNodeStandaloneView","$routeProvider","otherwise","redirectTo","growlProvider","globalTimeToLive","globalPosition"],"mappings":"CAAA,SAA2CA,EAAMC,GAChD,GAAsB,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,SACb,GAAqB,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,OACP,CACJ,IAAIK,EAAIL,IACR,IAAI,IAAIM,KAAKD,GAAuB,iBAAZJ,QAAuBA,QAAUF,GAAMO,GAAKD,EAAEC,IAPxE,CASGC,OAAQ,WACX,O,8HCVAC,QAAQC,IAAI,sBAEZ,IAAMC,OAASC,EAAQ,GACvBA,EAAQ,IAERT,EAAOD,QAAUS,Q,qFCHjB,IA2FqB,EA3FfE,QAAUD,EAAQ,GAClBE,EAASF,EAAQ,KAIvB,SAASG,KAHTH,EAAQ,KAMRG,EAAkBC,UAAUC,KAAO,SAAcC,GAChD,IAAIC,EAAOC,KACPC,EAAgB,2BACpBb,OAAOc,iBAAcC,EAErB,IAAIC,EAAM,IAAIC,eACdD,EAAIE,mBAAqB,WACxB,IACC,GAAIF,EAAIG,aAAeF,eAAeG,KAAM,CAC3C,GAAmB,MAAfJ,EAAIK,OAAgB,CACvB,IAAIC,EAASC,KAAKC,MAAMR,EAAIS,cACxBH,EAAOI,sBAAwBJ,EAAOI,qBAAqBC,gBAC9D3B,OAAO4B,oBAAsBN,EAAOI,qBAAqBC,gBAAkBd,EAC3Eb,OAAOc,YAAcQ,EAAOI,qBAAqBG,SAEjD5B,QAAQC,IAAI,kDAAkDoB,GAC9DtB,OAAO4B,oBAAsBf,QAG9BZ,QAAQC,IAAI,yCAA2Cc,EAAIK,OAAS,IAAML,EAAIc,YAC9E9B,OAAO4B,oBAAsBf,EAE9BH,EAAcC,EAAMK,EAAIK,SAExB,MAAOU,GACR9B,QAAQC,IAAI,yCAA0C6B,GACtD/B,OAAO4B,oBAAsBf,EAC7BH,EAAcC,EAAMK,EAAIK,UAG1BL,EAAIgB,KAAK,MAAO,aAChBhB,EAAIiB,iBAAiB,SAAU,oBAC/BjB,EAAIkB,QAGL3B,EAAkBC,UAAU2B,kBAAoB,WAC/C,IAAKnC,OAAO4B,oBAEX,MADA3B,QAAQC,IAAI,wDACN,IAAIkC,MAAM,yDAIlB7B,EAAkBC,UAAU6B,UAAY,WAWvC,OAVAzB,KAAKuB,oBAEAvB,KAAK0B,UACLtC,OAAOc,YACVF,KAAK0B,QAAUtC,OAAOc,aAEtBb,QAAQsC,KAAK,oEACb3B,KAAK0B,QAAUhC,EAAOkC,GAAGC,UAGpB7B,KAAK0B,SAGb/B,EAAkBC,UAAUkC,OAAS,SAAgBC,GAGpD,GAFA/B,KAAKuB,oBAEDQ,QACH,OAAOA,EAGR,IAAMd,EAASjB,KAAKyB,YAEpB,OADmB/B,EAAOkC,GAAGG,EAAMd,GACjBe,cAAc5C,OAAO4B,sBAGxC,WAEC,GAAoB,oBAATiB,KAAsB,CAChC,IAAIC,EAAI,IAAIvC,EACZuC,EAAErC,KAAK,WACNT,OAAO+C,eAAiBD,SAGzB7C,QAAQC,IAAI,qEARd,GAeKF,OAAOK,SACVA,QAAQV,OAAO,oBAAqB,CAAC,OAAOF,QAAQ,uBAAwB,CAAC,YAAa,KAAM,SAA8BuD,EAAWC,GACxIhD,QAAQC,IAAI,qCAEZ,IAAIgD,EAAWD,EAAGE,QAEdC,EAAQ,EACRrD,EAAIiD,EAAU,WACbhD,OAAO+C,iBACV9C,QAAQC,IAAI,2BAA6BF,OAAO4B,qBAChDsB,EAASG,QAAQrD,OAAO+C,gBACxBC,EAAUM,OAAOvD,IAEJ,IAAVqD,MACHnD,QAAQC,IAAI,iEACZ8C,EAAUM,OAAOvD,KAEhB,KAEH,MAAO,CACNwD,IAAKvD,OAAO+C,eACZS,UAAWN,EAASO,QACpBf,OAAQ,SAASC,GAChB,OAAOO,EAASO,QAAQC,KAAK,SAASZ,GACrC,OAAOA,EAAEJ,OAAOC,WAMpB,eAAAtC,QAAQV,OAAO,sBAAf,OAA2C,WAAY,CAAC,UAAW,uBAAwB,SAASgE,EAASC,GAC5G,OAAO,SAAkBC,EAAOC,GAC/B,IAAIC,EAUJ,OAAIA,OAPHA,EAFG/D,OAAO+C,eAEJ/C,OAAO+C,eAAeL,OAAOmB,GAI7BF,EAAQ,OAARA,CAAgBE,EAAO,6BAItBE,EAEDD,MAITzD,QAAQV,OAAO,qBAAqBqE,UAAU,WAAY,CAAC,uBAAwB,SAASC,GAC3F,MAAO,CACNC,SAAU,IACVC,QAAS,SAASC,GACjBH,EAAqBvB,OAAO0B,EAAQC,QAAQX,KAAK,SAASY,GACzDF,EAAQG,YAAYD,KAClBE,MAAM,SAASzC,GACjB9B,QAAQwE,MAAM,oBAAsBL,EAAQC,OAAQtC,WAMxD9B,QAAQC,IAAI,8EAIdP,EAAOD,QAAUa,G,sIC/JjB,IAAMmE,EAAkBtE,EAAQ,IA2MhCT,EAAOD,QA5La,SAAqBiF,EAAaC,GAIpD,IAAMjE,EAAOC,KAqLb,OA5KAD,EAAKkE,SAAWD,EAShBjE,EAAKmE,UAAW,EAShBnE,EAAKoE,cAAgBJ,EAAY,kBASjChE,EAAKqE,UAAYL,EAAY,gBAAiB,eAS9ChE,EAAKsE,WAAaN,EAAY,eAS9BhE,EAAKuE,MAAQ,IAEb,aAAA7E,SAAO,KAAPA,QAAgBsE,EAAYQ,KAAM,SAASA,GACzC,IAAIC,EAAkB,IAAIV,EAAgB/D,EAAKoE,cAAeI,EAAMP,GACpEjE,EAAKuE,MAAMG,KAAKD,KAUlBzE,EAAK2E,gBAAkB,EASvB3E,EAAK4E,aAAe5E,EAAKuE,MAAMM,OAU/B7E,EAAK8E,WAAa,WAChB,QAAI9E,EAAKmE,WAGAnE,EAAKkE,UAYhBlE,EAAK+E,QAAU,SAASC,GACtB,IAAI,IAAI5F,EAAI,EAAGA,EAAIY,EAAKuE,MAAMM,OAAQzF,IACpC,GAAIY,EAAKuE,MAAMnF,GAAG4F,YAAcA,EAC9B,OAAO5F,EAGX,OAAQ,GAYVY,EAAKiF,QAAU,SAASD,GACtB,IAAIE,GAAM,aAAAlF,GAAI,KAAJA,EAAagF,GACvB,OAAOE,EAAM,EAAI,KAAOlF,EAAKuE,MAAMW,IAWrClF,EAAKmF,QAAU,SAASX,GACtB,IAAIU,GAAM,aAAAlF,GAAI,KAAJA,EAAawE,EAAKQ,WACxBE,EAAM,GACRlF,EAAKuE,MAAMG,KAAKF,GAChBxE,EAAK4E,gBAEL5E,EAAKuE,MAAMW,GAAOV,EAEpBxE,EAAKmE,UAAW,EAChBnE,EAAKqE,WAAY,gBAWnBrE,EAAKoF,YAAc,SAASlB,GAC1BlE,EAAKkE,SAAWA,EAChBlE,EAAKmE,UAAW,GAChB,aAAAzE,SAAO,KAAPA,QAAgBM,EAAKuE,MAAO,SAASC,GACnCA,EAAKN,SAAWA,EAChBM,EAAKL,UAAW,IAElBnE,EAAKsE,WAAaJ,GAAW,eAAa,MAU5ClE,EAAKqF,MAAQ,WACXrF,EAAKuE,MAAQ,GACbvE,EAAK4E,aAAe,EACpB5E,EAAK2E,gBAAkB,EACvB3E,EAAKmE,UAAW,EAChBnE,EAAKqE,WAAY,gBAGnBrE,EAAKsF,UAAY,cAEVtF,I,gGCnMT,IAAMuF,EAAqB9F,EAAQ,IAuEnCT,EAAOD,QA9DsB,SAA8ByG,GAGzD,IAAMxF,EAAOC,KAwDb,OA/CAD,EAAKyF,UAAYD,EAAK,WAStBxF,EAAK0F,YAAcF,EAAI,MASvBxF,EAAK2F,YAAcH,EAAK,gBASxBxF,EAAKU,OAAS,UACV8E,GAAQA,EAAI,SACdxF,EAAKU,OAA4B,MAAnB8E,EAAI,OAAqB,UAAY,aAUrDxF,EAAK4F,SAAW,IAEhB,aAAAlG,SAAO,KAAPA,QAAgB8F,EAAK,qBAAsB,SAASK,GAClD7F,EAAK4F,SAASlB,KAAK,IAAIa,EAAmBM,MAG5C7F,EAAKsF,UAAY,uBAEVtF,I,6CCrET,IAAM8F,EAAoBrG,EAAQ,KAC5BsG,EAAQD,EAAkBC,MAyDhC/G,EAAOD,QAjD0B,WAG/B,IAAMiB,EAAOC,KA2Cb,OAxCAD,EAAKgG,MAAQD,EAAME,KAGnBjG,EAAKkG,iBAAmB,KAGxBlG,EAAKmG,eAAiB,KAGtBnG,EAAKoG,QAAUN,EAAkBO,mBAEjCrG,EAAKsG,IAAM,KAEXtG,EAAKuG,MAAQ,KAEbvG,EAAKwG,aAAe,WAClB,OAAIxG,EAAKgG,QAAUD,EAAMU,UAChB,YACEzG,EAAKgG,QAAUD,EAAMW,QACvB,UAEF,QAGT1G,EAAK2G,iBAAmB,WACtB,OAA8B,OAA1B3G,EAAKkG,iBACAlG,EAAKkG,iBAAiBT,UAExB,MAGTzF,EAAK4G,eAAiB,WACpB,OAA4B,OAAxB5G,EAAKmG,eACAnG,EAAKmG,eAAeU,KAEtB,MAGT7G,EAAKsF,UAAY,2BAEVtF,I,uCC3CThB,EAAOD,QAAU,CAACgH,MARJ,CACVE,KAAM,OACNQ,UAAW,YACXC,QAAS,WAKYL,mBAFE,gB,uCCd3B,IAAMS,EAAUrH,EAAQ,IAExBA,EAAQ,IAWNC,QAAQV,OAAO,qBAYdF,QAAQ,qBAAsB,CAAC,sBAAuB,QAAS,SAASiI,EAAqBC,GAC5F,MAAO,CAaLC,YAAa,SAASjD,EAAakD,GAejCJ,EAAQK,OAAO,CACXC,MAAO,4BAA+BC,EAAEC,OAAOtD,EAAYI,eAC3DmD,QAAS,uCACTC,UAAW,QACXC,aAAc,CACd,CACI/D,KAAM,iBACN6C,MAAO,QAEX,CACI7C,KAAM,wBACN6C,MAAO,SAEX,CACI7C,KAAM,cACN6C,MAAO,WAGXmB,QAAS,CACDC,QAAS,CACLC,MAAO,eAEXjF,OAAQ,CACJiF,MAAO,WAGnBC,gBAAiB,OACjBC,SAAU,SAAUC,GACD,OAAXA,GAtCQ,SAAS/D,EAAagE,GACxCjB,EAAoBkB,cACpBlB,EAAoBmB,uBAAuBlE,EAAYI,cAAe4D,GAAgBjF,KACpF,WACEiE,EAAMmB,QAAQ,6CAA+Cd,EAAEC,OAAOtD,EAAYI,eAAiB,qBAAuB4D,EAAiB,8DAC3IhE,EAAYoB,aAAY,IAE1B8B,GAgCQkB,CAAcpE,EAAa+D,Y,4FCJ/C/I,EAAOD,QApEkB,WAGvB,IAAMiB,EAAOC,KA8Db,OArDAD,EAAKqI,aAAe,GAWpBrI,EAAK+E,QAAU,SAASX,GACtB,IAAI,IAAIhF,EAAI,EAAGA,EAAIY,EAAKqI,aAAaxD,OAAQzF,IAC3C,GAAIY,EAAKqI,aAAajJ,GAAGgF,gBAAkBA,EACzC,OAAOhF,EAGX,OAAQ,GAYVY,EAAKsI,eAAiB,SAASlE,GAC7B,IAAIc,GAAM,aAAAlF,GAAI,KAAJA,EAAaoE,GACvB,OAAOc,EAAM,EAAI,KAAOlF,EAAKqI,aAAanD,IAW5ClF,EAAKuI,eAAiB,SAASvE,GAC7B,IAAIkB,GAAM,aAAAlF,GAAI,KAAJA,EAAagE,EAAYI,eAC/Bc,EAAM,EACRlF,EAAKqI,aAAa3D,KAAKV,GAEvBhE,EAAKqI,aAAanD,GAAOlB,GAI7BhE,EAAKsF,UAAY,mBAEVtF,I,2FC5ET,IAAM+D,EAAkBtE,EAAQ,IAyFhCT,EAAOD,QA5EW,WAIhB,IAAMiB,EAAOC,KAqEb,OAnEAD,EAAKoE,cAAgB,KACrBpE,EAAKgF,UAAYwD,QAAO,IAAIC,MAAOC,WACnC1I,EAAK2I,UAAY,KACjB3I,EAAKyF,UAAY,KACjBzF,EAAK4I,cAAgB,SACrB5I,EAAK6I,YAAc,MACnB7I,EAAK8I,QAAS,EACd9I,EAAK+I,eAAiB,KACtB/I,EAAKgJ,eAAiB,KACtBhJ,EAAKiJ,eAAiB,KACtBjJ,EAAKkJ,aAAe,KACpBlJ,EAAKmJ,YAAa,EAClBnJ,EAAKoJ,WAAa,GAUlBpJ,EAAKqJ,wBAA0B,WAAW,YACpCC,EAAU,IAAIvF,EAAgB/D,EAAKoE,cAAe,CACpD,aAAcpE,EAAKgF,UACnB,aAAchF,EAAK2I,UACnB,UAAa,CAAC,CACZ,UAAW3I,EAAKyF,UAChB,eAAgBzF,EAAK8I,OAAS,IAAM,MAEtC,SAAY9I,EAAKoJ,aAChB,GAgBH,OAfIpJ,EAAK+I,gBAAiD,MAA/B,eAAA/I,EAAK+I,gBAAL,SACzBO,EAAQC,OAAO7E,KAAK,CAAC,KAAQ,WAAY,MAAS1E,EAAK+I,iBAErD/I,EAAKgJ,gBAAiD,MAA/B,eAAAhJ,EAAKgJ,gBAAL,SACzBM,EAAQC,OAAO7E,KAAK,CAAC,KAAQ,WAAY,MAAS1E,EAAKgJ,iBAErDhJ,EAAKiJ,gBAAiD,MAA/B,eAAAjJ,EAAKiJ,gBAAL,SACzBK,EAAQC,OAAO7E,KAAK,CAAC,KAAQ,SAAU,MAAS1E,EAAKiJ,iBAEnDjJ,EAAKkJ,cAA6C,MAA7B,eAAAlJ,EAAKkJ,cAAL,SACvBI,EAAQC,OAAO7E,KAAK,CAAC,KAAQ,aAAc,MAAS1E,EAAKkJ,eAEvDlJ,EAAKmJ,YACPG,EAAQC,OAAO7E,KAAK,CAAC,KAAQ,aAAc,MAAS,MAE/C4E,GAWTtJ,EAAKwJ,eAAiB,WAIpB,OAHAxJ,EAAKoJ,WAAW1E,KAAK,CACnBmC,KAAM,KAED7G,EAAKoJ,WAAWvE,OAAQ,GAGjC7E,EAAKsF,UAAY,YAEVtF,I,uBCtFT,IAAIyJ,EAAO,0GAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,ocAEXzK,EAAOD,QAAU0K,G,wBCHjB,IAAIA,EAAO,6HAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,usCAEXzK,EAAOD,QAAU0K,G,wBCHjB,IAAIA,EAAO,4HAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,2sBAEXzK,EAAOD,QAAU0K,G,wBCHjB,IAAIA,EAAO,kIAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,y+BAEXzK,EAAOD,QAAU0K,G,wBCHjB,IAAIA,EAAO,2HAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,gxCAEXzK,EAAOD,QAAU0K,G,wBCHjB,IAAIA,EAAO,4HAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,omDAEXzK,EAAOD,QAAU0K,G,4LCEjB,IAAMI,EAAmBpK,EAAQ,KAC3BqK,EAAmBrK,EAAQ,KAC3BsE,EAAmBtE,EAAQ,IAM/BC,QAAQV,OAAO,qBAuBdF,QAAQ,sBAAuB,CAAC,KAAM,gBAAiB,UAAW,QAAS,WAAY,OAAQ,SAASwD,EAAIyH,EAAeC,EAASC,EAAOC,EAAUC,GAEpJA,EAAKC,MAAM,oCAEX,IAAIC,EAAsB,CAC1BA,SAA+B,IA21C/B,OAv1CAA,EAAoBC,SAASC,cAAe,EAC5CF,EAAoBC,SAASE,MAAQT,EAAc,uBAInDM,EAAoBC,SAASG,gBAAkB,oBAC/CJ,EAAoBC,SAASI,oBAAsB,wBACnDL,EAAoBC,SAASK,kBAAoB,sBACjDN,EAAoBC,SAASM,wBAA0B,4BACvDP,EAAoBC,SAASO,uBAAyB,2BACtDR,EAAoBC,SAASQ,cAAgB,kBAC7CT,EAAoBC,SAASS,UAAY,gEAIzCV,EAAoBC,SAASU,eAAiB,EAC9CX,EAAoBC,SAASW,aAAe,CAAEC,WAAW,GAYzDb,EAAoBC,SAASa,qBAAuB,SAASC,GAC3D,OAAOf,EAAoBC,SAASE,MAAMa,IAAID,IAahDf,EAAoBC,SAASgB,qBAAuB,SAASF,EAAYG,GACnElB,EAAoBC,SAASC,cAC/BF,EAAoBC,SAASE,MAAMZ,IAAIwB,EAAYG,IAavDlB,EAAoBC,SAASkB,0BAA4B,WACvD,OAAOnB,EAAoBC,SAASa,qBAAqB,qBAY3Dd,EAAoBC,SAASmB,0BAA4B,SAASC,GAChE,OAAOrB,EAAoBC,SAASgB,qBAAqB,mBAAoBI,IAa/ErB,EAAoBC,SAASqB,qBAAuB,SAASvH,GAC3D,IAAMsH,EAAmBrB,EAAoBC,SAASkB,4BACtD,OAAKE,EAGEA,EAAiBpD,eAAelE,GAF9B,MAgBXiG,EAAoBC,SAASsB,cAAgB,SAASxH,EAAeY,GACnE,IAAMhB,EAAcqG,EAAoBC,SAASqB,qBAAqBvH,GACtE,OAAKJ,EAGEA,EAAYiB,QAAQD,GAFlB,MAcXqF,EAAoBC,SAASuB,aAAe,SAASC,GACnD,IAAItH,EAAOsH,EAAUzC,0BAErB,OAAOgB,EAAoB0B,SAASvH,GAAMzB,KACxC,WAEE,OADAoH,EAAKC,MAAM,0BAA4B5F,EAAKmE,UAAY,oBACjD0B,EAAoBnC,uBAAuB1D,EAAKJ,cAAe,SAASrB,KAC7E,WAEE,OADAoH,EAAKC,MAAM,iCAAmC5F,EAAKJ,cAAgB,2BAC5DI,GAET,WACE,OAAOlC,EAAG0J,OAAO,kCAAoCxH,EAAKJ,kBAIhE,WACE,OAAO9B,EAAG0J,OAAO,wCAA0CxH,EAAKJ,kBAetEiG,EAAoBC,SAAS2B,kBAAoB,SAASC,EAAaC,GACrEhC,EAAKC,MAAM,mEAAqE+B,EAAYtF,KAAO,KACnG,IAAIuF,EAAaD,EAAY,cAC7BD,EAAYvH,gBAAkByH,EAAWvH,OACzCqH,EAAYhI,SAA+B,EAApBkI,EAAWvH,OAClCqH,EAAY5H,WAAa6H,EAAY,iBACrC,IAAK,IAAIjH,EAAM,EAAGA,EAAMkH,EAAWvH,OAAQK,IAAO,CAChD,IAAImH,EAAeH,EAAYjH,QAAQmH,EAAWlH,IAC9CmH,IACFA,EAAanI,UAAW,GAG5B,OAAOgI,GAYT7B,EAAoBiC,WAAa,WAG/B,OAFAnC,EAAKC,MAAM,2DACXC,EAAoBC,SAASE,MAAM+B,aAC5B,GAaTlC,EAAoBmC,2BAA6B,SAASpI,GACxD,IAAMsH,EAAmBrB,EAAoBC,SAASkB,4BACtD,GAAIE,EAAkB,CACpB,IACiB,EADbe,GAAS,aAAAf,GAAgB,KAAhBA,EAAyBtH,GACtC,GAAc,GAAVqI,EAGF,OAFAtC,EAAKC,MAAM,+CAAiDhG,EAAgB,6BAC5E,eAAAsH,EAAiBrD,cAAjB,OAAqCoE,EAAQ,IACtC,EAGX,OAAO,GAaTpC,EAAoBpC,YAAc,SAASyE,GACzC,IAAMC,EAAUD,GAASrC,EAAoBC,SAASU,eACtDb,EAAKC,MAAM,oCAAsCuC,EAAU,aAC3DtC,EAAoBC,SAASW,aAAaC,WAAY,EACtDhB,EAAS,WACPG,EAAoBC,SAASW,aAAaC,WAAY,GAC3C,IAAVyB,IAWLtC,EAAoBuC,UAAY,WAC9B,OAAOvC,EAAoBC,SAASW,cAkBtCZ,EAAoBwC,gBAAkB,WACpC,IAAMC,EAAKzC,EAAoBC,SAASkB,4BACxC,GAAIsB,EAEF,OADA3C,EAAKC,MAAM,qEACJ9H,EAAGyK,KAAKD,GAGjB,IAAIvK,EAAWD,EAAGE,QACdwK,EAAM3C,EAAoBC,SAASG,gBAyBvC,OAxBAN,EAAKC,MAAM,6CACXH,EAAMoB,IAAI2B,GACT7E,QAAQ,SAAS8E,GAChB,IAAIvB,EAAmB,IAAI7B,GAC3B,aAAAnK,SAAO,KAAPA,QAAgBuN,EAAK,gBAAiB,SAASC,GAC7C,IAAIlJ,EAAc,IAAI8F,EAAYoD,GAAiB,GACnD/C,EAAKC,MAAM,uCAAyCpG,EAAYI,cAAgB,KAChFsH,EAAiBrD,aAAa3D,KAAKV,KAErCqG,EAAoB8C,oBAAoBzB,GAAkB3I,KACxD,WACEsH,EAAoBC,SAASmB,0BAA0BC,GACvDnJ,EAASG,QAAQgJ,IAEnB,SAAS5H,GACPvB,EAASyJ,OAAOlI,OAIrBA,MAAM,SAASA,EAAOpD,GACrByJ,EAAKrG,MAAM,wBAA0BkJ,EAAM,WAAYlJ,EAAOpD,GAC9D6B,EAASyJ,OAAO,oCAAsC3B,EAAoBC,SAASS,aAG9ExI,EAASO,SAgBlBuH,EAAoB+C,oBAAsB,WACxC,IAAMzM,EAAS0J,EAAoBC,SAASa,qBAAqB,oBACjE,GAAIxK,EAEF,OADAwJ,EAAKC,MAAM,qEACJ9H,EAAGyK,KAAKpM,GAGjB,IAAI4B,EAAWD,EAAGE,QACdwK,EAAM3C,EAAoBC,SAASI,oBAavC,OAZAP,EAAKC,MAAM,kDACXH,EAAMoB,IAAI2B,GACT7E,QAAQ,SAAS8E,GAChB9C,EAAKC,MAAM,8CACXC,EAAoBC,SAASgB,qBAAqB,mBAAoB2B,EAAK,mBAC3E1K,EAASG,QAAQuK,EAAK,qBAEvBnJ,MAAM,SAASA,EAAOpD,GACrByJ,EAAKrG,MAAM,4BAA8BkJ,EAAM,WAAYlJ,EAAOpD,GAClE6B,EAASyJ,OAAO,qCAAuC3B,EAAoBC,SAASS,aAG/ExI,EAASO,SAclBuH,EAAoB8C,oBAAsB,SAASzB,GACjD,IAAInJ,EAAWD,EAAGE,QACdwK,EAAM3C,EAAoBC,SAASG,gBAAkB,kBAuBzD,OAtBAN,EAAKC,MAAM,wDACXH,EAAMoB,IAAI2B,GACT7E,QAAQ,SAAS8E,IAChB,aAAAvN,SAAO,KAAPA,QAAgBgM,EAAiBrD,aAAc,SAAS6D,GACtD,IAAIC,EAAc,MAClB,aAAAzM,SAAO,KAAPA,QAAgBuN,EAAK,kBAAmB,SAASI,GAC3CA,EAAExG,OAASqF,EAAY9H,gBACzB+H,EAAckB,KAGblB,EAGH9B,EAAoBC,SAAS2B,kBAAkBC,EAAaC,GAF5DD,EAAY9G,aAAY,KAK5B7C,EAASG,QAAQgJ,KAElB5H,MAAM,SAASA,EAAOpD,GACrByJ,EAAKrG,MAAM,4BAA8BkJ,EAAM,WAAYlJ,EAAOpD,GAClE6B,EAASyJ,OAAO,2CAA6C3B,EAAoBC,SAASS,aAErFxI,EAASO,SAelBuH,EAAoBiD,kCAAoC,SAASpB,GAC/D,IAAI3J,EAAWD,EAAGE,QACdwK,EAAM3C,EAAoBC,SAASG,gBAAkB,mBAAqB8C,mBAAmBrB,EAAY9H,eAW7G,OAVA+F,EAAKC,MAAM,qFAAuF8B,EAAY9H,eAC9G6F,EAAMoB,IAAI2B,GACT7E,QAAQ,SAASgE,GAChB9B,EAAoBC,SAAS2B,kBAAkBC,EAAaC,GAC5D5J,EAASG,QAAQwJ,KAElBpI,MAAM,SAASA,EAAOpD,GACrByJ,EAAKrG,MAAM,0CAA4CkJ,EAAM,WAAYlJ,EAAOpD,GAChF6B,EAASG,QAAQwJ,KAEZ3J,EAASO,SAiBlBuH,EAAoB/B,eAAiB,SAASlE,GAC5C,IAAMJ,EAAcqG,EAAoBC,SAASqB,qBAAqBvH,GACtE,GAAIJ,EAEF,OADAmG,EAAKC,MAAM,8CAAgDhG,GACpD9B,EAAGyK,KAAK/I,GAGjB,IAAIzB,EAAWD,EAAGE,QACdwK,EAAM3C,EAAoBC,SAASG,gBAAkB,IAAM8C,mBAAmBnJ,GAqBlF,OApBA+F,EAAKC,MAAM,uCAAyChG,GACpD6F,EAAMoB,IAAI2B,GACT7E,QAAQ,SAAS8E,GAChB,IAAMO,EAAM,IAAI1D,EAAYmD,GAC5B9C,EAAKC,MAAM,mCAAqChG,GAChDiG,EAAoBiD,kCAAkCE,GAAKzK,KACzD,SAAS0K,GACP,IAAM/B,EAAmBrB,EAAoBC,SAASkB,4BAClDE,IACFvB,EAAKC,MAAM,kDAAoDhG,GAC/DsH,EAAiBnD,eAAekF,IAElClL,EAASG,QAAQ+K,OAItB3J,MAAM,SAASA,EAAOpD,GACrByJ,EAAKrG,MAAM,uBAAyBkJ,EAAM,WAAYlJ,EAAOpD,GAC7D6B,EAASyJ,OAAO,mCAAqC5H,EAAgB,IAAMiG,EAAoBC,SAASS,aAEnGxI,EAASO,SAkBlBuH,EAAoBnC,uBAAyB,SAAS9D,EAAe4D,GACnE,IAAM0D,EAAmBrB,EAAoBC,SAASkB,4BACtD,GAAIE,IACW,aAAAA,GAAgB,KAAhBA,EAAyBtH,GACzB,EACX,OAAO9B,EAAG0J,OAAO,qBAAuB5H,EAAgB,oBAI5D,IAAI7B,EAAWD,EAAGE,QACdwK,EAAM3C,EAAoBC,SAASG,gBAAkB,IAAM8C,mBAAmBnJ,GAAiB,UAgBnG,OAfA+F,EAAKC,MAAM,qDAAuDhG,EAAgB,wBAA0B4D,GAC5GiC,EAAM,CAAEyD,OAAQ,MAAOV,IAAKA,EAAKW,OAAQ,CAAE3F,eAAgBA,KAC1DG,QAAQ,SAAS8E,GAChB9C,EAAKC,MAAM,oDAAsDhG,GACjE,IAAMiJ,EAAIhD,EAAoBC,SAASqB,qBAAqBvH,GACxDiJ,IACFlD,EAAKC,MAAM,mEAAqEhG,GAChFiJ,EAAEjI,aAAY,IAEhB7C,EAASG,QAAQuK,KAElBnJ,MAAM,SAASA,EAAOpD,GACrByJ,EAAKrG,MAAM,+BAAiCkJ,EAAM,WAAYlJ,EAAOpD,GACrE6B,EAASyJ,OAAO,sCAAwC5H,EAAgB,IAAMiG,EAAoBC,SAASS,aAEtGxI,EAASO,SAiBlBuH,EAAoBuD,eAAiB,SAASxJ,GAE5C,GADYiG,EAAoBC,SAASqB,qBAAqBvH,GAE5D,OAAO9B,EAAG0J,OAAO,yBAA2B5H,EAAgB,uBAG9D,IAAI7B,EAAWD,EAAGE,QACdqL,EAAW,CAAE,iBAAkBzJ,EAAeI,KAAM,IACpDwI,EAAM3C,EAAoBC,SAASG,gBAgBvC,OAfAN,EAAKC,MAAM,sCAAwChG,GACnD6F,EAAM6D,KAAKd,EAAKa,GACf1F,QAAQ,WACP,IAAInE,EAAc,IAAI8F,EAAY+D,GAAU,GAC5C1D,EAAKC,MAAM,qCAAuCpG,EAAYI,eAC9D,IAAM6I,EAAO5C,EAAoBC,SAASkB,4BACtCyB,IACF9C,EAAKC,MAAM,uCAAyChG,EAAgB,4BACpE6I,EAAK5E,aAAa3D,KAAKV,IAEzBzB,EAASG,QAAQsB,KAChBF,MAAM,SAASA,EAAOpD,GACvByJ,EAAKrG,MAAM,wBAA0BkJ,EAAM,WAAYlJ,EAAOpD,GAC9D6B,EAASyJ,OAAO,8BAAgC5H,EAAgB,IAAMiG,EAAoBC,SAASS,aAE9FxI,EAASO,SAkBlBuH,EAAoB0D,kBAAoB,SAAS3J,GAC/C,IAAMsH,EAAmBrB,EAAoBC,SAASkB,4BACtD,GAAIE,EAAkB,CACpB,IAAIe,GAAS,aAAAf,GAAgB,KAAhBA,EAAyBtH,GACtC,GAAIqI,EAAS,EACX,OAAOnK,EAAG0J,OAAO,qBAAuB5H,EAAgB,oBAE1D,IAAIoJ,EAAM9B,EAAiBrD,aAAaoE,GACxC,GAA0B,EAAtBe,EAAI7I,gBACN,OAAOrC,EAAG0J,OAAO,qBAAuB5H,EAAgB,aAAeoJ,EAAI7I,gBAAkB,iDAIjG,IAAIpC,EAAWD,EAAGE,QAElB2H,EAAKC,MAAM,2CAA6ChG,GACxD,IAAI4J,EAAsB/D,EAAMgE,OAAO5D,EAAoBC,SAASG,gBAAkB,IAAM8C,mBAAmBnJ,IAC3G8J,EAAsBjE,EAAMgE,OAAO5D,EAAoBC,SAASG,gBAAkB,aAAe8C,mBAAmBnJ,IACpH+J,EAAqBlE,EAAMgE,OAAO5D,EAAoBC,SAASK,kBAAoB,IAAM4C,mBAAmBnJ,IAC5GgK,EAAqBnE,EAAMgE,OAAO5D,EAAoBC,SAASK,kBAAoB,aAAe4C,mBAAmBnJ,IAYzH,OAVA9B,EAAG+L,IAAI,CAAEL,EAAoBE,EAAqBC,EAAmBC,IACpErL,KAAK,SAASuL,GACbnE,EAAKC,MAAM,0CAA4ChG,GACvDiG,EAAoBmC,2BAA2BpI,GAC/C7B,EAASG,QAAQ4L,IAChB,SAASxK,EAAOpD,GACjByJ,EAAKrG,MAAM,8CAA+CA,EAAOpD,GACjE6B,EAASyJ,OAAO,iCAAmC5H,EAAgB,IAAMiG,EAAoBC,SAASS,aAGjGxI,EAASO,SAkBlBuH,EAAoBkE,8BAAgC,SAASnK,GAC3D,IAAMsH,EAAmBrB,EAAoBC,SAASkB,4BACtD,GAAIE,IACGA,EAAiBpD,eAAelE,GACnC,OAAO9B,EAAG0J,OAAO,qBAAuB5H,EAAgB,oBAI5D,IAAI7B,EAAWD,EAAGE,QACdwB,EAAc,CAAC,iBAAkBI,EAAeI,KAAM,IAC1D2F,EAAKC,MAAM,kEAAoEhG,GAC/E,IAAI4I,EAAM3C,EAAoBC,SAASG,gBAuBvC,OAtBAR,EAAM6D,KAAKd,EAAKhJ,GACfmE,QAAQ,SAAS8E,GAChB9C,EAAKC,MAAM,iEAAmEhG,GAC9EiG,EAAoBnC,uBAAuB9D,EAAe,SAASrB,KACjE,WACEoH,EAAKC,MAAM,kDAAoDhG,EAAgB,2BAC/E,IAAMoJ,EAAMnD,EAAoBC,SAASqB,qBAAqBvH,GAC1DoJ,IACFrD,EAAKC,MAAM,uDAAyDhG,EAAgB,0BACpFoJ,EAAInI,SAEN9C,EAASG,QAAQuK,IAEnB,WACE1K,EAASyJ,OAAO,kCAAoC5H,OAGvDN,MAAM,SAASA,EAAOpD,GACvByJ,EAAKrG,MAAM,uCAAyCkJ,EAAM,WAAYlJ,EAAOpD,GAC7E6B,EAASyJ,OAAO,4CAA8C5H,EAAgB,IAAMiG,EAAoBC,SAASS,aAG5GxI,EAASO,SAkBlBuH,EAAoBpF,QAAU,SAASb,EAAeY,GACpD,IAAMR,EAAO6F,EAAoBC,SAASsB,cAAcxH,EAAeY,GACvE,GAAIR,EAEF,OADA2F,EAAKC,MAAM,uCAAyCpF,EAAY,IAAMZ,GAC/D9B,EAAGyK,KAAKvI,GAGjB,IAAIjC,EAAWD,EAAGE,QACdwK,EAAO3C,EAAoBC,SAASG,gBAAkB,IAAM8C,mBAAmBnJ,GAAiB,UAAYmJ,mBAAmBvI,GAkBnI,OAjBAmF,EAAKC,MAAM,yBAA2BpF,EAAY,IAAMZ,GACxD6F,EAAMoB,IAAI2B,GACT7E,QAAQ,SAAS8E,GAChB,IAAIzI,EAAO,IAAIT,EAAgBK,EAAe6I,GAC9C9C,EAAKC,MAAM,qBAAuBpF,EAAY,IAAMZ,GACpD,IAAMJ,EAAcqG,EAAoBC,SAASqB,qBAAqBvH,GAClEJ,IACFmG,EAAKC,MAAM,2CAA6ChG,GACxDJ,EAAYmB,QAAQX,IAEtBjC,EAASG,QAAQ8B,KAElBV,MAAM,SAASA,EAAOpD,GACrByJ,EAAKrG,MAAM,gBAAkBkJ,EAAM,WAAYlJ,EAAOpD,GACtD6B,EAASyJ,OAAO,wBAA0BhH,EAAY,qBAAuBZ,EAAgB,IAAMiG,EAAoBC,SAASS,aAG3HxI,EAASO,SAiBlBuH,EAAoB0B,SAAW,SAASvH,GACtC,IAAIjC,EAAWD,EAAGE,QACdiC,EAAkBD,EAAKgK,yBAEvBxB,EAAM3C,EAAoBC,SAASG,gBAAkB,IAAM8C,mBAAmB/I,EAAKJ,eAAiB,SA8CxG,OA7CA+F,EAAKC,MAAM,yBAA2B5F,EAAKmE,UAAY,mBAAqBnE,EAAKJ,eACjF6F,EAAM6D,KAAKd,EAAKvI,GACf0D,QAAQ,SAAS8E,GAChB9C,EAAKC,MAAM,wBAA0B5F,EAAKmE,UAAY,mBAAqBnE,EAAKJ,eAChFI,EAAKL,UAAW,EAChB,IAAMH,EAAcqG,EAAoBC,SAASqB,qBAAqBnH,EAAKJ,eACvEJ,GACFA,EAAYmB,QAAQX,GAGtB,IAAI4E,EAAaiB,EAAoBC,SAASa,qBAAqB,oBACnE,GAAI/B,EAAY,CACd,IAAIqF,GAAoB,GACxB,aAAA/O,SAAO,KAAPA,QAAgB8E,EAAK4E,WAAY,SAASsF,IACF,KAAlC,aAAAtF,GAAU,KAAVA,EAAmBsF,EAAI7H,QACzB4H,GAAoB,EACpBrF,EAAW1E,KAAKgK,EAAI7H,SAGpB4H,GACFpE,EAAoBC,SAASgB,qBAAqB,mBAAoBlC,GAI1E,IAAIxD,EAAWyE,EAAoBC,SAASa,qBAAqB,kBACjE,GAAIvF,EAAU,CACZ,IAAI+I,GAAkB,GACtB,aAAAjP,SAAO,KAAPA,QAAgB8E,EAAKoK,WAAY,SAASpJ,IACxC,aAAA9F,SAAO,KAAPA,QAAgB8F,EAAKI,SAAU,SAASC,IACF,KAAhC,aAAAD,GAAQ,KAARA,EAAiBC,EAAIgB,QACvB8H,GAAkB,EAClB/I,EAASlB,KAAKmB,EAAIgB,WAIpB8H,GACFtE,EAAoBC,SAASgB,qBAAqB,iBAAkB1F,GAGxErD,EAASG,QAAQuK,KAChBnJ,MAAM,SAASA,EAAOpD,GACvByJ,EAAKrG,MAAM,kBAAoBkJ,EAAM,WAAYlJ,EAAOpD,GACxD6B,EAASyJ,OAAO,oBAAsBxH,EAAKQ,UAAY,mBAAqBR,EAAKJ,cAAgB,IAAMiG,EAAoBC,SAASS,aAG/HxI,EAASO,SAclBuH,EAAoBwE,WAAa,SAASrK,GACxC,IAAIjC,EAAWD,EAAGE,QAEdwK,EAAM3C,EAAoBC,SAASG,gBAAkB,IAAM8C,mBAAmB/I,EAAKJ,eAAiB,UAAYmJ,mBAAmB/I,EAAKQ,WAsB5I,OArBAmF,EAAKC,MAAM,6BAA+B5F,EAAKmE,UAAY,qBAAuBnE,EAAKJ,eACvF6F,EAAMgE,OAAOjB,GACZ7E,QAAQ,SAAS8E,GAChB9C,EAAKC,MAAM,4BAA8B5F,EAAKmE,UAAY,mBAAqBnE,EAAKJ,eACpF,IAAMiJ,EAAIhD,EAAoBC,SAASqB,qBAAqBnH,EAAKJ,eACjE,GAAIiJ,EAAG,CACL,IACc,EADVnI,GAAM,aAAAmI,GAAC,KAADA,EAAU7I,EAAKQ,YACd,EAAPE,IACFiF,EAAKC,MAAM,6BAA+B5F,EAAKQ,UAAY,IAAMR,EAAKJ,cAAgB,6BACtF,eAAAiJ,EAAE9I,OAAF,OAAeW,EAAK,GACpBmI,EAAEzI,eACFyI,EAAElJ,UAAW,EACbkJ,EAAEhJ,WAAY,gBAGlB9B,EAASG,QAAQuK,KAChBnJ,MAAM,SAASA,EAAOpD,GACvByJ,EAAKrG,MAAM,sBAAwBkJ,EAAM,WAAYlJ,EAAOpD,GAC5D6B,EAASyJ,OAAO,sBAAwBxH,EAAKQ,UAAY,qBAAuBR,EAAKJ,cAAgB,IAAMiG,EAAoBC,SAASS,aAGnIxI,EAASO,SAelBuH,EAAoByE,2BAA6B,SAAS1K,GACxD,IAAI7B,EAAWD,EAAGE,QAEdwK,EAAM3C,EAAoBC,SAASK,kBAAoB,IAAM4C,mBAAmBnJ,GAYpF,OAXA+F,EAAKC,MAAM,kEAAoEhG,GAC/E6F,EAAMoB,IAAI2B,GACT7E,QAAQ,SAAS8E,GAChB9C,EAAKC,MAAM,8DAAgEhG,GAC3E7B,EAASG,QAAQuK,KAElBnJ,MAAM,SAASA,EAAOpD,GACrByJ,EAAKrG,MAAM,mCAAqCkJ,EAAM,WAAYlJ,EAAOpD,GACzE6B,EAASyJ,OAAO,sFAAwF5H,EAAgB,IAAMiG,EAAoBC,SAASS,aAGtJxI,EAASO,SAclBuH,EAAoB0E,4BAA8B,SAASC,GACzD,IAAIzM,EAAWD,EAAGE,QACd4B,EAAgB4K,EAAiBnI,KAEjCmG,EAAM3C,EAAoBC,SAASK,kBAWvC,OAVAR,EAAKC,MAAM,kEAAoEhG,GAC/E6F,EAAM6D,KAAKd,EAAKgC,GACf7G,QAAQ,SAAS8E,GAChB9C,EAAKC,MAAM,iEAAmEhG,GAC9E7B,EAASG,QAAQuK,KAChBnJ,MAAM,SAASA,EAAOpD,GACvByJ,EAAKrG,MAAM,qCAAuCkJ,EAAM,WAAYlJ,EAAOpD,GAC3E6B,EAASyJ,OAAO,kFAAoF5H,EAAgB,IAAMiG,EAAoBC,SAASS,aAGlJxI,EAASO,SAiBlBuH,EAAoB4E,6BAA+B,SAASC,EAAmBC,GAC7E,IAAI5M,EAAWD,EAAGE,QAkClB,OAhCA6H,EAAoB+C,sBAAsBrK,KACxC,SAASsF,IACH,aAAAA,GAAY,KAAZA,EAAqB6G,GAAqB,EAC5C3M,EAASyJ,OAAO,0BAA4BkD,EAAoB,qBAG9D,aAAA7G,GAAY,KAAZA,EAAqB8G,GAAqB,EAC5C5M,EAASyJ,OAAO,0BAA4BmD,EAAoB,oBAGlE9E,EAAoByE,2BAA2BI,GAAmBnM,KAChE,SAASqM,GACPA,EAAMvI,KAAOsI,EACb9E,EAAoB0E,4BAA4BK,GAAOrM,KACrD,WACER,EAASG,QAAQ0M,IAEnB,WACE7M,EAASyJ,OAAO,yDAA2DmD,MAIjF,WACE5M,EAASyJ,OAAO,wDAA0DkD,MAIhF,WACE3M,EAASyJ,OAAO,0EAIbzJ,EAASO,SAYlBuH,EAAoBgF,8BAAgC,SAASjL,GAC3D,IAAI7B,EAAWD,EAAGE,QAElB2H,EAAKC,MAAM,qEAAuEhG,GAClF,IAAI+J,EAAqBlE,EAAMgE,OAAO5D,EAAoBC,SAASK,kBAAoB,IAAM4C,mBAAmBnJ,IAC5GgK,EAAqBnE,EAAMgE,OAAO5D,EAAoBC,SAASK,kBAAoB,aAAe4C,mBAAmBnJ,IAWzH,OATA9B,EAAG+L,IAAI,CAAEF,EAAmBC,IAC3BrL,KAAK,SAASuL,GACbnE,EAAKC,MAAM,oEAAsEhG,GACjF7B,EAASG,QAAQ4L,IAChB,SAASxK,EAAOpD,GACjByJ,EAAKrG,MAAM,0DAA2DA,EAAOpD,GAC7E6B,EAASyJ,OAAO,+CAAiD5H,EAAgB,IAAMiG,EAAoBC,SAASS,aAG/GxI,EAASO,SAmBlBuH,EAAoBiF,sBAAwB,WAC1C,IAAM3O,EAAS0J,EAAoBC,SAASa,qBAAqB,mBACjE,GAAIxK,EAEF,OADAwJ,EAAKC,MAAM,6EACJ9H,EAAGyK,KAAKpM,GAGjB,IAAI4B,EAAWD,EAAGE,QACdwK,EAAM3C,EAAoBC,SAASM,wBAA0B,aAajE,OAZAT,EAAKC,MAAM,sDACXH,EAAMoB,IAAI2B,GACT7E,QAAQ,SAAS8E,GAChB9C,EAAKC,MAAM,kDACXC,EAAoBC,SAASgB,qBAAqB,kBAAmB2B,EAAKsC,SAC1EhN,EAASG,QAAQuK,EAAKsC,WAEvBzL,MAAM,SAASA,EAAOpD,GACrByJ,EAAKrG,MAAM,8BAAgCkJ,EAAM,WAAYlJ,EAAOpD,GACpE6B,EAASyJ,OAAO,uCAAyC3B,EAAoBC,SAASS,aAGjFxI,EAASO,SAmBlBuH,EAAoBmF,qBAAuB,WACzC,IAAI7O,EAAS0J,EAAoBC,SAASa,qBAAqB,kBAC/D,GAAIxK,EAEF,OADAwJ,EAAKC,MAAM,2EACJ9H,EAAGyK,KAAKpM,GAGjB,IAAI4B,EAAWD,EAAGE,QACdwK,EAAM3C,EAAoBC,SAASM,wBAA0B,YAajE,OAZAT,EAAKC,MAAM,oDACXH,EAAMoB,IAAI2B,GACT7E,QAAQ,SAAS8E,GAChB9C,EAAKC,MAAM,gDACXC,EAAoBC,SAASgB,qBAAqB,iBAAkB2B,EAAKsC,SACzEhN,EAASG,QAAQuK,EAAKsC,WAEvBzL,MAAM,SAASA,EAAOpD,GACrByJ,EAAKrG,MAAM,6BAA+BkJ,EAAM,WAAYlJ,EAAOpD,GACnE6B,EAASyJ,OAAO,sCAAwC3B,EAAoBC,SAASS,aAGhFxI,EAASO,SAsBlBuH,EAAoBoF,qBAAuB,SAASrL,GAClD,IAAIzD,EAAS0J,EAAoBC,SAASa,qBAAqB,kBAC/D,GAAIxK,EAEF,OADAwJ,EAAKC,MAAM,2EACJ9H,EAAGyK,KAAKpM,GAGjB,IAAI4B,EAAWD,EAAGE,QACdwK,EAAM3C,EAAoBC,SAASM,wBAA0B,aAAe2C,mBAAmBnJ,GAanG,OAZA+F,EAAKC,MAAM,oDACXH,EAAMoB,IAAI2B,GACT7E,QAAQ,SAAS8E,GAChB9C,EAAKC,MAAM,gDACXC,EAAoBC,SAASgB,qBAAqB,iBAAkB2B,EAAKxJ,SACzElB,EAASG,QAAQuK,EAAKxJ,WAEvBK,MAAM,SAASA,EAAOpD,GACrByJ,EAAKrG,MAAM,6BAA+BkJ,EAAM,WAAYlJ,EAAOpD,GACnE6B,EAASyJ,OAAO,sCAAwC3B,EAAoBC,SAASS,aAGhFxI,EAASO,SAqBlBuH,EAAoBqF,mBAAqB,WACvC,IAAI/O,EAAS0J,EAAoBC,SAASa,qBAAqB,gBAC/D,GAAIxK,EAEF,OADAwJ,EAAKC,MAAM,uEACJ9H,EAAGyK,KAAKpM,GAGjB,IAAI4B,EAAWD,EAAGE,QACdwK,EAAM3C,EAAoBC,SAASM,wBAA0B,UAajE,OAZAT,EAAKC,MAAM,gDACXH,EAAMoB,IAAI2B,GACT7E,QAAQ,SAAS8E,GAChB9C,EAAKC,MAAM,4CACXC,EAAoBC,SAASgB,qBAAqB,eAAgB2B,EAAKxJ,SACvElB,EAASG,QAAQuK,EAAKxJ,WAEvBK,MAAM,SAASA,EAAOpD,GACrByJ,EAAKrG,MAAM,2BAA6BkJ,EAAM,WAAYlJ,EAAOpD,GACjE6B,EAASyJ,OAAO,oCAAsC3B,EAAoBC,SAASS,aAG9ExI,EAASO,SAqBlBuH,EAAoBsF,uBAAyB,WAC3C,IAAIhP,EAAS0J,EAAoBC,SAASa,qBAAqB,oBAC/D,GAAIxK,EAEF,OADAwJ,EAAKC,MAAM,+EACJ9H,EAAGyK,KAAKpM,GAGjB,IAAI4B,EAAWD,EAAGE,QACdwK,EAAM3C,EAAoBC,SAASM,wBAA0B,cAajE,OAZAT,EAAKC,MAAM,wDACXH,EAAMoB,IAAI2B,GACT7E,QAAQ,SAAS8E,GAChB9C,EAAKC,MAAM,oDACXC,EAAoBC,SAASgB,qBAAqB,mBAAoB2B,EAAKxJ,SAC3ElB,EAASG,QAAQuK,EAAKxJ,WAEvBK,MAAM,SAASA,EAAOpD,GACrByJ,EAAKrG,MAAM,+BAAiCkJ,EAAM,WAAYlJ,EAAOpD,GACrE6B,EAASyJ,OAAO,wCAA0C3B,EAAoBC,SAASS,aAGlFxI,EAASO,SAclBuH,EAAoBuF,sBAAwB,WAC1C,IAAIrN,EAAWD,EAAGE,QACdwK,EAAM3C,EAAoBC,SAASO,uBAiBvC,OAhBAV,EAAKC,MAAM,sDACXH,EAAMoB,IAAI2B,GACT7E,QAAQ,SAAS8E,GAAM,QACtB9C,EAAKC,MAAM,kDACX,IAAMyF,GAAY,+BAAA5C,EAAK6C,UAAL,OAAkB,SAACC,GACnC,OAAOA,EAAI,oBADK,OAER,SAAClJ,GACT,OAAOA,GAAsB,EAAdA,EAAKhC,QAAuB,YAATgC,IAEpCsD,EAAKC,MAAM,eAAgB,aAAeyF,IAC1CtN,EAASG,QAAQmN,KAElB/L,MAAM,SAASA,EAAOpD,GACrByJ,EAAKrG,MAAM,8BAAgCkJ,EAAM,WAAYlJ,EAAOpD,GACpE6B,EAASyJ,OAAO,uCAAyC3B,EAAoBC,SAASS,aAEjFxI,EAASO,SAalBuH,EAAoB2F,yBAA2B,SAAS5L,EAAeY,GACrE,IAAIzC,EAAWD,EAAGE,QAiBlB,OAfA6H,EAAoB/B,eAAelE,GAClCrB,KAAK,SAASyK,GACb,IAAIyC,GAAQ,GACZ,aAAAvQ,SAAO,KAAPA,QAAgB8N,EAAIjJ,MAAO,SAAS2L,GAC9BA,EAAElL,YAAcA,IAClBiL,GAAQ,KAGZ1N,EAASG,QAAQuN,IAChB,SAASE,GACV,IAAI5I,EAAU,2BAA6BvC,EAAY,IAAMZ,EAAgB,KAC7E+F,EAAKrG,MAAM,6BAA+ByD,EAAS4I,GACnD5N,EAASyJ,OAAOzE,EAAU8C,EAAoBC,SAASS,aAGlDxI,EAASO,SAalBuH,EAAoB+F,yBAA2B,SAAShM,EAAeuE,GACrE,IAAIpG,EAAWD,EAAGE,QAiBlB,OAfA6H,EAAoB/B,eAAelE,GAClCrB,KAAK,SAASyK,GACb,IAAIyC,GAAQ,GACZ,aAAAvQ,SAAO,KAAPA,QAAgB8N,EAAIjJ,MAAO,SAAS2L,GAC9BA,EAAEvH,YAAcA,IAClBsH,GAAQ,KAGZ1N,EAASG,QAAQuN,IAChB,SAASE,GACV,IAAI5I,EAAU,2BAA6BoB,EAAY,IAAMvE,EAAgB,KAC7E+F,EAAKrG,MAAM,6BAA+ByD,EAAS4I,GACnD5N,EAASyJ,OAAOzE,EAAU8C,EAAoBC,SAASS,aAGlDxI,EAASO,SAclBuH,EAAoBgG,kBAAoB,SAASjM,EAAeY,EAAWS,GACzE,IAAIlD,EAAWD,EAAGE,QAclB,OAZA6H,EAAoBpF,QAAQb,EAAeY,GAC1CjC,KAAK,SAASyB,GAAM,MACbyL,EAEM,GAFE,eAAAzL,EAAKoK,YAAL,OAAuB,SAACpJ,GACpC,OAAOA,EAAKC,YAAcA,IACzBZ,OACHtC,EAASG,QAAQuN,IAChB,SAASE,GACV,IAAI5I,EAAU,mCAAqCvC,EAAY,IAAMZ,EAAgB,KACrF+F,EAAKrG,MAAM,sBAAwByD,EAAS4I,GAC5C5N,EAASyJ,OAAOzE,EAAU8C,EAAoBC,SAASS,aAGlDxI,EAASO,SAclBuH,EAAoBiG,iBAAmB,SAASlM,EAAeY,EAAWuL,GACxE,IAAIhO,EAAWD,EAAGE,QAclB,OAZA6H,EAAoBpF,QAAQb,EAAeY,GAC1CjC,KAAK,SAASyB,GAAM,MACbyL,EAEM,GAFE,eAAAzL,EAAK4E,YAAL,OAAuB,SAACsF,GACpC,OAAOA,EAAI7H,OAAS0J,IACnB1L,OACHtC,EAASG,QAAQuN,IAChB,SAASE,GACV,IAAI5I,EAAU,kCAAoCvC,EAAY,IAAMZ,EAAgB,KACpF+F,EAAKrG,MAAM,qBAAuByD,EAAS4I,GAC3C5N,EAASyJ,OAAOzE,EAAU8C,EAAoBC,SAASS,aAGlDxI,EAASO,SAelBuH,EAAoBmG,gBAAkB,SAASpM,EAAeY,EAAWS,EAAWgL,GAClF,IAAIlO,EAAWD,EAAGE,QAmBlB,OAjBA6H,EAAoBpF,QAAQb,EAAeY,GAC1CjC,KAAK,SAASyB,GAAM,MACfyL,EAOQ,GAPA,eAAAzL,EAAKoK,YAAL,OAAuB,SAACpJ,GAAS,MAC3C,OAAIA,EAAKC,YAAcA,GAKX,GAFL,eAAAD,EAAKI,UAAL,OAAqB,SAACC,GAC3B,OAAOA,EAAIgB,OAAS4J,IACnB5L,SACFA,OACHtC,EAASG,QAAQuN,IAChB,SAASE,GACV,IAAI5I,EAAU,kCAAoCvC,EAAY,IAAMZ,EAAgB,KACpF+F,EAAKrG,MAAM,sBAAwByD,EAAS4I,GAC5C5N,EAASyJ,OAAOzE,EAAU8C,EAAoBC,SAASS,aAGlDxI,EAASO,SAclBuH,EAAoBqG,oBAAsB,SAASjL,EAAWmD,EAAeC,GAC3E,IAAItG,EAAWD,EAAGE,QAEdwK,EAAM3C,EAAoBC,SAASQ,cAAgB,IAAMrF,EAW7D,OAVA0E,EAAKC,MAAM,oDAAsD3E,GACjEwE,EAAML,IAAIoD,EAAK,CAAC,cAAkBpE,EAAe,QAAYC,IAC5DV,QAAQ,WACPgC,EAAKC,MAAM,mDAAqD3E,GAChElD,EAASG,QAAQ+C,KAChB3B,MAAM,SAASA,EAAOpD,GACvByJ,EAAKrG,MAAM,4BAA8BkJ,EAAM,WAAYlJ,EAAOpD,GAClE6B,EAASyJ,OAAO,oCAAsCvG,EAAY,IAAM4E,EAAoBC,SAASS,aAGhGxI,EAASO,SAYlBuH,EAAoBsG,aAAe,SAAS7E,GAAW,MACrD,IAAyB,IAArBA,EAAUhD,QAAoBgD,EAAUlD,eAAoD,MAAnC,eAAAkD,EAAUlD,eAAV,QAAuC,CAClG,IAAIrG,EAAWD,EAAGE,QAgBlB,OAfA6H,EAAoBqG,oBAAoB5E,EAAUrG,UAAWqG,EAAUlD,cAAekD,EAAUjD,aAAa9F,KAC3G,WACEsH,EAAoBC,SAASuB,aAAaC,GAAW/I,KACnD,SAASyB,GACPjC,EAASG,QAAQ8B,IAEnB,SAASoM,GACPrO,EAASyJ,OAAO4E,MAItB,WACErO,EAASyJ,OAAO,sCAAwCF,EAAUrG,aAG/DlD,EAASO,QAElB,OAAOuH,EAAoBC,SAASuB,aAAaC,IAG5CzB,M,sFCl4Ce,SAApBwG,EAA6BC,GAElC,OADa,IAAIC,EAAUC,SAASF,GACxBG,UAGa,SAApBC,EAA6BJ,GAElC,OADa,IAAIC,EAAUI,SAASL,GACxBG,UATb,IAAMF,EAAYtR,EAAQ,KA8B1BH,QAAQC,IAAI,sBAEZP,EAAOD,QAAU,CAChBiS,SAAUD,EAAUC,SACpBG,SAAUJ,EAAUI,SACpBC,GAAIL,EAAUK,GACdP,kBAAmBA,EACnBK,kBAAmBA,EACnBG,iBA1BwB,SAASP,GACjC,OAAOD,EAAkBC,IAAOI,EAAkBJ,IA0BlDQ,aAvBoB,SAASC,EAAKC,GAC/B,GAAIX,EAAkBU,IAAQV,EAAkBW,GAG5C,OAFU,IAAIT,EAAUC,SAASO,GAAKE,cAC5B,IAAIV,EAAUC,SAASQ,GAAKC,aAG1C,GAAIP,EAAkBK,IAAQL,EAAkBM,GAAM,CAClD,IAAMrS,EAAI,IAAI4R,EAAUI,SAASI,GAAKE,aAEtC,OAAyB,GADf,IAAIV,EAAUI,SAASK,GAAKC,aAC7BC,UAAUvS,GAEvB,OAAO,KAeX,aAAcE,OAAQL,EAAOD,U,kTC1CR4S,E,gOAEnB,IAAMC,EAAOC,SAASC,qBAAqB,QAAQ,GACnD,OAAIF,EACIA,EAAKG,KAEN,K,kCAEW/E,GACd3N,QAAUA,OAAOyQ,WACpBzQ,OAAOyQ,SAASiC,KAAOJ,EAAKK,cAAgBhF,K,6BAGhCiF,EAAcC,GAC3B,IAAIC,EAAaN,SAASO,kBAAkBF,GAC5C,IAAK,IAAIG,KAASF,EACbA,EAAWG,eAAeD,KAC7BF,EAAWE,GAAOE,QAAUN,O,+DCjBhCxS,EAAQ,GACRA,EAAQ,KACRA,EAAQ,IACRA,EAAQ,KACRA,EAAQ,KACRA,EAAQ,KACRA,EAAQ,KACRA,EAAQ,KACRA,EAAQ,KACRA,EAAQ,KACRA,EAAQ,KACRA,EAAQ,KACRA,EAAQ,KACRA,EAAQ,KACRA,EAAQ,KACRA,EAAQ,KACRA,EAAQ,KACRA,EAAQ,KACRA,EAAQ,KACRA,EAAQ,KACRA,EAAQ,KACRA,EAAQ,IACRA,EAAQ,IACRA,EAAQ,KACRA,EAAQ,IACRA,EAAQ,M,mHCzBRA,EAAQ,IAWNC,QAAQV,OAAO,qBAedwT,WAAW,kBAAmB,CAAC,SAAU,oBAAqB,sBAAuB,QAAS,kBAAmB,SAASC,OAAQC,EAAmB3L,EAAqB4L,EAAOC,GAUhLH,OAAOE,MAAQA,EAUfF,OAAOI,YAAc,GAUrBJ,OAAOG,gBAAkBA,EASzBH,OAAOK,KAAO,WACZJ,EAAkBK,MAAMN,OAAOE,QAUjCF,OAAO9P,OAAS,WACd+P,EAAkBM,QAAQ,WAW5BP,OAAOQ,wBAA0B,WAC/B,IAAI1J,EAAS,GAMb,OALA,aAAA7J,SAAO,KAAPA,QAAgB+S,OAAOI,YAAa,SAASF,GAAO,OACH,KAA3C,eAAAF,OAAOG,iBAAP,OAA+BD,IACjCpJ,EAAO7E,KAAKiO,KAGTpJ,GAKTxC,EAAoB2I,qBAAqB3M,KAAK,SAASwG,GACrDkJ,OAAOI,YAActJ,Q,qICjG3B,IAAM2J,EAA2BzT,EAAQ,KACnC0T,EAAuB1T,EAAQ,KAC/B8F,EAAqB9F,EAAQ,IAC7BqG,EAAoBrG,EAAQ,KAC5BsG,EAAQD,EAAkBC,MAqNhC/G,EAAOD,QAzMqB,SAA6ByF,EAAMC,GAG7D,IAAMzE,EAAOC,KAKbD,EAAKgE,YAAc,GAKnBhE,EAAKoT,MAAQ,GAEW,SAAlBC,EAA2BC,GAC/B,IAAMC,EAAW,IAAIL,EAIrB,OAHAK,EAASnN,QAAUkN,EAAMlN,QACzBmN,EAASjN,IAAMgN,EAAMhN,IACrBiN,EAAShN,MAAQ+M,EAAM/M,MAChBgN,EALT,IAUMC,EAAa,GA6KnB,OA5KA,aAAA9T,SAAO,KAAPA,QAAgB8E,EAAK,aAAc,SAAS8O,GAC1C,IAAMC,EAAWF,EAAgBC,GACjCC,EAASvN,MAAQD,EAAME,KACvBuN,EAAW9O,KAAK6O,MAGlB,aAAA7T,SAAO,KAAPA,QAAgB8E,EAAKiP,UAAW,SAASC,GACvC,IAAMC,EAAK,IAAIR,EAAqBO,IAEpC,aAAAhU,SAAO,KAAPA,QAAgBgU,EAAI,aAAc,SAASJ,GACzC,IAAMC,EAAWF,EAAgBC,GACjCC,EAASvN,MAAQD,EAAMU,UACvB8M,EAASrN,iBAAmByN,EAC5BH,EAAW9O,KAAK6O,MAGlB,aAAA7T,SAAO,KAAPA,QAAgBgU,EAAI,qBAAsB,SAAS7N,IAEjD,aAAAnG,SAAO,KAAPA,QAAgBmG,EAAI,aAAc,SAASyN,GACzC,IAAMC,EAAWF,EAAgBC,GACjCC,EAASvN,MAAQD,EAAMW,QACvB6M,EAASrN,iBAAmByN,EAC5BJ,EAASpN,eAAiB,IAAIZ,EAAmBM,GAEjD2N,EAAW9O,KAAK6O,SAStBvT,EAAK4T,sCAAwC,WAC3CvM,EAAEwM,OAAO7T,EAAKgE,YAAa,SAASsP,GAClC,OAAQtT,EAAK8T,0BAA0BR,KAEzCjM,EAAEwM,OAAO7T,EAAKoT,MAAO,SAASE,GAC5B,OAAQtT,EAAK8T,0BAA0BR,MAO3CtT,EAAK8T,0BAA4B,SAASR,GACxC,GAAIA,EAAMtN,QAAUD,EAAMU,WAAa6M,EAAMtN,QAAUD,EAAMW,QAAS,CAEpE,IAAIgN,GAAM,aAAArM,GAAC,KAADA,EAAO5C,EAAgBmK,WAAY,SAAS8E,GAAO,OAAOA,EAAIjO,YAAc6N,EAAMpN,iBAAiBT,YAC7G,QAAYrF,IAARsT,EACF,OAAO,EAGT,GAAIJ,EAAMtN,QAAUD,EAAMW,QAGxB,QAAYtG,KADF,aAAAiH,GAAC,KAADA,EAAOqM,EAAI9N,SAAU,SAASC,GAAO,OAAOA,EAAIgB,OAASyM,EAAMnN,eAAeU,OAEtF,OAAO,EAIb,OAAO,GAGT7G,EAAK+T,SAAW,SAAST,GACnBA,EAAMlN,UAAYN,EAAkBO,mBACtCrG,EAAKgE,YAAYU,KAAK4O,GAEtBtT,EAAKoT,MAAM1O,KAAK4O,IAIpBtT,EAAKgU,YAAc,SAASV,GAC1BjM,EAAEwM,OAAO7T,EAAKgE,YAAa,SAASiQ,GAClC,OAAOA,IAAkBX,IAE3BjM,EAAEwM,OAAO7T,EAAKoT,MAAO,SAASa,GAC5B,OAAOA,IAAkBX,MAI7B,aAAA5T,SAAO,KAAPA,QAAgB8T,EAAY,SAASF,GACnCtT,EAAK+T,SAAST,KAGhBtT,EAAKkU,gBAAkB,SAASC,GAC9B,IAAIC,EAAiB,GAwBrB,OAtBA,aAAA1U,SAAO,KAAPA,QAAgBM,EAAKgE,YAAa,SAASsP,GACpCa,EAAUb,IAGfc,EAAe1P,KAAK,CAClB,QAAWoB,EAAkBO,mBAC7B,IAAOiN,EAAMhN,IACb,MAASgN,EAAM/M,WAInB,aAAA7G,SAAO,KAAPA,QAAgBM,EAAKoT,MAAO,SAASE,GAC9Ba,EAAUb,IAGfc,EAAe1P,KAAK,CAClB,QAAW4O,EAAMlN,QACjB,IAAOkN,EAAMhN,IACb,MAASgN,EAAM/M,UAIZ6N,GAGTpU,EAAKqU,uBAAyB,WAC5B,OAAOrU,EAAKkU,gBAAgB,SAASZ,GACnC,OAAOA,EAAMtN,QAAUD,EAAME,QAIjCjG,EAAKsU,4BAA8B,SAAS9O,GAC1C,OAAOxF,EAAKkU,gBAAgB,SAASZ,GACnC,OAAOA,EAAMtN,QAAUD,EAAMU,WACtB6M,EAAMpN,iBAAiBT,YAAcD,EAAKC,aAIrDzF,EAAKuU,0BAA4B,SAAS/O,EAAMK,GAC9C,OAAO7F,EAAKkU,gBAAgB,SAASZ,GACnC,OAAOA,EAAMtN,QAAUD,EAAMW,SACtB4M,EAAMpN,iBAAiBT,YAAcD,EAAKC,WAC1C6N,EAAMnN,eAAeU,OAAShB,EAAIgB,QAW7C7G,EAAKwU,iBAAmB,SAASC,GAC/B,IAAMC,EAAW1U,EAAKkU,gBAAgB,SAASZ,GAE7C,GAAIA,EAAMtN,QAAUyO,EAAOzO,OAASsN,EAAMlN,UAAYqO,EAAOrO,QAC3D,OAAO,EAGT,GAAIqO,EAAOzO,QAAUD,EAAMU,WAAagO,EAAOzO,QAAUD,EAAMW,QAAS,CAEtE,GAAI4M,EAAMpN,iBAAiBT,YAAcgP,EAAOvO,iBAAiBT,UAC/D,OAAO,EAGT,GAAIgP,EAAOzO,QAAUD,EAAMW,SAErB4M,EAAMnN,eAAeU,OAAS4N,EAAOtO,eAAeU,KACtD,OAAO,EAKb,OAAO,IAGT,OAAO,aAAAQ,GAAC,KAADA,EAAMqN,EAAU,SAASpB,GAC9B,OAAOA,EAAMhN,OAIjBtG,EAAKsF,UAAY,sBAEVtF,I,uCCjNPN,QAAQV,OAAO,qBAcdwT,WAAW,+BAAgC,CAAC,SAAU,oBAAqB,gBAAiB,0BAA2B,SAASC,OAAQC,EAAmBtO,EAAeuQ,GAUzKlC,OAAOrO,cAAgBA,EAUvBqO,OAAOmC,oBAAsB,KAU7BnC,OAAOkC,wBAA0BA,EASjClC,OAAOK,KAAO,WACZJ,EAAkBK,MAAMN,OAAOmC,sBAUjCnC,OAAO9P,OAAS,WACd+P,EAAkBM,QAAQ,e,mHC1EhCvT,EAAQ,IAWNC,QAAQV,OAAO,qBAcdwT,WAAW,qBAAsB,CAAC,SAAU,oBAAqB,sBAAuB,WAAY,SAASC,OAAQC,EAAmB3L,EAAqB8N,GAU5JpC,OAAOoC,SAAWA,EAUlBpC,OAAOqC,mBAAqB,GAU5BrC,OAAOsC,oBAAsB,GAS7BtC,OAAOuC,uBAAyB,WAC9B,IAAIrH,EAAS,GAYb,OAXA,aAAAjO,SAAO,KAAPA,QAAgB+S,OAAOsC,oBAAqB,SAASE,GACnD,IAAIhF,GAAQ,GACZ,aAAAvQ,SAAO,KAAPA,QAAgB+S,OAAOoC,SAASK,UAAW,SAASC,GAC9CA,EAAM7O,MAAQ2O,EAAW3O,MAC3B2J,GAAQ,KAGPA,GACHtC,EAAOjJ,KAAKuQ,KAGTtH,GAUT8E,OAAOK,KAAO,WACZJ,EAAkBK,MAAMN,OAAOoC,WAUjCpC,OAAO9P,OAAS,WACd+P,EAAkBM,QAAQ,WAU5BP,OAAO2C,aAAe,WACpB3C,OAAOoC,SAASK,UAAUxQ,KAAK,CAAE,IAAO,GAAI,MAAS,MAWvD+N,OAAO4C,gBAAkB,SAAShD,GAAO,OACvC,eAAAI,OAAOoC,SAASK,WAAhB,OAAiC7C,EAAO,IAW1CI,OAAO6C,0BAA4B,SAASC,GACrCA,IAGL9C,OAAOoC,SAASK,UAAY,IAC5B,aAAAxV,SAAO,KAAPA,QAAgB+S,OAAOqC,mBAAoB,SAASD,GAC9CA,EAASW,QAAUD,EAAiBC,QACtC/C,OAAOsC,oBAAsBF,EAASY,gBAO5C1O,EAAoBuI,wBAAwBvM,KAAK,SAAS2S,GACxDjD,OAAOqC,mBAAqBY,EACxBjD,OAAOoC,SAASW,QAClB,aAAA9V,SAAO,KAAPA,QAAgBgW,EAAW,SAASb,GAClC,GAAIA,EAASW,QAAU/C,OAAOoC,SAASW,MAAO,CAC5C/C,OAAOsC,oBAAsBF,EAASY,WAEtC,IADA,IAAIE,EAAgB,GACXvW,EAAE,EAAGA,EAAEyV,EAASY,WAAW5Q,OAAQzF,IAE1C,IADA,IAAIwW,EAAOf,EAASY,WAAWrW,GAAGkH,IACzBuP,EAAE,EAAGA,EAAEpD,OAAOoC,SAASK,UAAUrQ,OAAQgR,IAAK,CACrD,IAAIC,EAAIrD,OAAOoC,SAASK,UAAUW,GAC9BC,EAAExP,MAAQsP,GACZD,EAAcjR,KAAKoR,GAIzBrD,OAAOoC,SAASK,UAAYS,W,2FCnKxC,IAaQI,EACAC,EACAC,EAfFnP,EAAUrH,EAAQ,IAExBA,EAAQ,IAWAsW,EAAatW,EAAQ,KACrBuW,EAAWvW,EAAQ,KACnBwW,EAAexW,EAAQ,KAE7BC,QAAQV,OAAO,qBAkBdwT,WAAW,0BAA2B,CAAC,SAAU,eAAgB,UAAW,YAAa,eAAgB,gBAAiB,sBAAuB,QAAS,SAASC,OAAQyD,EAAclM,EAASmM,EAAWC,EAAcC,EAAetP,EAAqBC,GAU9PyL,OAAOxH,aAAelE,EAAoB6F,YAW1C6F,OAAOrO,cAAgB8R,EAAa9R,cAUpCqO,OAAOzD,iBAAmB,CAAE0G,UAAW,GAAIY,SAAU,IAUrD7D,OAAO8D,QAAU,CAAE1B,SAAU,KAAM2B,OAAQ,MAU3C/D,OAAOgE,kBAAoB,GAU3BhE,OAAOiE,kBAAoB,GAU3BjE,OAAOkE,iBAAmB,EAU1BlE,OAAOmE,oBAAsB,EAU7BnE,OAAOoE,iBAAmB,GAU1BpE,OAAOqE,iBAAmB,GAU1BrE,OAAOsE,gBAAkB,EAUzBtE,OAAOuE,mBAAqB,EAU5BvE,OAAOwE,KAAO,SAASC,GACjBjX,KAAKkX,OAAOC,OACdtQ,EAAQuQ,OAAO,CACb9P,QAAS,kFACTH,MAAO,iBACPM,QAAS,CACPS,QAAS,CACPP,MAAO,MACPtC,UAAW,cACXwC,SAAUoP,GAEZI,KAAM,CACJ1P,MAAO,KACPtC,UAAW,oBAKjB4R,KAWJzE,OAAO8E,MAAQ,WAIb9E,OAAOwE,KAHO,WACZjN,EAAQ8F,SAASiC,KAAOsE,EAAcmB,SAAW,oBAYrD/E,OAAOgF,OAAS,WAQdhF,OAAOwE,KAPQ,WACgB,YAAzBxE,OAAOrO,cACT4F,EAAQ8F,SAASiC,KAAOsE,EAAcmB,SAAW,iBAEjDxN,EAAQ8F,SAASiC,KAAOsE,EAAcmB,SAAW,kBAAoBjK,mBAAmBkF,OAAOrO,kBAcrGqO,OAAOvL,aAAe,SAASK,GAC7BP,EAAMlD,MAAMyD,EAAS,CAACmQ,IAAK,OAW7BjF,OAAOkF,cAAgB,SAASnB,GAC9B,IAAK,IAAIpX,EAAI,EAAGA,EAAIqT,OAAOzD,iBAAiBsH,SAASzR,OAAQzF,IAC3D,GAAIqT,OAAOzD,iBAAiBsH,SAASlX,GAAGyH,OAAS2P,EAAO3P,KACtD,OAAOzH,EAGX,OAAQ,GAWVqT,OAAOmF,gBAAkB,SAAS/C,GAChC,IAAK,IAAIzV,EAAI,EAAGA,EAAIqT,OAAOzD,iBAAiB0G,UAAU7Q,OAAQzF,IAC5D,GAAIqT,OAAOzD,iBAAiB0G,UAAUtW,GAAGyH,OAASgO,EAAShO,KACzD,OAAOzH,EAGX,OAAQ,GAYVqT,OAAOoF,WAAa,SAASrB,EAAQsB,GACnC,IAAIC,EAAO9X,KAAKkX,OAChBhB,EAAU9U,KAAK,CACb2W,SAAU,SACVC,UAAU,EACVzF,WAAY,mBACZ0F,YAAanC,EACbrT,QAAS,CACP8T,OAAQ,WAAa,OAAO9W,QAAQyY,KAAK3B,OAE1CzO,OAAOhF,KAAK,SAASgF,GACtBrI,QAAQyY,KAAKpQ,EAAQyO,GACrBuB,EAAKX,QAAS,GACb,WACGU,GACFrF,OAAOzD,iBAAiBsH,SAAS8B,SAavC3F,OAAO4F,WAAa,SAAS7B,GAC3B,IAAIuB,EAAO9X,KAAKkX,OACZmB,EAAM7F,OAAOkF,cAAcnB,GAC3B+B,EAAM9F,OAAOzD,iBAAiBsH,SAASzR,OAAS,EACpDsR,EAAU9U,KAAK,CACb2W,SAAU,SACVC,UAAU,EACVO,KAAM,KACNhG,WAAY,iBACZ0F,YAAalC,EACbtT,QAAS,CACPkF,MAAO,WAAa,OAAO4O,EAAO3P,MAClC4R,SAAU,WAAa,OAAOH,GAC9BI,QAAS,WAAa,OAAOH,MAE9BxQ,OAAOhF,KAAK,SAAS4V,GAAK,QAC3BZ,EAAKX,QAAS,GACd,eAAA3E,OAAOzD,iBAAiBsH,UAAxB,OAAwCgC,EAAK,IAC7C,eAAA7F,OAAOzD,iBAAiBsH,UAAxB,OAAwCqC,EAAK,EAAGnC,MAapD/D,OAAOmG,aAAe,SAASpC,GAC7B,IACgB,EADZnE,EAAQI,OAAOkF,cAAcnB,IACpB,EAATnE,KACF,eAAAI,OAAOzD,iBAAiBsH,UAAxB,OAAwCjE,EAAO,GAC/CpS,KAAKkX,OAAOC,QAAS,IAWzB3E,OAAOoG,UAAY,WACjBpG,OAAOzD,iBAAiBsH,SAAS5R,KAAK,CAAE,KAAQ,GAAI,MAAS,GAAI,UAAa,KAC9E,IAAI2N,EAAQI,OAAOzD,iBAAiBsH,SAASzR,OAAS,EACtD4N,OAAOoF,WAAWpF,OAAOzD,iBAAiBsH,SAASjE,IAAQ,IAY7DI,OAAOqG,aAAe,SAASjE,EAAUiD,GACvC,IAAIC,EAAO9X,KAAKkX,OAChBhB,EAAU9U,KAAK,CACb2W,SAAU,SACVC,UAAU,EACVzF,WAAY,qBACZ0F,YAAajC,EACbvT,QAAS,CACPmS,SAAU,WAAa,OAAOnV,QAAQyY,KAAKtD,OAE5C9M,OAAOhF,KAAK,SAASgF,GACtBrI,QAAQyY,KAAKpQ,EAAQ8M,GACrBkD,EAAKX,QAAS,GACb,WACGU,GACFrF,OAAOzD,iBAAiB0G,UAAU0C,SAaxC3F,OAAOsG,aAAe,SAASlE,GAC7B,IAAIkD,EAAO9X,KAAKkX,OACZmB,EAAM7F,OAAOmF,gBAAgB/C,GAC7B0D,EAAM9F,OAAOzD,iBAAiB0G,UAAU7Q,OAAS,EACrDsR,EAAU9U,KAAK,CACb2W,SAAU,SACVC,UAAU,EACVO,KAAM,KACNhG,WAAY,iBACZ0F,YAAalC,EACbtT,QAAS,CACPkF,MAAO,WAAa,OAAOiN,EAAShO,MACpC4R,SAAU,WAAa,OAAOH,GAC9BI,QAAS,WAAa,OAAOH,MAE9BxQ,OAAOhF,KAAK,SAAS4V,GAAK,QAC3BZ,EAAKX,QAAS,GACd,eAAA3E,OAAOzD,iBAAiB0G,WAAxB,OAAyC4C,EAAK,IAC9C,eAAA7F,OAAOzD,iBAAiB0G,WAAxB,OAAyCiD,EAAK,EAAG9D,MAarDpC,OAAOuG,eAAiB,SAASnE,GAC/B,IACgB,EADZxC,EAAQI,OAAOmF,gBAAgB/C,IACtB,EAATxC,KACF,eAAAI,OAAOzD,iBAAiB0G,WAAxB,OAAyCrD,EAAO,GAChDpS,KAAKkX,OAAOC,QAAS,IAWzB3E,OAAOwG,YAAc,WACnBxG,OAAOzD,iBAAiB0G,UAAUhR,KAAK,CAAE,KAAQ,GAAI,MAAS,GAAI,UAAa,KAC/E,IAAI2N,EAAQI,OAAOzD,iBAAiB0G,UAAU7Q,OAAS,EACvD4N,OAAOqG,aAAarG,OAAOzD,iBAAiB0G,UAAUrD,IAAQ,IAUhEI,OAAOK,KAAO,WACZ,IAAIiF,EAAO9X,KAAKkX,OAChBpQ,EAAoBkB,cACpBlB,EAAoBgI,4BAA4B0D,OAAOzD,kBAAkBjM,KACvE,WACEiE,EAAMmB,QAAQ,sCAAwCd,EAAEC,OAAOmL,OAAOrO,eAAiB,oBACvF2T,EAAKX,QAAS,GAEhB3E,OAAOvL,eAWXuL,OAAOpN,MAAQ,WACbyB,EAAQa,QAAQ,gFAAiF,SAASuR,GACpGA,IACFnS,EAAoBkB,cACpBlB,EAAoBsI,8BAA8BoD,OAAOrO,eAAerB,KACtE,WACEiE,EAAMmB,QAAQ,qCAAuCd,EAAEC,OAAOmL,OAAOrO,eAAiB,qBACtFqO,OAAO0G,cAET1G,OAAOvL,kBAafuL,OAAO2G,uBAAyB,WAC9B3G,OAAO4G,oBAAsB,EAC7B5G,OAAOuE,mBAAqBvE,OAAOoE,iBAAiBhS,OACpD4N,OAAO6G,iBAAmBC,KAAKC,KAAK/G,OAAOuE,mBAAqBvE,OAAOqE,mBAUzErE,OAAOgH,wBAA0B,WAC/BhH,OAAOiH,qBAAuB,EAC9BjH,OAAOmE,oBAAsBnE,OAAOgE,kBAAkB5R,OACtD4N,OAAOkH,kBAAoBJ,KAAKC,KAAK/G,OAAOmE,oBAAsBnE,OAAOiE,oBAU3EjE,OAAO0G,WAAa,WAClBnS,EAAMmB,QAAQ,yCAA2Cd,EAAEC,OAAOmL,OAAOrO,eAAiB,OAC1F2C,EAAoB+H,2BAA2B2D,OAAOrO,eAAerB,KACnE,SAASiM,GACPyD,OAAOzD,iBAAmBA,EAE1ByD,OAAOgE,kBAAoBhE,OAAOzD,iBAAiB0G,UACnDjD,OAAOgH,0BAEPhH,OAAOoE,iBAAmBpE,OAAOzD,iBAAiBsH,SAClD7D,OAAO2G,0BAET3G,OAAOvL,eAWXuL,OAAOmH,OAAO,mBAAoB,WAChCnH,OAAOgE,kBAAoBL,EAAa3D,OAAOzD,iBAAiB0G,UAAWjD,OAAO8D,QAAQ1B,UAC1FpC,OAAOgH,4BAUThH,OAAOmH,OAAO,iBAAkB,WAC9BnH,OAAOoE,iBAAmBT,EAAa3D,OAAOzD,iBAAiBsH,SAAU7D,OAAO8D,QAAQC,QACxF/D,OAAO2G,2BAKL3G,OAAOrO,eACTqO,OAAO0G,iB,wBCjjBb,IAAI1P,EAAO,8GAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,mjDAEXzK,EAAOD,QAAU0K,G,wBCHjB,IAAIA,EAAO,4GAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,2kCAEXzK,EAAOD,QAAU0K,G,wBCHjB,IAAIA,EAAO,gHAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,0oFAEXzK,EAAOD,QAAU0K,G,oICHjBhK,EAAQ,IAER,IAAM8F,EAAqB9F,EAAQ,IAWjCC,QAAQV,OAAO,qBAiBdwT,WAAW,sBAAuB,CAAC,SAAU,oBAAqB,sBAAuB,gBAAiB,YAAa,uBAAwB,cAAe,mBAAoB,SAASC,OAAQC,EAAmB3L,EAAqB3C,EAAeY,EAAW6U,EAAsBC,EAAaC,GAUvStH,OAAOrO,cAAgBA,EAUvBqO,OAAOzN,UAAYA,EAUnByN,OAAOoH,qBAAuBA,EAU9BpH,OAAOqH,YAAcA,EAGrBrH,OAAOsH,iBAAmBA,EAU1BtH,OAAOuH,kBAAoB,CACzB,CAAEC,GAAI,IAAK7S,MAAO,WAClB,CAAE6S,GAAI,IAAK7S,MAAO,aAClB,CAAE6S,GAAI,IAAK7S,MAAO,iBAWpBqL,OAAOyH,kBAAoB,GAS3BzH,OAAOK,KAAO,WACZJ,EAAkBK,MAAMN,OAAOoH,uBAGjCpH,OAAO0H,qBAAuB,SAAS1U,GACrC,IAC6D,EAA7D,OADoD,OAA5BgN,OAAOsH,kBACTtU,IAAcgN,OAAOsH,kBACrB,eAAAtH,OAAOuH,mBAAP,OAAgC,SAAAI,GAAK,MAAiB,MAAbA,EAAMH,KAG9DxH,OAAOuH,mBAUhBvH,OAAO9P,OAAS,WACd+P,EAAkBM,QAAQ,WAU5BP,OAAO4H,WAAa,WAClB5H,OAAOoH,qBAAqBjU,SAASlB,KAAK,IAAIa,EAAmB,CAAE,eAAgB,OAWrFkN,OAAO6H,cAAgB,SAASjI,GAAO,OACrC,eAAAI,OAAOoH,qBAAqBjU,UAA5B,OAA4CyM,EAAO,IAWrDI,OAAOhD,qBAAuB,WAC5B,IAAI7J,EAAW,GAYf,OAXA,aAAAlG,SAAO,KAAPA,QAAgB+S,OAAOyH,kBAAmB,SAASK,GACjD,IAAItK,GAAQ,GACZ,aAAAvQ,SAAO,KAAPA,QAAgB+S,OAAOoH,qBAAqBjU,SAAU,SAASC,GACzDA,EAAIgB,OAAS0T,IACftK,GAAQ,KAGPA,GACHrK,EAASlB,KAAK6V,KAGX3U,GAKTmB,EAAoB0I,qBAAqBgD,OAAOrO,eAAerB,KAAK,SAAS6C,GAC3E6M,OAAOyH,kBAAoBtU,Q,0HCpLjCnG,EAAQ,IACyBA,EAAQ,KAAzC,IAEMsG,EADoBtG,EAAQ,KACFsG,MAC1BsB,EAAI5H,EAAQ,KAMhBC,QAAQV,OAAO,qBAcdwT,WAAW,qBAAsB,CAAC,SAAU,oBAAqB,OAAQ,QAAS,SAASC,OAAQC,EAAmBlO,EAAM8O,GAE3Hb,OAAOjO,KAAOA,EAEdiO,OAAOa,MAAQA,EAOfb,OAAO+H,uBAAyB,SAASlH,GACnCA,EAAMtN,QAAUD,EAAMU,UACxB6M,EAAMpN,iBAAmBuM,OAAOjO,KAAKoK,WAAW0E,EAAMmH,eAC7CnH,EAAMtN,QAAUD,EAAMW,UAC/B4M,EAAMpN,iBAAmBuM,OAAOiI,uBAAuBpH,EAAMmH,eAC7DnH,EAAMnN,eAAiBmN,EAAMpN,iBAAiBN,SAAS0N,EAAMqH,eAIjElI,OAAOK,KAAO,WACZL,OAAO+H,uBAAuB/H,OAAOa,OACrCZ,EAAkBK,MAAMN,OAAOa,QAGjCb,OAAO9P,OAAS,WACd+P,EAAkBM,QAAQ,WAI5BP,OAAOiI,uBAAyB,GAChCjI,OAAOmI,gBAAkB,GACzBnI,OAAOmI,gBAAgB7U,EAAME,MAAQ,OAEjCwM,OAAOjO,KAAKoK,YAA8C,EAAhC6D,OAAOjO,KAAKoK,WAAW/J,SAEnD4N,OAAOmI,gBAAgB7U,EAAMU,WAAa,aAG1C,aAAAY,GAAC,KAADA,EAAUoL,OAAOjO,KAAKoK,WAAY,SAAS8E,GACrCA,EAAI9N,UAAkC,EAAtB8N,EAAI9N,SAASf,QAC/B4N,OAAOiI,uBAAuBhW,KAAKgP,KAII,EAAvCjB,OAAOiI,uBAAuB7V,SAEhC4N,OAAOmI,gBAAgB7U,EAAMW,SAAW,YAI5C+L,OAAOa,MAAMmH,cAAgB,EAC7BhI,OAAOa,MAAMqH,YAAc,EAEvBlI,OAAOa,MAAMtN,QAAUD,EAAMU,WAAagM,OAAOa,MAAMpN,kBAEzDuM,OAAOa,MAAMmH,eAAgB,aAAApT,GAAC,KAADA,EAAYoL,OAAOjO,KAAKoK,WAAY,SAASpJ,GAAQ,OAAOA,EAAKC,YAAcgN,OAAOa,MAAMpN,iBAAiBT,YACtIgN,OAAOa,MAAMmH,cAAgB,IAE/BhI,OAAOa,MAAMmH,cAAgB,IAEtBhI,OAAOa,MAAMtN,QAAUD,EAAMW,SAAW+L,OAAOa,MAAMnN,gBAAyD,EAAvCsM,OAAOiI,uBAAuB7V,SAE9G4N,OAAOa,MAAMmH,eAAgB,aAAApT,GAAC,KAADA,EAAYoL,OAAOiI,uBAAwB,SAASlV,GAAQ,OAAOA,EAAKC,YAAcgN,OAAOa,MAAMpN,iBAAiBT,YAC7IgN,OAAOa,MAAMmH,cAAgB,IAE/BhI,OAAOa,MAAMmH,cAAgB,GAG/BhI,OAAOa,MAAMqH,aAAc,aAAAtT,GAAC,KAADA,EAAYoL,OAAOiI,uBAAuBjI,OAAOa,MAAMmH,eAAe7U,SAAU,SAASC,GAAO,OAAOA,EAAIgB,OAAS4L,OAAOa,MAAMnN,eAAeU,OACvK4L,OAAOa,MAAMqH,YAAc,IAE7BlI,OAAOa,MAAMqH,YAAc,IAK/BlI,OAAOa,MAAMmH,cAAgBjS,OAAOiK,OAAOa,MAAMmH,eACjDhI,OAAOa,MAAMqH,YAAcnS,OAAOiK,OAAOa,MAAMqH,aAG/ClI,OAAOoI,YAAcpI,OAAOa,MAAMhN,Q,uCChGpC5G,QAAQV,OAAO,qBAgBdwT,WAAW,iBAAkB,CAAC,cAAe,SAAU,oBAAqB,QAAS,WAAY,UAAW,SAASsI,EAAarI,OAAQC,EAAmB9K,EAAO6Q,EAAUC,GAU7KjG,OAAO7K,MAAQA,EAUf6K,OAAOgG,SAAWA,EAUlBhG,OAAOiG,QAAUA,EASjBjG,OAAOsI,IAAM,WACXtI,OAAOgG,YAUThG,OAAOuI,UAAY,WACjBvI,OAAOgG,YAUThG,OAAOwI,KAAO,WACZvI,EAAkBK,MAAMN,OAAOgG,WAUjChG,OAAO9P,OAAS,WACd+P,EAAkBM,QAAQ,e,+HClGhC,IAAMlM,EAAUrH,EAAQ,IAExBA,EAAQ,IAER,IAYQyb,EACAC,EACAC,EAEAC,EACAC,EACAC,EACAC,EACAC,EACAC,EArBF3X,EAAkBtE,EAAQ,IAC1ByT,EAA2BzT,EAAQ,KAWjCyb,EAAYzb,EAAQ,KACpB0b,EAAe1b,EAAQ,KACvB2b,EAAgB3b,EAAQ,KAExB4b,EAAgB5b,EAAQ,KACxB6b,EAAsB7b,EAAQ,KAC9B8b,EAAqB9b,EAAQ,KAC7B+b,EAAiB/b,EAAQ,KACzBgc,EAAmBhc,EAAQ,KAC3Bic,EAAqBjc,EAAQ,KAEnCC,QAAQV,OAAO,qBAkBdwT,WAAW,iBAAkB,CAAC,SAAU,eAAgB,WAAY,UAAW,YAAa,gBAAiB,sBAAuB,QAAS,SAASC,OAAQyD,EAAcyF,EAAU3R,EAASmM,EAAWE,EAAetP,EAAqBC,GAC7OyL,OAAO4I,cAAgBA,EACvB5I,OAAO6I,oBAAsBA,EAC7B7I,OAAO8I,mBAAqBA,EAC5B9I,OAAO+I,eAAiBA,EACxB/I,OAAOgJ,iBAAmBA,EAC1BhJ,OAAOiJ,mBAAqBA,EAU5BjJ,OAAOxH,aAAelE,EAAoB6F,YAW1C6F,OAAOrO,cAAgB8R,EAAa9R,cAYpCqO,OAAOzN,UAAYkR,EAAalR,UAUhCyN,OAAOqF,MAA6B,YAArBrF,OAAOzN,UAUtByN,OAAOjO,KAAO,GAUdiO,OAAOmJ,oBAAsB,GAU7BnJ,OAAOoJ,mBAAqB,GAa5BpJ,OAAOqJ,mBAAqB,GAU5BrJ,OAAOwE,KAAO,SAASjK,GACR,SAAT+O,IACF/R,EAAQ8F,SAASiC,KAAO/E,EAEtB/M,KAAK+b,SAAS5E,OAChBtQ,EAAQuQ,OAAO,CACb9P,QAAS,2EACTH,MAAO,iBACPM,QAAS,CACPS,QAAS,CACPP,MAAO,MACPtC,UAAW,cACXwC,SAAUiU,GAEZzE,KAAM,CACJ1P,MAAO,KACPtC,UAAW,oBAKjByW,KAWJtJ,OAAO8E,MAAQ,WACb9E,OAAOwE,KAAKZ,EAAcmB,SAAW,mBAUvC/E,OAAOgF,OAAS,WACdhF,OAAOwE,KAAKZ,EAAcmB,SAAW,kBAAoBjK,mBAAmBkF,OAAOrO,iBAUrFqO,OAAOwJ,iBAAmB,WACxBN,EAAS/R,IAAI,wCAAyC,QACtD6I,OAAOwE,KAAKZ,EAAcmB,SAAW,kBAAoBjK,mBAAmBkF,OAAOrO,eAAiB,UAAYmJ,mBAAmBkF,OAAOzN,WAAa,cAUzJyN,OAAOyJ,mBAAqB,WAC1BP,EAAS/R,IAAI,wCAAyC,SACtD6I,OAAOwE,KAAKZ,EAAcmB,SAAW,kBAAoBjK,mBAAmBkF,OAAOrO,eAAiB,UAAYmJ,mBAAmBkF,OAAOzN,aAW5IyN,OAAOvL,aAAe,SAASK,GAC7BP,EAAMlD,MAAMyD,EAAS,CAACmQ,IAAK,OAW7BjF,OAAO0J,kBAAoB,SAASC,GAClC3J,OAAOjO,KAAKQ,UAAYwD,QAAO,IAAIC,MAAOC,WAC1C0T,EAAQC,UAAW,GAYrB5J,OAAO6J,UAAY,SAASjK,EAAOyF,GACjC,IAAIC,EAAO9X,KAAK+b,SACZO,EAAc9J,OAAOjO,KAAK+E,OAAO8I,GACjCO,EAAkB,IACtB,aAAAlT,SAAO,KAAPA,QAAgB+S,OAAOjO,KAAK+E,OAAQ,SAASoJ,GAC3CC,EAAgBlO,KAAKiO,EAAM9L,QAGTsP,EAAU9U,KAAK,CACjC2W,SAAU,SACVC,UAAU,EACVzF,WAAY,kBACZ0F,YAAagD,EACbxY,QAAS,CACPiQ,MAAO,WAAa,OAAOjT,QAAQyY,KAAKoE,IACxC3J,gBAAiB,WAAa,OAAOA,MAI3B7K,OAAOhF,KAAK,SAASgF,GACjCrI,QAAQyY,KAAKpQ,EAAQwU,GACrBxE,EAAKX,QAAS,GACb,WACGU,GACFrF,OAAOjO,KAAK+E,OAAO6O,SAazB3F,OAAO+J,YAAc,SAASnK,GAAO,OACnC,eAAAI,OAAOjO,KAAK+E,QAAZ,OAA0B8I,EAAO,GACjCpS,KAAK+b,SAAS5E,QAAS,GAUzB3E,OAAOgK,SAAW,WAChBhK,OAAO6J,UAAU7J,OAAOjO,KAAKkY,eAAe,IAU9CjK,OAAOkK,oBAAsB,WAG3BlK,OAAOjO,KAAKkQ,SAASd,yCAGvBnB,OAAO5D,WAAa,SAASrK,GAC3BsC,EAAQa,QAAQ,oDAAqD,SAASuR,GAC1EA,IACFnS,EAAoBkB,cACpBlB,EAAoB8H,WAAWrK,GAC1BzB,KAAK,WACJ0P,OAAOuJ,SAASY,eAChBnK,OAAOgF,SAEHjT,EAAKmE,UACP3B,EAAMmB,QAAQ,YAAcd,EAAEC,OAAO9C,EAAKmE,WAAa,sBAEvD3B,EAAMmB,QAAQ,+BAGlBsK,OAAOvL,kBAefuL,OAAOoK,aAAe,SAASvJ,EAAOwE,GAClC,IAAMC,EAAO9X,KAAK+b,SAEE7F,EAAU9U,KAAK,CAC/B2W,SAAU,SACVC,UAAU,EACVzF,WAAY,qBACZ0F,YAAaiD,EACbzY,QAAS,CACL8B,KAAM,WAAa,OAAO9E,QAAQyY,KAAK1F,OAAOjO,OAC9C8O,MAAO,WAAa,OAAO5T,QAAQyY,KAAK7E,OAIlCvL,OAAOhF,KAAK,SAASgF,GAC/BrI,QAAQyY,KAAKpQ,EAAQuL,GACrByE,EAAKX,QAAS,EACVU,GACFrF,OAAOjO,KAAKkQ,SAASX,SAAST,MAaxCb,OAAOqK,eAAiB,SAASxJ,GAC/Bb,OAAOjO,KAAKkQ,SAASV,YAAYV,GACjCrT,KAAK+b,SAAS5E,QAAS,GAUzB3E,OAAOsK,YAAc,WACjBtK,OAAOoK,aAAa,IAAI3J,GAA4B,IAYxDT,OAAOuK,cAAgB,SAAS3K,EAAOyF,GACrC,IAAIC,EAAO9X,KAAK+b,SACZiB,EAAaxK,OAAOjO,KAAKoK,WAAWyD,GACpCjO,EAAgBqO,OAAOrO,cACvBY,EAAYyN,OAAOzN,UACnB8U,EAAc,IAClB,aAAApa,SAAO,KAAPA,QAAgB+S,OAAOjO,KAAKoK,WAAY,SAASpJ,GAC/CsU,EAAYpV,KAAKc,EAAKC,aAGJ0Q,EAAU9U,KAAK,CACjC2W,SAAU,SACVC,UAAU,EACVzF,WAAY,sBACZ0F,YAAakD,EACb1Y,QAAS,CACPsC,UAAW,WAAa,OAAOA,GAC/BZ,cAAe,WAAa,OAAOA,GACnCyV,qBAAsB,WAAa,OAAOna,QAAQyY,KAAK8E,IACvDnD,YAAa,WAAa,OAAOA,GACjCC,iBAAmB,WAAa,OAAOtH,OAAOyK,wBAIpCnV,OAAOhF,KAAK,SAASgF,GACjCrI,QAAQyY,KAAKpQ,EAAQkV,GACrBlF,EAAKX,QAAS,GACb,WACGU,GACFrF,OAAOjO,KAAKoK,WAAWwJ,SAa7B3F,OAAO0K,gBAAkB,SAAS9K,GAAO,OACvC,eAAAI,OAAOjO,KAAKoK,YAAZ,OAA8ByD,EAAO,GACrCpS,KAAK+b,SAAS5E,QAAS,GAUzB3E,OAAO2K,aAAe,WACpB3K,OAAOuK,cAAcvK,OAAOjO,KAAK6Y,mBAAmB,IAWtD5K,OAAO6K,eAAiB,SAASjL,GAAO,OACtC,eAAAI,OAAOjO,KAAK4E,YAAZ,OAA8BiJ,EAAO,GACrCpS,KAAK+b,SAAS5E,QAAS,GAUzB3E,OAAO8K,YAAc,WACnB9K,OAAOjO,KAAKgF,iBACZvJ,KAAK+b,SAAS5E,QAAS,GAUzB3E,OAAOK,KAAO,WACZ,IAAIiF,EAAO9X,KAAK+b,SAChBjV,EAAoBkB,cACpBlB,EAAoBgF,SAAS0G,OAAOjO,MAAMzB,KACxC,WACEiE,EAAMmB,QAAQ,YAAcd,EAAEC,OAAOmL,OAAOjO,KAAKmE,WAAa,oBAC9D8J,OAAOzN,UAAYyN,OAAOjO,KAAKQ,UAC/B+S,EAAKX,QAAS,GAEhB3E,OAAOvL,eAWXuL,OAAO+K,QAAU,WACfxW,EAAMmB,QAAQ,mBAAqBd,EAAEC,OAAOmL,OAAOzN,WAAa,qBAAuBqC,EAAEC,OAAOmL,OAAOrO,eAAiB,OACxH2C,EAAoB9B,QAAQwN,OAAOrO,cAAeqO,OAAOzN,WAAWjC,KAClE,SAASyB,GACPiO,OAAOjO,KAAOA,GAEhBiO,OAAOvL,eAYXuL,OAAO9C,uBAAyB,WAC9B,IAAIvG,EAAa,GAYjB,OAXA,aAAA1J,SAAO,KAAPA,QAAgB+S,OAAOmJ,oBAAqB,SAASrL,GACnD,IAAIN,GAAQ,GACZ,aAAAvQ,SAAO,KAAPA,QAAgB+S,OAAOjO,KAAK4E,WAAY,SAASO,GAC3CA,EAAE9C,OAAS0J,IACbN,GAAQ,KAGPA,GACH7G,EAAW1E,KAAK6L,KAGbnH,GAWTqJ,OAAOyK,kBAAoB,WACzB,IAAMpM,EAAK2B,OAAOjO,KAAKiZ,sBACvB,OAAO3M,GAAU,MAKf2B,OAAOqF,MACTrF,OAAOjO,KAAO,IAAIT,EAAgB0O,OAAOrO,cAAe,IAExDqO,OAAO+K,UAITzW,EAAoB4I,yBAAyB5M,KAC3C,SAASqG,GACPqJ,OAAOmJ,oBAAsBxS,GAE/BqJ,OAAOvL,cAITH,EAAoB6I,wBAAwB7M,KAC1C,SAAS8M,GACP4C,OAAOoJ,mBAAqBhM,GAE9B4C,OAAOvL,cAKTH,EAAoBuB,eAAemK,OAAOrO,eAAerB,KACvD,SAASiB,IACP,aAAAtE,SAAO,KAAPA,QAAgBsE,EAAYO,MAAO,SAASC,GAC1CiO,OAAOqJ,mBAAmBpX,KAAKF,EAAKQ,cAGxCyN,OAAOvL,kB,wBCjlBb,IAAIuC,EAAO,6GAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,uwCAEXzK,EAAOD,QAAU0K,G,wBCHjB,IAAIA,EAAO,gHAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,85EAEXzK,EAAOD,QAAU0K,G,wBCHjB,IAAIA,EAAO,iHAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,u2FAEXzK,EAAOD,QAAU0K,G,wBCHjB,IAAIA,EAAO,kHAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,ojEAEXzK,EAAOD,QAAU0K,G,wBCHjB,IAAIA,EAAO,wHAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,6hCAEXzK,EAAOD,QAAU0K,G,wBCHjB,IAAIA,EAAO,uHAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,spCAEXzK,EAAOD,QAAU0K,G,wBCHjB,IAAIA,EAAO,mHAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,03BAEXzK,EAAOD,QAAU0K,G,wBCHjB,IAAIA,EAAO,qHAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,+2CAEXzK,EAAOD,QAAU0K,G,wBCHjB,IAAIA,EAAO,uHAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,gsCAEXzK,EAAOD,QAAU0K,G,8DCQTiU,EACAC,EACAC,EACAC,E,mFAdRpe,EAAQ,IAWAie,EAAyBje,EAAQ,KACjCke,EAAwBle,EAAQ,KAChCme,EAAuBne,EAAQ,KAC/Boe,EAA0Bpe,EAAQ,KAExCC,QAAQV,OAAO,qBAcdwT,WAAW,mBAAoB,CAAC,SAAU,oBAAqB,sBAAuB,SAAU,SAASC,OAAQC,EAAmB3L,EAAqByP,GAUxJ/D,OAAO+D,OAASA,EAUhB/D,OAAOqL,kBAAoB,GAU3BrL,OAAOsL,mBAAqB,GAS5BtL,OAAOK,KAAO,WACZJ,EAAkBK,MAAMN,OAAO+D,SAUjC/D,OAAO9P,OAAS,WACd+P,EAAkBM,QAAQ,WAU5BP,OAAO2C,aAAe,WACpB3C,OAAO+D,OAAOtB,UAAUxQ,KAAK,CAAE,IAAO,GAAI,MAAS,MAWrD+N,OAAO4C,gBAAkB,SAAShD,GAAO,OACvC,eAAAI,OAAO+D,OAAOtB,WAAd,OAA+B7C,EAAO,IAWxCI,OAAOuL,uBAAyB,SAASC,GAClCA,IAGLxL,OAAO+D,OAAOtB,UAAY,IAC1B,aAAAxV,SAAO,KAAPA,QAAgB+S,OAAOqL,kBAAmB,SAAStH,GAC7CA,EAAOhB,QAAUyI,EAAazI,QAChC,aAAA9V,SAAO,KAAPA,QAAgBue,EAAaxI,WAAY,SAASN,GAC5CA,EAAM+I,UACRzL,OAAO+D,OAAOtB,UAAUxQ,KAAK,CAAE,IAAOyQ,EAAM7O,IAAK,MAAS,aAiBpEmM,OAAO0L,gBAAkB,SAASC,GAAS,MACzC,OAA0D,GAAnD,eAAAA,EAAQC,YAAYC,YAApB,OAAuC,UAAkC,EAAjBF,EAAQvZ,QAazE4N,OAAO8L,YAAc,SAASrJ,GAC5B,IAAIsJ,EAAsB/L,OAAO+D,OAAOhB,MACxC/C,OAAOsL,mBAAqB,GAE5B,IAAK,IAAI3e,EAAE,EAAGA,EAAEqT,OAAOqL,kBAAkBjZ,OAAQzF,IAC/C,GAAIqT,OAAOqL,kBAAkB1e,GAAGoW,QAAUgJ,EACxC,IAAK,IAAI3I,EAAE,EAAGA,EAAEpD,OAAOqL,kBAAkB1e,GAAGqW,WAAW5Q,OAAQgR,IAAK,CAClE,IAAI4I,EAAWhM,OAAOqL,kBAAkB1e,GAAGqW,WAAWI,GACtD,GAAI4I,EAASnY,MAAQ4O,EAAU5O,KACzBmY,EAASP,SACX,OAAIzL,OAAO0L,gBAAgBM,EAASC,SAC3BhB,EAEFC,EAGNc,EAASP,UACZzL,OAAOsL,mBAAmBrZ,KAAK+Z,EAASnY,KAMhD,OAAO4O,EAAU5O,IAAMsX,EAAuBC,GAYhDpL,OAAOkM,oBAAsB,SAASC,GACpC,IAAK,IAAIxf,EAAE,EAAGA,EAAEqT,OAAOqL,kBAAkBjZ,OAAQzF,IAC/C,GAAIqT,OAAOqL,kBAAkB1e,GAAGoW,QAAU/C,OAAO+D,OAAOhB,MACtD,IAAK,IAAIK,EAAE,EAAGA,EAAEpD,OAAOqL,kBAAkB1e,GAAGqW,WAAW5Q,OAAQgR,IAAK,CAClE,IAAI4I,EAAWhM,OAAOqL,kBAAkB1e,GAAGqW,WAAWI,GACtD,GAAI4I,EAASnY,MAAQsY,EACnB,OAAOH,EAASC,QAKxB,MAAO,IAWTjM,OAAOoM,sBAAwB,WAC7B,IAAIlR,EAAS,GAYb,OAXA,aAAAjO,SAAO,KAAPA,QAAgB+S,OAAOsL,mBAAoB,SAAS9I,GAClD,IAAIhF,GAAQ,GACZ,aAAAvQ,SAAO,KAAPA,QAAgB+S,OAAO+D,OAAOtB,UAAW,SAASC,GAC5CA,EAAM7O,MAAQ2O,IAChBhF,GAAQ,KAGPA,GACHtC,EAAOjJ,KAAKuQ,KAGTtH,GAKT5G,EAAoByI,uBAAuBzM,KAAK,SAASuT,GACvD7D,OAAOqL,kBAAoBxH,GAC3B,aAAA5W,SAAO,KAAPA,QAAgB4W,EAAU,SAASE,GACjC,GAAIA,EAAOhB,QAAU/C,OAAO+D,OAAOhB,MAAO,CAExC,IADA,IAAIG,EAAgB,GACXvW,EAAE,EAAGA,EAAEoX,EAAOf,WAAW5Q,OAAQzF,IAExC,IADA,IAAIwW,EAAOY,EAAOf,WAAWrW,GAAGkH,IACvBuP,EAAE,EAAGA,EAAEpD,OAAO+D,OAAOtB,UAAUrQ,OAAQgR,IAAK,CACnD,IAAIC,EAAIrD,OAAO+D,OAAOtB,UAAUW,GAC5BC,EAAExP,MAAQsP,GACZD,EAAcjR,KAAKoR,GAIzBrD,OAAO+D,OAAOtB,UAAYS,W,wBCpPpC,IAAIlM,EAAO,4HAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,mlBAEXzK,EAAOD,QAAU0K,G,wBCHjB,IAAIA,EAAO,2HAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,8XAEXzK,EAAOD,QAAU0K,G,wBCHjB,IAAIA,EAAO,0HAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,ikBAEXzK,EAAOD,QAAU0K,G,wBCHjB,IAAIA,EAAO,6HAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,s+BAEXzK,EAAOD,QAAU0K,G,4ECDjB,W,mDAFAhK,EAAQ,IAGR,IAWQqf,EACAC,EACAC,EACAC,EACAC,EAfFC,EAAY1f,EAAQ,KAWlBqf,EAAyBrf,EAAQ,KACjCsf,EAAwBtf,EAAQ,KAChCuf,EAA8Bvf,EAAQ,KACtCwf,EAAuBxf,EAAQ,KAC/Byf,EAAwBzf,EAAQ,KAEtCC,QAAQV,OAAO,qBAcdwT,WAAW,yBAA0B,CAAC,SAAU,iBAAkB,sBAAuB,QAAS,YAAa,SAASC,OAAQ2M,EAAgBrY,EAAqBC,EAAOqY,GAC3K5M,OAAOqM,uBAAyBA,EAChCrM,OAAOsM,sBAAwBA,EAC/BtM,OAAOuM,4BAA8BA,EACrCvM,OAAOwM,qBAAuBA,EAC9BxM,OAAOyM,sBAAwBA,EAU/BzM,OAAO2M,eAAiB,GAUxB3M,OAAOmJ,oBAAsB,GAU7BnJ,OAAO6M,uBAAyB,CAAE,MAAO,MAAO,UAUhD7M,OAAO8M,UAAW,EAUlB9M,OAAOjO,KAAO,IAAI2a,EAUlB1M,OAAO0J,kBAAoB,SAASC,GAClC3J,OAAOjO,KAAKQ,UAAYwD,QAAO,IAAIC,MAAOC,WAC1C0T,EAAQC,UAAW,GAUrB5J,OAAO+M,UAAY,WACjB/M,OAAO8M,UAAW,EAClBvY,EAAMyY,KAAK,YAAcpY,EAAEC,OAAOmL,OAAOjO,KAAKmE,WAAa,kCAAoCtB,EAAEC,OAAOmL,OAAOjO,KAAKJ,eAAiB,oBACrI,IAAIsb,EAAiB,YAAcrY,EAAEC,OAAOmL,OAAOjO,KAAKmE,WAAa,kCAAoCtB,EAAEC,OAAOmL,OAAOjO,KAAKJ,eAC9H2C,EAAoB4J,aAAa8B,OAAOjO,MAAMzB,KAC5C,WACE0P,OAAOpN,QACPyB,QAAQuQ,OAAO,CACb9P,QAASmY,EACTtY,MAAO,UACPM,QAAS,CACP4P,KAAM,CACJ1P,MAAO,KACPtC,UAAW,qBAKnBmN,OAAOvL,eAWXuL,OAAOpN,MAAQ,WACboN,OAAOjO,KAAO,IAAI2a,EAClB1M,OAAO8M,UAAW,GAWpB9M,OAAO9C,uBAAyB,WAC9B,IAAIvG,EAAa,GAYjB,OAXA,aAAA1J,SAAO,KAAPA,QAAgB+S,OAAOmJ,oBAAqB,SAASrL,GACnD,IAAIN,GAAQ,GACZ,aAAAvQ,SAAO,KAAPA,QAAgB+S,OAAOjO,KAAK4E,WAAY,SAASO,GAC3CA,EAAE9C,OAAS0J,IACbN,GAAQ,KAGPA,GACH7G,EAAW1E,KAAK6L,KAGbnH,GAWTqJ,OAAO6K,eAAiB,SAASjL,GAAO,OACtC,eAAAI,OAAOjO,KAAK4E,YAAZ,OAA8BiJ,EAAO,GACrCpS,KAAK0f,iBAAiBvI,QAAS,GAUjC3E,OAAO8K,YAAc,WACnB9K,OAAOjO,KAAKgF,iBACZvJ,KAAK0f,iBAAiBvI,QAAS,GAWjC3E,OAAOmN,UAAY,WACjB,QAAK3f,KAAK0f,kBACP1f,KAAK0f,iBAAiBvb,eACtBnE,KAAK0f,iBAAiBla,WACtBxF,KAAK0f,iBAAiBhX,YAGlB1I,KAAK0f,iBAAiBvb,cAAciY,UACzCpc,KAAK0f,iBAAiBla,UAAU4W,UAChCpc,KAAK0f,iBAAiBhX,UAAU0T,UAWpC5J,OAAOvL,aAAe,SAASK,GAC7BP,EAAMlD,MAAMyD,EAAS,CAACmQ,IAAK,OAU7BjF,OAAO7E,eAAiB,WACtB9G,QAAQK,OAAO,yEAA0E,SAAS/C,GAC5FA,EACF2C,EAAoB6G,eAAexJ,GAAerB,KAChD,WACEgE,EAAoBmB,uBAAuB9D,GAAe,GAAOrB,KAC/D,WACEiE,EAAMmB,QAAQ,mBAAqBd,EAAEC,OAAOlD,GAAiB,uCAC7DqO,OAAO2M,eAAe1a,KAAKN,IAE7BqO,OAAOvL,eAGXuL,OAAOvL,cAGT7H,OAAOyQ,SAASiC,KAAOJ,UAAKK,cAAgB,6BAMlDjL,EAAoB4I,yBAAyB5M,KAC3C,SAASqG,GACPqJ,OAAOmJ,oBAAsBxS,GAE/BqJ,OAAOvL,cAIJkY,EAYH3M,OAAO2M,eAAiBA,EAXxBrY,EAAoBqG,sBAAsBrK,KACxC,SAASsF,GACPoK,OAAO2M,eAAiB/W,EAEa,IAAjCoK,OAAO2M,eAAeva,QACxB4N,OAAO7E,kBAGX6E,OAAOvL,kB,uCCzQd,IAIO4X,EACAC,EACAC,EACAC,EACAC,EAfRzf,EAAQ,IAWAqf,EAAyBrf,EAAQ,KACjCsf,EAAwBtf,EAAQ,KAChCuf,EAA8Bvf,EAAQ,KACtCwf,EAAuBxf,EAAQ,KAC/Byf,EAAwBzf,EAAQ,KAEtCC,QAAQV,OAAO,qBAgBdwT,WAAW,8BAA+B,CAAC,cAAe,SAAU,oBAAqB,iBAAkB,sBAAuB,QAAS,SAASsI,EAAarI,OAAQC,EAAmB0M,EAAgBrY,EAAqBC,GAChOyL,OAAOqM,uBAAyBA,EAChCrM,OAAOsM,sBAAwBA,EAC/BtM,OAAOuM,4BAA8BA,EACrCvM,OAAOwM,qBAAuBA,EAC9BxM,OAAOyM,sBAAwBA,EAS/BzM,OAAOoN,eAAiB,WACtBpN,OAAO+M,YACP9M,EAAkBK,MAAMN,OAAOjO,OAUjCiO,OAAOqN,YAAc,WACnBpN,EAAkBM,QAAQ,WAK5BtT,QAAQqgB,OAAO9f,KAAM6a,EAAY,yBAA0B,CACzDrI,OAAQA,OACR2M,eAAgBA,EAChBrY,oBAAqBA,EACrBC,MAAOA,S,qFCrEb,IAAMF,EAAUrH,EAAQ,IAElBqK,EAAcrK,EAAQ,KAE5BA,EAAQ,IACRA,EAAQ,KAWNC,QAAQV,OAAO,qBAmBdwT,WAAW,wBAAyB,CAAC,SAAU,UAAW,WAAY,UAAW,eAAgB,gBAAiB,sBAAuB,qBAAsB,QAAS,SAASC,OAAQzP,EAAS2Y,EAAU3R,EAASkM,EAAcG,EAAetP,EAAqBiZ,EAAoBhZ,GAU1RyL,OAAOxH,aAAelE,EAAoB6F,YAW1C6F,OAAOrO,cAAgB8R,EAAa9R,cAUpCqO,OAAOzO,YAAc,IAAI8F,EAAY,IAUrC2I,OAAOwN,cAAgB,GAUvBxN,OAAOyN,SAAW,GAUlBzN,OAAO0N,QAAU,EAUjB1N,OAAO2N,WAAa,EAUpB3N,OAAOgF,OAAS,WACdzN,EAAQ8F,SAASiC,KAAOsE,EAAcmB,SAAW,kBAUnD/E,OAAO4N,kBAAoB,WACzBrW,EAAQ8F,SAASiC,KAAOsE,EAAcmB,SAAW,kBAAoBjK,mBAAmBkF,OAAOrO,eAAiB,kBAWlHqO,OAAOvL,aAAe,SAASK,GAC7BP,EAAMlD,MAAMyD,EAAS,CAACmQ,IAAK,OAY7BjF,OAAOxL,YAAc,WACnB+Y,EAAmB/Y,YAAYwL,OAAOzO,YAAayO,OAAOvL,eAW5DuL,OAAO6N,kBAAoB,WAEzB,MAAsB,SADL3E,EAAStQ,IAAI,yCACC,YAAc,IAU/CoH,OAAO8N,QAAU,WACfvW,EAAQ8F,SAASiC,KAAOsE,EAAcmB,SAAW,kBAAoBjK,mBAAmBkF,OAAOrO,eAAiB,iBAAmBqO,OAAO6N,qBAY5I7N,OAAO+N,SAAW,SAAShc,GACzBwF,EAAQ8F,SAASiC,KAAOsE,EAAcmB,SAAW,kBAAoBjK,mBAAmBkF,OAAOrO,eAAiB,UAAYmJ,mBAAmB/I,EAAKQ,WAAayN,OAAO6N,qBAW1K7N,OAAO5D,WAAa,SAASrK,GAC3BsC,EAAQa,QAAQ,4CAA8CN,EAAEC,OAAO9C,EAAKmE,WAAa,IAAK,SAASuQ,GACjGA,IACFnS,EAAoBkB,cACpBlB,EAAoB8H,WAAWrK,GAAMzB,KACnC,WAEE,IADA,IAMgB,EANZsP,GAAS,EACLjT,EAAI,EAAGA,EAAIqT,OAAOwN,cAAcpb,OAAQzF,IAC1CqT,OAAOwN,cAAc7gB,GAAG4F,YAAcR,EAAKQ,YAC7CqN,EAAQjT,IAGC,EAATiT,IACF,eAAAI,OAAOwN,eAAP,OAA4B5N,EAAM,GAEpCrL,EAAMmB,QAAQ,YAAcd,EAAEC,OAAO9C,EAAKmE,WAAa,uBAEzD8J,OAAOvL,kBAafuL,OAAOgO,oBAAsB,WAC3BhO,OAAOiO,YAAc,EACrBjO,OAAO2N,WAAa3N,OAAOwN,cAAcpb,QAU3C4N,OAAOkO,qBAAuB,WAC5B5Z,EAAoBkB,cACpBlB,EAAoBuG,kCAAkCmF,OAAOzO,aAAajB,KACxE,WACEiE,EAAMmB,QAAQ,8CAEhBsK,OAAOvL,eAWXuL,OAAOmO,mBAAqB,WAC1B9Z,EAAQa,QAAQ,yFAA0F,SAASuR,GAC7GA,IACFnS,EAAoBkB,cACpBwK,OAAOzO,YAAc,IAAI8F,EAAY,IACrC/C,EAAoByF,6BACpBiG,OAAO0G,WAAW,WAChB1G,OAAOkO,6BAaflO,OAAOoO,aAAe,WACpBlF,EAAS/R,IAAI,yBAA0B6I,OAAOyN,WAWhDzN,OAAO0G,WAAa,SAAS2H,GAC3B,IAAIva,EAAQoV,EAAStQ,IAAI,0BACrB9E,IACFkM,OAAOyN,SAAW3Z,GAEpBS,EAAMmB,QAAQ,0BAA4Bd,EAAEC,OAAOmL,OAAOrO,eAAiB,OAC3E2C,EAAoBuB,eAAemK,OAAOrO,eAAerB,KACvD,SAASiB,GACPyO,OAAOzO,YAAcA,EACrByO,OAAOwN,cAAgBjc,EAAYO,MACnCkO,OAAOgO,sBACHK,GACFA,KAGJrO,OAAOvL,eAWXuL,OAAOmH,OAAO,YAAa,WACzBnH,OAAOwN,cAAgBjd,EAAQ,SAARA,CAAkByP,OAAOzO,YAAYO,MAAOkO,OAAOsO,WAC1EtO,OAAOgO,wBAKLhO,OAAOrO,eACTqO,OAAO0G,iB,qHCtUb,IAcQ6H,EACAC,EAfFna,EAAUrH,EAAQ,IAExBA,EAAQ,IACRA,EAAQ,KAWAuhB,EAAmBvhB,EAAQ,KAC3BwhB,EAAyBxhB,EAAQ,KAEvCC,QAAQV,OAAO,qBAmBdwT,WAAW,yBAA0B,CAAC,SAAU,UAAW,WAAY,UAAW,YAAa,gBAAiB,uBAAwB,sBAAuB,qBAAsB,QAAS,SAASC,OAAQzP,EAAS2Y,EAAU3R,EAASmM,EAAWE,EAAepT,EAAsB8D,EAAqBiZ,EAAoBhZ,GAUnUyL,OAAOxH,aAAelE,EAAoB6F,YAU1C6F,OAAOyO,QAAS,EAUhBzO,OAAO/G,iBAAmB,CAAErD,aAAc,IAU1CoK,OAAO0O,qBAAuB,GAU9B1O,OAAOyN,SAAW,GAUlBzN,OAAO0N,QAAU,EAUjB1N,OAAO2N,WAAa,EAUpB3N,OAAOvL,aAAe,SAASK,GAC7BP,EAAMlD,MAAMyD,EAAS,CAACmQ,IAAK,OAU7BjF,OAAO9B,aAAe,WACpB,IAAIgE,EAA0B,IAC9B,aAAAjV,SAAO,KAAPA,QAAgB+S,OAAO/G,iBAAiBrD,aAAc,SAASgF,GAC7DsH,EAAwBjQ,KAAK2I,EAAEjJ,iBAEb+R,EAAU9U,KAAK,CACjC2W,SAAU,SACVC,UAAU,EACVzF,WAAY,8BACZ0F,YAAa8I,EACbxI,KAAM,KACN9V,QAAS,CACP0c,eAAgB,WAAa,OAAOzK,MAG1B5M,OAAOhF,KAAK,SAASyB,GACzBiO,OAAO/G,iBAAiBpD,eAAe9D,EAAKJ,eAClDe,QAAQX,MAYdiO,OAAO2O,MAAQ,SAAShd,GACtB,IAAIuQ,EAA0B,IAC9B,aAAAjV,SAAO,KAAPA,QAAgB+S,OAAO/G,iBAAiBrD,aAAc,SAASgF,GACzDA,EAAEjJ,gBAAkBA,GACtBuQ,EAAwBjQ,KAAK2I,EAAEjJ,iBAGf+R,EAAU9U,KAAK,CACjC2W,SAAU,SACVC,UAAU,EACVzF,WAAY,+BACZ0F,YAAa+I,EACbve,QAAS,CACP0B,cAAe,WAAa,OAAOA,GACnCuQ,wBAAyB,WAAa,OAAOA,MAGnC5M,OAAOhF,KAAK,SAAS6R,GACjC9N,EAAQa,QAAQ,8FAAgGN,EAAEC,OAAOsN,GAAuB,WAAavN,EAAEC,OAAOlD,GAAiB,6EAA8E,SAAS8U,GACvQA,IAGLnS,EAAoBkB,cACpBlB,EAAoBkI,6BAA6B7K,EAAewQ,GAAqB7R,KACnF,WACEiE,EAAMmB,QAAQ,qCAAuCd,EAAEC,OAAOlD,GAAiB,uBAAyBiD,EAAEC,OAAOsN,KAEnHnC,OAAOvL,oBAefuL,OAAOsI,IAAM,WACXjU,EAAQK,OAAO,gDAAiD,SAAS/C,GACvE,GAAIA,EAAe,CAEjB,GAAIA,EAAcid,MAAM,eAEtB,YADAva,EAAQwa,MAAM,8BAAgCja,EAAEC,OAAOlD,GAAiB,+EAI1E,GADQqO,OAAO/G,iBAAiBpD,eAAelE,GAG7C,YADA0C,EAAQwa,MAAM,8BAAgCja,EAAEC,OAAOlD,GAAiB,0DAI1E2C,EAAoB6G,eAAexJ,GAAerB,KAChD,SAASsK,GACPrG,EAAMmB,QAAQ,mBAAqBd,EAAEC,OAAO+F,EAAEjJ,eAAiB,uBAEjEqO,OAAOvL,kBAcfuL,OAAO4N,kBAAoB,SAASjc,GAClC4F,EAAQ8F,SAASiC,KAAOsE,EAAcmB,SAAW,kBAAoBjK,mBAAmBnJ,GAAiB,kBAW3GqO,OAAO8O,KAAO,SAASnd,GACrB4F,EAAQ8F,SAASiC,KAAOsE,EAAcmB,SAAW,kBAAoBjK,mBAAmBnJ,IAa1FqO,OAAOxL,YAAc,SAASjD,GAC5B+C,EAAoBkB,cACpB+X,EAAmB/Y,YAAYjD,EAAayO,OAAOvL,eAWrDuL,OAAO+K,QAAU,SAASxZ,GACxB+C,EAAoBkB,cACpBlB,EAAoBuG,kCAAkCtJ,GAAajB,KACjE,WACEiE,EAAMmB,QAAQ,+BAAiCd,EAAEC,OAAOtD,EAAYI,eAAiB,uBAEvFqO,OAAOvL,eAYXuL,OAAO+O,eAAiB,SAASpd,GAC/B0C,EAAQa,QAAQ,sDAAwDN,EAAEC,OAAOlD,GAAiB,IAAK,SAAS8U,GAC1GA,IACFnS,EAAoBkB,cACpBlB,EAAoBwH,8BAA8BnK,GAAerB,KAC/D,WACEiE,EAAMmB,QAAQ,sBAAwBd,EAAEC,OAAOlD,GAAiB,kEACtDqO,OAAO/G,iBAAiBpD,eAAelE,GAC7CiB,SAENoN,OAAOvL,kBAcfuL,OAAOxE,OAAS,SAAS7J,GACvB0C,EAAQa,QAAQ,mDAAqDN,EAAEC,OAAOlD,GAAiB,IAAK,SAAS8U,GACvGA,IACFnS,EAAoBkB,cACpBlB,EAAoBgH,kBAAkB3J,GAAerB,KACnD,WACEiE,EAAMmB,QAAQ,mBAAqBd,EAAEC,OAAOlD,GAAiB,uBAE/DqO,OAAOvL,kBAafuL,OAAOgP,yBAA2B,WAChCzX,EAAQ8F,SAASiC,KAAOsE,EAAcmB,SAAW,wCAUnD/E,OAAOiP,0BAA4B,WACjC5a,EAAQa,QAAQ,yEAA0E,SAASuR,GAC7FA,IACFnS,EAAoBkB,cACpBlB,EAAoBsI,8BAA8B,WAAWtM,KAC3D,WACEiE,EAAMmB,QAAQ,2DACdsK,OAAO0G,cAET1G,OAAOvL,kBAiBfuL,OAAOkP,YAAc,WACnB7a,EAAQuQ,OAAO,CACb9P,QAAS,gVAITH,MAAO,UACPM,QAAS,CACPka,UAAW,CACTha,MAAO,oBACPtC,UAAW,cACXwC,SAAU,WACR2K,OAAOoP,wBAGXC,eAAgB,CACdla,MAAO,uBACPtC,UAAW,gBACXwC,SAAU,WACR2K,OAAOkO,yBAGXrJ,KAAM,CACJ1P,MAAO,SACPtC,UAAW,qBAanBmN,OAAOkO,qBAAuB,WAC5B5Z,EAAoBkB,cACpBjB,EAAMmB,QAAQ,qCACdpB,EAAoBoG,oBAAoBsF,OAAO/G,kBAAkB3I,KAC/D,WACEiE,EAAMmB,QAAQ,8CAEhBsK,OAAOvL,eAWXuL,OAAOoP,oBAAsB,WAC3B/a,EAAQa,QAAQ,8FAA+F,SAASuR,GAClHA,IACFnS,EAAoBkB,cACpBjB,EAAMmB,QAAQ,8BACdpB,EAAoBuF,aACpBmG,OAAO/G,iBAAmB,CAAErD,aAAe,IAC3CoK,OAAO0G,iBAYb1G,OAAOsP,2BAA6B,WAClCtP,OAAOiO,YAAc,EACrBjO,OAAO2N,WAAa3N,OAAO0O,qBAAqBtc,QAUlD4N,OAAOoO,aAAe,WACpBlF,EAAS/R,IAAI,yBAA0B6I,OAAOyN,WAUhDzN,OAAO0G,WAAa,WAClB,IAAI5S,EAAQoV,EAAStQ,IAAI,0BACrB9E,IACFkM,OAAOyN,SAAW3Z,GAEpBkM,OAAOyO,QAAS,EAChBje,EAAqBJ,UAAUmf,QAAQ,WACrCjb,EAAoB8F,kBAAkB9J,KACpC,SAASkK,GACPwF,OAAO/G,iBAAmBuB,EAC1BwF,OAAO0O,qBAAuB1O,OAAO/G,iBAAiBrD,aACtDoK,OAAOsP,6BACPtP,OAAOyO,QAAS,EAChBla,EAAMmB,QAAQ,UAAYsK,OAAO/G,iBAAiBrD,aAAaxD,OAAS,qBAE1E4N,OAAOvL,iBAYbuL,OAAOmH,OAAO,YAAa,WACzBnH,OAAO0O,qBAAuBne,EAAQ,SAARA,CAAkByP,OAAO/G,iBAAiBrD,aAAcoK,OAAOsO,WAC7FtO,OAAOsP,+BAKkC,IAAvCtP,OAAO0O,qBAAqBtc,QAC9B4N,OAAO0G,iB,wBCrfb,IAAI1P,EAAO,sHAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,+9BAEXzK,EAAOD,QAAU0K,G,wBCHjB,IAAIA,EAAO,2HAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,6+BAEXzK,EAAOD,QAAU0K,G,iJCHjB,IAAMqH,EAAKrR,EAAQ,KACbuR,EAAWF,EAAGE,SACdG,EAAWL,EAAGK,SACd9J,EAAI5H,EAAQ,KAWhBC,QAAQV,OAAO,qBAYdqE,UAAU,iBAAkB,WAC3B,MAAO,CACLE,SAAU,IACV9D,QAAS,UACTwiB,KAAM,SAASjc,EAAOvC,EAASye,EAAOC,GACpCA,EAAKC,SAASC,QAAQ,SAAS5c,GAAW,MAExC,GADYO,EAAM8T,cAAyD,KAA1C,eAAA9T,EAAM8T,aAAN,OAA0BrU,GAEzD0c,EAAKG,aAAa,SAAS,OAD7B,CAIA,IAAIrR,GAAU,EAUd,GATW,IAAID,EAASvL,GACfwL,UACPA,GAAU,EAEC,IAAIE,EAAS1L,GACfwL,YACLA,GAAU,GAGXA,EAKL,OADAkR,EAAKG,aAAa,SAAS,GACpB7c,EAJL0c,EAAKG,aAAa,SAAS,UAkBpCjf,UAAU,eAAgB,WACzB,MAAO,CACLE,SAAU,IACV9D,QAAS,UACTwiB,KAAM,SAASjc,EAAOvC,EAASye,EAAOC,GACpCA,EAAKC,SAASC,QAAQ,SAASE,GAC7B,IAAItS,GAAQ,EAQZ,GAPIjK,EAAM6T,sBAAwB7T,EAAM6T,qBAAqBjU,WAC3D,aAAAlG,SAAO,KAAPA,QAAgBsG,EAAM6T,qBAAqBjU,SAAU,SAAS4c,GACxDA,EAAEC,YAAczc,EAAMyK,QAAQgS,WAAaD,EAAE3b,OAAS0b,IACxDtS,GAAQ,MAIVA,EAMJ,OADAkS,EAAKG,aAAa,UAAU,GACrBC,EALLJ,EAAKG,aAAa,UAAU,SAoBrCjf,UAAU,iBAAkB,WAC3B,MAAO,CACLE,SAAU,IACV9D,QAAS,UACTwiB,KAAM,SAASjc,EAAOvC,EAASye,EAAOC,GACpCA,EAAKC,SAASC,QAAQ,SAASrd,GAAW,MAExC,KADYgB,EAAM8V,qBAAuE,KAAjD,eAAA9V,EAAM8V,oBAAN,OAAiC9W,IAC5DA,EAAUqc,MAAM,gBAM7B,OADAc,EAAKG,aAAa,SAAS,GACpBtd,EALLmd,EAAKG,aAAa,SAAS,SAmBpCjf,UAAU,gBAAiB,WAC1B,MAAO,CACLE,SAAU,IACV9D,QAAS,UACTijB,YAAY,EACZ1c,MAAO,CAAE,SAAY,kBACrBic,KAAM,SAASjc,EAAOvC,EAASye,EAAOC,GACpCA,EAAKC,SAASC,QAAQ,SAASM,GAC7B,GAAKA,GAAwC,MAAxB,aAAAA,GAAY,KAAZA,GAArB,CAIA,IAAI1S,GAAQ,EAMZ,IALA,aAAAvQ,SAAO,KAAPA,QAAgBsG,EAAM4c,QAAQpe,KAAK4E,WAAY,SAASO,GAClDA,EAAE8Y,YAAczc,EAAMuK,SAASkS,WAAa9Y,EAAE9C,OAAS8b,IACzD1S,GAAQ,MAGRA,EAMJ,OADAkS,EAAKG,aAAa,UAAU,GACrBK,EALLR,EAAKG,aAAa,UAAU,QAV5BH,EAAKG,aAAa,UAAU,SAiCrCjf,UAAU,mBAAoB,WAC7B,MAAO,CACLE,SAAU,IACV9D,QAAS,UACTijB,YAAY,EACZ1c,MAAO,CAAE,MAAS,qBAClBic,KAAM,SAASjc,EAAOvC,EAASye,EAAOC,GACpCA,EAAKC,SAASC,QAAQ,SAASQ,GAC7B,IAAIC,GAAW,EACf,GAAID,IAAY7c,EAAM4c,QAAQ/H,YAAa,CAEzC7U,EAAM4c,QAAQpI,uBAAuBxU,EAAMsN,OAC3C,IAAMyP,EAAe/c,EAAM4c,QAAQpe,KAAKkQ,SAASF,iBAAiBxO,EAAMsN,OACxEwP,GAAW,aAAAzb,GAAC,KAADA,EAAU0b,EAAcF,GAAW,EAGhD,GAAKC,EAML,OADAX,EAAKG,aAAa,UAAU,GACrBO,EALLV,EAAKG,aAAa,UAAU,U,iDCtL5B,E,+DAIV,E,SAAA,WAAA5iB,QAAQV,OAAO,sBAAf,OAcQ,YAAa,WACnB,OAAO,SAASkE,EAAO8f,GACrB,IAAMR,EAAIS,OAAOD,GACjB,OAAI9f,EACKA,EAAM2B,OAAS2d,EAAItf,GAAQ,aAAAA,GAAK,KAALA,EAAYsf,GAEzC,O,sCChBb,I,EAAA,G,EAAA,Q,2BANA,IAAM9iB,QAAUD,EAAQ,GACxBA,EAAQ,GAER,IAAMyjB,EAAczjB,EAAQ,IACtB0jB,EAAgB1jB,EAAQ,IAI9BC,QAAQV,OAAO,cAAe,CAC5B,YACA,iBAGDqE,UAAU,kBAAmB,WAC5B,MAAO,CACLE,SAAU,IACVmf,YAAY,EACZxK,YAAaiL,EACb3Q,WAAY,oBAIfnP,UAAU,gBAAiB,WAC1B,MAAO,CACLE,SAAU,IACVmf,YAAY,EACZxK,YAAagL,EACb1Q,WAAY,mBAIfA,WAAW,iBAAkB,CAAC,SAAU,UAAW,QAAS,SAASC,OAAQzI,EAASC,GAErFwI,OAAO2Q,SAAW,SAASC,GACzB,OAAOpZ,EAAM,CACX+C,IAAK,aACLU,OAAQ,MACRC,OAAQ,CAAE/F,MAAOyb,EAAUC,WAAY,cACtCvgB,KAAK,SAASwgB,GACf,OAAOA,EAAStW,KAAKzI,QAIzBiO,OAAO+Q,oBAAsB,SAAShf,GACpCwF,EAAQ8F,SAASiC,KAAOJ,UAAKK,cAAgB,iCAAmCxN,EAAKyV,OAKxFzH,WAAW,gBAAiB,CAAC,SAAU,UAAW,QAAS,UAAW,SAASC,OAAQzI,EAASC,EAAOjH,GAEtGyP,OAAOgR,cAAgB,SAASJ,GAC9B,OAAOpZ,EAAM,CACX+C,IAAK,WACLU,OAAQ,QACP3K,KAAK,SAASwgB,GACd,OAAOvgB,EAAQ,SAARA,CAAkBugB,EAAStW,KAAKyW,UAAWL,MAIvD5Q,OAAOkR,cAAgB,SAASC,GAC9B5Z,EAAQ8F,SAASiC,KAAOJ,UAAKK,cAAgB,yCAA2C4R,EAAI3J,Q,uBCpEhG,IAAIxQ,EAAO,+FAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,6oBAEXzK,EAAOD,QAAU0K,G,qCCFjB,IAAM/J,QAAUD,EAAQ,IACxBA,EAAQ,IACRA,EAAQ,IACRA,EAAQ,IACRA,EAAQ,IACRA,EAAQ,IAGRA,EAAQ,IACRA,EAAQ,IAERA,EAAQ,IACRA,EAAQ,IAGRA,EAAQ,IACRA,EAAQ,IACRA,EAAQ,IAERH,QAAQC,IAAI,oBAEZP,EAAOD,QAAUM,OAAM,QAAcK,S,uBCtBrC,IAAI+J,EAAO,iGAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,ipBAEXzK,EAAOD,QAAU0K,G,+JCHjB,IAAM/J,QAAUD,EAAQ,GACxBA,EAAQ,GACRA,EAAQ,IACRA,EAAQ,IACRA,EAAQ,IAIoB,SAAtBokB,EAA+B7d,EAAO8d,GACpCA,EAAc7W,KACdjH,EAAMlC,MAAQggB,EAAc7W,KAE5BjH,EAAMlC,MAAQ,0DANtB,IAAMigB,EAAuBtkB,EAAQ,IAejCC,QAAQV,OAFU,sBAEU,CACxB,sBACA,aACA,YACA,cAECqE,UAAU,oBAAqB,WAC5B,MAAO,CACHE,SAAU,IACVmf,YAAY,EACZxK,YAAa6L,EACbvR,WAAY,2BAGnB1T,QAAQ,iBAdb,aAc+B,SAASklB,GAChC,OAAOA,EAAU,gBAAiB,GAAI,CAClC,MAAc,CAAEtW,OAAQ,MAAOuW,SAAS,EAAMC,aAAa,QAGlE1R,WAAW,wBAAyB,CAAC,SAAU,iBAAkB,WAAY,YAAa,SAASC,OAAQ0R,EAAgBja,EAAUka,GAClI,IAAIC,EACO,GADPA,EAEO,GAFPA,EAGK,GAHLA,EAKQ,GALRA,EAOU,GAGVC,EACO,QADPA,EAEM,OAFNA,EAGM,OAGV7R,OAAO8R,MAAQ,GACf9R,OAAOnE,QAAU,GACjBmE,OAAO+R,uBAAwB,EAC/B/R,OAAOgS,sBAAuB,EAC9BhS,OAAOiS,0BAA4B,IACnCjS,OAAOkS,mBAAqB,IAC5BlS,OAAOmS,0BAAuBxkB,EAC9BqS,OAAOoS,yBAAsBzkB,EAC7BqS,OAAOqS,iCAA8B1kB,EACrCqS,OAAOsS,sBAAmB3kB,GAC1BqS,OAAOuS,cAAgB,EAEvB,WAAAZ,GAAS,KAATA,EAAe,YAAa,SAASa,GACjC,IAAIC,EAA4D,EAAlDC,EAAE,qBAAqBC,IAAIH,EAAMI,QAAQxgB,OACnDygB,EAASH,EAAE,qBAAqBI,GAAGN,EAAMI,QAC9BH,GAAWI,GAEtBpb,EAAS,WACLuI,OAAO+S,aACP/S,OAAOgT,qBAKnB,aAAArB,GAAS,KAATA,EAAe,QAAS,SAAShjB,GAE7B8I,EAAS,WACD9I,EAAEskB,UAAYrB,GAAkB,IAAI5b,KAASgK,OAAOsS,kBAAoB,KACxErlB,QAAQ+D,QAAQ,sBAAsBkiB,QACtCjmB,QAAQ+D,QAAQ,sBAAsBmiB,SACtCnT,OAAOsS,sBAAmB3kB,GACpBgB,EAAEskB,UAAYrB,IACpB5R,OAAOsS,iBAAmB,IAAItc,MAI9BrH,EAAEskB,UAAYrB,IACd5R,OAAO+S,aACP/S,OAAOgT,sBAKnB,aAAArB,GAAS,KAATA,EAAe,UAAW,SAAShjB,GAC/B8I,EAAS,WACL,GAA4B,EAAxBuI,OAAOnE,QAAQzJ,OAAY,CAC3B,IAAIpB,EAAUoO,SAASgU,eAAe,2BAA6BpT,OAAOuS,eAC1E,GAAI5jB,EAAEskB,UAAYrB,GAAmBjjB,EAAEskB,UAAYrB,EAAmB,CAClE5R,OAAOqT,qBAAqB1kB,EAAEskB,SAK9B,IAAIK,EAAkBlU,SAASgU,eAAe,sBAC1CG,EAAeD,EAAgBE,aAC/BC,EAAeziB,EAAQwiB,aACvBE,EAAe1iB,EAAQ2iB,UAIvBD,EAAeD,EAHL,IAG+BF,EAAeD,EAAgBM,YACxEN,EAAgBM,UAAYF,GAGE,IAA9BJ,EAAgBM,WACbN,EAAgBM,UAAYF,EAAeD,IAC9CH,EAAgBM,UAAYF,EAAeD,GAG/C9kB,EAAEskB,UAAYrB,IACV5R,OAAOnE,QAAQmE,OAAOuS,eAAesB,OAAShC,EAI9Cpa,EAAS,WACLxK,QAAQ+D,QAAQA,GAAS8iB,eAAe,UACzC,IAEH9T,OAAO+S,aACP/S,OAAOgT,gBACPhiB,EAAQ+iB,eAO5B/T,OAAOqT,qBAAuB,SAASJ,GAEnC,OADAjT,OAAOnE,QAAQmE,OAAOuS,eAAeyB,UAAW,EACzCf,GACH,KAAKrB,EACD5R,OAAOuS,gBACP,MACJ,KAAKX,EACD5R,OAAOuS,gBAKXvS,OAAOuS,cAAgB,IACvBvS,OAAOuS,cAAgB,GAEvBvS,OAAOuS,eAAiBvS,OAAOnE,QAAQzJ,SACvC4N,OAAOuS,cAAgBvS,OAAOnE,QAAQzJ,OAAS,GAE/C4N,OAAOnE,QAAQmE,OAAOuS,eAAesB,OAAShC,EAC9C7R,OAAOqT,qBAAqBJ,GAE5BjT,OAAOnE,QAAQmE,OAAOuS,eAAeyB,UAAW,GAIxDhU,OAAO+S,WAAa,WAChB/S,OAAO8R,MAAQ,GACf9R,OAAOnE,QAAU,GACjBmE,OAAO+R,uBAAwB,EAC3B/R,OAAOoS,qBACPpS,OAAOoS,oBAAoB6B,kBAInCjU,OAAOgT,cAAgB,WACfhT,OAAOoS,qBACPpS,OAAOoS,oBAAoB6B,iBAE/BjU,OAAOgS,sBAAuB,EAC9Bva,EAASvH,OAAO8P,OAAOqS,8BAI3BrS,OAAOmT,OAAS,SAASvT,GACrB,IAAIsU,EAActU,GAAS,EACC,GAAxBI,OAAOuS,gBACPvS,OAAOnE,QAAQmE,OAAOuS,eAAeyB,UAAW,GAEpDhU,OAAOuS,cAAgB2B,EACvBlU,OAAOnE,QAAQmE,OAAOuS,eAAeyB,UAAW,GAGpDhU,OAAOmU,cAAgB,WACQ,GAAvBnU,OAAO8R,MAAM1f,OAIb4N,OAAO8R,MAAM1f,OAAS,IAK1BqF,EAASvH,OAAO8P,OAAOmS,sBACvBnS,OAAOnE,QAAU,GACjBmE,OAAO+R,uBAAwB,EAI/B/R,OAAOmS,qBAAuB1a,EAAS,WAEnCA,EAASvH,OAAO8P,OAAOqS,6BAGvBrS,OAAOqS,4BAA8B5a,EAAS,WAC1CuI,OAAOgS,sBAAuB,GAC/BhS,OAAOiS,2BAGNjS,OAAOoS,qBACPpS,OAAOoS,oBAAoB6B,iBAI/BjU,OAAO3O,WAAQ1D,EACfqS,OAAOoS,oBAAsBV,EAAeI,MAAM,CAAC,GAAO9R,OAAO8R,OAC7D,SAAStX,GACLwF,OAAOgT,gBACPhT,OAAO+R,uBAAwB,EAE/B,IAAIlW,EAAU,IACd,aAAArB,GAAI,KAAJA,EAAa,SAAS4Z,GAAY,MAiB9B,GAfAvY,EAAQ5J,KAAK,CACL0B,QAASygB,EAAWzgB,QAAQS,KAE5Be,MAAmC,EAA5Bif,EAAWvY,QAAQzJ,OAAagiB,EAAWzgB,QAAQS,KAAO,IAAMggB,EAAWzgB,QAAQS,KAC1Fyf,KAAMhC,EACN7hB,MAAOokB,EAAWvY,QAAQzJ,OAC1BiiB,KAAMD,EAAWC,QAIzB,eAAAD,EAAWvY,SAAX,OAA2B,SAASyY,GAChCA,EAAKT,KAAOhC,EACZhW,EAAQ5J,KAAKqiB,MAGO,IAApBF,EAAWC,KAAe,CAC1B,IAAIE,EAAkB,CAClB5gB,QAASygB,EAAWzgB,QAAQS,KAC5BpE,MAAOokB,EAAWvY,QAAQzJ,OAC1ByhB,KAAMhC,EACN2C,SAAU,WACNxU,OAAO3O,WAAQ1D,EACf+jB,EAAeI,MAAM,CAAC,GAAM9R,OAAO8R,MAAO,GAAMtkB,KAAKwC,MAAQ,GAAI,GAAOxC,KAAKmG,SAAU,SAASmd,GAAU,QAiBrE,IAhB7B2D,GAAW,eAAAzU,OAAOnE,SAAP,OAAuB0Y,GAGlCG,EAAe5D,EAAS,GACxBjV,GAAU,eAAA6Y,EAAa7Y,SAAb,OAA2B4Y,EAAW,IACpD,aAAA5Y,GAAO,KAAPA,EAAgB,SAASyY,EAAM3nB,GAAG,MAE9B2nB,EAAKT,KAAOhC,GACZ,eAAA7R,OAAOnE,SAAP,OAAsB4Y,EAAW9nB,EAAG,EAAG2nB,GACvCC,EAAgBvkB,UAGpBukB,EAAgBP,UAAW,IAC3BhU,OAAOnE,QAAQmE,OAAOuS,eAAeyB,UAAW,KAG5CU,EAAaL,OACb,eAAArU,OAAOnE,SAAP,QAAsB,eAAAmE,OAAOnE,SAAP,OAAuB0Y,GAAkB,IAEpE,SAASzD,GACR9Q,OAAO+R,uBAAwB,EAC/BX,EAAoBpR,OAAQ8Q,MAGpCkD,UAAU,GAEdnY,EAAQ5J,KAAKsiB,MAGrBvU,OAAOnE,QAAUA,EACY,GAAzBmE,OAAOnE,QAAQzJ,SACf4N,OAAOuS,cAAgB,EACvBvS,OAAOnE,QAAQmE,OAAOuS,eAAeyB,UAAW,IAGxD,SAASlD,GACkB,GAAnBA,EAAS7iB,SACT+R,OAAO+R,uBAAwB,EAC/BX,EAAoBpR,OAAQ8Q,GAC5B9Q,OAAOgT,oBAMpBhT,OAAOkS,qBA1GNlS,OAAO+S,kB,uBCtM3B,IAAI/b,EAAO,2GAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,ysGAEXzK,EAAOD,QAAU0K,G,sCCHjB,IAAM/J,QAAUD,EAAQ,GACTA,EAAQ,IACDA,EAAQ,IAI9BC,QAAQV,OAFY,oBAEQ,CAAE,sBAAuB,iB,qCCNrDM,QAAQC,IAAI,mBAEZ,IAAMC,OAASC,EAAQ,GACvBT,EAAOD,QAAUS,Q,0ICMD,SAAV4nB,EAAmBC,GACvB,OAAQA,SAAoD,IAAfA,EAAIxiB,OALnD,IAAMsO,EAAuB1T,EAAQ,KAC/B6nB,EAAsB7nB,EAAQ,KAuVpCT,EAAOD,QAvUiB,SAAyBqF,EAAeI,EAAMP,GAIpE,IAAMjE,EAAOC,KASbD,EAAKoE,cAAgBA,EASrBpE,EAAKkE,SAAWD,EAShBjE,EAAKmE,UAAW,EAShBnE,EAAKgF,UAAYR,EAAK,cAClB4iB,EAAQpnB,EAAKgF,aACfhF,EAAKgF,UAAYwD,QAAO,IAAIC,MAAOC,YAUrC1I,EAAK2I,UAAYnE,EAAK,cAStBxE,EAAK8P,SAAWtL,EAAI,SASpBxE,EAAKunB,KAAO/iB,EAAI,KAShBxE,EAAKwnB,SAAWhjB,EAAI,SASpBxE,EAAKynB,oBAAsBjjB,EAAK,yBAShC,IAAIkjB,EAAmBljB,EAAK,qBAC5BxE,EAAK2nB,gBAAkBP,EAAQM,GAAoB,KAAOA,EAS1D,IAAIE,EAAmBpjB,EAAK,qBAyN5B,OAxNAxE,EAAK6nB,gBAAkBT,EAAQQ,GAAoB,KAAOA,EAS1D5nB,EAAK4O,WAAa,GASlB5O,EAAKoJ,WAAa,GASlBpJ,EAAKuJ,OAAS,IAEd,aAAA7J,SAAO,KAAPA,QAAgB8E,EAAI,UAAe,SAASgB,GACxCxF,EAAK4O,WAAWlK,KAAK,IAAIyO,EAAqB3N,OAGlD,aAAA9F,SAAO,KAAPA,QAAgB8E,EAAI,MAAW,SAASmO,GACtC3S,EAAKuJ,OAAO7E,KAAKiO,MAGnB,aAAAjT,SAAO,KAAPA,QAAgB8E,EAAI,SAAc,SAAS+L,GACzCvQ,EAAKoJ,WAAW1E,KAAK6L,KAYvBvQ,EAAK0U,SAAW,IAAI4S,EAAoB9iB,EAAMvE,MAU9CD,EAAK8E,WAAa,WAChB,QAAI9E,EAAKmE,WAGAnE,EAAKkE,UAWhBlE,EAAKqd,gBAAkB,WACrB,IAAIpN,GAAQ,EASZ,OARA,aAAAvQ,SAAO,KAAPA,QAAgBM,EAAK4O,WAAY,SAASpJ,GACf,MAArBA,EAAKG,cACPsK,GAAQ,KAGZjQ,EAAK4O,WAAWlK,KAAK,IAAIyO,EAAqB,CAC5C,eAAiBlD,EAAQ,IAAM,OAE1BjQ,EAAK4O,WAAW/J,OAAS,GAWlC7E,EAAK0c,YAAc,WAKjB,OAJA1c,EAAKuJ,OAAO7E,KAAK,CACfmC,KAAM,GACNN,MAAO,KAEFvG,EAAKuJ,OAAO1E,OAAQ,GAW7B7E,EAAKwJ,eAAiB,WAIpB,OAHAxJ,EAAKoJ,WAAW1E,KAAK,CACnBmC,KAAM,KAED7G,EAAKoJ,WAAWvE,OAAQ,GAWjC7E,EAAKyd,oBAAsB,WACzB,IAAI3M,EAAK,KAMT,OALA,aAAApR,SAAO,KAAPA,QAAgBM,EAAK4O,WAAY,SAASpJ,GACf,MAArBA,EAAKG,cACPmL,EAAKtL,EAAKC,aAGPqL,GAWT9Q,EAAK8nB,qBAAuB,WAAW,UACrC,SAAI9nB,EAAKynB,qBAA2D,MAApC,eAAAznB,EAAKynB,qBAAL,cAG5BznB,EAAK2nB,iBAAmD,MAAhC,eAAA3nB,EAAK2nB,iBAAL,aAGxB3nB,EAAK6nB,iBAAmD,MAAhC,eAAA7nB,EAAK6nB,iBAAL,WAc9B7nB,EAAKwO,uBAAyB,WAC5B,IAAIuZ,EAAa,CACf,aAAc/nB,EAAKgF,UACnB,aAAchF,EAAK2I,UACnB,SAAY3I,EAAK8P,SACjB,KAAQ9P,EAAKunB,KACb,SAAYvnB,EAAKwnB,SACjB,UAAa,GACb,wBAAyBxnB,EAAKynB,oBAC9B,oBAAqBznB,EAAK2nB,gBAC1B,oBAAqB3nB,EAAK6nB,gBAC1B,MAAS,GACT,YAAa7nB,EAAK0U,SAASL,yBAC3B,SAAY,IAgCd,OA7BA,aAAA3U,SAAO,KAAPA,QAAgBM,EAAK4O,WAAY,SAASpJ,GACxC,IAAIwiB,EAAkB,CACpB,UAAWxiB,EAAKC,UAChB,MAASD,EAAKE,YACd,eAAgBF,EAAKG,YACrB,OAAWH,EAAK9E,QAA0B,YAAhB8E,EAAK9E,OAAwB,IAAM,IAC7D,YAAaV,EAAK0U,SAASJ,4BAA4B9O,GACvD,oBAAqB,KAGvB,aAAA9F,SAAO,KAAPA,QAAgB8F,EAAKI,SAAU,SAAS6K,GACtC,IAAIwX,EAAgB,CAClB,eAAgBxX,EAAQ5J,KACxB,YAAa7G,EAAK0U,SAASH,0BAA0B/O,EAAMiL,IAE7DuX,EAAgB,qBAAqBtjB,KAAKujB,KAG5CF,EAAU,UAAcrjB,KAAKsjB,MAG/B,aAAAtoB,SAAO,KAAPA,QAAgBM,EAAKuJ,OAAQ,SAASoJ,GACpCoV,EAAU,MAAUrjB,KAAKiO,MAG3B,aAAAjT,SAAO,KAAPA,QAAgBM,EAAKoJ,WAAY,SAASmH,GACxCwX,EAAU,SAAarjB,KAAK6L,KAGvBwX,GAGT/nB,EAAKsF,UAAY,kBAEVtF,I,4CC3TThB,EAAOD,QAnBoB,SAA4B8G,GAgBrD,OAba5F,KASR4G,KAAOhB,EAAI,gBATH5F,KAWRqF,UAAY,qBAXJrF,O,mFCbf,IAAMP,QAAUD,EAAQ,GAElByoB,EAA4BzoB,EAAQ,IAE1CC,QAAQV,OAAO,YAAa,CAAC,iBACxBF,QAAQ,qBAAqB,CAAC,KAAM,aAAc,SAASwD,EAAI6lB,GAC5D,MAAO,CACHC,cAAe,SAAUC,GACS,QAAL,MAArBA,EAAU3nB,QACN2nB,EAAU1nB,QAAU0nB,EAAU1nB,OAAOqM,OACjC,eAAAqb,EAAU1nB,OAAOqM,KAAjB,OAAgC,WAC7B,eAAAqb,EAAU1nB,OAAOqM,KAAjB,OAAgC,cAEvC1N,QAAQwE,MAAM,iBAAkBukB,EAAWA,EAAUC,SACrDH,EAAWI,MAAM,kBAMzB,OAHyB,MAArBF,EAAU3nB,QACVynB,EAAWI,MAAM,oBAEdjmB,EAAG0J,OAAOqc,QAI5B1nB,OAAO,CAAC,gBACL,SAAU6nB,GACNA,EAAcC,SAASH,QAAQI,OAAO,oBAAsB,iBAC5DF,EAAcG,aAAajkB,KAAK,yBAGvCgF,IAAI,CAAC,aAAc,YAAa,SAASye,EAAYhS,GAClDgS,EAAWS,IAAI,gBAAiB,WAC5B,IAAIC,EAAWhX,SAASC,qBAAqB,QACzC+W,GAA8B,EAAlBA,EAAShkB,QAAcgkB,EAAS,GAAG9W,KAC/C1S,OAAOyQ,SAASiC,KAAO8W,EAAS,GAAG9W,KAAO,iCAE1CzS,QAAQsC,KAAK,kFAIrBumB,EAAWS,IAAI,mBAAoB,WAC/BzS,EAAU9U,KAAK,CACX6W,YAAagQ,EACb1V,WAAY,CAAF,6BAAE,SAASC,OAAQC,GACzBD,OAAOqW,OAAS,WACZpW,EAAkBM,UAClB3T,OAAOyQ,SAASgZ,YAGxBtQ,KAAM,GACNR,SAAU,SACVC,UAAY,SAM5BjZ,EAAOD,QAAUW,S,uCC3DDD,EAAQ,GAExBA,EAAQ,KACRA,EAAQ,M,uCCEP,IAIOspB,IAA6BtpB,EAAQ,KAE3CC,QAAQV,OAAO,oBAAqB,CAClC,YACA,oBACA,UACA,YACA,eACA,gBACA,sBACA,aACA,sBAGD2B,OAAO,CAAC,iBAAkB,SAAUqoB,GACnCA,EACCjc,KAAK,IAAK,CACTmL,YAAa6Q,EACbvW,WAAY,yBACZ9P,QAAS,CACP0c,eAAgB,WAAa,OAAO,SAGvC6J,UAAU,CACTC,WAAY,SAIfvoB,OAAO,CAAC,gBAAiB,SAASwoB,GACjCA,EAAcC,iBAAiB,KAC/BD,EAAcE,eAAe,qB,wBCvCjC,IAAI5f,EAAO,iIAEXpK,OAAOK,QAAQV,OAAO,MAAM0K,IAAI,CAAC,iBAAkB,SAASC,GAAKA,EAAEC,IAAIH,EAD5D,ghDAEXzK,EAAOD,QAAU0K,I","file":"quickaddnode.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn ","console.log('init: bootstrap-js'); // eslint-disable-line no-console\n\nconst jQuery = require('vendor/jquery-js');\nrequire('bootstrap/dist/js/bootstrap');\n\nmodule.exports = jQuery;\n","/* eslint no-console: 0 */\n\nconst angular = require('vendor/angular-js');\nconst moment = require('moment-timezone');\nrequire('@rangerrick/moment-javaformat/dist/moment-javaformat');\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nfunction OnmsDateFormatter() {\n}\n\nOnmsDateFormatter.prototype.init = function init(readyCallback) {\n\tvar self = this;\n\tvar defaultFormat = \"yyyy-MM-dd'T'HH:mm:ssxxx\"; // eslint-disable-line quotes\n\twindow._onmsZoneId = undefined;\n\n\tvar xhr = new XMLHttpRequest();\n\txhr.onreadystatechange = function readystatechange() {\n\t\ttry {\n\t\t\tif (xhr.readyState === XMLHttpRequest.DONE) {\n\t\t\t\tif (xhr.status === 200) {\n\t\t\t\t\tvar config = JSON.parse(xhr.responseText);\n\t\t\t\t\tif (config.datetimeformatConfig && config.datetimeformatConfig.datetimeformat) {\n\t\t\t\t\t\twindow._onmsDateTimeFormat = config.datetimeformatConfig.datetimeformat || defaultFormat;\n\t\t\t\t\t\twindow._onmsZoneId = config.datetimeformatConfig.zoneId;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log('Error: datetimeformatConfig property not found:',config);\n\t\t\t\t\t\twindow._onmsDateTimeFormat = defaultFormat;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('Error: failed to request format info: ' + xhr.status + ' ' + xhr.statusText);\n\t\t\t\t\twindow._onmsDateTimeFormat = defaultFormat;\n\t\t\t\t}\n\t\t\t\treadyCallback(self, xhr.status);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log('Error: failed to request format info: ', e);\n\t\t\twindow._onmsDateTimeFormat = defaultFormat;\n\t\t\treadyCallback(self, xhr.status);\n\t\t}\n\t};\n\txhr.open('GET', 'rest/info');\n\txhr.setRequestHeader('Accept', 'application/json');\n\txhr.send();\n};\n\nOnmsDateFormatter.prototype.assertInitialized = function assertInitialized() {\n\tif (!window._onmsDateTimeFormat) {\n\t\tconsole.log('OnmsDateFormatter.init() must complete before using!');\n\t\tthrow new Error('OnmsDateFormatter.init() must complete before using!');\n\t}\n};\n\nOnmsDateFormatter.prototype.getZoneId = function getZoneId() {\n\tthis.assertInitialized();\n\n\tif (!this._zoneId) {\n\t\tif (window._onmsZoneId) {\n\t\t\tthis._zoneId = window._onmsZoneId;\n\t\t} else {\n\t\t\tconsole.warn('No zone ID specified from the server; guessing based on browser.');\n\t\t\tthis._zoneId = moment.tz.guess();\n\t\t}\n\t}\n\treturn this._zoneId;\n};\n\nOnmsDateFormatter.prototype.format = function format(date) {\n\tthis.assertInitialized();\n\n\tif (date === undefined || date === null) {\n\t\treturn date;\n\t}\n\n\tconst zoneId = this.getZoneId();\n\tconst momentDate = moment.tz(date, zoneId);\n\treturn momentDate.formatJavaDTF(window._onmsDateTimeFormat);\n};\n\n(function() {\n\t'use strict';\n\tif (typeof jest === 'undefined') {\n\t\tvar f = new OnmsDateFormatter();\n\t\tf.init(function() {\n\t\t\twindow._onmsFormatter = f;\n\t\t});\n\t} else {\n\t\tconsole.log('Running in a test environment. Skipping automatic initialization.');\n\t}\n})();\n\n(function() {\n\t'use strict';\n\n\tif (window.angular) {\n\t\tangular.module('onmsDateFormatter', ['ng']).factory('DateFormatterService', ['$interval', '$q', function DateFormatterService($interval, $q) {\n\t\t\tconsole.log('Initializing DateFormatterService');\n\n\t\t\tvar deferred = $q.defer();\n\n\t\t\tvar count = 0;\n\t\t\tvar i = $interval(function() {\n\t\t\t\tif (window._onmsFormatter) {\n\t\t\t\t\tconsole.log('Global formatter found: ' + window._onmsDateTimeFormat);\n\t\t\t\t\tdeferred.resolve(window._onmsFormatter);\n\t\t\t\t\t$interval.cancel(i);\n\t\t\t\t}\n\t\t\t\tif (count++ > 300) {\n\t\t\t\t\tconsole.log('DateFormatterService: giving up waiting for global formatter.');\n\t\t\t\t\t$interval.cancel(i);\n\t\t\t\t}\n\t\t\t}, 100);\n\n\t\t\treturn {\n\t\t\t\traw: window._onmsFormatter,\n\t\t\t\tformatter: deferred.promise,\n\t\t\t\tformat: function(date) {\n\t\t\t\t\treturn deferred.promise.then(function(f) {\n\t\t\t\t\t\treturn f.format(date);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\n\t\tangular.module('onmsDateFormatter').filter('onmsDate', ['$filter', 'DateFormatterService', function($filter, DateFormatterService) {\n\t\t\treturn function onmsDate(input, ifEmpty) {\n\t\t\t\tvar ret;\n\t\t\t\tif (window._onmsFormatter) {\n\t\t\t\t\t// If the formatter has finished initializing, use it\n\t\t\t\t\tret = window._onmsFormatter.format(input);\n\t\t\t\t\t//console.log('onmsDate: formatter returned: ' + ret);\n\t\t\t\t} else {\n\t\t\t\t\t// Otherwise, use ISO format\n\t\t\t\t\tret = $filter('date')(input, 'yyyy-MM-ddTHH:mm:ss.sssZ');\n\t\t\t\t\t//console.log('onmsDate: $filter(date) returned: ' + ret);\n\t\t\t\t}\n\t\t\t\tif (ret !== undefined && ret !== null) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t\treturn ifEmpty;\n\t\t\t}\n\t\t}]);\n\n\t\tangular.module('onmsDateFormatter').directive('onmsDate', ['DateFormatterService', function(dateFormatterService) {\n\t\t\treturn {\n\t\t\t\trestrict: 'E',\n\t\t\t\tcompile: function(element) {\n\t\t\t\t\tdateFormatterService.format(element.text()).then(function(formatted) {\n\t\t\t\t\t\telement.replaceWith(formatted);\n\t\t\t\t\t}).catch(function(e) {\n\t\t\t\t\t\tconsole.error('Failed to format ' + element.text(), e);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}]);\n\t} else {\n\t\tconsole.log('Angular not found.  Not initializing OnmsDateFormatter Angular components.');\n\t}\n})();\n\nmodule.exports = OnmsDateFormatter;","const RequisitionNode = require('./RequisitionNode');\n\n/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\n/**\n* @ngdoc object\n* @name Requisition\n* @module onms-requisitions\n* @param {object} requisition an OpenNMS requisition JSON object\n* @param {boolean} isDeployed true if the requisition has been deployed\n* @constructor\n*/\nconst Requisition = function Requisition(requisition, isDeployed) {\n\n  'use strict';\n\n  const self = this;\n\n  /**\n   * @description The deployed flag\n   * @ngdoc property\n   * @name Requisition#deployed\n   * @propertyOf Requisition\n   * @returns {boolean} true, if the requisition has been deployed\n   */\n  self.deployed = isDeployed;\n\n  /**\n   * @description The modified flag\n   * @ngdoc property\n   * @name Requisition#modified\n   * @propertyOf Requisition\n   * @returns {boolean} true, if the requisition has been modified\n   */\n  self.modified = false;\n\n  /**\n   * @description The name of the requisition (the foreign source)\n   * @ngdoc property\n   * @name Requisition#foreignSource\n   * @propertyOf Requisition\n   * @returns {string} the foreign source\n   */\n  self.foreignSource = requisition['foreign-source'];\n\n  /**\n   * @description The last modication date of the requisition\n   * @ngdoc property\n   * @name Requisition#dateStamp\n   * @propertyOf Requisition\n   * @returns {string} the last modification date\n   */\n  self.dateStamp = requisition['date-stamp'] || Date.now();\n\n  /**\n   * @description The last import date of the requisition\n   * @ngdoc property\n   * @name Requisition#lastImport\n   * @propertyOf Requisition\n   * @returns {string} the last import date\n   */\n  self.lastImport = requisition['last-import'];\n\n  /**\n   * @description The configured nodes array\n   * @ngdoc property\n   * @name Requisition#nodes\n   * @propertyOf Requisition\n   * @returns {array} The nodes array\n   */\n  self.nodes = [];\n\n  angular.forEach(requisition.node, function(node) {\n    var requisitionNode = new RequisitionNode(self.foreignSource, node, isDeployed);\n    self.nodes.push(requisitionNode);\n  });\n\n  /**\n   * @description The number of nodes stored on the database\n   * @ngdoc property\n   * @name Requisition#nodesInDatabase\n   * @propertyOf Requisition\n   * @returns {interger} number of nodes in the database\n   */\n  self.nodesInDatabase = 0;\n\n  /**\n   * @description The number of nodes defined on the requisition\n   * @ngdoc property\n   * @name Requisition#nodesDefined\n   * @propertyOf Requisition\n   * @returns {interger} number of nodes defined\n   */\n  self.nodesDefined = self.nodes.length;\n\n  /**\n  * @description Checks if the requisition has been changed\n  *\n  * @name Requisition:isModified\n  * @ngdoc method\n  * @methodOf Requisition\n  * @returns {boolean} true if the requisition has been changed or modified.\n  */\n  self.isModified = function() {\n    if (self.modified) {\n      return true;\n    }\n    return ! self.deployed;\n  };\n\n  /**\n  * @description Gets the array possition for a particular node\n  *\n  * @name Requisition:indexOf\n  * @ngdoc method\n  * @param {string} foreignId The foreign ID of the node\n  * @methodOf Requisition\n  * @returns {integer} the index (-1 if the foreign ID doesn't exist)\n  */\n  self.indexOf = function(foreignId) {\n    for(var i = 0; i < self.nodes.length; i++) {\n      if (self.nodes[i].foreignId === foreignId) {\n        return i;\n      }\n    }\n    return -1;\n  };\n\n  /**\n  * @description Gets a specific node object.\n  *\n  * @name Requisition:getNode\n  * @ngdoc method\n  * @param {string} foreignId The foreign ID of the node\n  * @methodOf Requisition\n  * @returns {object} the node object.\n  */\n  self.getNode = function(foreignId) {\n    var idx = self.indexOf(foreignId);\n    return idx < 0 ? null : self.nodes[idx];\n  };\n\n  /**\n  * @description Adds or replaces a node object.\n  *\n  * @name Requisition:setNode\n  * @ngdoc method\n  * @param {object} node The RequisitionNode object\n  * @methodOf Requisition\n  */\n  self.setNode = function(node) {\n    var idx = self.indexOf(node.foreignId);\n    if (idx < 0) {\n      self.nodes.push(node);\n      self.nodesDefined++;\n    } else {\n      self.nodes[idx] = node;\n    }\n    self.modified = true;\n    self.dateStamp = Date.now();\n  };\n\n  /**\n  * @description Marks the requisition as deployed\n  *\n  * @name Requisition:setDeployed\n  * @ngdoc method\n  * @param {boolean} deployed true, if the requisition has been deployed\n  * @methodOf Requisition\n  */\n  self.setDeployed = function(deployed) {\n    self.deployed = deployed;\n    self.modified = false;\n    angular.forEach(self.nodes, function(node) {\n      node.deployed = deployed;\n      node.modified = false;\n    });\n    self.lastImport = deployed ? Date.now() : null;\n  };\n\n  /**\n  * @description Resets the content of the requisition\n  *\n  * @name Requisition:reset\n  * @ngdoc method\n  * @methodOf Requisition\n  */\n  self.reset = function() {\n    self.nodes = [];\n    self.nodesDefined = 0;\n    self.nodesInDatabase = 0;\n    self.modified = true;\n    self.dateStamp = Date.now();\n  };\n\n  self.className = 'Requisition';\n\n  return self;\n}\n\nmodule.exports = Requisition;","/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\nconst RequisitionService = require('./RequisitionService');\n\n/**\n* @ngdoc object\n* @name RequisitionInterface\n* @module onms-requisitions\n* @param {Object} intf an OpenNMS interface JSON object\n* @constructor\n*/\nconst RequisitionInterface = function RequisitionInterface(intf) {\n  'use strict';\n\n  const self = this;\n\n  /**\n   * @description The IP Address of the interface\n   * @ngdoc property\n   * @name RequisitionInterface#ipAddress\n   * @propertyOf RequisitionInterface\n   * @returns {string} The IP Address of the interface\n   */\n  self.ipAddress = intf['ip-addr'];\n\n  /**\n   * @description The description of the interface\n   * @ngdoc property\n   * @name RequisitionInterface#description\n   * @propertyOf RequisitionInterface\n   * @returns {string} The description of the interface\n   */\n  self.description = intf['descr'];\n\n  /**\n   * @description The primary flag ('P' for primary, 'S' for secondary or 'N' for None)\n   * @ngdoc property\n   * @name RequisitionInterface#snmpPrimary\n   * @propertyOf RequisitionInterface\n   * @returns {string} The primary flag\n   */\n  self.snmpPrimary = intf['snmp-primary'];\n\n  /**\n   * @description The status of the interface (managed or unmanaged)\n   * @ngdoc property\n   * @name RequisitionInterface#status\n   * @propertyOf RequisitionInterface\n   * @returns {string} The status\n   */\n  self.status = 'managed';\n  if (intf && intf['status']) {\n    self.status = intf['status'] === '1' ? 'managed' : 'unmanaged';\n  }\n\n  /**\n   * @description The array of services. Each service is an object with a name property, for example: { name: 'ICMP' }\n   * @ngdoc property\n   * @name RequisitionInterface#services\n   * @propertyOf RequisitionInterface\n   * @returns {array} The services\n   */\n  self.services = [];\n\n  angular.forEach(intf['monitored-service'], function(svc) {\n    self.services.push(new RequisitionService(svc));\n  });\n\n  self.className = 'RequisitionInterface';\n\n  return self;\n};\n\nmodule.exports = RequisitionInterface;\n","/**\n* @author Jesse White <jesse@opennms.org>\n* @copyright 2019 The OpenNMS Group, Inc.\n*/\nconst MetaDataConstants = require('./MetaDataConstants');\nconst Scope = MetaDataConstants.Scope;\n\n/**\n* @ngdoc object\n* @name RequisitionMetaDataEntry\n* @module onms-requisitions\n* @constructor\n*/\nconst RequisitionMetaDataEntry = function RequisitionMetaDataEntry() {\n  'use strict';\n\n  const self = this;\n\n  // Default to the 'node' scope\n  self.scope = Scope.NODE;\n\n  // Must be set to the related RequisitionInterface object when the scope is set to 'interface' or 'service'\n  self.scoped_interface = null;\n\n  // Must be set to the related RequisitionService object when the scope is set to 'service'\n  self.scoped_service = null;\n\n  // Default to using the 'requisition' context\n  self.context = MetaDataConstants.RequisitionContext;\n\n  self.key = null;\n\n  self.value = null;\n\n  self.displayScope = function() {\n    if (self.scope === Scope.INTERFACE) {\n      return 'Interface';\n    } else if (self.scope === Scope.SERVICE) {\n      return 'Service';\n    }\n    return 'Node';\n  };\n\n  self.displayInterface = function() {\n    if (self.scoped_interface !== null) {\n      return self.scoped_interface.ipAddress;\n    }\n    return null;\n  };\n\n  self.displayService = function() {\n    if (self.scoped_service !== null) {\n      return self.scoped_service.name;\n    }\n    return null;\n  };\n\n  self.className = 'RequisitionMetaDataEntry';\n\n  return self;\n};\n\nmodule.exports = RequisitionMetaDataEntry;\n","/**\n * @author Jesse White <jesse@opennms.org>\n * @copyright 2019 The OpenNMS Group, Inc.\n */\n\n/**\n * Available scopes for meta-data entries.\n */\nconst Scope = {\n    NODE: 'node',\n    INTERFACE: 'interface',\n    SERVICE: 'service'\n};\n\nconst RequisitionContext = 'requisition';\n\nmodule.exports = {Scope, RequisitionContext};\n","const bootbox = require('bootbox');\n\nrequire('./Requisitions');\n\n/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\n(function() {\n\n  'use strict';\n\n  angular.module('onms-requisitions')\n\n  /**\n  * @ngdoc service\n  * @name SynchronizeService\n  * @module onms-requisitions\n  *\n  * @requires RequisitionsService The requisitions service\n  * @requires growl The growl plugin for instant notifications\n  *\n  * @description The SynchronizeService provides a way to request a requisition synchronization asking the user how the scan process will be processed.\n  */\n  .factory('SynchronizeService', ['RequisitionsService', 'growl', function(RequisitionsService, growl) {\n    return {\n      /**\n      * @description Requests the synchronization/import of a requisition on the server\n      *\n      * A dialog box is displayed to request to the user if the scan phase should be triggered or not.\n      *\n      * @name SynchronizeService:synchronize\n      * @ngdoc method\n      * @methodOf SynchronizeService\n      * @param {object} requisition The requisition object\n      * @param {function} successHandler The function to call after a successful synchronization\n      * @param {function} errorHandler The function to call when something went wrong.\n      */\n      synchronize: function(requisition, errorHandler) {\n        /**\n        * @param {object} requisition The requisition object\n        * @param {string} rescanExisting true to perform a full scan, false to only add/remove nodes without scan, dbonly for all DB operations without scan\n        */\n        var doSynchronize = function(requisition, rescanExisting) {\n          RequisitionsService.startTiming();\n          RequisitionsService.synchronizeRequisition(requisition.foreignSource, rescanExisting).then(\n            function() { // success\n              growl.success('The import operation has been started for ' + _.escape(requisition.foreignSource) + ' (rescanExisting? ' + rescanExisting + ')<br/>Use <b>refresh</b> to update the deployed statistics');\n              requisition.setDeployed(true);\n            },\n            errorHandler\n          );\n        };\n        bootbox.prompt({\n            title: 'Synchronize Requisition  ' +  _.escape(requisition.foreignSource),\n            message: '<p><b>Choose a scan option: </b></p>',\n            inputType: 'radio',\n            inputOptions: [\n            {\n                text: 'Scan all nodes',\n                value: 'true',\n            },\n            {\n                text: 'Scan added nodes only',\n                value: 'false',\n            },\n            {\n                text: 'No scanning',\n                value: 'dbonly',\n            }\n            ],\n            buttons: {\n                    confirm: {\n                        label: 'Synchronize',\n                    },\n                    cancel: {\n                        label: 'Cancel',\n                    }\n                },\n            swapButtonOrder: 'true',\n            callback: function (result) {\n                if (result !== null) {\n                    doSynchronize(requisition, result);\n                }\n            }\n        });\n      }\n    };\n  }]);\n\n}());\n","/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\n/**\n* @ngdoc object\n* @name RequisitionsData\n* @module onms-requisitions\n* @constructor\n*/\nconst RequisitionsData = function RequisitionsData() {\n  'use strict';\n\n  const self = this;\n\n  /**\n   * @description The configured requisitions.\n   * @ngdoc property\n   * @name RequisitionsData#requisitions\n   * @propertyOf RequisitionsData\n   * @returns {array} The requisitions array\n   */\n  self.requisitions = [];\n\n  /**\n  * @description Gets the array possition for a particular node\n  *\n  * @name RequisitionsData:indexOf\n  * @ngdoc method\n  * @param {string} foreignSource The foreign source (a.k.a requisition name)\n  * @methodOf RequisitionsData\n  * @returns {integer} the index (-1 if the foreign source doesn't exist)\n  */\n  self.indexOf = function(foreignSource) {\n    for(var i = 0; i < self.requisitions.length; i++) {\n      if (self.requisitions[i].foreignSource === foreignSource) {\n        return i;\n      }\n    }\n    return -1;\n  };\n\n  /**\n  * @description Gets the requisition object for a given foreign source.\n  *\n  * @name RequisitionsData:getRequisition\n  * @ngdoc method\n  * @param {string} foreignSource The foreign source (a.k.a requisition name)\n  * @methodOf RequisitionsData\n  * @returns {object} the requisition object.\n  */\n  self.getRequisition = function(foreignSource) {\n    var idx = self.indexOf(foreignSource);\n    return idx < 0 ? null : self.requisitions[idx];\n  };\n\n  /**\n  * @description Adds or replaces a requisition object.\n  *\n  * @name RequisitionsData:setRequisition\n  * @ngdoc method\n  * @param {object} requisition The Requisition object\n  * @methodOf RequisitionsData\n  */\n  self.setRequisition = function(requisition) {\n    var idx = self.indexOf(requisition.foreignSource);\n    if (idx < 0) {\n      self.requisitions.push(requisition);\n    } else {\n      self.requisitions[idx] = requisition;\n    }\n  };\n\n  self.className = 'RequisitionsData';\n\n  return self;\n}\n\nmodule.exports = RequisitionsData;","const RequisitionNode = require('./RequisitionNode');\n\n/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\n/**\n* @ngdoc object\n* @name QuickNode\n* @module onms-requisitions\n* @constructor\n*/\nconst QuickNode = function QuickNode() {\n\n  'use strict';\n\n  const self = this;\n\n  self.foreignSource = null;\n  self.foreignId = String(new Date().getTime());\n  self.nodeLabel = null;\n  self.ipAddress = null;\n  self.snmpCommunity = 'public';\n  self.snmpVersion = 'v2c';\n  self.noSnmp = false;\n  self.deviceUsername = null;\n  self.devicePassword = null;\n  self.enablePassword = null;\n  self.accessMethod = null;\n  self.autoEnable = false;\n  self.categories = [];\n\n  /**\n  * @description Creates a new RequisitionNode object based on the current settings.\n  *\n  * @name QuickNode:createRequisitionedNode\n  * @ngdoc method\n  * @methodOf QuickNode\n  * @returns {object} the new RequisitionNode Object\n  */\n  self.createRequisitionedNode = function() {\n    var reqNode = new RequisitionNode(self.foreignSource, {\n      'foreign-id': self.foreignId,\n      'node-label': self.nodeLabel,\n      'interface': [{\n        'ip-addr': self.ipAddress,\n        'snmp-primary': self.noSnmp ? 'N' : 'P'\n      }],\n      'category': self.categories\n    }, false);\n    if (self.deviceUsername && self.deviceUsername.trim() !== '') {\n      reqNode.assets.push({'name': 'username', 'value': self.deviceUsername});\n    }\n    if (self.devicePassword && self.devicePassword.trim() !== '') {\n      reqNode.assets.push({'name': 'password', 'value': self.devicePassword});\n    }\n    if (self.enablePassword && self.enablePassword.trim() !== '') {\n      reqNode.assets.push({'name': 'enable', 'value': self.enablePassword});\n    }\n    if (self.accessMethod && self.accessMethod.trim() !== '') {\n      reqNode.assets.push({'name': 'connection', 'value': self.accessMethod});\n    }\n    if (self.autoEnable) {\n      reqNode.assets.push({'name': 'autoenable', 'value': 'A'});\n    }\n    return reqNode;\n  };\n\n  /**\n  * @description Adds a new category to the node\n  *\n  * @name QuickNode:addNewCategory\n  * @ngdoc method\n  * @methodOf QuickNode\n  * @returns {object} the new service Object\n  */\n  self.addNewCategory = function() {\n    self.categories.push({\n      name: ''\n    });\n    return self.categories.length -1;\n  };\n\n  self.className = 'QuickNode';\n\n  return self;\n}\n\nmodule.exports = QuickNode;","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/lib/onms-http/403-permission-denied.html';\nvar html = \"<div class=modal-header> <h3><i class=\\\"fa fa-exclamation-triangle text-warning\\\"></i> Permission Denied</h3> </div> <div class=modal-body> <h5> You are not allowed to perform the requested action. </h5> <p class=text-muted> This is not supposed to happen. Please reload the page and contact your administrator if this occurs more often. </p> </div> <div class=modal-footer> <button class=\\\"btn btn-primary\\\" ng-click=reload()>Reload</button> </div>\";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/quick-add-panel-basic.html';\nvar html = \"<div> <div class=form-group> <label class=col-form-label for=foreignSource>Requisition</label> <input class=form-control type=text id=foreignSource name=foreignSource placeholder=\\\"Select a Requisition (hit space bar to see the options or start typing the name)\\\" ng-model=node.foreignSource typeahead-editable=false typeahead-min-length=0 uib-typeahead=\\\"fs for fs in foreignSources | filter:$viewValue\\\" required ng-class=\\\"{ 'is-invalid' : quickAddNodeForm.foreignSource.$invalid }\\\"> </div> <div class=form-group> <label class=col-form-label for=ipAddress>IP Address</label> <input class=form-control type=text id=ipAddress name=ipAddress placeholder=\\\"A valid IPv4 or IPv6 address\\\" ng-model=node.ipAddress required valid-ip-address ng-class=\\\"{ 'is-invalid' : quickAddNodeForm.ipAddress.$invalid }\\\"> <p ng-show=quickAddNodeForm.ipAddress.$invalid class=invalid-feedback>A valid IPv4 or IPv6 address is required</p> </div> <div class=form-group> <label class=col-form-label for=nodeLabel>Node Label</label> <input class=form-control type=text id=nodeLabel name=nodeLabel placeholder=\\\"The Node Label\\\" ng-model=node.nodeLabel required ng-class=\\\"{ 'is-invalid' : quickAddNodeForm.nodeLabel.$invalid }\\\"> </div> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/quick-add-panel-snmp.html';\nvar html = \"<div> <div class=form-group> <div class=checkbox> <label> <input type=checkbox id=noSnmp name=noSnmp ng-model=node.noSnmp> No SNMP </label> </div> </div> <div class=form-group> <label class=col-form-label for=snmpVersion>Version</label> <select class=\\\"form-control custom-select\\\" id=snmpVersion name=snmpVersion ng-model=node.snmpVersion ng-disabled=node.noSnmp> <option>v1</option> <option selected=selected>v2c</option> </select> </div> <div class=form-group> <label class=col-form-label for=snmpCommunity>Community String</label> <input class=form-control type=text id=snmpCommunity name=snmpCommunity placeholder=\\\"SNMP Community String\\\" ng-model=node.snmpCommunity ng-disabled=node.noSnmp> </div> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/quick-add-panel-categories.html';\nvar html = \"<div> <button class=\\\"btn btn-secondary my-2\\\" id=add-category ng-click=addCategory()><i class=\\\"fa fa-plus\\\"/> Add Category</button> <br/> <ng-form name=categoryForm ng-repeat=\\\"category in node.categories\\\"> <div class=form-group> <div class=input-group> <div class=input-group-prepend> <div class=input-group-text><i class=\\\"fa fa-pencil\\\"></i></div> </div> <input class=form-control type=text name=categoryName placeholder=\\\"Category Name\\\" ng-model=category.name typeahead-min-length=0 typeahead-editable=true uib-typeahead=\\\"category for category in getAvailableCategories() | filter:$viewValue\\\" required ng-class=\\\"{ 'is-invalid' : categoryForm.categoryName.$invalid }\\\"> <div class=input-group-append> <button class=\\\"btn btn-secondary\\\" type=button ng-click=removeCategory($index)> <span class=\\\"fa fa-trash\\\"></span> </button> </div> <p ng-show=categoryForm.categoryName.$invalid class=invalid-feedback>Category name is required and should be unique on the node.</p> </div> </div> </ng-form> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/quick-add-panel-cli.html';\nvar html = \"<div> <div class=form-group> <label class=col-form-label for=descr>Device username</label> <input class=form-control type=text id=deviceUsername name=deviceUsername placeholder=\\\"The device username [optional]\\\" ng-model=node.deviceUsername> </div> <div class=form-group> <label class=col-form-label for=descr>Device password</label> <input class=form-control type=text id=devicePassword name=devicePassword placeholder=\\\"The device password [optional]\\\" ng-model=node.devicePassword> </div> <div class=form-group> <label class=col-form-label for=descr>Enable Password</label> <input class=form-control type=text id=enablePassword name=enablePassword placeholder=\\\"The enable password [optional]\\\" ng-model=node.enablePassword> </div> <div class=form-group> <label class=col-form-label for=descr>Access Method</label> <input class=form-control type=text id=accessmethod name=accessMethod placeholder=\\\"Access Method (hit space bar to see the options) [optional]\\\" ng-model=node.accessMethod typeahead-editable=false typeahead-min-length=0 uib-typeahead=\\\"m for m in availableAccessMethods | filter:$viewValue\\\" required> </div> <div class=form-group> <div class=checkbox> <label> <input type=checkbox id=autoEnable name=autoEnable ng-model=node.autoEnable> Auto Enable </label> </div> </div> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/quick-add-panel-help.html';\nvar html = \"<div> <p> This workflow provides a quick way to add a node to an existing provisioning requisition in this OpenNMS system. </p> <p> <strong>Note: This operation <em>will</em> override any un-synchronized modifications made to the selected requisition.</strong> </p> <p> <em>Basic Attributes</em> are common to all nodes. Select the requisition into which this node should be added, provide an IP address on which OpenNMS will communicate with the node, and enter a node label. The node label will serve as the display name for the node throughout OpenNMS. </p> <p> <em>Surveillance Category Memberships</em> are optional and work like tags. A node can be a member of any number of surveillance categories, and the names of those categories can be used in a variety of powerful ways throughout the OpenNMS system. </p> <p> <em>SNMP Parameters</em> are optional and apply only to the node being requisitioned. If no values are specified here, OpenNMS' system-wide SNMP configuration will be used to determine the appropriate values for the IP address entered in the <em>Basic Attributes</em> section. If the node does not support SNMP, the \\\"No SNMP\\\" box should be checked. Configuring SNMPv3 parameters via the web UI is not supported; contact your OpenNMS administrator if this node requires SNMPv3 parameters that differ from those in the system-wide configuration. </p> <p> <em>CLI Authentication Parameters</em> are optional and will be used only if one or more provisioning adapters are configured to use them. Typically this is the case if OpenNMS is integrated with an external configuration management system. </p> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\nconst RequisitionsData = require('../model/RequisitionsData');\nconst Requisition      = require('../model/Requisition');\nconst RequisitionNode  = require('../model/RequisitionNode');\n\n(function() {\n\n  'use strict';\n\n  angular.module('onms-requisitions')\n\n  /**\n  * @ngdoc service\n  * @name RequisitionsService\n  * @module onms-requisitions\n  *\n  * @requires $q Angular promise/deferred implementation\n  * @requires $cacheFactory Angular cache management\n  * @requires $window Document window\n  * @requires $http Angular service that facilitates communication with the remote HTTP servers\n  * @requires $timeout Angular service that facilitates timeout functions\n  * @requires $log Angular log facility\n  *\n  * @description The RequisitionsService provides all the required methods to access ReST API for the OpenNMS requisitions.\n  *\n  * It uses Angular's Cache service to store localy all the requisitions after retrieving them from the server the first time.\n  * This helps in terms of performance and responsiveness of the UI. Only changes are pushed back to the server.\n  *\n  * Conflicts may accour if someone else is changing the requisitions at the same time.\n  *\n  * If the cache is not going to be used, the controllers are responsible for maintaining the state of the data.\n  */\n  .factory('RequisitionsService', ['$q', '$cacheFactory', '$window', '$http', '$timeout', '$log', function($q, $cacheFactory, $window, $http, $timeout, $log) {\n\n    $log.debug('Initializing RequisitionsService');\n\n    var requisitionsService = {};\n    requisitionsService.internal = {};\n\n    // Cache Configuration\n\n    requisitionsService.internal.cacheEnabled = true;\n    requisitionsService.internal.cache = $cacheFactory('RequisitionsService');\n\n    // URLs\n\n    requisitionsService.internal.requisitionsUrl = 'rest/requisitions';\n    requisitionsService.internal.requisitionNamesUrl = 'rest/requisitionNames';\n    requisitionsService.internal.foreignSourcesUrl = 'rest/foreignSources';\n    requisitionsService.internal.foreignSourcesConfigUrl = 'rest/foreignSourcesConfig';\n    requisitionsService.internal.monitoringLocationsUrl = 'rest/monitoringLocations';\n    requisitionsService.internal.snmpConfigUrl = 'rest/snmpConfig';\n    requisitionsService.internal.errorHelp = ' Check the OpenNMS logs for more details, or try again later.';\n\n    // Timeouts\n\n    requisitionsService.internal.defaultTimeout = 3; // Time to wait in seconds\n    requisitionsService.internal.timingStatus = { isRunning: false };\n\n    /**\n    * @description (Internal) Gets the data from the internal cache\n    *\n    * @private\n    * @name RequisitionsService:internal.getCatchedConfigData\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {string} configName The name of the config object\n    * @returns {object} the internal cache content\n    */\n    requisitionsService.internal.getCatchedConfigData = function(configName) {\n      return requisitionsService.internal.cache.get(configName);\n    };\n\n    /**\n    * @description (Internal) Saves the data into internal cache\n    *\n    * @private\n    * @name RequisitionsService:internal.setCatchedConfigData\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {string} configName The name of the config object\n    * @param {object} configObject The config object\n    */\n    requisitionsService.internal.setCatchedConfigData = function(configName, configObject) {\n      if (requisitionsService.internal.cacheEnabled) {\n        requisitionsService.internal.cache.put(configName, configObject);\n      }\n    };\n\n    /**\n    * @description (Internal) Gets the requisitions from the internal cache\n    *\n    * @private\n    * @name RequisitionsService:internal.getCatchedConfigData\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @returns {object} the internal cache content\n    */\n    requisitionsService.internal.getCachedRequisitionsData = function() {\n      return requisitionsService.internal.getCatchedConfigData('requisitionsData');\n    };\n\n    /**\n    * @description (Internal) Saves the requisitions data into internal cache\n    *\n    * @private\n    * @name RequisitionsService:internal.setCachedRequisitionsData\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {object} requisitionsData The requisitions data\n    */\n    requisitionsService.internal.setCachedRequisitionsData = function(requisitionsData) {\n      return requisitionsService.internal.setCatchedConfigData('requisitionsData', requisitionsData);\n    };\n\n    /**\n    * @description (Internal) Gets a specific requisition object from the cache.\n    *\n    * @private\n    * @name RequisitionsService:internal.getCachedRequisition\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {string} foreignSource The requisition's name (a.k.a. foreign source)\n    * @returns {object} the requisition object.\n    */\n    requisitionsService.internal.getCachedRequisition = function(foreignSource) {\n      const requisitionsData = requisitionsService.internal.getCachedRequisitionsData();\n      if (!requisitionsData) {\n        return null;\n      }\n      return requisitionsData.getRequisition(foreignSource);\n    };\n\n    /**\n    * @description (Internal) Gets a specific node object from the cache.\n    *\n    * @private\n    * @name RequisitionsService:internal.getCachedNode\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {string} foreignSource The requisition's name (a.k.a. foreign source)\n    * @param {string} foreignId The foreign Id\n    * @returns {object} the node object.\n    */\n    requisitionsService.internal.getCachedNode = function(foreignSource, foreignId) {\n      const requisition = requisitionsService.internal.getCachedRequisition(foreignSource);\n      if (!requisition) {\n        return null;\n      }\n      return requisition.getNode(foreignId);\n    };\n\n    /**\n    * @description (Internal) Quick-Add a new node to an existing requisition\n    *\n    * @private\n    * @name RequisitionsService:addQuickNode\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {object} node the QuickNode object\n    */\n    requisitionsService.internal.addQuickNode = function(quickNode) {\n      var node = quickNode.createRequisitionedNode();\n\n      return requisitionsService.saveNode(node).then(\n        function() { // saveNode:success\n          $log.debug('addQuickNode: the node ' + node.nodeLabel + ' has been saved.');\n          return requisitionsService.synchronizeRequisition(node.foreignSource, 'false').then(\n            function() { // synchronizeRequisition:success\n              $log.debug('addQuickNode: the requisition ' + node.foreignSource + ' has been synchronized.');\n              return node;\n            },\n            function() { // synchronizeRequisition:failure\n              return $q.reject('Cannot synchronize requisition ' + node.foreignSource);\n            }\n          );\n        },\n        function() { // saveNode:failure\n          return $q.reject('Cannot quick-add node to requisition ' + node.foreignSource);\n        }\n      );\n    };\n\n    /**\n    * @description (Internal) Updates a Requisition object based on a Deployed Statistics Object.\n    *\n    * @private\n    * @name RequisitionsService:updateRequisition\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {object} existingReq the existing requisition object\n    * @param {object} deployedReq the deployed statistics object\n    */\n    requisitionsService.internal.updateRequisition = function(existingReq, deployedReq) {\n      $log.debug('updateRequisition: updating deployed statistics for requisition ' + deployedReq.name + '.');\n      var foreignIds = deployedReq['foreign-id'];\n      existingReq.nodesInDatabase = foreignIds.length;\n      existingReq.deployed = foreignIds.length > 0;\n      existingReq.lastImport = deployedReq['last-imported'];\n      for (var idx = 0; idx < foreignIds.length; idx++) {\n        var existingNode = existingReq.getNode(foreignIds[idx]);\n        if (existingNode) {\n          existingNode.deployed = true;\n        }\n      }\n      return existingReq;\n    };\n\n    /**\n    * @description Clears all the internal cache.\n    *\n    * This forces the service to retrieve the data from the server on next request.\n    *\n    * @name RequisitionsService:internal.clearCache\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    */\n    requisitionsService.clearCache = function() {\n      $log.debug('clearCache: removing everything from the internal cache');\n      requisitionsService.internal.cache.removeAll();\n      return true;\n    };\n\n    /**\n    * @description Removes a specific requisition from the internal cache\n    *\n    * This forces the service to retrieve the data from the server on next request.\n    *\n    * @name RequisitionsService:internal.removeRequisitionFromCache\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {string} foreignSource The requisition's name (a.k.a. foreignSource)\n    */\n    requisitionsService.removeRequisitionFromCache = function(foreignSource) {\n      const requisitionsData = requisitionsService.internal.getCachedRequisitionsData();\n      if (requisitionsData) {\n        var reqIdx = requisitionsData.indexOf(foreignSource);\n        if (reqIdx >= 0) {\n          $log.debug('clearRequisitionCache: removing requisition ' + foreignSource + ' from the internal cache');\n          requisitionsData.requisitions.splice(reqIdx, 1);\n          return true;\n        }\n      }\n      return false;\n    };\n\n    /**\n    * @description Gets the timing status object\n    * The reason for using this is because of NMS-7872.\n    *\n    * @name RequisitionsService:startTiming\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {integer} ts The timeout in seconds (optional)\n    * @returns {object} the timing status object\n    */\n    requisitionsService.startTiming = function(ts) {\n      const seconds = ts? ts : requisitionsService.internal.defaultTimeout;\n      $log.debug('startTiming: starting timeout of ' + seconds + ' seconds.');\n      requisitionsService.internal.timingStatus.isRunning = true;\n      $timeout(function() {\n        requisitionsService.internal.timingStatus.isRunning = false;\n      }, seconds * 1000);\n    };\n\n    /**\n    * @description Gets the timing status object\n    *\n    * @name RequisitionsService:getTiming\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @returns {object} the timing status object\n    */\n    requisitionsService.getTiming = function() {\n      return requisitionsService.internal.timingStatus;\n    };\n\n    /**\n    * @description Requests all the requisitions (pending and deployed) from OpenNMS.\n    *\n    * If the data exists on the cache, that will be used instead of retrieving the data\n    * from the OpenNMS server.\n    *\n    * After retrieving the requisitions, the deployed statistics will be retrieved, and the\n    * statistics of the requisitions will be updated. Then, the data will be saved on the\n    * internal cache.\n    *\n    * @name RequisitionsService:getRequisitions\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @returns {object} a promise. On success, it provides a RequisitionsData object.\n    */\n    requisitionsService.getRequisitions = function() {\n      const rd = requisitionsService.internal.getCachedRequisitionsData();\n      if (rd) {\n        $log.debug('getRequisitions: returning a cached copy of the requisitions data');\n        return $q.when(rd);\n      }\n\n      var deferred = $q.defer();\n      var url = requisitionsService.internal.requisitionsUrl;\n      $log.debug('getRequisitions: retrieving requisitions.');\n      $http.get(url)\n      .success(function(data) {\n        var requisitionsData = new RequisitionsData();\n        angular.forEach(data['model-import'], function(onmsRequisition) {\n          var requisition = new Requisition(onmsRequisition, false);\n          $log.debug('getRequisitions: adding requisition ' + requisition.foreignSource + '.');\n          requisitionsData.requisitions.push(requisition);\n        });\n        requisitionsService.updateDeployedStats(requisitionsData).then(\n          function() { // success;\n            requisitionsService.internal.setCachedRequisitionsData(requisitionsData);\n            deferred.resolve(requisitionsData);\n          },\n          function(error) { // error\n            deferred.reject(error);\n          }\n        );\n      })\n      .error(function(error, status) {\n        $log.error('getRequisitions: GET ' + url + ' failed:', error, status);\n        deferred.reject('Cannot retrieve the requisitions.' + requisitionsService.internal.errorHelp);\n      });\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Gets the requisition names.\n    *\n    * If the data exists on the cache, that will be used instead of retrieving the data\n    * from the OpenNMS server.\n    *\n    * After retrieving the requisitions, the data will be saved on the internal cache.\n    *\n    * @name RequisitionsService:getRequisitionNames\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @returns {object} a promise. On success, it provides a list of requisition names.\n    */\n    requisitionsService.getRequisitionNames = function() {\n      const config = requisitionsService.internal.getCatchedConfigData('requisitionNames');\n      if (config) {\n        $log.debug('getRequisitionNames: returning a cached copy of requisition names');\n        return $q.when(config);\n      }\n\n      var deferred = $q.defer();\n      var url = requisitionsService.internal.requisitionNamesUrl;\n      $log.debug('getRequisitionNames: getting requisition names');\n      $http.get(url)\n      .success(function(data) {\n        $log.debug('getRequisitionNames: got requisition names');\n        requisitionsService.internal.setCatchedConfigData('requisitionNames', data['foreign-source']);\n        deferred.resolve(data['foreign-source']);\n      })\n      .error(function(error, status) {\n        $log.error('getRequisitionNames: GET ' + url + ' failed:', error, status);\n        deferred.reject('Cannot retrieve requisition names.' + requisitionsService.internal.errorHelp);\n      });\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Updates the requisitions data object with the deployed statistics.\n    *\n    * After retrieving the data, the provided object will be updated.\n    *\n    * @name RequisitionsService:updateDeployedStats\n    * @ngdoc method\n    * @param {object} requisitionsData The requisitions data object\n    * @methodOf RequisitionsService\n    * @returns {object} a promise. On success, it provides the updated RequisitionsData object.\n    */\n    requisitionsService.updateDeployedStats = function(requisitionsData) {\n      var deferred = $q.defer();\n      var url = requisitionsService.internal.requisitionsUrl + '/deployed/stats';\n      $log.debug('updateDeployedStats: retrieving deployed statistics.');\n      $http.get(url)\n      .success(function(data) {\n        angular.forEach(requisitionsData.requisitions, function(existingReq) {\n          var deployedReq = null;\n          angular.forEach(data['foreign-source'], function(r) {\n            if (r.name === existingReq.foreignSource) {\n              deployedReq = r;\n            }\n          });\n          if (!deployedReq) {\n            existingReq.setDeployed(false);\n          } else {\n            requisitionsService.internal.updateRequisition(existingReq, deployedReq);\n          }\n        });\n        deferred.resolve(requisitionsData);\n      })\n      .error(function(error, status) {\n        $log.error('updateDeployedStats: GET ' + url + ' failed:', error, status);\n        deferred.reject('Cannot retrieve the deployed statistics.' + requisitionsService.internal.errorHelp);\n      });\n      return deferred.promise;\n    };\n\n    /**\n    * @description Updates the requisition object with the deployed statistics.\n    *\n    * After retrieving the data successfully, the provided object will be updated.\n    * Otherwise, the provided object will be returned unmodified, and this includes HTTP errors.\n    *\n    * @name RequisitionsService:updateDeployedStatsForRequisition\n    * @ngdoc method\n    * @param {object} requisition The requisition object\n    * @methodOf RequisitionsService\n    * @returns {object} a promise. On success, it provides a Requisition object.\n    */\n    requisitionsService.updateDeployedStatsForRequisition = function(existingReq) {\n      var deferred = $q.defer();\n      var url = requisitionsService.internal.requisitionsUrl + '/deployed/stats/' + encodeURIComponent(existingReq.foreignSource);\n      $log.debug('updateDeployedStatsForRequisition: retrieving deployed statistics for requisition ' + existingReq.foreignSource);\n      $http.get(url)\n      .success(function(deployedReq) {\n        requisitionsService.internal.updateRequisition(existingReq, deployedReq);\n        deferred.resolve(existingReq);\n      })\n      .error(function(error, status) {\n        $log.error('updateDeployedStatsForRequisition: GET ' + url + ' failed:', error, status);\n        deferred.resolve(existingReq);\n      });\n      return deferred.promise;\n    };\n\n    /**\n    * @description Request a sepcific requisition from OpenNMS.\n    *\n    * If the data exists on the cache, that will be used instead of retrieving the data\n    * from the OpenNMS server.\n    *\n    * After retrieving the requisitions, the data will be saved on the internal cache.\n    *\n    * @name RequisitionsService:getRequisition\n    * @ngdoc method\n    * @param {string} foreignSource The requisition's name (a.k.a. foreignSource)\n    * @methodOf RequisitionsService\n    * @returns {object} a promise. On success, it provides a Requisition object.\n    */\n    requisitionsService.getRequisition = function(foreignSource) {\n      const requisition = requisitionsService.internal.getCachedRequisition(foreignSource);\n      if (requisition) {\n        $log.debug('getRequisition: returning a cached copy of ' + foreignSource);\n        return $q.when(requisition);\n      }\n\n      var deferred = $q.defer();\n      var url = requisitionsService.internal.requisitionsUrl + '/' + encodeURIComponent(foreignSource);\n      $log.debug('getRequisition: getting requisition ' + foreignSource);\n      $http.get(url)\n      .success(function(data) {\n        const req = new Requisition(data);\n        $log.debug('getRequisition: got requisition ' + foreignSource);\n        requisitionsService.updateDeployedStatsForRequisition(req).then(\n          function(updatedReq) { // success;\n            const requisitionsData = requisitionsService.internal.getCachedRequisitionsData();\n            if (requisitionsData) {\n              $log.debug('getRequisition: updating cache for requisition ' + foreignSource);\n              requisitionsData.setRequisition(updatedReq);\n            }\n            deferred.resolve(updatedReq);\n          }\n        );\n      })\n      .error(function(error, status) {\n        $log.error('getRequisition: GET ' + url + ' failed:', error, status);\n        deferred.reject('Cannot retrieve the requisition ' + foreignSource + '.' + requisitionsService.internal.errorHelp);\n      });\n      return deferred.promise;\n    };\n\n    /**\n    * @description Request the synchronization/import of a requisition on the OpenNMS server.\n    *\n    * If the data exists on the cache, and the provided foreign source doesn't exist, the\n    * request will be rejected.\n    *\n    * After retrieving the requisitions, the data on the internal cache will be updated.\n    *\n    * @name RequisitionsService:synchronizeRequisition\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {string} foreignSource The requisition's name (a.k.a. foreign source)\n    * @param {string} rescanExisting [true, false, dbonly]\n    * @returns {object} a promise.\n    */\n    requisitionsService.synchronizeRequisition = function(foreignSource, rescanExisting) {\n      const requisitionsData = requisitionsService.internal.getCachedRequisitionsData();\n      if (requisitionsData) {\n        var reqIdx = requisitionsData.indexOf(foreignSource);\n        if (reqIdx < 0) {\n          return $q.reject('The foreignSource ' + foreignSource + ' does not exist.');\n        }\n      }\n\n      var deferred = $q.defer();\n      var url = requisitionsService.internal.requisitionsUrl + '/' + encodeURIComponent(foreignSource) + '/import';\n      $log.debug('synchronizeRequisition: synchronizing requisition ' + foreignSource + ' with rescanExisting=' + rescanExisting);\n      $http({ method: 'PUT', url: url, params: { rescanExisting: rescanExisting }})\n      .success(function(data) {\n        $log.debug('synchronizeRequisition: synchronized requisition ' + foreignSource);\n        const r = requisitionsService.internal.getCachedRequisition(foreignSource);\n        if (r) {\n          $log.debug('synchronizeRequisition: updating deployed status of requisition ' + foreignSource);\n          r.setDeployed(true);\n        }\n        deferred.resolve(data);\n      })\n      .error(function(error, status) {\n        $log.error('synchronizeRequisition: PUT ' + url + ' failed:', error, status);\n        deferred.reject('Cannot synchronize the requisition ' + foreignSource + '.' + requisitionsService.internal.errorHelp);\n      });\n      return deferred.promise;\n    };\n\n    /**\n    * @description Request the creation of a new requisition on the OpenNMS server.\n    *\n    * If the data exists on the cache, and the provided foreign source exist, the\n    * request will be rejected, because a foreign source must be unique.\n    *\n    * After retrieving the requisitions, the data on the internal cache will be updated.\n    *\n    * @name RequisitionsService:addRequisition\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {string} foreignSource The requisition's name (a.k.a. foreign source)\n    * @returns {object} a promise. On success, it provides a Requisition object.\n    */\n    requisitionsService.addRequisition = function(foreignSource) {\n      const req = requisitionsService.internal.getCachedRequisition(foreignSource);\n      if (req) {\n        return $q.reject('Invalid foreignSource ' + foreignSource + ', it already exist.');\n      }\n\n      var deferred = $q.defer();\n      var emptyReq = { 'foreign-source': foreignSource, node: [] };\n      var url = requisitionsService.internal.requisitionsUrl;\n      $log.debug('addRequisition: adding requisition ' + foreignSource);\n      $http.post(url, emptyReq)\n      .success(function() {\n        var requisition = new Requisition(emptyReq, false);\n        $log.debug('addRequisition: added requisition ' + requisition.foreignSource);\n        const data = requisitionsService.internal.getCachedRequisitionsData();\n        if (data) {\n          $log.debug('addRequisition: pushing requisition ' + foreignSource + ' into the internal cache');\n          data.requisitions.push(requisition);\n        }\n        deferred.resolve(requisition);\n      }).error(function(error, status) {\n        $log.error('addRequisition: POST ' + url + ' failed:', error, status);\n        deferred.reject('Cannot add the requisition ' + foreignSource + '.' + requisitionsService.internal.errorHelp);\n      });\n      return deferred.promise;\n    };\n\n    /**\n    * @description Request the deletion of a new requisition on the OpenNMS server.\n    *\n    * If the data exists on the cache, and the provided foreign source doesn't exist, the\n    * request will be rejected. Also, if the requisition exist and it contains nodes (i.e.\n    * it is not empty), the request will be rejected.\n    *\n    * After retrieving the requisitions, the data on the internal cache will be updated.\n    *\n    * @name RequisitionsService:deleteRequisition\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {string} foreignSource The requisition's name (a.k.a. foreign source)\n    * @returns {object} a promise.\n    */\n    requisitionsService.deleteRequisition = function(foreignSource) {\n      const requisitionsData = requisitionsService.internal.getCachedRequisitionsData();\n      if (requisitionsData) {\n        var reqIdx = requisitionsData.indexOf(foreignSource);\n        if (reqIdx < 0) {\n          return $q.reject('The foreignSource ' + foreignSource + ' does not exist.');\n        }\n        var req = requisitionsData.requisitions[reqIdx];\n        if (req.nodesInDatabase > 0) {\n          return $q.reject('The foreignSource ' + foreignSource + ' contains ' + req.nodesInDatabase + ' nodes on the database, it cannot be deleted.');\n        }\n      }\n\n      var deferred = $q.defer();\n\n      $log.debug('deleteRequisition: deleting requisition ' + foreignSource);\n      var deferredReqPending  = $http.delete(requisitionsService.internal.requisitionsUrl + '/' + encodeURIComponent(foreignSource));\n      var deferredReqDeployed = $http.delete(requisitionsService.internal.requisitionsUrl + '/deployed/' + encodeURIComponent(foreignSource));\n      var deferredFSPending  = $http.delete(requisitionsService.internal.foreignSourcesUrl + '/' + encodeURIComponent(foreignSource));\n      var deferredFSDeployed = $http.delete(requisitionsService.internal.foreignSourcesUrl + '/deployed/' + encodeURIComponent(foreignSource));\n\n      $q.all([ deferredReqPending, deferredReqDeployed, deferredFSPending, deferredFSDeployed ])\n      .then(function(results) {\n        $log.debug('deleteRequisition: deleted requisition ' + foreignSource);\n        requisitionsService.removeRequisitionFromCache(foreignSource);\n        deferred.resolve(results);\n      }, function(error, status) {\n        $log.error('deleteRequisition: DELETE operation failed:', error, status);\n        deferred.reject('Cannot delete the requisition ' + foreignSource + '.' + requisitionsService.internal.errorHelp);\n      });\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Request the removal of all from an existing requisition on the OpenNMS server.\n    *\n    * If the data exists on the cache, and the provided foreign source doesn't exist, the\n    * request will be rejected.\n    *\n    * After retrieving the requisitions, the data on the internal cache will be updated.\n    * After updating the requisition, a synchronization with rescanExisting=false will be performed.\n    *\n    * @name RequisitionsService:removeAllNodesFromRequisition\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {string} foreignSource The requisition's name (a.k.a. foreign source)\n    * @returns {object} a promise.\n    */\n    requisitionsService.removeAllNodesFromRequisition = function(foreignSource) {\n      const requisitionsData = requisitionsService.internal.getCachedRequisitionsData();\n      if (requisitionsData) {\n        if (!requisitionsData.getRequisition(foreignSource)) {\n          return $q.reject('The foreignSource ' + foreignSource + ' does not exist.');\n        }\n      }\n\n      var deferred = $q.defer();\n      var requisition = {'foreign-source': foreignSource, node: []};\n      $log.debug('removeAllNodesFromRequisition: removing nodes from requisition ' + foreignSource);\n      var url = requisitionsService.internal.requisitionsUrl;\n      $http.post(url, requisition)\n      .success(function(data) {\n        $log.debug('removeAllNodesFromRequisition: removed nodes from requisition ' + foreignSource);\n        requisitionsService.synchronizeRequisition(foreignSource, 'false').then(\n          function() { // synchronizeRequisition:success\n            $log.debug('removeAllNodesFromRequisition: rhe requisition ' + foreignSource + ' has been synchronized.');\n            const req = requisitionsService.internal.getCachedRequisition(foreignSource);\n            if (req) {\n              $log.debug('removeAllNodesFromRequisition: updating requisition ' + foreignSource + ' on the internal cache');\n              req.reset();\n            }\n            deferred.resolve(data);\n          },\n          function() { // synchronizeRequisition:failure\n            deferred.reject('Cannot synchronize requisition ' + foreignSource);\n          }\n        );\n      }).error(function(error, status) {\n        $log.error('removeAllNodesFromRequisition: POST ' + url + ' failed:', error, status);\n        deferred.reject('Cannot remove all nodes from requisition ' + foreignSource + '.' + requisitionsService.internal.errorHelp);\n      });\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Request a sepcific node from a requisition from OpenNMS.\n    *\n    * If the data exists on the cache, that will be used instead of retrieving the data\n    * from the OpenNMS server.\n    *\n    * After retrieving the node, the data will be saved on the internal cache.\n    *\n    * @name RequisitionsService:getNode\n    * @ngdoc method\n    * @param {string} foreignSource The requisition's name (a.k.a. foreign source)\n    * @param {string} foreignId The foreignId of the node\n    * @methodOf RequisitionsService\n    * @returns {object} a promise. On success, it provides a RequisitionNode object.\n    */\n    requisitionsService.getNode = function(foreignSource, foreignId) {\n      const node = requisitionsService.internal.getCachedNode(foreignSource, foreignId);\n      if (node) {\n        $log.debug('getNode: returning a cached copy of ' + foreignId + '@' + foreignSource);\n        return $q.when(node);\n      }\n\n      var deferred = $q.defer();\n      var url  = requisitionsService.internal.requisitionsUrl + '/' + encodeURIComponent(foreignSource) + '/nodes/' + encodeURIComponent(foreignId);\n      $log.debug('getNode: getting node ' + foreignId + '@' + foreignSource);\n      $http.get(url)\n      .success(function(data) {\n        var node = new RequisitionNode(foreignSource, data);\n        $log.debug('getNode: got node ' + foreignId + '@' + foreignSource);\n        const requisition = requisitionsService.internal.getCachedRequisition(foreignSource);\n        if (requisition) {\n          $log.debug('getNode: updating cache for requisition ' + foreignSource);\n          requisition.setNode(node);\n        }\n        deferred.resolve(node);\n      })\n      .error(function(error, status) {\n        $log.error('getNode: GET ' + url + ' failed:', error, status);\n        deferred.reject('Cannot retrieve node ' + foreignId + ' from requisition ' + foreignSource + '.' + requisitionsService.internal.errorHelp);\n      });\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Updates a node on an existing requisition on the OpenNMS server.\n    *\n    * The internal cache will be updated after the request is completed successfully if exist,\n    * depending if the save operation is related with the update of an existing node, or if it\n    * is related with the creation of a new node.\n    *\n    * @name RequisitionsService:removeAllNodesFromRequisition\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {object} node The RequisitionNode Object\n    * @returns {object} a promise. \n    */\n    // TODO If the parent properties are updated, verify they are valid through ReST prior, adding the node.\n    requisitionsService.saveNode = function(node) {\n      var deferred = $q.defer();\n      var requisitionNode = node.getOnmsRequisitionNode();\n\n      var url = requisitionsService.internal.requisitionsUrl + '/' + encodeURIComponent(node.foreignSource) + '/nodes';\n      $log.debug('saveNode: saving node ' + node.nodeLabel + ' on requisition ' + node.foreignSource);\n      $http.post(url, requisitionNode)\n      .success(function(data) {\n        $log.debug('saveNode: saved node ' + node.nodeLabel + ' on requisition ' + node.foreignSource);\n        node.modified = true;\n        const requisition = requisitionsService.internal.getCachedRequisition(node.foreignSource);\n        if (requisition) {\n          requisition.setNode(node);\n        }\n        // Updating categories cache\n        var categories = requisitionsService.internal.getCatchedConfigData('categoriesConfig');\n        if (categories) {\n          var categoriesChanged = false;\n          angular.forEach(node.categories, function(cat) {\n            if (categories.indexOf(cat.name) === -1) {\n              categoriesChanged = true;\n              categories.push(cat.name);\n            }\n          });\n          if (categoriesChanged) {\n            requisitionsService.internal.setCatchedConfigData('categoriesConfig', categories);\n          }\n        }\n        // Updating services cache\n        var services = requisitionsService.internal.getCatchedConfigData('servicesConfig');\n        if (services) {\n          var servicesChanged = false;\n          angular.forEach(node.interfaces, function(intf) {\n            angular.forEach(intf.services, function(svc) {\n              if (services.indexOf(svc.name) === -1) {\n                servicesChanged = true;\n                services.push(svc.name);\n              }\n            });\n          });\n          if (servicesChanged) {\n            requisitionsService.internal.setCatchedConfigData('servicesConfig', services);\n          }\n        }\n        deferred.resolve(data);\n      }).error(function(error, status) {\n        $log.error('saveNode: POST ' + url + ' failed:', error, status);\n        deferred.reject('Cannot save node ' + node.foreignId + ' on requisition ' + node.foreignSource + '.' + requisitionsService.internal.errorHelp);\n      });\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Request the removal of a node from an existing requisition on the OpenNMS server.\n    *\n    * The internal cache will be updated after the request is completed successfully if exist.\n    *\n    * @name RequisitionsService:deleteNode\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {object} node The RequisitionNode Object\n    * @returns {object} a promise.\n    */\n    requisitionsService.deleteNode = function(node) {\n      var deferred = $q.defer();\n\n      var url = requisitionsService.internal.requisitionsUrl + '/' + encodeURIComponent(node.foreignSource) + '/nodes/' + encodeURIComponent(node.foreignId);\n      $log.debug('deleteNode: deleting node ' + node.nodeLabel + ' from requisition ' + node.foreignSource);\n      $http.delete(url)\n      .success(function(data) {\n        $log.debug('deleteNode: deleted node ' + node.nodeLabel + ' on requisition ' + node.foreignSource);\n        const r = requisitionsService.internal.getCachedRequisition(node.foreignSource);\n        if (r) {\n          var idx = r.indexOf(node.foreignId);\n          if (idx > -1) {\n            $log.debug('deleteNode: removing node ' + node.foreignId + '@' + node.foreignSource + ' from the internal cache');\n            r.nodes.splice(idx, 1);\n            r.nodesDefined--;\n            r.modified = true;\n            r.dateStamp = Date.now();\n          }\n        }\n        deferred.resolve(data);\n      }).error(function(error, status) {\n        $log.error('deleteNode: DELETE ' + url + ' failed:', error, status);\n        deferred.reject('Cannot delete node ' + node.foreignId + ' from requisition ' + node.foreignSource + '.' + requisitionsService.internal.errorHelp);\n      });\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Request a foreign source definition from OpenNMS for a given requisition.\n    *\n    * The foreign source definition contains the set of policies and detectors, as well as the scan frequency.\n    * The information is not stored on cache. Each request will perform a server call.\n    *\n    * @name RequisitionsService:getForeignSourceDefinition\n    * @ngdoc method\n    * @param {string} foreignSource The requisition's name (a.k.a. foreign source), use 'default' for the default foreign source.\n    * @methodOf RequisitionsService\n    * @returns {object} a promise. On success, it provides a foreign source object.\n    */\n    requisitionsService.getForeignSourceDefinition = function(foreignSource) {\n      var deferred = $q.defer();\n\n      var url = requisitionsService.internal.foreignSourcesUrl + '/' + encodeURIComponent(foreignSource);\n      $log.debug('getForeignSourceDefinition: getting definition for requisition ' + foreignSource);\n      $http.get(url)\n      .success(function(data) {\n        $log.debug('getForeignSourceDefinition: got definition for requisition ' + foreignSource);\n        deferred.resolve(data);\n      })\n      .error(function(error, status) {\n        $log.error('getForeignSourceDefinition: GET ' + url + ' failed:', error, status);\n        deferred.reject('Cannot retrieve foreign source definition (detectors and policies) for requisition ' + foreignSource + '.' + requisitionsService.internal.errorHelp);\n      });\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Updates the foreign source definition on the OpenNMS server for a given requisition.\n    *\n    * The foreign source definition contains the set of policies and detectors, as well as the scan frequency.\n    *\n    * @name RequisitionsService:saveForeignSourceDefinition\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {object} foreignSourceDef The requisition foreign source Object\n    * @returns {object} a promise.\n    */\n    requisitionsService.saveForeignSourceDefinition = function(foreignSourceDef) {\n      var deferred = $q.defer();\n      var foreignSource = foreignSourceDef.name;\n\n      var url = requisitionsService.internal.foreignSourcesUrl;\n      $log.debug('saveForeignSourceDefinition: saving definition for requisition ' + foreignSource);\n      $http.post(url, foreignSourceDef)\n      .success(function(data) {\n        $log.debug('saveForeignSourceDefinition: saved definition for requisition ' + foreignSource);\n        deferred.resolve(data);\n      }).error(function(error, status) {\n        $log.error('saveForeignSourceDefinition: POST ' + url + ' failed:', error, status);\n        deferred.reject('Cannot save foreign source definition (detectors and policies) for requisition ' + foreignSource + '.' + requisitionsService.internal.errorHelp);\n      });\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Clones an existing foreign source definition to another.\n    *\n    * The foreign source definition contains the set of policies and detectors, as well as the scan frequency.\n    * If the source or the target requisition doesn't appear on the existing requisitions reported by the\n    * OpenNMS server, the operation will be rejected.\n    *\n    * @name RequisitionsService:cloneForeignSourceDefinition\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {string} sourceRequisition The name of the source requisition\n    * @param {string} targetRequisition The name of the target requisition\n    * @returns {object} a promise.\n    */\n    requisitionsService.cloneForeignSourceDefinition = function(sourceRequisition, targetRequisition) {\n      var deferred = $q.defer();\n\n      requisitionsService.getRequisitionNames().then(\n        function(requisitions) { // success\n          if (requisitions.indexOf(sourceRequisition) < 0) {\n            deferred.reject('The source requisition ' + sourceRequisition + ' does not exist.');\n            return;\n          }\n          if (requisitions.indexOf(targetRequisition) < 0) {\n            deferred.reject('The target requisition ' + targetRequisition + ' does not exist.');\n            return;\n          }\n          requisitionsService.getForeignSourceDefinition(sourceRequisition).then(\n            function(fsDef) { // success\n              fsDef.name = targetRequisition;\n              requisitionsService.saveForeignSourceDefinition(fsDef).then(\n                function() { // success\n                  deferred.resolve(fsDef);\n                },\n                function() { // error\n                  deferred.reject('Cannot save foreign source definition for requisition ' + targetRequisition);\n                }\n              );\n            },\n            function() { // error\n              deferred.reject('Cannot get foreign source definition for requisition ' + sourceRequisition);\n            }\n          );\n        },\n        function() { // error\n          deferred.reject('Cannot validate the existance of the source and target requisitions.');\n        }\n      );\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Request the removal of a foreign source definition on the OpenNMS server.\n    *\n    * @name RequisitionsService:deleteForeignSourceDefinition\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {string} foreignSource The requisition's name (a.k.a. foreign source), use 'default' for the default foreign source.\n    * @returns {object} a promise.\n    */\n    requisitionsService.deleteForeignSourceDefinition = function(foreignSource) {\n      var deferred = $q.defer();\n\n      $log.debug('deleteForeignSourceDefinition: deleting foreign source definition ' + foreignSource);\n      var deferredFSPending  = $http.delete(requisitionsService.internal.foreignSourcesUrl + '/' + encodeURIComponent(foreignSource));\n      var deferredFSDeployed = $http.delete(requisitionsService.internal.foreignSourcesUrl + '/deployed/' + encodeURIComponent(foreignSource));\n\n      $q.all([ deferredFSPending, deferredFSDeployed ])\n      .then(function(results) {\n        $log.debug('deleteForeignSourceDefinition: deleted foreign source definition ' + foreignSource);\n        deferred.resolve(results);\n      }, function(error, status) {\n        $log.error('deleteForeignSourceDefinition: DELETE operation failed:', error, status);\n        deferred.reject('Cannot delete the foreign source definition ' + foreignSource + '.' + requisitionsService.internal.errorHelp);\n      });\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Gets the available detectors.\n    *\n    * If the data exists on the cache, that will be used instead of retrieving the data\n    * from the OpenNMS server.\n    *\n    * After retrieving the node, the data will be saved on the internal cache.\n    *\n    * The data return by the promise should be an array of objects.\n    * Each object contains the name of the detector and the full class name.\n    *\n    * @name RequisitionsService:getAvailableDetectors\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @returns {object} a promise. On success, it provides a list of available detector objects.\n    */\n    requisitionsService.getAvailableDetectors = function() {\n      const config = requisitionsService.internal.getCatchedConfigData('detectorsConfig');\n      if (config) {\n        $log.debug('getAvailableDetectors: returning a cached copy of detectors configuration');\n        return $q.when(config);\n      }\n\n      var deferred = $q.defer();\n      var url = requisitionsService.internal.foreignSourcesConfigUrl + '/detectors';\n      $log.debug('getAvailableDetectors: getting available detectors');\n      $http.get(url)\n      .success(function(data) {\n        $log.debug('getAvailableDetectors: got available detectors');\n        requisitionsService.internal.setCatchedConfigData('detectorsConfig', data.plugins);\n        deferred.resolve(data.plugins);\n      })\n      .error(function(error, status) {\n        $log.error('getAvailableDetectors: GET ' + url + ' failed:', error, status);\n        deferred.reject('Cannot retrieve available detectors.' + requisitionsService.internal.errorHelp);\n      });\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Gets the available policies.\n    *\n    * If the data exists on the cache, that will be used instead of retrieving the data\n    * from the OpenNMS server.\n    *\n    * After retrieving the node, the data will be saved on the internal cache.\n    *\n    * The data return by the promise should be an array of objects.\n    * Each object contains the name of the policy and the full class name.\n    *\n    * @name RequisitionsService:getAvailablePolicies\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @returns {object} a promise. On success, it provides a list of available polict objects.\n    */\n    requisitionsService.getAvailablePolicies = function() {\n      var config = requisitionsService.internal.getCatchedConfigData('policiesConfig');\n      if (config) {\n        $log.debug('getAvailablePolicies: returning a cached copy of policies configuration');\n        return $q.when(config);\n      }\n\n      var deferred = $q.defer();\n      var url = requisitionsService.internal.foreignSourcesConfigUrl + '/policies';\n      $log.debug('getAvailablePolicies: getting available policies');\n      $http.get(url)\n      .success(function(data) {\n        $log.debug('getAvailablePolicies: got available policies');\n        requisitionsService.internal.setCatchedConfigData('policiesConfig', data.plugins);\n        deferred.resolve(data.plugins);\n      })\n      .error(function(error, status) {\n        $log.error('getAvailablePolicies: GET ' + url + ' failed:', error, status);\n        deferred.reject('Cannot retrieve available policies.' + requisitionsService.internal.errorHelp);\n      });\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Gets the available services.\n    *\n    * If the data exists on the cache, that will be used instead of retrieving the data\n    * from the OpenNMS server.\n    *\n    * After retrieving the node, the data will be saved on the internal cache.\n    *\n    * The data return by the promise should be an array of strings.\n    * Each strings contains the name of the service.\n    *\n    * @example [ 'ICMP', 'SNMP' ]\n    *\n    * @name RequisitionsService:getAvailableServices\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {string} foreignSource The requisition's name (a.k.a. foreign source), use 'default' for the default foreign source.\n    * @returns {object} a promise. On success, it provides a list of available services.\n    */\n    requisitionsService.getAvailableServices = function(foreignSource) {\n      var config = requisitionsService.internal.getCatchedConfigData('servicesConfig');\n      if (config) {\n        $log.debug('getAvailableServices: returning a cached copy of services configuration');\n        return $q.when(config);\n      }\n\n      var deferred = $q.defer();\n      var url = requisitionsService.internal.foreignSourcesConfigUrl + '/services/' + encodeURIComponent(foreignSource);\n      $log.debug('getAvailableServices: getting available services');\n      $http.get(url)\n      .success(function(data) {\n        $log.debug('getAvailableServices: got available services');\n        requisitionsService.internal.setCatchedConfigData('servicesConfig', data.element);\n        deferred.resolve(data.element);\n      })\n      .error(function(error, status) {\n        $log.error('getAvailableServices: GET ' + url + ' failed:', error, status);\n        deferred.reject('Cannot retrieve available services.' + requisitionsService.internal.errorHelp);\n      });\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Gets the available assets.\n    *\n    * If the data exists on the cache, that will be used instead of retrieving the data\n    * from the OpenNMS server.\n    *\n    * After retrieving the node, the data will be saved on the internal cache.\n    *\n    * The data return by the promise should be an array of strings.\n    * Each string is a valid asset field.\n    *\n    * @example [ 'address1, 'city', 'zip' ]\n    *\n    * @name RequisitionsService:getAvailableAssets\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @returns {object} a promise. On success, it provides a list of available assets.\n    */\n    requisitionsService.getAvailableAssets = function() {\n      var config = requisitionsService.internal.getCatchedConfigData('assetsConfig');\n      if (config) {\n        $log.debug('getAvailableAssets: returning a cached copy of assets configuration');\n        return $q.when(config);\n      }\n\n      var deferred = $q.defer();\n      var url = requisitionsService.internal.foreignSourcesConfigUrl + '/assets';\n      $log.debug('getAvailableAssets: getting available assets');\n      $http.get(url)\n      .success(function(data) {\n        $log.debug('getAvailableAssets: got available assets');\n        requisitionsService.internal.setCatchedConfigData('assetsConfig', data.element);\n        deferred.resolve(data.element);\n      })\n      .error(function(error, status) {\n        $log.error('getAvailableAssets: GET ' + url + ' failed:', error, status);\n        deferred.reject('Cannot retrieve available assets.' + requisitionsService.internal.errorHelp);\n      });\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Gets the available categories.\n    *\n    * If the data exists on the cache, that will be used instead of retrieving the data\n    * from the OpenNMS server.\n    *\n    * After retrieving the node, the data will be saved on the internal cache.\n    *\n    * The data return by the promise should be an array of strings.\n    * Each string is a valid category name.\n    *\n    * @example [ 'Production, 'Development', 'Testing' ]\n    *\n    * @name RequisitionsService:getAvailableCategories\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @returns {object} a promise. On success, it provides a list of available categories.\n    */\n    requisitionsService.getAvailableCategories = function() {\n      var config = requisitionsService.internal.getCatchedConfigData('categoriesConfig');\n      if (config) {\n        $log.debug('getAvailableCategories: returning a cached copy of categories configuration');\n        return $q.when(config);\n      }\n\n      var deferred = $q.defer();\n      var url = requisitionsService.internal.foreignSourcesConfigUrl + '/categories';\n      $log.debug('getAvailableCategories: getting available categories');\n      $http.get(url)\n      .success(function(data) {\n        $log.debug('getAvailableCategories: got available categories');\n        requisitionsService.internal.setCatchedConfigData('categoriesConfig', data.element);\n        deferred.resolve(data.element);\n      })\n      .error(function(error, status) {\n        $log.error('getAvailableCategories: GET ' + url + ' failed:', error, status);\n        deferred.reject('Cannot retrieve available categories.' + requisitionsService.internal.errorHelp);\n      });\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Gets the available locations.\n    *\n    * The 'Default' location is not considered as a valid option.\n    * The location field should be either null or a valid location with Minions.\n    *\n    * @name RequisitionsService:getAvailableLocations\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @returns {object} a promise. On success, it provides a list of available locations.\n    */\n    requisitionsService.getAvailableLocations = function() {\n      var deferred = $q.defer();\n      var url = requisitionsService.internal.monitoringLocationsUrl;\n      $log.debug('getAvailableLocations: getting available locations');\n      $http.get(url)\n      .success(function(data) {\n        $log.debug('getAvailableLocations: got available locations');\n        const locations = data.location.map((loc) => {\n          return loc['location-name'];\n        }).filter((name) => {\n          return name && name.length > 0 && name !== 'Default';\n        });\n        $log.debug('Locations =' + JSON.stringify(locations));\n        deferred.resolve(locations);\n      })\n      .error(function(error, status) {\n        $log.error('getAvailableLocations: GET ' + url + ' failed:', error, status);\n        deferred.reject('Cannot retrieve available locations.' + requisitionsService.internal.errorHelp);\n      });\n      return deferred.promise;\n    };\n\n    /**\n    * @description Checks if a given foreignId exists on a specific requisition\n    *\n    * @name RequisitionsService:isForeignIdOnRequisition\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {string} foreignSource The requisition's name (a.k.a. foreign source)\n    * @param {string} foreignId The foreign Id\n    * @returns {object} a promise. On success, return true if the foreignId exists on the requisition.\n    */\n    requisitionsService.isForeignIdOnRequisition = function(foreignSource, foreignId) {\n      var deferred = $q.defer();\n\n      requisitionsService.getRequisition(foreignSource)\n      .then(function(req) {\n        var found = false;\n        angular.forEach(req.nodes, function(n) {\n          if (n.foreignId === foreignId) {\n            found = true;\n          }\n        });\n        deferred.resolve(found);\n      }, function(err) {\n        var message = 'cannot verify foreignId ' + foreignId + '@' + foreignSource + '. ';\n        $log.error('isForeignIdOnRequisition: ' + message, err);\n        deferred.reject(message + requisitionsService.internal.errorHelp);\n      });\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Checks if a given nodeLabel exists on a specific requisition\n    *\n    * @name RequisitionsService:isForeignIdOnRequisition\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {string} foreignSource The requisition's name (a.k.a. foreign source)\n    * @param {string} nodeLabel The node label\n    * @returns {object} a promise. On success, return true if the nodeLabel exists on the requisition.\n    */\n    requisitionsService.isNodeLabelOnRequisition = function(foreignSource, nodeLabel) {\n      var deferred = $q.defer();\n\n      requisitionsService.getRequisition(foreignSource)\n      .then(function(req) {\n        var found = false;\n        angular.forEach(req.nodes, function(n) {\n          if (n.nodeLabel === nodeLabel) {\n            found = true;\n          }\n        });\n        deferred.resolve(found);\n      }, function(err) {\n        var message = 'cannot verify nodeLabel ' + nodeLabel + '@' + foreignSource + '. ';\n        $log.error('isForeignIdOnRequisition: ' + message, err);\n        deferred.reject(message + requisitionsService.internal.errorHelp);\n      });\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Checks if a given IP Address exists on a specific node\n    *\n    * @name RequisitionsService:isIpAddressOnNode\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {string} foreignSource The requisition's name (a.k.a. foreign source)\n    * @param {string} foreignId The foreign Id of the node\n    * @param {string} ipAddress The IP address to check\n    * @returns {object} a promise. On success, return  true if the IP Address exists on the node.\n    */\n    requisitionsService.isIpAddressOnNode = function(foreignSource, foreignId, ipAddress) {\n      var deferred = $q.defer();\n\n      requisitionsService.getNode(foreignSource, foreignId)\n      .then(function(node) {\n        const found = node.interfaces.filter((intf) => {\n          return intf.ipAddress === ipAddress;\n        }).length > 0;\n        deferred.resolve(found);\n      }, function(err) {\n        var message = 'cannot verify ipAddress on node ' + foreignId + '@' + foreignSource + '. ';\n        $log.error('isIpAddressOnNode: ' + message, err);\n        deferred.reject(message + requisitionsService.internal.errorHelp);\n      });\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Checks if a given category exists on a specific node\n    *\n    * @name RequisitionsService:isCategoryOnNode\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {string} foreignSource The requisition's name (a.k.a. foreign source)\n    * @param {string} foreignId The foreign Id of the node\n    * @param {string} category The category to check\n    * @returns {object} a promise. On success, return true if the category exists on the node.\n    */\n    requisitionsService.isCategoryOnNode = function(foreignSource, foreignId, category) {\n      var deferred = $q.defer();\n\n      requisitionsService.getNode(foreignSource, foreignId)\n      .then(function(node) {\n        const found = node.categories.filter((cat) => {\n          return cat.name === category;\n        }).length > 0;\n        deferred.resolve(found);\n      }, function(err) {\n        var message = 'cannot verify category on node ' + foreignId + '@' + foreignSource + '. ';\n        $log.error('isCategoryOnNode: ' + message, err);\n        deferred.reject(message + requisitionsService.internal.errorHelp);\n      });\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Checks if a given category exists on a specific node\n    *\n    * @name RequisitionsService:isCategoryOnNode\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {string} foreignSource The requisition's name (a.k.a. foreign source)\n    * @param {string} foreignId The foreign Id of the node\n    * @param {string} ipAddress The IP address to check\n    * @param {string} service The service to check\n    * @returns {object} a promise. On success, return true if the service exists on the Node/IP.\n    */\n    requisitionsService.isServiceOnNode = function(foreignSource, foreignId, ipAddress, service) {\n      var deferred = $q.defer();\n\n      requisitionsService.getNode(foreignSource, foreignId)\n      .then(function(node) {\n        var found = node.interfaces.filter((intf) => {\n          if (intf.ipAddress !== ipAddress) {\n            return false;\n          }\n          return intf.services.filter((svc) => {\n            return svc.name === service;\n          }).length > 0;\n        }).length > 0;\n        deferred.resolve(found);\n      }, function(err) {\n        var message = 'cannot verify category on node ' + foreignId + '@' + foreignSource + '. ';\n        $log.error('isIpAddressOnNode: ' + message, err);\n        deferred.reject(message + requisitionsService.internal.errorHelp);\n      });\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Update the SNMP credentials for a given IP Address.\n    *\n    * @name RequisitionsService:addRequisition\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {string} ipAddress The IP Address\n    * @param {string} snmpCommunity The SNMP Community String\n    * @param {string} snmpVersion The SNMP Version\n    * @returns {object} a promise.\n    */\n    requisitionsService.updateSnmpCommunity = function(ipAddress, snmpCommunity, snmpVersion) {\n      var deferred = $q.defer();\n\n      var url = requisitionsService.internal.snmpConfigUrl + '/' + ipAddress;\n      $log.debug('updateSnmpCommunity: updating snmp community for ' + ipAddress);\n      $http.put(url, {'readCommunity' : snmpCommunity, 'version' : snmpVersion})\n      .success(function() {\n        $log.debug('updateSnmpCommunity: updated snmp community for ' + ipAddress);\n        deferred.resolve(ipAddress);\n      }).error(function(error, status) {\n        $log.error('updateSnmpCommunity: PUT ' + url + ' failed:', error, status);\n        deferred.reject('Cannot update snmp community for ' + ipAddress + '.' + requisitionsService.internal.errorHelp);\n      });\n\n      return deferred.promise;\n    };\n\n    /**\n    * @description Quick add a node to a requisition.\n    *\n    * @name RequisitionsService:quickAddNode\n    * @ngdoc method\n    * @methodOf RequisitionsService\n    * @param {object} quickNode The QuickNode object\n    * @returns {object} a promise.\n    */\n    requisitionsService.quickAddNode = function(quickNode) {\n      if (quickNode.noSnmp === false && quickNode.snmpCommunity && quickNode.snmpCommunity.trim() !== '') {\n        var deferred = $q.defer();\n        requisitionsService.updateSnmpCommunity(quickNode.ipAddress, quickNode.snmpCommunity, quickNode.snmpVersion).then(\n          function() { // updateSnmpCommunity:success\n            requisitionsService.internal.addQuickNode(quickNode).then(\n              function(node) { // addQuickNode:success\n                deferred.resolve(node);\n              },\n              function(msg) { // addQuickNode:failure\n                deferred.reject(msg);\n              }\n            );\n          },\n          function() { // updateSnmpCommunity:failure\n            deferred.reject('Cannot update SNMP credentials for ' + quickNode.ipAddress);\n          }\n        );\n        return deferred.promise;\n      }\n      return requisitionsService.internal.addQuickNode(quickNode);\n    };\n\n    return requisitionsService;\n  }]);\n\n}());\n","const ipaddress = require('ip-address');\n\nconst verifyIPv4Address = function(ip) {\n\tconst addr = new ipaddress.Address4(ip);\n\treturn addr.isValid();\n};\n\nconst verifyIPv6Address = function(ip) {\n\tconst addr = new ipaddress.Address6(ip);\n\treturn addr.isValid();\n};\n\nconst isValidIPAddress = function(ip) {\n\treturn verifyIPv4Address(ip) || verifyIPv6Address(ip);\n};\n\nconst checkIpRange = function(ip1, ip2){\n    if (verifyIPv4Address(ip1) && verifyIPv4Address(ip2)) {\n        const a = new ipaddress.Address4(ip1).bigInteger();\n        const b = new ipaddress.Address4(ip2).bigInteger();\n        return b >= a;\n    }\n    if (verifyIPv6Address(ip1) && verifyIPv6Address(ip2)) {\n        const a = new ipaddress.Address6(ip1).bigInteger();\n        const b = new ipaddress.Address6(ip2).bigInteger();\n        return b.compareTo(a) >= 0;\n    }\n    return false;\n};\n\nconsole.log('init: ipaddress-js'); // eslint-disable-line no-console\n\nmodule.exports = {\n\tAddress4: ipaddress.Address4,\n\tAddress6: ipaddress.Address6,\n\tv6: ipaddress.v6,\n\tverifyIPv4Address: verifyIPv4Address,\n\tverifyIPv6Address: verifyIPv6Address,\n\tisValidIPAddress: isValidIPAddress,\n\tcheckIpRange: checkIpRange\n};\n\nObject.assign(window, module.exports);","export default class Util {\n\tstatic getBaseHref() {\n\t\tconst base = document.getElementsByTagName('base')[0];\n\t\tif (base) {\n\t\t\treturn base.href;\n\t\t}\n\t\treturn '';\n\t}\n\tstatic setLocation(url) {\n\t\tif (window && window.location) {\n\t\t\twindow.location.href = Util.getBaseHref() + url;\n\t\t}\n\t}\n\tstatic toggle(booleanValue, elementName) {\n\t\tvar checkboxes = document.getElementsByName(elementName);\n\t\tfor (var index in checkboxes) {\n\t\t\tif (checkboxes.hasOwnProperty(index)) {\n\t\t\t\tcheckboxes[index].checked = booleanValue;\n\t\t\t}\n\t\t}\n\t}\n}","require('lib/onms-http');\nrequire('../../onms-date-formatter');\nrequire('../../onms-default-apps');\nrequire('../lib/scripts/controllers/Asset.js');\nrequire('../lib/scripts/controllers/CloneForeignSource.js');\nrequire('../lib/scripts/controllers/Detector.js');\nrequire('../lib/scripts/controllers/ForeignSource.js');\nrequire('../lib/scripts/controllers/Interface.js');\nrequire('../lib/scripts/controllers/MetaData.js');\nrequire('../lib/scripts/controllers/Move.js');\nrequire('../lib/scripts/controllers/Node.js');\nrequire('../lib/scripts/controllers/Policy.js');\nrequire('../lib/scripts/controllers/QuickAddNode.js');\nrequire('../lib/scripts/controllers/QuickAddNodeModal.js');\nrequire('../lib/scripts/controllers/Requisition.js');\nrequire('../lib/scripts/controllers/Requisitions.js');\nrequire('../lib/scripts/directives/requisitionConstraints.js');\nrequire('../lib/scripts/filters/startFrom.js');\nrequire('../lib/scripts/model/QuickNode.js');\nrequire('../lib/scripts/model/Requisition.js');\nrequire('../lib/scripts/model/RequisitionInterface.js');\nrequire('../lib/scripts/model/RequisitionNode.js');\nrequire('../lib/scripts/model/RequisitionService.js');\nrequire('../lib/scripts/model/RequisitionsData.js');\nrequire('../lib/scripts/services/Requisitions.js');\nrequire('../lib/scripts/services/Synchronize.js');\n","require('../services/Requisitions');\n\n/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\n(function() {\n\n  'use strict';\n\n  angular.module('onms-requisitions')\n\n  /**\n  * @ngdoc controller\n  * @name AssetController\n  * @module onms-requisitions\n  *\n  * @requires $scope Angular local scope\n  * @requires $uibModalInstance Angular UI modal instance\n  * @requires RequisitionsService The Requisitions Servive\n  * @requires asset Node asset object\n  * @requires assetsBlackList The black list of asset fields\n  *\n  * @description The controller for manage the modal dialog for add/edit asserts of requisitioned nodes\n  */\n  .controller('AssetController', ['$scope', '$uibModalInstance', 'RequisitionsService', 'asset', 'assetsBlackList', function($scope, $uibModalInstance, RequisitionsService, asset, assetsBlackList) {\n\n    /**\n    * @description The asset object\n    *\n    * @ngdoc property\n    * @name AssetController#asset\n    * @propertyOf AssetController\n    * @returns {object} The asset object\n    */\n    $scope.asset = asset;\n\n    /**\n    * @description The available asset fields\n    *\n    * @ngdoc property\n    * @name AssetController#$scope.assetFields\n    * @propertyOf AssetController\n    * @returns {array} List of valid asset fields\n    */\n    $scope.assetFields = [];\n\n    /**\n    * @description The black list of asset fields. \n    *\n    * @ngdoc property\n    * @name AssetController#assetsBlackList\n    * @propertyOf AssetController\n    * @returns {array} The black list of asset fields.\n    */\n    $scope.assetsBlackList = assetsBlackList;\n\n    /**\n    * @description Saves the current asset\n    *\n    * @name AssetController:save\n    * @ngdoc method\n    * @methodOf AssetController\n    */\n    $scope.save = function() {\n      $uibModalInstance.close($scope.asset);\n    };\n\n    /**\n    * @description Cancels current operation\n    *\n    * @name AssetController:cancel\n    * @ngdoc method\n    * @methodOf AssetController\n    */\n    $scope.cancel = function() {\n      $uibModalInstance.dismiss('cancel');\n    };\n\n    /**\n    * @description Get the unused available assets\n    *\n    * @name AssetController:getAvailableAssetFields\n    * @ngdoc method\n    * @methodOf AssetController\n    * @returns {array} the unused available assets\n    */\n    $scope.getAvailableAssetFields = function() {\n      var assets = [];\n      angular.forEach($scope.assetFields, function(asset) {\n        if ($scope.assetsBlackList.indexOf(asset) === -1) {\n          assets.push(asset);\n        }\n      });\n      return assets;\n    };\n\n    // Initialization\n\n    RequisitionsService.getAvailableAssets().then(function(assets) {\n      $scope.assetFields = assets;\n    });\n  }]);\n\n}());\n","/**\n* @author Dustin Frisch <dustin@opennms.org>\n* @copyright 2019 The OpenNMS Group, Inc.\n*/\nconst RequisitionMetaDataEntry = require('./RequisitionMetaDataEntry');\nconst RequisitionInterface = require('./RequisitionInterface');\nconst RequisitionService = require('./RequisitionService');\nconst MetaDataConstants = require('./MetaDataConstants');\nconst Scope = MetaDataConstants.Scope;\n\n/**\n* Container for all of the meta-data entries related to a specific node.\n*\n* @ngdoc object\n* @name RequisitionMetaData\n* @module onms-requisitions\n* @param {Object} node an OpenNMS node JSON object\n* @param {Object} requisitionNode RequisitionNode object\n* @constructor\n*/\nconst RequisitionMetaData = function RequisitionMetaData(node, requisitionNode) {\n  'use strict';\n\n  const self = this;\n\n  /**\n   * Contains all meta-data entries on the node that have context = 'requisition'\n   */\n  self.requisition = [];\n\n  /**\n   * Contains all meta-data entries on the node that have context != 'requisition'\n   */\n  self.other = [];\n\n  const toMetaDataEntry = function(entry) {\n    const entryObj = new RequisitionMetaDataEntry();\n    entryObj.context = entry.context;\n    entryObj.key = entry.key;\n    entryObj.value = entry.value;\n    return entryObj;\n  };\n\n  // Flatten all the meta-data entries into a single list while preserving\n  // the scope and objects they relate to\n  const allEntries = [];\n  angular.forEach(node['meta-data'], function(entry) {\n    const entryObj = toMetaDataEntry(entry);\n    entryObj.scope = Scope.NODE;\n    allEntries.push(entryObj);\n  });\n\n  angular.forEach(node.interface, function(iff) {\n    const ri = new RequisitionInterface(iff);\n    // Interface level\n    angular.forEach(iff['meta-data'], function(entry) {\n      const entryObj = toMetaDataEntry(entry);\n      entryObj.scope = Scope.INTERFACE;\n      entryObj.scoped_interface = ri;\n      allEntries.push(entryObj);\n    });\n\n    angular.forEach(iff['monitored-service'], function(svc) {\n      // Service level\n      angular.forEach(svc['meta-data'], function(entry) {\n        const entryObj = toMetaDataEntry(entry);\n        entryObj.scope = Scope.SERVICE;\n        entryObj.scoped_interface = ri;\n        entryObj.scoped_service = new RequisitionService(svc);\n\n        allEntries.push(entryObj);\n      });\n    });\n  });\n\n  /**\n   * Remove meta-data entries for any referenced entities\n   * that no longer exist.\n   */\n  self.removeEntriesForMissingScopedEntities = function() {\n    _.remove(self.requisition, function(entry) {\n      return !self.doesReferencedEntityExist(entry);\n    });\n    _.remove(self.other, function(entry) {\n      return !self.doesReferencedEntityExist(entry);\n    });\n  };\n\n  /**\n   * @param entry meta-data entry to verify\n   */\n  self.doesReferencedEntityExist = function(entry) {\n    if (entry.scope === Scope.INTERFACE || entry.scope === Scope.SERVICE) {\n      // Does an interface exist with the given IP address\n      let iff = _.find(requisitionNode.interfaces, function(iff) { return iff.ipAddress === entry.scoped_interface.ipAddress; });\n      if (iff === undefined) {\n        return false;\n      }\n\n      if (entry.scope === Scope.SERVICE) {\n        // Does a service exist with the given name?\n        let svc = _.find(iff.services, function(svc) { return svc.name === entry.scoped_service.name; });\n        if (svc === undefined) {\n          return false;\n        }\n      }\n    }\n    return true;\n  };\n\n  self.addEntry = function(entry) {\n    if (entry.context === MetaDataConstants.RequisitionContext) {\n      self.requisition.push(entry);\n    } else {\n      self.other.push(entry);\n    }\n  };\n\n  self.removeEntry = function(entry) {\n    _.remove(self.requisition, function(existingEntry) {\n      return existingEntry === entry;\n    });\n    _.remove(self.other, function(existingEntry) {\n      return existingEntry === entry;\n    });\n  };\n\n  angular.forEach(allEntries, function(entry) {\n    self.addEntry(entry);\n  });\n\n  self.getOnmsMetaData = function(predicate) {\n    var metaDataObject = [];\n\n    angular.forEach(self.requisition, function(entry) {\n      if (!predicate(entry)) {\n        return;\n      }\n      metaDataObject.push({\n        'context': MetaDataConstants.RequisitionContext,\n        'key': entry.key,\n        'value': entry.value\n      });\n    });\n\n    angular.forEach(self.other, function(entry) {\n      if (!predicate(entry)) {\n        return;\n      }\n      metaDataObject.push({\n        'context': entry.context,\n        'key': entry.key,\n        'value': entry.value\n      });\n    });\n\n    return metaDataObject;\n  };\n\n  self.getOnmsMetaDataForNode = function() {\n    return self.getOnmsMetaData(function(entry) {\n      return entry.scope === Scope.NODE;\n    });\n  };\n\n  self.getOnmsMetaDataForInterface = function(intf) {\n    return self.getOnmsMetaData(function(entry) {\n      return entry.scope === Scope.INTERFACE\n          && entry.scoped_interface.ipAddress === intf.ipAddress;\n    });\n  };\n\n  self.getOnmsMetaDataForService = function(intf, svc) {\n    return self.getOnmsMetaData(function(entry) {\n      return entry.scope === Scope.SERVICE\n          && entry.scoped_interface.ipAddress === intf.ipAddress\n          && entry.scoped_service.name === svc.name\n    });\n  };\n\n  /**\n   * Used by the form validation constraint to return the set of keys\n   * that exist in the same scope as the given entry\n   *\n   * @param lookup\n   * @returns {string[]}\n   */\n  self.getKeysInScopeOf = function(lookup) {\n    const metaData = self.getOnmsMetaData(function(entry) {\n      // Start by matching both the scope and context\n      if (entry.scope !== lookup.scope || entry.context !== lookup.context) {\n        return false;\n      }\n\n      if (lookup.scope === Scope.INTERFACE || lookup.scope === Scope.SERVICE) {\n        // The interfaces must match\n        if (entry.scoped_interface.ipAddress !== lookup.scoped_interface.ipAddress) {\n          return false;\n        }\n\n        if (lookup.scope === Scope.SERVICE) {\n          // The services must match\n          if (entry.scoped_service.name !== lookup.scoped_service.name) {\n            return false;\n          }\n        }\n      }\n\n      return true;\n    });\n\n    return _.map(metaData, function(entry) {\n      return entry.key;\n    });\n  };\n\n  self.className = 'RequisitionMetaData';\n\n  return self;\n};\n\nmodule.exports = RequisitionMetaData;\n","/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\n(function() {\n\n  'use strict';\n\n  angular.module('onms-requisitions')\n\n  /**\n  * @ngdoc controller\n  * @name CloneForeignSourceController\n  * @module onms-requisitions\n  *\n  * @requires $scope Angular local scope\n  * @requires $uibModalInstance Angular UI modal instance\n  * @requires foreignSource The requisition's name (a.k.a. foreign source)\n  * @requires availableForeignSources The availeble requisitions (a.k.a. foreign sources)\n  *\n  * @description The controller for manage the modal dialog for clone the foreign source definition of a given requisition.\n  */\n  .controller('CloneForeignSourceController', ['$scope', '$uibModalInstance', 'foreignSource', 'availableForeignSources', function($scope, $uibModalInstance, foreignSource, availableForeignSources) {\n\n    /**\n    * @description The foreign source (a.k.a the name of the requisition).\n    *\n    * @ngdoc property\n    * @name CloneForeignSourceController#foreignSource\n    * @propertyOf CloneForeignSourceController\n    * @returns {string} The foreign source\n    */\n    $scope.foreignSource = foreignSource;\n\n    /**\n    * @description The target foreign source (a.k.a the name of the requisition).\n    *\n    * @ngdoc property\n    * @name CloneForeignSourceController#targetForeignSource\n    * @propertyOf CloneForeignSourceController\n    * @returns {string} The target foreign source\n    */\n    $scope.targetForeignSource = null;\n\n    /**\n    * @description The available foreign sources\n    *\n    * @ngdoc property\n    * @name CloneForeignSourceController#$scope.availableForeignSources\n    * @propertyOf CloneForeignSourceController\n    * @returns {array} List of available foreign sources\n    */\n    $scope.availableForeignSources = availableForeignSources;\n\n    /**\n    * @description Saves the current asset\n    *\n    * @name AssetController:save\n    * @ngdoc method\n    * @methodOf AssetController\n    */\n    $scope.save = function() {\n      $uibModalInstance.close($scope.targetForeignSource);\n    };\n\n    /**\n    * @description Cancels current operation\n    *\n    * @name AssetController:cancel\n    * @ngdoc method\n    * @methodOf AssetController\n    */\n    $scope.cancel = function() {\n      $uibModalInstance.dismiss('cancel');\n    };\n\n  }]);\n\n}());\n","require('../services/Requisitions');\n\n/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\n(function() {\n\n  'use strict';\n\n  angular.module('onms-requisitions')\n\n  /**\n  * @ngdoc controller\n  * @name DetectorController\n  * @module onms-requisitions\n  *\n  * @requires $scope Angular local scope\n  * @requires $uibModalInstance Angular UI modal instance\n  * @requires RequisitionsService The Requisitions Servive\n  * @requires detector Requisition detector object\n  *\n  * @description The controller for manage the modal dialog for add/edit requisition detectors\n  */\n  .controller('DetectorController', ['$scope', '$uibModalInstance', 'RequisitionsService', 'detector', function($scope, $uibModalInstance, RequisitionsService, detector) {\n\n    /**\n    * @description The detector object\n    *\n    * @ngdoc property\n    * @name DetectorController#detector\n    * @propertyOf DetectorController\n    * @returns {object} The detector object\n    */\n    $scope.detector = detector;\n\n    /**\n    * @description The available detectors object\n    *\n    * @ngdoc property\n    * @name DetectorController#availableDetectors\n    * @propertyOf DetectorController\n    * @returns {array} The detectors list\n    */\n    $scope.availableDetectors = [];\n\n    /**\n    * @description The available parameters/attributes for the selected detector\n    *\n    * @ngdoc property\n    * @name DetectorController#availableParameters\n    * @propertyOf DetectorController\n    * @returns {array} The parameters list\n    */\n    $scope.availableParameters = [];\n\n    /**\n    * @description Gets the available parameters not being used by the detector\n    *\n    * @name DetectorController:getAvailableParameters\n    * @ngdoc method\n    * @methodOf DetectorController\n    */\n    $scope.getAvailableParameters = function() {\n      var params = [];\n      angular.forEach($scope.availableParameters, function(availParam) {\n        var found = false;\n        angular.forEach($scope.detector.parameter, function(param) {\n          if (param.key === availParam.key) {\n            found = true;\n          }\n        });\n        if (!found) {\n          params.push(availParam);\n        }\n      });\n      return params;\n    };\n\n    /**\n    * @description Saves the current detector\n    *\n    * @name DetectorController:save\n    * @ngdoc method\n    * @methodOf DetectorController\n    */\n    $scope.save = function () {\n      $uibModalInstance.close($scope.detector);\n    };\n\n    /**\n    * @description Cancels the current operation\n    *\n    * @name DetectorController:cancel\n    * @ngdoc method\n    * @methodOf DetectorController\n    */\n    $scope.cancel = function () {\n      $uibModalInstance.dismiss('cancel');\n    };\n\n    /**\n    * @description Adds a new empty parameter to the current detector\n    *\n    * @name DetectorController:addParameter\n    * @ngdoc method\n    * @methodOf DetectorController\n    */\n    $scope.addParameter = function() {\n      $scope.detector.parameter.push({ 'key': '', 'value': '' });\n    };\n\n    /**\n    * @description Removes a parameter from the current detector\n    *\n    * @name DetectorController:removeParameter\n    * @ngdoc method\n    * @methodOf DetectorController\n    * @param {integer} index The index of the parameter to remove\n    */\n    $scope.removeParameter = function(index) {\n      $scope.detector.parameter.splice(index, 1);\n    };\n\n    /**\n    * @description Update available detector parameters after changing the detector class.\n    *\n    * @name DetectorController:updateAvailableParameters\n    * @ngdoc method\n    * @methodOf DetectorController\n    * @param {object} policyConfig the configuration of the selected policy\n    */\n    $scope.updateAvailableParameters = function(selectedDetector) {\n      if (!selectedDetector) {\n        return;\n      }\n      $scope.detector.parameter = [];\n      angular.forEach($scope.availableDetectors, function(detector) {\n        if (detector.class === selectedDetector.class) {\n          $scope.availableParameters = detector.parameters;\n        }\n      });\n    };\n\n    // Initialization\n\n    RequisitionsService.getAvailableDetectors().then(function(detectors) {\n      $scope.availableDetectors = detectors;\n      if ($scope.detector.class) {\n        angular.forEach(detectors, function(detector) {\n          if (detector.class === $scope.detector.class) {\n            $scope.availableParameters = detector.parameters;\n            var orderedParams = [];\n            for (var i=0; i<detector.parameters.length; i++) {\n              var pkey = detector.parameters[i].key;\n              for (var j=0; j<$scope.detector.parameter.length; j++) {\n                var p = $scope.detector.parameter[j];\n                if (p.key === pkey) {\n                  orderedParams.push(p);\n                }\n              }\n            }\n            $scope.detector.parameter = orderedParams;\n          }\n        });\n      }\n    });\n\n  }]);\n\n}());\n","const bootbox = require('bootbox');\n\nrequire('../services/Requisitions');\n\n/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\n(function() {\n\n  'use strict';\n\n  const policyView = require('../../views/policy.html');\n  const moveView = require('../../views/move.html');\n  const detectorView = require('../../views/detector.html');\n\n  angular.module('onms-requisitions')\n\n  /**\n  * @ngdoc controller\n  * @name ForeignSourceController\n  * @module onms-requisitions\n  *\n  * @requires $scope Angular local scope\n  * @requires $routeParams Angular route parameters\n  * @requires $window Document window\n  * @requires $uibModal Angular UI modal\n  * @required filterFilter the Angular filter\n  * @required Configuration The configuration object\n  * @requires RequisitionsService The requisitions service\n  * @requires growl The growl plugin for instant notifications\n  *\n  * @description The controller for manage foreign source definitions (i.e. policies and detectors)\n  */\n  .controller('ForeignSourceController', ['$scope', '$routeParams', '$window', '$uibModal', 'filterFilter', 'Configuration', 'RequisitionsService', 'growl', function($scope, $routeParams, $window, $uibModal, filterFilter, Configuration, RequisitionsService, growl) {\n\n    /**\n    * @description The timing status.\n    *\n    * @ngdoc property\n    * @name ForeignSourceController#timingStatus\n    * @propertyOf ForeignSourceController\n    * @returns {object} The timing status object\n    */\n    $scope.timingStatus = RequisitionsService.getTiming();\n\n    /**\n    * @description The foreign source (a.k.a the name of the requisition).\n    * The default value is obtained from the $routeParams.\n    *\n    * @ngdoc property\n    * @name ForeignSourceController#foreignSource\n    * @propertyOf ForeignSourceController\n    * @returns {string} The foreign source\n    */\n    $scope.foreignSource = $routeParams.foreignSource;\n\n    /**\n    * @description The foreign source definition object\n    *\n    * @ngdoc property\n    * @name ForeignSourceController#foreignSourceDef\n    * @propertyOf ForeignSourceController\n    * @returns {object} The foreign source definition\n    */\n    $scope.foreignSourceDef = { detectors: [], policies: [] };\n\n    /**\n    * @description The filteres object (used to track the content of the search fields)\n    *\n    * @ngdoc property\n    * @name ForeignSourceController#filters\n    * @propertyOf ForeignSourceController\n    * @returns {object} The filteres object\n    */\n    $scope.filters = { detector: null, policy: null };\n\n    /**\n    * @description The filtered list of detectors\n    *\n    * @ngdoc property\n    * @name ForeignSourceController#filteredDetectors\n    * @propertyOf ForeignSourceController\n    * @returns {array} The filtered array\n    */\n    $scope.filteredDetectors = [];\n\n    /**\n    * @description The amount of detectors per page for pagination (defaults to 10)\n    *\n    * @ngdoc property\n    * @name ForeignSourceController#detectorsPageSize\n    * @propertyOf ForeignSourceController\n    * @returns {integer} The page size\n    */\n    $scope.detectorsPageSize = 10;\n\n    /**\n    * @description The maximum size of detector pages for pagination (defaults to 5)\n    *\n    * @ngdoc property\n    * @name ForeignSourceController#detectorsMaxSize\n    * @propertyOf ForeignSourceController\n    * @returns {integer} The maximum size\n    */\n    $scope.detectorsMaxSize = 5;\n\n    /**\n    * @description The total amount of detectors for pagination (defaults to 0)\n    *\n    * @ngdoc property\n    * @name ForeignSourceController#detectorsTotalItems\n    * @propertyOf ForeignSourceController\n    * @returns {integer} The total detectors\n    */\n    $scope.detectorsTotalItems = 0;\n\n    /**\n    * @description The filtered list of policies\n    *\n    * @ngdoc property\n    * @name ForeignSourceController#filteredPolicies\n    * @propertyOf ForeignSourceController\n    * @returns {array} The filtered array\n    */\n    $scope.filteredPolicies = [];\n\n    /**\n    * @description The amount of policies per page for pagination (defaults to 10)\n    *\n    * @ngdoc property\n    * @name ForeignSourceController#policiesPageSize\n    * @propertyOf ForeignSourceController\n    * @returns {integer} The page size\n    */\n    $scope.policiesPageSize = 10;\n\n    /**\n    * @description The maximum size of policies pages for pagination (defaults to 5)\n    *\n    * @ngdoc property\n    * @name ForeignSourceController#policiesMaxSize\n    * @propertyOf ForeignSourceController\n    * @returns {integer} The maximum size\n    */\n    $scope.policiesMaxSize = 5;\n\n    /**\n    * @description The total amount of policies for pagination (defaults to 0)\n    *\n    * @ngdoc property\n    * @name ForeignSourceController#policiesTotalItems\n    * @propertyOf ForeignSourceController\n    * @returns {integer} The total policies\n    */\n    $scope.policiesTotalItems = 0;\n\n    /**\n    * @description Goes to specific URL warning about changes if exist.\n    *\n    * @name ForeignSourceController:goTo\n    * @ngdoc method\n    * @methodOf ForeignSourceController\n    * @param {object} handler The goto handler\n    */\n    $scope.goTo = function(handler) {\n      if (this.fsForm.$dirty) {\n        bootbox.dialog({\n          message: 'There are changes on the current requisition. Are you sure you want to cancel ?',\n          title: 'Cancel Changes',\n          buttons: {\n            success: {\n              label: 'Yes',\n              className: 'btn-primary',\n              callback: handler\n            },\n            main: {\n              label: 'No',\n              className: 'btn-secondary'\n            }\n          }\n        });\n      } else {\n        handler();\n      }\n    };\n\n    /**\n    * @description Goes back to requisitions list (navigation)\n    *\n    * @name ForeignSourceController:goTop\n    * @ngdoc method\n    * @methodOf ForeignSourceController\n    */\n    $scope.goTop = function() {\n      var doGoTop = function() {\n        $window.location.href = Configuration.baseHref + '#/requisitions';\n      };\n      $scope.goTo(doGoTop);\n    };\n\n    /**\n    * @description Goes back to requisition editor (navigation)\n    *\n    * @name ForeignSourceController:goBack\n    * @ngdoc method\n    * @methodOf ForeignSourceController\n    */\n    $scope.goBack = function() {\n      var doGoBack = function() {\n        if ($scope.foreignSource === 'default') {\n          $window.location.href = Configuration.baseHref + '#/requisitions';\n        } else {\n          $window.location.href = Configuration.baseHref + '#/requisitions/' + encodeURIComponent($scope.foreignSource);\n        }\n      };\n      $scope.goTo(doGoBack);\n    };\n\n    /**\n    * @description Shows an error to the user\n    *\n    * @name ForeignSourceController:errorHandler\n    * @ngdoc method\n    * @methodOf ForeignSourceController\n    * @param {string} message The error message\n    */\n    $scope.errorHandler = function(message) {\n      growl.error(message, {ttl: 10000});\n    };\n\n    /**\n    * @description Returns the index of a policy\n    *\n    * @name ForeignSourceController:indexOfPolicy\n    * @ngdoc method\n    * @methodOf ForeignSourceController\n    * @param {object} policy The policy object\n    */\n    $scope.indexOfPolicy = function(policy) {\n      for (var i = 0; i < $scope.foreignSourceDef.policies.length; i++) {\n        if ($scope.foreignSourceDef.policies[i].name === policy.name) {\n          return i;\n        }\n      }\n      return -1;\n    };\n\n    /**\n    * @description Returns the index of a detector\n    *\n    * @name ForeignSourceController:indexOfDetector\n    * @ngdoc method\n    * @methodOf ForeignSourceController\n    * @param {object} policy The detector object\n    */\n    $scope.indexOfDetector = function(detector) {\n      for (var i = 0; i < $scope.foreignSourceDef.detectors.length; i++) {\n        if ($scope.foreignSourceDef.detectors[i].name === detector.name) {\n          return i;\n        }\n      }\n      return -1;\n    };\n\n    /**\n    * @description Opens the modal window to add/edit a policy\n    *\n    * @name ForeignSourceController:editPolicy\n    * @ngdoc method\n    * @methodOf ForeignSourceController\n    * @param {object} policy The policy object to edit\n    * @param {boolean} isNew true, if the policy is new\n    */\n    $scope.editPolicy = function(policy, isNew) {\n      var form = this.fsForm;\n      $uibModal.open({\n        backdrop: 'static',\n        keyboard: false,\n        controller: 'PolicyController',\n        templateUrl: policyView,\n        resolve: {\n          policy: function() { return angular.copy(policy); }\n        }\n      }).result.then(function(result) {\n        angular.copy(result, policy);\n        form.$dirty = true;\n      }, function() {\n        if (isNew) {\n          $scope.foreignSourceDef.policies.pop();\n        }\n      });\n    };\n\n    /**\n    * @description Opens the modal window to move a policy\n    *\n    * @name ForeignSourceController:moveDetector\n    * @ngdoc method\n    * @methodOf ForeignSourceController\n    * @param {object} policy The policy object to move\n    */\n    $scope.movePolicy = function(policy) {\n      var form = this.fsForm;\n      var pos = $scope.indexOfPolicy(policy);\n      var max = $scope.foreignSourceDef.policies.length - 1;\n      $uibModal.open({\n        backdrop: 'static',\n        keyboard: false,\n        size: 'sm',\n        controller: 'MoveController',\n        templateUrl: moveView,\n        resolve: {\n          label: function() { return policy.name; },\n          position: function() { return pos; },\n          maximum: function() { return max; }\n        }\n      }).result.then(function(dst) {\n        form.$dirty = true;\n        $scope.foreignSourceDef.policies.splice(pos, 1);\n        $scope.foreignSourceDef.policies.splice(dst, 0, policy);\n\n      });\n    };\n\n    /**\n    * @description Removes a policy\n    *\n    * @name ForeignSourceController:removePolicy\n    * @ngdoc method\n    * @methodOf ForeignSourceController\n    * @param {object} policy The policy object to remove\n    */\n    $scope.removePolicy = function(policy) {\n      var index = $scope.indexOfPolicy(policy);\n      if (index > -1) {\n        $scope.foreignSourceDef.policies.splice(index, 1);\n        this.fsForm.$dirty = true;\n      }\n    };\n\n    /**\n    * @description Adds a new policy\n    *\n    * @name ForeignSourceController:addPolicy\n    * @ngdoc method\n    * @methodOf ForeignSourceController\n    */\n    $scope.addPolicy = function() {\n      $scope.foreignSourceDef.policies.push({ 'name': '', 'class': '', 'parameter': [] });\n      var index = $scope.foreignSourceDef.policies.length - 1;\n      $scope.editPolicy($scope.foreignSourceDef.policies[index], true);\n    };\n\n    /**\n    * @description Opens the modal window to add/edit a detector\n    *\n    * @name ForeignSourceController:editDetector\n    * @ngdoc method\n    * @methodOf ForeignSourceController\n    * @param {object} detector The detector object to edit\n    * @param {boolean} isNew true, if the detector is new\n    */\n    $scope.editDetector = function(detector, isNew) {\n      var form = this.fsForm;\n      $uibModal.open({\n        backdrop: 'static',\n        keyboard: false,\n        controller: 'DetectorController',\n        templateUrl: detectorView,\n        resolve: {\n          detector: function() { return angular.copy(detector); }\n        }\n      }).result.then(function(result) {\n        angular.copy(result, detector);\n        form.$dirty = true;\n      }, function() {\n        if (isNew) {\n          $scope.foreignSourceDef.detectors.pop();\n        }\n      });\n    };\n\n    /**\n    * @description Opens the modal window to move a detector\n    *\n    * @name ForeignSourceController:moveDetector\n    * @ngdoc method\n    * @methodOf ForeignSourceController\n    * @param {object} detector The detector object to move\n    */\n    $scope.moveDetector = function(detector) {\n      var form = this.fsForm;\n      var pos = $scope.indexOfDetector(detector);\n      var max = $scope.foreignSourceDef.detectors.length - 1;\n      $uibModal.open({\n        backdrop: 'static',\n        keyboard: false,\n        size: 'sm',\n        controller: 'MoveController',\n        templateUrl: moveView,\n        resolve: {\n          label: function() { return detector.name; },\n          position: function() { return pos; },\n          maximum: function() { return max; }\n        }\n      }).result.then(function(dst) {\n        form.$dirty = true;\n        $scope.foreignSourceDef.detectors.splice(pos, 1);\n        $scope.foreignSourceDef.detectors.splice(dst, 0, detector);\n\n      });\n    };\n\n    /**\n    * @description Removes a detector\n    *\n    * @name ForeignSourceController:removeDetector\n    * @ngdoc method\n    * @methodOf ForeignSourceController\n    * @param {object} detector The detector object to remove\n    */\n    $scope.removeDetector = function(detector) {\n      var index = $scope.indexOfDetector(detector);\n      if (index > -1) {\n        $scope.foreignSourceDef.detectors.splice(index, 1);\n        this.fsForm.$dirty = true;\n      }\n    };\n\n    /**\n    * @description Adds a new detector\n    *\n    * @name ForeignSourceController:addDetector\n    * @ngdoc method\n    * @methodOf ForeignSourceController\n    */\n    $scope.addDetector = function() {\n      $scope.foreignSourceDef.detectors.push({ 'name': '', 'class': '', 'parameter': [] });\n      var index = $scope.foreignSourceDef.detectors.length - 1;\n      $scope.editDetector($scope.foreignSourceDef.detectors[index], true);\n    };\n\n    /**\n    * @description Saves the local foreign source on the server\n    *\n    * @name ForeignSourceController:save\n    * @ngdoc method\n    * @methodOf ForeignSourceController\n    */\n    $scope.save = function() {\n      var form = this.fsForm;\n      RequisitionsService.startTiming();\n      RequisitionsService.saveForeignSourceDefinition($scope.foreignSourceDef).then(\n        function() { // success\n          growl.success('The definition for the requisition ' + _.escape($scope.foreignSource) + ' has been saved.');\n          form.$dirty = false;\n        },\n        $scope.errorHandler\n      );\n    };\n\n    /**\n    * @description Resets to the default set of detectors and policies\n    *\n    * @name ForeignSourceController:reset\n    * @ngdoc method\n    * @methodOf ForeignSourceController\n    */\n    $scope.reset = function() {\n      bootbox.confirm('Are you sure you want to reset the foreign source definition to the default ?', function(ok) {\n        if (ok) {\n          RequisitionsService.startTiming();\n          RequisitionsService.deleteForeignSourceDefinition($scope.foreignSource).then(\n            function() { // success\n              growl.success('The foreign source definition for ' + _.escape($scope.foreignSource) + 'has been reseted.');\n              $scope.initialize();\n            },\n            $scope.errorHandler\n          );\n        }\n      });\n    };\n\n    /**\n    * @description Updates the pagination variables for the policies.\n    *\n    * @name ForeignSourceController:updateFilteredPolicies\n    * @ngdoc method\n    * @methodOf ForeignSourceController\n    */\n    $scope.updateFilteredPolicies = function() {\n      $scope.policiesCurrentPage = 1;\n      $scope.policiesTotalItems = $scope.filteredPolicies.length;\n      $scope.policiesNumPages = Math.ceil($scope.policiesTotalItems / $scope.policiesPageSize);\n    };\n\n    /**\n    * @description Updates the pagination variables for the detectors.\n    *\n    * @name ForeignSourceController:updateFilteredDetectors\n    * @ngdoc method\n    * @methodOf ForeignSourceController\n    */\n    $scope.updateFilteredDetectors = function() {\n      $scope.detectorsCurrentPage = 1;\n      $scope.detectorsTotalItems = $scope.filteredDetectors.length;\n      $scope.detectorsNumPages = Math.ceil($scope.detectorsTotalItems / $scope.detectorsPageSize);\n    };\n\n    /**\n    * @description Initialized the local foreign source definition from the server\n    *\n    * @name ForeignSourceController:initialize\n    * @ngdoc method\n    * @methodOf ForeignSourceController\n    */\n    $scope.initialize = function() {\n      growl.success('Retrieving definition for requisition ' + _.escape($scope.foreignSource) + '...');\n      RequisitionsService.getForeignSourceDefinition($scope.foreignSource).then(\n        function(foreignSourceDef) { // success\n          $scope.foreignSourceDef = foreignSourceDef;\n          // Updating pagination variables for detectors.\n          $scope.filteredDetectors = $scope.foreignSourceDef.detectors;\n          $scope.updateFilteredDetectors();\n          // Updating pagination variables for policies.\n          $scope.filteredPolicies = $scope.foreignSourceDef.policies;\n          $scope.updateFilteredPolicies();\n        },\n        $scope.errorHandler\n      );\n    };\n\n    /**\n    * @description Watch for filter changes in order to update the detector list and updates the pagination control\n    *\n    * @name ForeignSourceController:detectorFilter\n    * @ngdoc event\n    * @methodOf ForeignSourceController\n    */\n    $scope.$watch('filters.detector', function() {\n      $scope.filteredDetectors = filterFilter($scope.foreignSourceDef.detectors, $scope.filters.detector);\n      $scope.updateFilteredDetectors();\n    });\n\n    /**\n    * @description Watch for filter changes in order to update the policy list and updates the pagination control\n    *\n    * @name ForeignSourceController:policyFilter\n    * @ngdoc event\n    * @methodOf ForeignSourceController\n    */\n    $scope.$watch('filters.policy', function() {\n      $scope.filteredPolicies = filterFilter($scope.foreignSourceDef.policies, $scope.filters.policy);\n      $scope.updateFilteredPolicies();\n    });\n\n    // Initialization\n\n    if ($scope.foreignSource) {\n      $scope.initialize();\n    }\n  }]);\n\n}());\n","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/policy.html';\nvar html = \"<div> <div class=modal-header> <h3 class=modal-title>Policy</h3> </div> <div class=modal-body> <form name=policyForm> <div class=form-group> <label class=col-form-label for=name>Name</label> <input class=form-control type=text id=name name=name placeholder=\\\"Policy Name\\\" ng-model=policy.name required ng-class=\\\"{ 'is-invalid' : policyForm.name.$invalid }\\\"> <p ng-show=policyForm.name.$invalid class=invalid-feedback>A non empty name is required.</p> </div> <div class=form-group> <label class=col-form-label for=clazz>Class</label> <input class=form-control type=text id=clazz name=clazz placeholder=\\\"Implementation Class (choose one from the list)\\\" ng-model=policy.class typeahead-min-length=0 typeahead-editable=false typeahead-on-select=updatePolicyParameters($item) uib-typeahead=\\\"policy.class as policy.name for policy in availablePolicies | filter:$viewValue\\\" required ng-class=\\\"{ 'is-invalid' : policyForm.clazz.$invalid }\\\"> <p ng-show=policyForm.clazz.$invalid class=invalid-feedback>A valid class name is required.</p> </div> <ng-form name=paramForm ng-repeat=\\\"parameter in policy.parameter\\\" ng-include=getTemplate(parameter)> </ng-form> </form> </div> <div class=modal-footer> <button type=button class=\\\"btn btn-secondary\\\" id=add-policy-parameter ng-click=addParameter() ng-disabled=policyForm.clazz.$invalid>Add Parameter</button> <button type=button class=\\\"btn btn-primary\\\" id=save-policy ng-click=save() ng-disabled=policyForm.$invalid>Save</button> <button type=button class=\\\"btn btn-secondary\\\" id=\\\"cancel=policy\\\" ng-click=cancel()>Cancel</button> </div> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/move.html';\nvar html = \"<div> <div class=modal-header> <h3 class=modal-title>Move</h3> </div> <div class=modal-body> <form name=moveForm> <label class=col-form-label>{{ label }}</label> <div class=input-group> <span class=input-group-prepend> <button type=button class=\\\"btn btn-secondary btn-number\\\" ng-disabled=\\\"position == 0 || moveForm.$invalid\\\" ng-click=substract()> <span class=\\\"fa fa-minus\\\"></span> </button> </span> <input type=text ng-model=position class=\\\"form-control input-number\\\" ng-pattern=/\\\\d+/ required> <span class=input-group-append> <button type=button class=\\\"btn btn-secondary btn-number\\\" ng-disabled=\\\"position == maximum || moveForm.$invalid\\\" ng-click=add()> <span class=\\\"fa fa-plus\\\"></span> </button> </span> </div> <p class=\\\"form-text text-muted\\\">Choose a index between 0 and {{ maximum }}.</p> </form> </div> <div class=modal-footer> <button type=button class=\\\"btn btn-primary\\\" id=save-detector ng-click=move() ng-disabled=\\\"position > maximum || moveForm.$invalid\\\">Move</button> <button type=button class=\\\"btn btn-secondary\\\" id=cancel-detector ng-click=cancel()>Cancel</button> </div> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/detector.html';\nvar html = \"<div> <div class=modal-header> <h3 class=modal-title>Detector</h3> </div> <div class=modal-body> <form name=detectorForm> <div class=form-group> <label class=col-form-label for=name>Name</label> <input class=form-control type=text id=name name=name placeholder=\\\"Detector Name\\\" ng-model=detector.name required ng-class=\\\"{ 'is-invalid' : detectorForm.name.$invalid }\\\"> <p ng-show=detectorForm.name.$invalid class=invalid-feedback>A non empty name is required.</p> </div> <div class=form-group> <label class=col-form-label for=clazz>Class</label> <input class=form-control type=text id=clazz name=clazz placeholder=\\\"Implementation Class (choose one from the list)\\\" ng-model=detector.class typeahead-min-length=0 typeahead-editable=false typeahead-on-select=updateAvailableParameters($item) uib-typeahead=\\\"detector.class as detector.name for detector in availableDetectors | filter:$viewValue\\\" required ng-class=\\\"{ 'is-invalid' : detectorForm.clazz.$invalid }\\\"> <p ng-show=detectorForm.clazz.$invalid class=invalid-feedback>A valid class name is required.</p> </div> <ng-form name=paramForm ng-repeat=\\\"parameter in detector.parameter\\\"> <div class=form-group> <input class=form-control type=text name=paramName ng-if=!parameter.key placeholder=\\\"Parameter Name (choose one from the list)\\\" ng-model=parameter.key typeahead-min-length=0 typeahead-editable=false uib-typeahead=\\\"param.key as param.key for param in getAvailableParameters() | filter:$viewValue\\\" required ng-class=\\\"{ 'is-invalid' : paramForm.paramName.$invalid }\\\"> <p ng-show=paramForm.paramName.$invalid class=invalid-feedback>Parameter name is required.</p> </div> <div class=form-group> <label ng-if=parameter.key class=col-form-label>{{parameter.key}}</label> <div class=input-group> <input class=form-control type=text name=paramValue placeholder=\\\"Parameter Value\\\" ng-model=parameter.value required ng-class=\\\"{ 'is-invalid' : paramForm.paramValue.$invalid }\\\"> <div class=input-group-append> <button type=button class=\\\"btn btn-secondary\\\" ng-click=removeParameter($index)> <span class=\\\"fa fa-trash\\\"></span> </button> </div> <p ng-show=paramForm.paramValue.$invalid class=invalid-feedback>Parameter value is required.</p> </div> </div> </ng-form> </form> </div> <div class=modal-footer> <button type=button class=\\\"btn btn-secondary\\\" id=add-detector-parameter ng-click=addParameter() ng-disabled=\\\"detectorForm.clazz.$invalid || getAvailableParameters().length == 0\\\">Add Parameter</button> <button type=button class=\\\"btn btn-primary\\\" id=save-detector ng-click=save() ng-disabled=detectorForm.$invalid>Save</button> <button type=button class=\\\"btn btn-secondary\\\" id=cancel-detector ng-click=cancel()>Cancel</button> </div> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","require('../services/Requisitions');\n\nconst RequisitionService = require('../model/RequisitionService');\n\n/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\n(function() {\n\n  'use strict';\n\n  angular.module('onms-requisitions')\n\n  /**\n  * @ngdoc controller\n  * @name InterfaceController\n  * @module onms-requisitions\n  *\n  * @requires $scope Angular local scope\n  * @requires $uibModalInstance Angular UI modal instance\n  * @requires RequisitionsService The Requisitions Servive\n  * @requires foreignSource The requisition's name (a.k.a. foreign source)\n  * @requires foreignId The foreign ID of the container node\n  * @requires requisitionInterface The requisition interface object\n  * @requires ipBlackList The black list of IP Addresses.\n  *\n  * @description The controller for manage the modal dialog for add/edit IP interfaces of requisitioned nodes\n  */\n  .controller('InterfaceController', ['$scope', '$uibModalInstance', 'RequisitionsService', 'foreignSource', 'foreignId', 'requisitionInterface', 'ipBlackList', 'primaryInterface', function($scope, $uibModalInstance, RequisitionsService, foreignSource, foreignId, requisitionInterface, ipBlackList, primaryInterface) {\n\n    /**\n    * @description The foreign source (a.k.a the name of the requisition).\n    *\n    * @ngdoc property\n    * @name InterfaceController#foreignSource\n    * @propertyOf InterfaceController\n    * @returns {object} The foreign source\n    */\n    $scope.foreignSource = foreignSource;\n\n    /**\n    * @description The foreign ID of the source container node\n    *\n    * @ngdoc property\n    * @name InterfaceController#foreignId\n    * @propertyOf InterfaceController\n    * @returns {object} The foreign ID\n    */\n    $scope.foreignId = foreignId;\n\n    /**\n    * @description The interface object\n    *\n    * @ngdoc property\n    * @name InterfaceController#requisitionInterface\n    * @propertyOf InterfaceController\n    * @returns {object} The interface object\n    */\n    $scope.requisitionInterface = requisitionInterface;\n\n    /**\n    * @description The black list of IP addresses. The IP defined on requisitionInterface should be contained on this black list.\n    *\n    * @ngdoc property\n    * @name InterfaceController#ipBlackList\n    * @propertyOf InterfaceController\n    * @returns {array} The black list of IP addresses.\n    */\n    $scope.ipBlackList = ipBlackList;\n\n\n    $scope.primaryInterface = primaryInterface;\n\n    /**\n    * @description An array map with the valid values for snmp-primary\n    *\n    * @ngdoc property\n    * @name InterfaceController#snmpPrimaryFields\n    * @propertyOf InterfaceController\n    * @returns {object} The snmp primary fields object\n    */\n    $scope.snmpPrimaryFields = [\n      { id: 'P', title: 'Primary' },\n      { id: 'S', title: 'Secondary' },\n      { id: 'N', title: 'Not Eligible'}\n    ];\n\n    /**\n    * @description The available asset fields\n    *\n    * @ngdoc property\n    * @name InterfaceController#availableServices\n    * @propertyOf InterfaceController\n    * @returns {array} List of available services\n    */\n    $scope.availableServices = [];\n\n    /**\n    * @description Saves the current interface\n    *\n    * @name InterfaceController:save\n    * @ngdoc method\n    * @methodOf InterfaceController\n    */\n    $scope.save = function () {\n      $uibModalInstance.close($scope.requisitionInterface);\n    };\n\n    $scope.getSnmpPrimaryValues = function(ipAddress) {\n      const isPrimaryExists = $scope.primaryInterface !== null ? true : false;\n      if(isPrimaryExists && ipAddress !== $scope.primaryInterface) {\n        const snmpPrimary = $scope.snmpPrimaryFields.filter(field => field.id !== 'P');\n        return snmpPrimary;\n      }\n      return $scope.snmpPrimaryFields;\n    };\n\n    /**\n    * @description Cancels the current operation\n    *\n    * @name InterfaceController:cancel\n    * @ngdoc method\n    * @methodOf InterfaceController\n    */\n    $scope.cancel = function () {\n      $uibModalInstance.dismiss('cancel');\n    };\n\n    /**\n    * @description Adds a new empty service\n    *\n    * @name InterfaceController:addService\n    * @ngdoc method\n    * @methodOf InterfaceController\n    */\n    $scope.addService = function() {\n      $scope.requisitionInterface.services.push(new RequisitionService({ 'service-name': '' }));\n    };\n\n    /**\n    * @description Removes a service\n    *\n    * @name InterfaceController:removeService\n    * @ngdoc method\n    * @methodOf InterfaceController\n    * @param {integer} index The index of the service to remove\n    */\n    $scope.removeService = function(index) {\n      $scope.requisitionInterface.services.splice(index, 1);\n    };\n\n    /**\n    * @description Get the unused available services\n    *\n    * @name InterfaceController:getAvailableServices\n    * @ngdoc method\n    * @methodOf InterfaceController\n    * @returns {array} the unused available services\n    */\n    $scope.getAvailableServices = function() {\n      var services = [];\n      angular.forEach($scope.availableServices, function(avail) {\n        var found = false;\n        angular.forEach($scope.requisitionInterface.services, function(svc) {\n          if (svc.name === avail) {\n            found = true;\n          }\n        });\n        if (!found) {\n          services.push(avail);\n        }\n      });\n      return services;\n    };\n\n    // Initialization\n\n    RequisitionsService.getAvailableServices($scope.foreignSource).then(function(services) {\n      $scope.availableServices = services;\n    });\n\n  }]);\n\n}());\n","require('../services/Requisitions');\nconst RequisitionMetaDataEntry = require('../model/RequisitionMetaDataEntry');\nconst MetaDataConstants = require('../model/MetaDataConstants');\nconst Scope = MetaDataConstants.Scope;\nconst _ = require('lodash');\n\n(function() {\n\n  'use strict';\n\n  angular.module('onms-requisitions')\n\n  /**\n  * @ngdoc controller\n  * @name MetaDataController\n  * @module onms-requisitions\n  *\n  * @requires $scope Angular local scope\n  * @requires $uibModalInstance Angular UI modal instance\n  * @requires node related node object\n  * @requires entry related meta-data entry object\n  *\n  * @description The controller for manage the modal dialog for add/edit meta-data entries of requisitioned nodes\n  */\n  .controller('MetaDataController', ['$scope', '$uibModalInstance', 'node', 'entry', function($scope, $uibModalInstance, node, entry) {\n\n    $scope.node = node;\n\n    $scope.entry = entry;\n\n    /**\n     * Lookup the scoped entities based on the index of the selected elements.\n     *\n     * @param entry meta-data entry on which to resolve the scoped references\n     */\n    $scope.resolveScopeReferences = function(entry) {\n      if (entry.scope === Scope.INTERFACE) {\n        entry.scoped_interface = $scope.node.interfaces[entry.interface_idx];\n      } else if (entry.scope === Scope.SERVICE) {\n        entry.scoped_interface = $scope.interfacesWithServices[entry.interface_idx];\n        entry.scoped_service = entry.scoped_interface.services[entry.service_idx];\n      }\n    };\n\n    $scope.save = function() {\n      $scope.resolveScopeReferences($scope.entry);\n      $uibModalInstance.close($scope.entry);\n    };\n\n    $scope.cancel = function() {\n      $uibModalInstance.dismiss('cancel');\n    };\n\n    // Initialization\n    $scope.interfacesWithServices = [];\n    $scope.availableScopes = {};\n    $scope.availableScopes[Scope.NODE] = 'Node';\n\n    if ($scope.node.interfaces && $scope.node.interfaces.length > 0) {\n      // There are 1+ interfaces available, so we can set interface level meta-data on these\n      $scope.availableScopes[Scope.INTERFACE] = 'Interface';\n\n      // Now filter out the interfaces that have services\n      _.forEach($scope.node.interfaces, function(iff) {\n        if (iff.services && iff.services.length > 0) {\n          $scope.interfacesWithServices.push(iff);\n        }\n      });\n\n      if ($scope.interfacesWithServices.length > 0) {\n        // There are 1+ interfaces with services available, so we can set service level meta-data on these\n        $scope.availableScopes[Scope.SERVICE] = 'Service';\n      }\n    }\n\n    $scope.entry.interface_idx = 0;\n    $scope.entry.service_idx = 0;\n\n    if ($scope.entry.scope === Scope.INTERFACE && $scope.entry.scoped_interface) {\n      // Find the index of the associated interface\n      $scope.entry.interface_idx = _.findIndex($scope.node.interfaces, function(intf) { return intf.ipAddress === $scope.entry.scoped_interface.ipAddress; });\n      if ($scope.entry.interface_idx < 0) {\n        // The referenced interface no longer exists\n        $scope.entry.interface_idx = 0;\n      }\n    } else if ($scope.entry.scope === Scope.SERVICE && $scope.entry.scoped_service && $scope.interfacesWithServices.length > 0) {\n      // Find the index of the associated interface\n      $scope.entry.interface_idx = _.findIndex($scope.interfacesWithServices, function(intf) { return intf.ipAddress === $scope.entry.scoped_interface.ipAddress; });\n      if ($scope.entry.interface_idx < 0) {\n        // The referenced interface no longer exists\n        $scope.entry.interface_idx = 0;\n      }\n      // Find the index of the associated service\n      $scope.entry.service_idx = _.findIndex($scope.interfacesWithServices[$scope.entry.interface_idx].services, function(svc) { return svc.name === $scope.entry.scoped_service.name; });\n      if ($scope.entry.service_idx < 0) {\n        // The referenced service no longer exists\n        $scope.entry.service_idx = 0;\n      }\n    }\n\n    // Cast the indices to strings so that the proper option is automatically selected in the select boxes\n    $scope.entry.interface_idx = String($scope.entry.interface_idx);\n    $scope.entry.service_idx = String($scope.entry.service_idx);\n\n    // Save the original key so that we can perform proper uniqueness validation\n    $scope.originalKey = $scope.entry.key;\n  }]);\n\n}());\n","/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\n(function() {\n\n  'use strict';\n\n  angular.module('onms-requisitions')\n\n  /**\n  * @ngdoc controller\n  * @name MoveController\n  * @module onms-requisitions\n  *\n  * @requires $controller Angular controller\n  * @requires $scope Angular local scope\n  * @requires $uibModalInstance Angular UI modal instance\n  * @requires label The label to show in front of the input field\n  * @requires position The current value of the position\n  * @requires maximum The maximum value allowed\n  *\n  * @description The controller for manage the modal dialog for move a table row\n  */\n  .controller('MoveController', ['$controller', '$scope', '$uibModalInstance', 'label', 'position', 'maximum', function($controller, $scope, $uibModalInstance, label, position, maximum) {\n\n    /**\n    * @description The label for the input field.\n    *\n    * @ngdoc property\n    * @name MoveController#label\n    * @propertyOf MoveController\n    * @returns {string} The label\n    */\n    $scope.label = label;\n\n    /**\n    * @description The current position.\n    *\n    * @ngdoc property\n    * @name MoveController#position\n    * @propertyOf MoveController\n    * @returns {integer} The position value\n    */\n    $scope.position = position;\n\n    /**\n    * @description The maximum value allowed for the position.\n    *\n    * @ngdoc property\n    * @name MoveController#maximum\n    * @propertyOf MoveController\n    * @returns {integer} The maximum value\n    */\n    $scope.maximum = maximum;\n\n    /**\n    * @description Adds 1 from position\n    *\n    * @name MoveController:add\n    * @ngdoc method\n    * @methodOf MoveController\n    */\n    $scope.add = function() {\n      $scope.position++;\n    };\n\n    /**\n    * @description Substracts 1 from position\n    *\n    * @name MoveController:substract\n    * @ngdoc method\n    * @methodOf MoveController\n    */\n    $scope.substract = function() {\n      $scope.position--;\n    };\n\n    /**\n    * @description Closes the modal operation\n    *\n    * @name MoveController:move\n    * @ngdoc method\n    * @methodOf MoveController\n    */\n    $scope.move = function() {\n      $uibModalInstance.close($scope.position);\n    };\n\n    /**\n    * @description Cancels current modal operation\n    *\n    * @name MoveController:cancel\n    * @ngdoc method\n    * @methodOf MoveController\n    */\n    $scope.cancel = function() {\n      $uibModalInstance.dismiss('cancel');\n    };\n\n  }]);\n\n}());\n","const bootbox = require('bootbox');\n\nrequire('../services/Requisitions');\n\nconst RequisitionNode = require('../model/RequisitionNode');\nconst RequisitionMetaDataEntry = require('../model/RequisitionMetaDataEntry');\n\n/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\n(function() {\n\n  'use strict';\n\n  const assetView = require('../../views/asset.html');\n  const metaDataView = require('../../views/metadata.html');\n  const interfaceView = require('../../views/interface.html');\n\n  const nodeBasicView = require('../../views/node-basic.html');\n  const nodePathoutagesView = require('../../views/node-pathoutages.html');\n  const nodeInterfacesView = require('../../views/node-interfaces.html');\n  const nodeAssetsView = require('../../views/node-assets.html');\n  const nodeMetaDataView = require('../../views/node-metadata.html');\n  const nodeCategoriesView = require('../../views/node-categories.html');\n\n  angular.module('onms-requisitions')\n\n  /**\n  * @ngdoc controller\n  * @name NodeController\n  * @module onms-requisitions\n  *\n  * @requires $scope Angular local scope\n  * @requires $routeParams Angular route params\n  * @requires $cookies Angular cookies\n  * @requires $window Document window\n  * @requires $uibModal Angular UI modal\n  * @required Configuration The configuration object\n  * @requires RequisitionsService The requisitions service\n  * @requires growl The growl plugin for instant notifications\n  *\n  * @description The controller for manage requisitioned nodes (add/edit the nodes on a specific requisition)\n  */\n  .controller('NodeController', ['$scope', '$routeParams', '$cookies', '$window', '$uibModal', 'Configuration', 'RequisitionsService', 'growl', function($scope, $routeParams, $cookies, $window, $uibModal, Configuration, RequisitionsService, growl) {\n    $scope.nodeBasicView = nodeBasicView;\n    $scope.nodePathoutagesView = nodePathoutagesView;\n    $scope.nodeInterfacesView = nodeInterfacesView;\n    $scope.nodeAssetsView = nodeAssetsView;\n    $scope.nodeMetaDataView = nodeMetaDataView;\n    $scope.nodeCategoriesView = nodeCategoriesView;\n\n    /**\n    * @description The timing status.\n    *\n    * @ngdoc property\n    * @name NodeController#timingStatus\n    * @propertyOf NodeController\n    * @returns {object} The timing status object\n    */\n    $scope.timingStatus = RequisitionsService.getTiming();\n\n    /**\n    * @description The foreign source (a.k.a the name of the requisition).\n    * The default value is obtained from the $routeParams.\n    *\n    * @ngdoc property\n    * @name NodeController#foreignSource\n    * @propertyOf NodeController\n    * @returns {string} The foreign source\n    */\n    $scope.foreignSource = $routeParams.foreignSource;\n\n    /**\n    * @description The foreign ID\n    * The default value is obtained from the $routeParams.\n    * For new nodes, the content must be '__new__'.\n    *\n    * @ngdoc property\n    * @name NodeController#foreignId\n    * @propertyOf NodeController\n    * @returns {string} The foreign ID\n    */\n    $scope.foreignId = $routeParams.foreignId;\n\n    /**\n    * @description The isNew flag\n    *\n    * @ngdoc property\n    * @name NodeController#isNew\n    * @propertyOf NodeController\n    * @returns {boolean} true, if the foreign ID is equal to '__new__'\n    */\n    $scope.isNew = $scope.foreignId === '__new__';\n\n    /**\n    * @description The node object\n    *\n    * @ngdoc property\n    * @name NodeController#node\n    * @propertyOf NodeController\n    * @returns {object} The node object\n    */\n    $scope.node = {};\n\n    /**\n    * @description The available configured categories\n    *\n    * @ngdoc property\n    * @name NodeController#availableCategories\n    * @propertyOf NodeController\n    * @returns {array} The categories\n    */\n    $scope.availableCategories = [];\n\n    /**\n    * @description The available configured locations\n    *\n    * @ngdoc property\n    * @name NodeController#availableLocations\n    * @propertyOf NodeController\n    * @returns {array} The locations\n    */\n    $scope.availableLocations = [];\n\n    /**\n    * @description The list of black-listed foreign IDs.\n    * The foreignId must be unique within the requisition.\n    * For an existing node, the foreignId should not be changed.\n    * For new nodes, the foreignId must be validated.\n    *\n    * @ngdoc property\n    * @name NodeController#foreignIdBlackList\n    * @propertyOf NodeController\n    * @returns {array} The list of black-listed foreign IDs.\n    */\n    $scope.foreignIdBlackList = [];\n\n    /**\n    * @description Goes to specific URL warning about changes if exist.\n    *\n    * @name NodeController:goTo\n    * @ngdoc method\n    * @methodOf NodeController\n    * @param {string} url The URL to go\n    */\n    $scope.goTo = function(url) {\n      var doGoTo = function() {\n        $window.location.href = url;\n      };\n      if (this.nodeForm.$dirty) {\n        bootbox.dialog({\n          message: 'There are changes on the current node. Are you sure you want to cancel ?',\n          title: 'Cancel Changes',\n          buttons: {\n            success: {\n              label: 'Yes',\n              className: 'btn-primary',\n              callback: doGoTo\n            },\n            main: {\n              label: 'No',\n              className: 'btn-secondary'\n            }\n          }\n        });\n      } else {\n        doGoTo();\n      }\n    };\n\n    /**\n    * @description Goes back to requisitions list (navigation)\n    *\n    * @name NodeController:goTop\n    * @ngdoc method\n    * @methodOf NodeController\n    */\n    $scope.goTop = function() {\n      $scope.goTo(Configuration.baseHref + '#/requisitions');\n    };\n\n    /**\n    * @description Goes back to requisition editor (navigation)\n    *\n    * @name NodeController:goBack\n    * @ngdoc method\n    * @methodOf NodeController\n    */\n    $scope.goBack = function() {\n      $scope.goTo(Configuration.baseHref + '#/requisitions/' + encodeURIComponent($scope.foreignSource));\n    };\n\n    /**\n    * @description Goes to the vertical layout page (navigation)\n    *\n    * @name NodeController:goVerticalLayout\n    * @ngdoc method\n    * @methodOf NodeController\n    */\n    $scope.goVerticalLayout = function() {\n      $cookies.put('use_requisitions_node_vertical_layout', 'true');\n      $scope.goTo(Configuration.baseHref + '#/requisitions/' + encodeURIComponent($scope.foreignSource) + '/nodes/' + encodeURIComponent($scope.foreignId) + '/vertical');\n    };\n\n    /**\n    * @description Goes to the horizontal layout page (navigation)\n    *\n    * @name NodeController:goHorizontalLayout\n    * @ngdoc method\n    * @methodOf NodeController\n    */\n    $scope.goHorizontalLayout = function() {\n      $cookies.put('use_requisitions_node_vertical_layout', 'false');\n      $scope.goTo(Configuration.baseHref + '#/requisitions/' + encodeURIComponent($scope.foreignSource) + '/nodes/' + encodeURIComponent($scope.foreignId));\n    };\n\n    /**\n    * @description Shows an error to the user\n    *\n    * @name NodeController:errorHandler\n    * @ngdoc method\n    * @methodOf NodeController\n    * @param {string} message The error message\n    */\n    $scope.errorHandler = function(message) {\n      growl.error(message, {ttl: 10000});\n    };\n\n    /**\n    * @description Generates a foreign Id\n    *\n    * @name NodeController:generateForeignId\n    * @ngdoc method\n    * @methodOf NodeController\n    * @param {object} the form object associated with the foreignId\n    */\n    $scope.generateForeignId = function(formObj) {\n      $scope.node.foreignId = String(new Date().getTime());\n      formObj.$invalid = false;\n    };\n\n    /**\n    * @description Shows the dialog for add/edit an asset field\n    *\n    * @name NodeController:editAsset\n    * @ngdoc method\n    * @methodOf NodeController\n    * @param {integer} index The index of the asset to be edited\n    * @param {boolean} isNew true, if the asset is new\n    */\n    $scope.editAsset = function(index, isNew) {\n      var form = this.nodeForm;\n      var assetToEdit = $scope.node.assets[index];\n      var assetsBlackList = [];\n      angular.forEach($scope.node.assets, function(asset) {\n        assetsBlackList.push(asset.name);\n      });\n\n      var modalInstance = $uibModal.open({\n        backdrop: 'static',\n        keyboard: false,\n        controller: 'AssetController',\n        templateUrl: assetView,\n        resolve: {\n          asset: function() { return angular.copy(assetToEdit); },\n          assetsBlackList: function() { return assetsBlackList; }\n        }\n      });\n\n      modalInstance.result.then(function(result) {\n        angular.copy(result, assetToEdit);\n        form.$dirty = true;\n      }, function() {\n        if (isNew) {\n          $scope.node.assets.pop();\n        }\n      });\n    };\n\n    /**\n    * @description Removes an asset from the local node\n    *\n    * @name NodeController:removeAsset\n    * @ngdoc method\n    * @methodOf NodeController\n    * @param {integer} index The index of the asset to be removed\n    */\n    $scope.removeAsset = function(index) {\n      $scope.node.assets.splice(index, 1);\n      this.nodeForm.$dirty = true;\n    };\n\n    /**\n    * @description Adds a new asset to the local node\n    *\n    * @name NodeController:addAsset\n    * @ngdoc method\n    * @methodOf NodeController\n    */\n    $scope.addAsset = function() {\n      $scope.editAsset($scope.node.addNewAsset(), true);\n    };\n\n    /**\n     * @description Should be called when the meta-data tab is selected\n     *\n     * @name NodeController:onMetadataTabSelect\n     * @ngdoc method\n     * @methodOf NodeController\n     */\n    $scope.onMetadataTabSelect = function() {\n      // Before switching over to the tab, let's delete any entries that reference entities which no longer exist\n      // i.e. in the case that meta-data was associated with an interface, and that interface is now deleted\n      $scope.node.metaData.removeEntriesForMissingScopedEntities();\n    };\n\n    $scope.deleteNode = function(node) {\n      bootbox.confirm('Are you sure you want to delete the current node?', function(ok) {\n      if (ok) {\n        RequisitionsService.startTiming();\n        RequisitionsService.deleteNode(node)\n            .then(function() {\n              $scope.nodeForm.$setPristine(); // Ignore dirty state\n              $scope.goBack();\n              // If node was just created, it has no label yet\n              if (node.nodeLabel) {\n                growl.success('The node ' + _.escape(node.nodeLabel) + ' has been deleted.');\n              } else {\n                growl.success('The node has been deleted.');\n              }\n            },\n            $scope.errorHandler\n        );\n      }\n      });\n    };\n\n    /**\n     * @description Shows the dialog for add/edit an metaData entry\n     *\n     * @name NodeController:editMetaData\n     * @ngdoc method\n     * @methodOf NodeController\n     * @param {object} entry The metaData entry to be edited\n     * @param {boolean} isNew true, if the metaData entry is new\n     */\n    $scope.editMetaData = function(entry, isNew) {\n        const form = this.nodeForm;\n\n      const modalInstance = $uibModal.open({\n            backdrop: 'static',\n            keyboard: false,\n            controller: 'MetaDataController',\n            templateUrl: metaDataView,\n            resolve: {\n                node: function() { return angular.copy($scope.node); },\n                entry: function() { return angular.copy(entry); }\n            }\n        });\n\n        modalInstance.result.then(function(result) {\n            angular.copy(result, entry);\n            form.$dirty = true;\n            if (isNew) {\n              $scope.node.metaData.addEntry(entry);\n            }\n        });\n    };\n\n    /**\n     * @description Removes an metaData entry from the local node\n     *\n     * @name NodeController:removeMetaData\n     * @ngdoc method\n     * @methodOf NodeController\n     * @param {object} entry The index of the metaData entry to be removed\n     */\n    $scope.removeMetaData = function(entry) {\n      $scope.node.metaData.removeEntry(entry);\n      this.nodeForm.$dirty = true;\n    };\n\n    /**\n     * @description Adds a new metaData entry to the local node\n     *\n     * @name NodeController:addMetaData\n     * @ngdoc method\n     * @methodOf NodeController\n     */\n    $scope.addMetaData = function() {\n        $scope.editMetaData(new RequisitionMetaDataEntry(), true);\n    };\n\n    /**\n    * @description Shows a modal dialog for add/edit an interface\n    *\n    * @name NodeController:editInterface\n    * @ngdoc method\n    * @methodOf NodeController\n    * @param {integer} index The index of the interface to be edited\n    * @param {boolean} isNew true, if the interface is new\n    */\n    $scope.editInterface = function(index, isNew) {\n      var form = this.nodeForm;\n      var intfToEdit = $scope.node.interfaces[index];\n      var foreignSource = $scope.foreignSource;\n      var foreignId = $scope.foreignId;\n      var ipBlackList = [];\n      angular.forEach($scope.node.interfaces, function(intf) {\n        ipBlackList.push(intf.ipAddress);\n      });\n\n      var modalInstance = $uibModal.open({\n        backdrop: 'static',\n        keyboard: false,\n        controller: 'InterfaceController',\n        templateUrl: interfaceView,\n        resolve: {\n          foreignId: function() { return foreignId; },\n          foreignSource: function() { return foreignSource; },\n          requisitionInterface: function() { return angular.copy(intfToEdit); },\n          ipBlackList: function() { return ipBlackList; },\n          primaryInterface : function() { return $scope.getPrimaryAddress();}\n        }\n      });\n\n      modalInstance.result.then(function(result) {\n        angular.copy(result, intfToEdit);\n        form.$dirty = true;\n      }, function() {\n        if (isNew) {\n          $scope.node.interfaces.pop();\n        }\n      });\n    };\n\n    /**\n    * @description Removes an interface from the local node\n    *\n    * @name NodeController:removeInterface\n    * @ngdoc method\n    * @methodOf NodeController\n    * @param {integer} index The index of the interface to be removed\n    */\n    $scope.removeInterface = function(index) {\n      $scope.node.interfaces.splice(index, 1);\n      this.nodeForm.$dirty = true;\n    };\n\n    /**\n    * @description Adds a new interface to the local node\n    *\n    * @name NodeController:addInterface\n    * @ngdoc method\n    * @methodOf NodeController\n    */\n    $scope.addInterface = function() {\n      $scope.editInterface($scope.node.addNewInterface(), true);\n    };\n\n    /**\n    * @description Removes a category from the local node\n    *\n    * @name NodeController:removeCategory\n    * @ngdoc method\n    * @methodOf NodeController\n    * @param {integer} index The index of the category to be removed\n    */\n    $scope.removeCategory = function(index) {\n      $scope.node.categories.splice(index, 1);\n      this.nodeForm.$dirty = true;\n    };\n\n    /**\n    * @description Adds a new category to the local node\n    *\n    * @name NodeController:addCategory\n    * @ngdoc method\n    * @methodOf NodeController\n    */\n    $scope.addCategory = function() {\n      $scope.node.addNewCategory();\n      this.nodeForm.$dirty = true;\n    };\n\n    /**\n    * @description Saves the local node on the server\n    *\n    * @name NodeController:save\n    * @ngdoc method\n    * @methodOf NodeController\n    */\n    $scope.save = function() {\n      var form = this.nodeForm;\n      RequisitionsService.startTiming();\n      RequisitionsService.saveNode($scope.node).then(\n        function() { // success\n          growl.success('The node ' + _.escape($scope.node.nodeLabel) + ' has been saved.');\n          $scope.foreignId = $scope.node.foreignId;\n          form.$dirty = false;\n        },\n        $scope.errorHandler\n      );\n    };\n\n    /**\n    * @description Refresh the local node from the server\n    *\n    * @name NodeController:refresh\n    * @ngdoc method\n    * @methodOf NodeController\n    */\n    $scope.refresh = function() {\n      growl.success('Retrieving node ' + _.escape($scope.foreignId) + ' from requisition ' + _.escape($scope.foreignSource) + '...');\n      RequisitionsService.getNode($scope.foreignSource, $scope.foreignId).then(\n        function(node) { // success\n          $scope.node = node;\n        },\n        $scope.errorHandler\n      );\n    };\n\n    /**\n    * @description Get the unused available categories\n    *\n    * @name NodeController:getAvailableCategories\n    * @ngdoc method\n    * @methodOf NodeController\n    * @returns {array} the unused available categories\n    */\n    $scope.getAvailableCategories = function() {\n      var categories = [];\n      angular.forEach($scope.availableCategories, function(category) {\n        var found = false;\n        angular.forEach($scope.node.categories, function(c) {\n          if (c.name === category) {\n            found = true;\n          }\n        });\n        if (!found) {\n          categories.push(category);\n        }\n      });\n      return categories;\n    };\n\n    /**\n    * @description Gets the primary IP address\n    *\n    * @name NodeController:getPrimaryAddress\n    * @ngdoc method\n    * @methodOf NodeController\n    * @returns {string} the primary IP address or 'N/A' if it doesn't exist.\n    */\n    $scope.getPrimaryAddress = function() {\n      const ip = $scope.node.getPrimaryIpAddress();\n      return ip ? ip : null;\n    };\n\n    // Initialization of the node's page for either adding a new node or editing an existing node\n\n    if ($scope.isNew) {\n      $scope.node = new RequisitionNode($scope.foreignSource, {});\n    } else {\n      $scope.refresh();\n    }\n\n    // Initialize categories\n    RequisitionsService.getAvailableCategories().then(\n      function(categories) { // success\n        $scope.availableCategories = categories;\n      },\n      $scope.errorHandler\n    );\n\n    // Initialize locations\n    RequisitionsService.getAvailableLocations().then(\n      function(locations) { // success\n        $scope.availableLocations = locations;\n      },\n      $scope.errorHandler\n    );\n\n    // Initialize foreign-id black list (thanks to the cache, this call is not expensive)\n    // TODO: What if the cache is disabled ?\n    RequisitionsService.getRequisition($scope.foreignSource).then(\n      function(requisition) {\n        angular.forEach(requisition.nodes, function(node) {\n          $scope.foreignIdBlackList.push(node.foreignId);\n        });\n      },\n      $scope.errorHandler\n    );\n\n  }]);\n\n}());\n","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/asset.html';\nvar html = \"<div> <div class=modal-header> <h3 class=modal-title>Asset Field</h3> </div> <div class=modal-body> <form name=assetForm> <div class=form-group> <div class=form-group> <label class=col-form-label for=name>Name</label> <input class=form-control type=text id=asset-name name=name placeholder=\\\"Asset Name (choose one from the list)\\\" ng-model=asset.name typeahead-min-length=0 uib-typeahead=\\\"asset for asset in getAvailableAssetFields() | filter:$viewValue\\\" typeahead-editable=false required ng-class=\\\"{ 'is-invalid' : assetForm.name.$invalid }\\\"> <p ng-show=assetForm.name.$invalid class=invalid-feedback>A valid asset field name is required.</p> </div> <div class=form-group> <label class=col-form-label for=value>Value</label> <input class=form-control type=text id=asset-value name=value placeholder=\\\"Asset Value\\\" ng-model=asset.value required ng-class=\\\"{ 'is-invalid' : assetForm.value.$invalid }\\\"> <p ng-show=assetForm.value.$invalid class=invalid-feedback>A non empty value is required.</p> </div> </div> </form> </div> <div class=modal-footer> <button type=button class=\\\"btn btn-primary\\\" id=save-asset ng-click=save() ng-disabled=assetForm.$invalid>Save</button> <button type=button class=\\\"btn btn-secondary\\\" id=cancel-asset ng-click=cancel()>Cancel</button> </div> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/metadata.html';\nvar html = \"<div> <div class=modal-header> <h3 class=modal-title>Meta-Data Entry</h3> </div> <div class=modal-body> <form name=metaDataForm> <div class=form-group> <div class=form-group> <label class=control-label for=metadata-context>Scope</label> <select class=form-control id=metadata-context ng-model=entry.scope required> <option ng-repeat=\\\"(scope, displayString) in availableScopes\\\" value=\\\"{{ scope }}\\\">{{ displayString }}</option> </select> </div> <div ng-if=\\\"entry.scope == 'interface'\\\"> <div class=form-group> <label class=control-label for=metadata-interface>Interface</label> <select class=form-control id=metadata-interface ng-model=entry.interface_idx required> <option ng-repeat=\\\"iff in node.interfaces\\\" value=\\\"{{ $index }}\\\">{{ iff.ipAddress }}</option> </select> </div> </div> <div ng-if=\\\"entry.scope == 'service'\\\"> <div> <label class=control-label for=metadata-service-interface>Interface</label> <select class=form-control id=metadata-service-interface ng-model=entry.interface_idx required> <option ng-repeat=\\\"iff in interfacesWithServices\\\" value=\\\"{{ $index }}\\\">{{ iff.ipAddress }}</option> </select> </div> <div class=form-group> <label class=control-label for=metadata-service-service>Service</label> <select class=form-control id=metadata-service-service ng-model=entry.service_idx required> <option ng-repeat=\\\"svc in interfacesWithServices[entry.interface_idx].services\\\" value=\\\"{{ $index }}\\\">{{ svc.name }}</option> </select> </div> </div> <div class=form-group ng-class=\\\"{ 'has-error' : metaDataForm.value.$invalid }\\\"> <label class=control-label for=metadata-key>Key</label> <input class=form-control type=text id=metadata-key name=key placeholder=Key ng-model=entry.key required valid-meta-data-key=entry /> <p ng-show=metaDataForm.key.$invalid class=help-block>A unique key is required.</p> </div> <div class=form-group ng-class=\\\"{ 'has-error' : metaDataForm.value.$invalid }\\\"> <label class=control-label for=metadata-value>Value</label> <input class=form-control type=text id=metadata-value name=value placeholder=Value ng-model=entry.value required/> <p ng-show=metaDataForm.value.$invalid class=help-block>A non empty value is required.</p> </div> </div> </form> </div> <div class=modal-footer> <button type=button class=\\\"btn btn-primary\\\" id=save-metadata ng-click=save() ng-disabled=metaDataForm.$invalid>Save</button> <button type=button class=\\\"btn btn-default\\\" id=cancel-metadata ng-click=cancel()>Cancel</button> </div> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/interface.html';\nvar html = \"<div> <div class=modal-header> <h3 class=modal-title>Interface</h3> </div> <div class=modal-body> <form name=intfForm> <div class=form-group> <label class=col-form-label for=ipAddress>IP Address</label> <input class=form-control type=text id=ipAddress name=ipAddress placeholder=\\\"A valid IPv4 or IPv6 address\\\" ng-model=requisitionInterface.ipAddress required valid-ip-address ng-class=\\\"{ 'is-invalid' : intfForm.ipAddress.$invalid }\\\"> <p ng-show=intfForm.ipAddress.$invalid class=invalid-feedback>A valid IPv4 or IPv6 address is required, and must be unique within the node.</p> </div> <div class=form-group> <label class=col-form-label for=descr>Description</label> <input class=form-control type=text id=descr name=descr placeholder=\\\"Description [optional]\\\" ng-model=requisitionInterface.description> </div> <div class=form-group> <label class=col-form-label for=snmpPrimary>SNMP Primary</label> <input class=form-control type=text id=snmpPrimary name=snmpPrimary placeholder=\\\"SNMP Primary Flag (choose one from the list)\\\" ng-model=requisitionInterface.snmpPrimary typeahead-editable=false typeahead-min-length=0 uib-typeahead=\\\"a.id as a.title for a in getSnmpPrimaryValues(requisitionInterface.ipAddress) | filter:$viewValue\\\" required ng-class=\\\"{ 'is-invalid' : intfForm.snmpPrimary.$invalid }\\\"> <p ng-show=intfForm.snmpPrimary.$invalid class=invalid-feedback>A valid SNMP Primary Flag is required, only one primary interface is allowed within the node.</p> </div> <label ng-show=\\\"requisitionInterface.services.length > 0\\\">Services</label> <ng-form name=serviceForm ng-repeat=\\\"service in requisitionInterface.services\\\"> <div class=form-group> <div class=input-group> <div class=input-group-prepend> <div class=input-group-text> <i class=\\\"fa fa-pencil\\\"></i> </div> </div> <input class=form-control type=text name=serviceName placeholder=\\\"Service Name (choose one from the list or type a custom text for a new one)\\\" ng-model=service.name typeahead-editable=true typeahead-min-length=0 uib-typeahead=\\\"service for service in getAvailableServices() | filter:$viewValue | orderBy:'toString()'\\\" required valid-service ng-class=\\\"{ 'is-invalid' : serviceForm.serviceName.$invalid }\\\"> <span class=input-group-append> <button class=\\\"btn btn-secondary\\\" type=button ng-click=removeService($index)> <i class=\\\"fa fa-trash\\\"></i> </button> </span> <p ng-show=serviceForm.serviceName.$invalid class=invalid-feedback>Service name is required and should be unique on the interface.</p> </div> </div> </ng-form> </form> </div> <div class=modal-footer> <button type=button class=\\\"btn btn-secondary\\\" id=add-service ng-click=addService() ng-disabled=intfForm.$invalid>Add Service</button> <button type=button class=\\\"btn btn-primary\\\" id=save-interface ng-click=save() ng-disabled=intfForm.$invalid>Save</button> <button type=button class=\\\"btn btn-secondary\\\" id=cancel-interface ng-click=cancel()>Cancel</button> </div> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/node-basic.html';\nvar html = \"<div> <br/> <div class=form-group> <label class=col-form-label for=foreignId>Foreign ID</label> <div class=input-group> <input class=form-control type=text id=foreignId name=foreignId placeholder=\\\"Foreign ID (must be unique within the requisition)\\\" ng-model=node.foreignId ng-disabled=!isNew required valid-foreign-id ng-class=\\\"{ 'is-invalid' : nodeForm.foreignId.$invalid }\\\"> <div class=input-group-append> <button class=\\\"btn btn-secondary\\\" type=button ng-click=generateForeignId(nodeForm.foreignId) ng-disabled=!isNew><span class=\\\"fa fa-tag\\\"/> Auto-generate</button> </div> <p ng-show=nodeForm.foreignId.$invalid class=invalid-feedback>Foreign ID is required and must be unique within the requisition, and it cannot contain, :, /, \\\\, ?, &amp;, *, ', \\\"</p> </div> </div> <div class=form-group> <label class=col-form-label for=nodeLabel>Node Label</label> <input class=form-control type=text id=nodeLabel name=nodeLabel placeholder=\\\"Node Label\\\" ng-model=node.nodeLabel required ng-class=\\\"{ 'is-invalid' : nodeForm.nodeLabel.$invalid }\\\"> <p ng-show=nodeForm.nodeLabel.$invalid class=invalid-feedback>Node Label is required.</p> </div> <div class=form-group> <label class=col-form-label for=nodeLabel>Minion Location</label> <input class=form-control type=text id=location name=location placeholder=\\\"Location [optional]\\\" ng-model=node.location ng-disabled=\\\"availableLocations.length == 0\\\" typeahead-min-length=0 typeahead-editable=false uib-typeahead=\\\"location for location in availableLocations\\\" typeahead-on-select=nodeForm.$setDirty();> <p ng-show=\\\"availableLocations.length == 0\\\" class=\\\"form-text text-muted\\\">There are no locations available. (Set to Location \\\"Default\\\")</p> </div> <div class=form-group> <label class=col-form-label for=building>Building</label> <input class=form-control type=text id=building name=building placeholder=\\\"Building [optional]\\\" ng-model=node.building /> </div> <div class=form-group> <label class=col-form-label for=city>City</label> <input class=form-control type=text id=city name=city placeholder=\\\"City [optional]\\\" ng-model=node.city /> </div> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/node-pathoutages.html';\nvar html = \"<div> <br/> <div class=form-group> <label class=col-form-label for=parentForeignSource>Parent Foreign Source</label> <input class=form-control type=text id=parentForeignSource name=parentForeignSource placeholder=\\\"Parent Foreign Source (leave it blank to use the current requisition)\\\" ng-model=node.parentForeignSource /> </div> <div class=form-group ng-show=\\\"node.parentNodeLabel == null || node.parentNodeLabel == ''\\\"> <label class=col-form-label for=parentForeignId>Parent Foreign ID</label> <input class=form-control type=text id=parentForeignId name=parentForeignId placeholder=\\\"Parent Foreign ID (use either this or Parent Node Label)\\\" ng-model=node.parentForeignId /> </div> <div class=form-group ng-show=\\\"node.parentForeignId == null || node.parentForeignId == ''\\\"> <label class=col-form-label for=parentNodeLabel>Parent Node Label</label> <input class=form-control type=text id=parentNodeLabel name=parentNodeLabel placeholder=\\\"Parent Node Label (use either this or Parent Foreign ID)\\\" ng-model=node.parentNodeLabel /> </div> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/node-interfaces.html';\nvar html = \"<div> <div class=row> <div class=col> <div class=\\\"mt-4 pull-right\\\"> <button type=button class=\\\"btn btn-secondary btn-sm\\\" id=add-interface ng-click=addInterface()> <span class=\\\"fa fa-plus\\\"/> Add Interface </button> </div> </div> </div> <p/> <div class=table-responsive> <table class=\\\"table table-striped table-sm\\\"> <thead> <tr> <th>IP Address</th> <th>Description</th> <th>SNMP Primary</th> <th>Services</th> <th><span class=pull-right>Actions</span></th> </tr> </thead> <tbody> <tr ng-repeat=\\\"intf in node.interfaces\\\"> <td>{{ intf.ipAddress }}</td> <td>{{ intf.description || 'N/A' }}</td> <td>{{ intf.snmpPrimary }}</td> <td> <div ng-hide=\\\"intf.services.length > 0\\\">[No services]</div> <div ng-repeat=\\\"service in intf.services\\\"> <p>{{ service.name }}</p> </div> </td> <td> <div class=pull-right> <button type=button class=\\\"btn btn-secondary btn-sm\\\" uib-tooltip=\\\"Edit the interface\\\" ng-click=editInterface($index)> <span class=\\\"fa fa-pencil\\\"/> </button> <button type=button class=\\\"btn btn-secondary btn-sm\\\" uib-tooltip=\\\"Remove the interface\\\" ng-click=removeInterface($index)> <span class=\\\"fa fa-trash\\\"/> </button> </div> </td> </tr> </tbody> </table> </div> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/node-assets.html';\nvar html = \"<div> <div class=row> <div class=col> <div class=\\\"mt-4 pull-right\\\"> <button type=button class=\\\"btn btn-secondary btn-sm\\\" id=add-asset ng-click=addAsset()> <span class=\\\"fa fa-plus\\\"/> Add Asset </button> </div> </div> </div> <p/> <div class=table-responsive> <table class=\\\"table table-striped table-sm\\\"> <thead> <tr> <th>Name</th> <th>Value</th> <th><span class=pull-right>Actions</span></th> </tr> </thead> <tbody> <tr ng-repeat=\\\"asset in node.assets\\\"> <td>{{asset.name}}</td> <td>{{asset.value}}</td> <td> <span class=pull-right> <button type=button class=\\\"btn btn-secondary btn-sm\\\" uib-tooltip=\\\"Edit the asset\\\" ng-click=editAsset($index)> <span class=\\\"fa fa-pencil\\\"/> </button> <button type=button class=\\\"btn btn-secondary btn-sm\\\" uib-tooltip=\\\"Remove the asset\\\" ng-click=removeAsset($index)> <span class=\\\"fa fa-trash\\\"/> </button> </span> </td> </tr> </tbody> </table> </div> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/node-metadata.html';\nvar html = \"<div> <div class=row> <div class=col> <div class=\\\"mt-4 pull-right\\\"> <button type=button class=\\\"btn btn-secondary btn-sm\\\" id=add-metadata ng-click=addMetaData()> <span class=\\\"fa fa-plus\\\"/> Add Meta-Data </button> </div> </div> </div> <p/> <div class=table-responsive> <table class=\\\"table table-striped table-sm\\\"> <thead> <tr> <th>Scope</th> <th>Interface</th> <th>Service</th> <th>Key</th> <th>Value</th> <th><span class=pull-right>Actions</span></th> </tr> </thead> <tbody> <tr ng-repeat=\\\"entry in node.metaData.requisition | orderBy:['scope','scoped_interface','scoped_service','key']\\\"> <td>{{ entry.displayScope() }}</td> <td ng-if=\\\"entry.displayInterface() != null\\\">{{ entry.displayInterface() }}</td> <td ng-if=\\\"entry.displayInterface() == null\\\" class=text-muted>*</td> <td ng-if=\\\"entry.displayService() != null\\\">{{ entry.displayService() }}</td> <td ng-if=\\\"entry.displayService() == null\\\" class=text-muted>*</td> <td>{{ entry.key }}</td> <td>{{ entry.value }}</td> <td> <span class=pull-right> <button type=button class=\\\"btn btn-secondary btn-sm\\\" uib-tooltip=\\\"Edit the meta-data entry\\\" ng-click=editMetaData(entry)> <span class=\\\"fa fa-pencil\\\"/> </button> <button type=button class=\\\"btn btn-secondary btn-sm\\\" uib-tooltip=\\\"Remove the meta-data entry\\\" ng-click=removeMetaData(entry)> <span class=\\\"fa fa-trash\\\"/> </button> </span> </td> </tr> </tbody> </table> </div> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/node-categories.html';\nvar html = \"<div> <div class=row> <div class=col> <div class=\\\"pull-right mt-4\\\"> <button type=button class=\\\"btn btn-secondary btn-sm\\\" id=add-category ng-click=addCategory()> <span class=\\\"fa fa-plus\\\"/> Add Category </button> </div> </div> </div> <p/> <ng-form name=categoryForm ng-repeat=\\\"category in node.categories\\\"> <div class=form-group> <div class=input-group> <div class=input-group-prepend> <div class=input-group-text> <i class=\\\"fa fa-pencil\\\"></i> </div> </div> <input class=form-control type=text name=categoryName placeholder=\\\"Category Name (choose one from the list or type a custom text for a new one)\\\" ng-model=category.name typeahead-min-length=0 typeahead-editable=true uib-typeahead=\\\"category for category in getAvailableCategories() | filter:$viewValue | orderBy:'toString()'\\\" required valid-category=category ng-class=\\\"{ 'is-invalid' : categoryForm.categoryName.$invalid }\\\"> <div class=input-group-append> <button type=button class=\\\"btn btn-secondary\\\" ng-click=removeCategory($index)> <span class=\\\"fa fa-trash\\\"></span> </button> </div> <p ng-show=categoryForm.categoryName.$invalid class=invalid-feedback>Category name is required and should be unique on the node.</p> </div> </div> </ng-form> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","require('../services/Requisitions');\n\n/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\n(function() {\n\n  'use strict';\n\n  const policyParamOptionsView = require('../../views/policy-param.options.html');\n  const policyParamStringView = require('../../views/policy-param.string.html');\n  const policyParamFixedView = require('../../views/policy-param.fixed.html');\n  const policyParamEditableView = require('../../views/policy-param.editable.html');\n\n  angular.module('onms-requisitions')\n\n  /**\n  * @ngdoc controller\n  * @name PolicyController\n  * @module onms-requisitions\n  *\n  * @requires $scope Angular local scope\n  * @requires $uibModalInstance Angular UI modal instance\n  * @requires RequisitionsService The Requisitions Servive\n  * @requires policy Requisition policy object\n  *\n  * @description The controller for manage the modal dialog for add/edit requisition policies\n  */\n  .controller('PolicyController', ['$scope', '$uibModalInstance', 'RequisitionsService', 'policy', function($scope, $uibModalInstance, RequisitionsService, policy) {\n\n    /**\n    * @description The policy object\n    *\n    * @ngdoc property\n    * @name PolicyController#policy\n    * @propertyOf PolicyController\n    * @returns {object} The policy object\n    */\n    $scope.policy = policy;\n\n    /**\n    * @description The available policies array\n    *\n    * @ngdoc property\n    * @name PolicyController#availablePolicies\n    * @propertyOf PolicyController\n    * @returns {array} The policy list\n    */\n    $scope.availablePolicies = [];\n\n    /**\n    * @description The optional parameters array\n    *\n    * @ngdoc property\n    * @name PolicyController#optionalParameters\n    * @propertyOf PolicyController\n    * @returns {array} The optional parameters list\n    */\n    $scope.optionalParameters = [];\n\n    /**\n    * @description Saves the current policy\n    *\n    * @name PolicyController:save\n    * @ngdoc method\n    * @methodOf PolicyController\n    */\n    $scope.save = function () {\n      $uibModalInstance.close($scope.policy);\n    };\n\n    /**\n    * @description Cancels the current operation\n    *\n    * @name PolicyController:cancel\n    * @ngdoc method\n    * @methodOf PolicyController\n    */\n    $scope.cancel = function () {\n      $uibModalInstance.dismiss('cancel');\n    };\n\n    /**\n    * @description Adds a new empty parameter to the current policy\n    *\n    * @name PolicyController:addParameter\n    * @ngdoc method\n    * @methodOf PolicyController\n    */\n    $scope.addParameter = function() {\n      $scope.policy.parameter.push({ 'key': '', 'value': '' });\n    };\n\n    /**\n    * @description Removes a parameter from the current policy\n    *\n    * @name PolicyController:removeParameter\n    * @ngdoc method\n    * @methodOf PolicyController\n    * @param {integer} index The index of the parameter to remove\n    */\n    $scope.removeParameter = function(index) {\n      $scope.policy.parameter.splice(index, 1);\n    };\n\n    /**\n    * @description Update policy parameters after changing the policy class.\n    *\n    * @name PolicyController:updatePolicyParameters\n    * @ngdoc method\n    * @methodOf PolicyController\n    * @param {object} policyConfig the configuration of the selected policy\n    */\n    $scope.updatePolicyParameters = function(policyConfig) {\n      if (!policyConfig) {\n        return;\n      }\n      $scope.policy.parameter = [];\n      angular.forEach($scope.availablePolicies, function(policy) {\n        if (policy.class === policyConfig.class) {\n          angular.forEach(policyConfig.parameters, function(param) {\n            if (param.required) {\n              $scope.policy.parameter.push({ 'key': param.key, 'value': null });\n            }\n          });\n        }\n      });\n    };\n\n    /**\n    * @description Checks if an object is a non empty array\n    *\n    * @private\n    * @name PolicyController:updatePolicyParameters\n    * @ngdoc method\n    * @methodOf PolicyController\n    * @param {object} myArray the object to check\n    * @returns {boolean} true, if the object is a non empty array\n    */\n    $scope.isNonEmptyArray = function(myArray) {\n      return myArray.constructor.toString().indexOf('Array') > -1 && myArray.length > 0;\n    };\n\n    /**\n    * @description Analyzes the local scope of the directive to select the proper HTML template and populate the parameter options.\n    *\n    * This method expects to obtain the class of the parent policy through the parent scope (that's why the directive should be managed by PolicyController)\n    * @name PolicyController:getTemplate\n    * @ngdoc method\n    * @methodOf PolicyController\n    * @param {object} scope The directive scope object\n    * @returns {string} The HTML template\n    */\n    $scope.getTemplate = function(parameter) {\n      var selectedPolicyClass = $scope.policy.class;\n      $scope.optionalParameters = [];\n\n      for (var i=0; i<$scope.availablePolicies.length; i++) {\n        if ($scope.availablePolicies[i].class === selectedPolicyClass) {\n          for (var j=0; j<$scope.availablePolicies[i].parameters.length; j++) {\n            var paramCfg = $scope.availablePolicies[i].parameters[j];\n            if (paramCfg.key === parameter.key) { // Checking current parameter\n              if (paramCfg.required) {\n                if ($scope.isNonEmptyArray(paramCfg.options)) {\n                  return policyParamOptionsView;\n                }\n                return policyParamStringView;\n              }\n            }\n            if (!paramCfg.required) {\n              $scope.optionalParameters.push(paramCfg.key);\n            }\n          }\n        }\n      }\n\n      return parameter.key ? policyParamFixedView : policyParamEditableView;\n    };\n\n    /**\n    * @description Gets the options for a particular parameter\n    *\n    * @name PolicyController:getParameterOptions\n    * @ngdoc method\n    * @methodOf PolicyController\n    * @param {string} parameterKey The parameter key\n    * @returns {array} The parameter options list\n    */\n    $scope.getParameterOptions = function(parameterKey) {\n      for (var i=0; i<$scope.availablePolicies.length; i++) {\n        if ($scope.availablePolicies[i].class === $scope.policy.class) {\n          for (var j=0; j<$scope.availablePolicies[i].parameters.length; j++) {\n            var paramCfg = $scope.availablePolicies[i].parameters[j];\n            if (paramCfg.key === parameterKey) { // Checking current parameter\n              return paramCfg.options;\n            }\n          }\n        }\n      }\n      return [];\n    };\n\n    /**\n    * @description Gets the optional parameters.\n    *\n    * @name PolicyController:getOptionalParameters\n    * @ngdoc method\n    * @methodOf PolicyController\n    * @returns {array} The optional parameters list\n    */\n    $scope.getOptionalParameters = function() {\n      var params = [];\n      angular.forEach($scope.optionalParameters, function(availParam) {\n        var found = false;\n        angular.forEach($scope.policy.parameter, function(param) {\n          if (param.key === availParam) {\n            found = true;\n          }\n        });\n        if (!found) {\n          params.push(availParam);\n        }\n      });\n      return params;\n    };\n\n    // Initialization\n\n    RequisitionsService.getAvailablePolicies().then(function(policies) {\n      $scope.availablePolicies = policies;\n      angular.forEach(policies, function(policy) {\n        if (policy.class === $scope.policy.class) {\n          var orderedParams = [];\n          for (var i=0; i<policy.parameters.length; i++) {\n            var pkey = policy.parameters[i].key;\n            for (var j=0; j<$scope.policy.parameter.length; j++) {\n              var p = $scope.policy.parameter[j];\n              if (p.key === pkey) {\n                orderedParams.push(p);\n              }\n            }\n          }\n          $scope.policy.parameter = orderedParams;\n        }\n      });\n    });\n\n  }]);\n\n}());\n","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/policy-param.options.html';\nvar html = \"<div> <div class=form-group> <label class=col-form-label>{{ parameter.key }}</label> <input required class=form-control type=text name=paramValue placeholder=\\\"Select an option for {{ parameter.key }} (hit space bar to see the options and choose one)\\\" ng-model=parameter.value typeahead-min-length=0 typeahead-editable=false uib-typeahead=\\\"param for param in getParameterOptions(parameter.key) | filter:$viewValue\\\" ng-class=\\\"{ 'is-invalid' : paramForm.paramValue.$invalid }\\\"> <p ng-show=paramForm.paramValue.$invalid class=invalid-feedback>Parameter value is required.</p> </div> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/policy-param.string.html';\nvar html = \"<div> <div class=form-group> <label class=col-form-label>{{ parameter.key }}</label> <input class=form-control type=text name=paramValue placeholder=\\\"Parameter Value\\\" ng-model=parameter.value required ng-class=\\\"{ 'is-invalid' : paramForm.paramValue.$invalid }\\\"> <p ng-show=paramForm.paramValue.$invalid class=invalid-feedback>Parameter value is required.</p> </div> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/policy-param.fixed.html';\nvar html = \"<div> <div class=form-group> <label class=col-form-label>{{ parameter.key }}</label> <div class=input-group> <input class=form-control type=text name=paramValue placeholder=\\\"Parameter Value\\\" ng-model=parameter.value required ng-class=\\\"{ 'is-invalid' : paramForm.paramValue.$invalid }\\\"> <span class=input-group-append> <button type=button class=\\\"btn btn-secondary\\\" ng-click=removeParameter($index)> <span class=\\\"fa fa-trash\\\"></span> </button> </span> <p ng-show=paramForm.paramValue.$invalid class=invalid-feedback>Parameter value is required.</p> </div> </div> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/policy-param.editable.html';\nvar html = \"<div> <div class=form-group> <input required class=form-control type=text name=paramName placeholder=\\\"Parameter Name (hit space bar to see the options, and choose one)\\\" ng-model=parameter.key typeahead-min-length=0 typeahead-editable=false uib-typeahead=\\\"param for param in getOptionalParameters() | filter:$viewValue\\\" ng-class=\\\"{ 'is-invalid' : paramForm.paramName.$invalid }\\\"> <p ng-show=paramForm.paramName.$invalid class=invalid-feedback>Parameter name is required.</p> </div> <div class=form-group> <div class=input-group> <input class=form-control type=text name=paramValue placeholder=\\\"Parameter Value\\\" ng-model=parameter.value required ng-class=\\\"{ 'is-invalid' : paramForm.paramValue.$invalid }\\\"> <span class=input-group-append> <button type=button class=\\\"btn btn-secondary\\\" ng-click=removeParameter($index)> <span class=\\\"fa fa-trash\\\"></span> </button> </span> <p ng-show=paramForm.paramValue.$invalid class=invalid-feedback>Parameter value is required.</p> </div> </div> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","require('../services/Requisitions');\n\nimport Util from 'lib/util';\nconst QuickNode = require('../model/QuickNode');\n\n/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\n(function() {\n\n  'use strict';\n\n  const quickAddPanelBasicView = require('../../views/quick-add-panel-basic.html');\n  const quickAddPanelSnmpView = require('../../views/quick-add-panel-snmp.html');\n  const quickAddPanelCategoriesView = require('../../views/quick-add-panel-categories.html');\n  const quickAddPanelCliView = require('../../views/quick-add-panel-cli.html');\n  const quickAddPanelHelpView = require('../../views/quick-add-panel-help.html');\n\n  angular.module('onms-requisitions')\n\n  /**\n  * @ngdoc controller\n  * @name QuickAddNodeController\n  * @module onms-requisitions\n  *\n  * @requires $scope Angular local scope\n  * @requires foreignSources The list of available requisitions (a.k.a. foreign source)\n  * @requires RequisitionsService The requisitions service\n  * @requires growl The growl plugin for instant notifications\n  *\n  * @description The controller for manage the modal dialog for quick add a node to an existing requisition.\n  */\n  .controller('QuickAddNodeController', ['$scope', 'foreignSources', 'RequisitionsService', 'growl', '$sanitize', function($scope, foreignSources, RequisitionsService, growl, $sanitize) {\n    $scope.quickAddPanelBasicView = quickAddPanelBasicView;\n    $scope.quickAddPanelSnmpView = quickAddPanelSnmpView;\n    $scope.quickAddPanelCategoriesView = quickAddPanelCategoriesView;\n    $scope.quickAddPanelCliView = quickAddPanelCliView;\n    $scope.quickAddPanelHelpView = quickAddPanelHelpView;\n\n    /**\n    * @description The available foreign sources\n    *\n    * @ngdoc property\n    * @name QuickAddNodeController#foreignSources\n    * @propertyOf QuickAddNodeController\n    * @returns {array} List of available foreign sources\n    */\n    $scope.foreignSources = [];\n\n    /**\n    * @description The available configured categories\n    *\n    * @ngdoc property\n    * @name QuickAddNodeController#availableCategories\n    * @propertyOf QuickAddNodeController\n    * @returns {array} The categories\n    */\n    $scope.availableCategories = [];\n\n    /**\n    * @description The available access methods\n    *\n    * @ngdoc property\n    * @name QuickAddNodeController#availableAccessMethods\n    * @propertyOf QuickAddNodeController\n    * @returns {array} The access methods\n    */\n    $scope.availableAccessMethods = [ 'RSH', 'SSH', 'Telnet' ];\n\n    /**\n    * @description The saving flag (true when the node is being saved)\n    *\n    * @ngdoc property\n    * @name QuickAddNodeController#isSaving\n    * @propertyOf QuickAddNodeController\n    * @returns {boolean} true when the node is being saved\n    */\n    $scope.isSaving = false;\n\n    /**\n    * @description The source object that contains all the required information for the new node\n    *\n    * @ngdoc property\n    * @name QuickAddNodeController#node\n    * @propertyOf QuickAddNodeController\n    * @returns {object} The source object\n    */\n    $scope.node = new QuickNode();\n\n    /**\n    * @description Generates a foreign Id\n    *\n    * @name QuickAddNodeController:generateForeignId\n    * @ngdoc method\n    * @methodOf QuickAddNodeController\n    * @param {object} the form object associated with the foreignId\n    */\n    $scope.generateForeignId = function(formObj) {\n      $scope.node.foreignId = String(new Date().getTime());\n      formObj.$invalid = false;\n    };\n\n    /**\n    * @description Provision the current node\n    *\n    * @name QuickAddNodeController:provision\n    * @ngdoc method\n    * @methodOf QuickAddNodeController\n    */\n    $scope.provision = function() {\n      $scope.isSaving = true;\n      growl.info('The node ' + _.escape($scope.node.nodeLabel) + ' is being added to requisition ' + _.escape($scope.node.foreignSource) + '. Please wait...');\n      var successMessage = 'The node ' + _.escape($scope.node.nodeLabel) + ' has been added to requisition ' + _.escape($scope.node.foreignSource);\n      RequisitionsService.quickAddNode($scope.node).then(\n        function() { // success\n          $scope.reset();\n          bootbox.dialog({\n            message: successMessage,\n            title: 'Success',\n            buttons: {\n              main: {\n                label: 'Ok',\n                className: 'btn-secondary'\n              }\n            }\n          });\n        },\n        $scope.errorHandler\n      );\n    };\n\n    /**\n    * @description Resets the current node\n    *\n    * @name QuickAddNodeController:reset\n    * @ngdoc method\n    * @methodOf QuickAddNodeController\n    */\n    $scope.reset = function() {\n      $scope.node = new QuickNode(); // Resetting the object.\n      $scope.isSaving = false;\n    };\n\n   /**\n    * @description Get the unused available categories\n    *\n    * @name QuickAddNodeController:getAvailableCategories\n    * @ngdoc method\n    * @methodOf QuickAddNodeController\n    * @returns {array} the unused available categories\n    */\n    $scope.getAvailableCategories = function() {\n      var categories = [];\n      angular.forEach($scope.availableCategories, function(category) {\n        var found = false;\n        angular.forEach($scope.node.categories, function(c) {\n          if (c.name === category) {\n            found = true;\n          }\n        });\n        if (!found) {\n          categories.push(category);\n        }\n      });\n      return categories;\n    };\n\n    /**\n    * @description Removes a category from the local node\n    *\n    * @name QuickAddNodeController:removeCategory\n    * @ngdoc method\n    * @methodOf QuickAddNodeController\n    * @param {integer} index The index of the category to be removed\n    */\n    $scope.removeCategory = function(index) {\n      $scope.node.categories.splice(index, 1);\n      this.quickAddNodeForm.$dirty = true;\n    };\n\n    /**\n    * @description Adds a new category to the local node\n    *\n    * @name QuickAddNodeController:addCategory\n    * @ngdoc method\n    * @methodOf QuickAddNodeController\n    */\n    $scope.addCategory = function() {\n      $scope.node.addNewCategory();\n      this.quickAddNodeForm.$dirty = true;\n    };\n\n    /**\n    * @description Checks if the form is valid or not\n    *\n    * @name QuickAddNodeController:isInvalid\n    * @ngdoc method\n    * @methodOf QuickAddNodeController\n    * @returns {boolean} true if the form is invalid.\n    */\n    $scope.isInvalid = function() {\n      if (!this.quickAddNodeForm ||\n        !this.quickAddNodeForm.foreignSource ||\n        !this.quickAddNodeForm.ipAddress ||\n        !this.quickAddNodeForm.nodeLabel) {\n        return true;\n      }\n      return this.quickAddNodeForm.foreignSource.$invalid ||\n        this.quickAddNodeForm.ipAddress.$invalid ||\n        this.quickAddNodeForm.nodeLabel.$invalid;\n    };\n\n    /**\n    * @description Shows an error to the user\n    *\n    * @name QuickAddNodeController:errorHandler\n    * @ngdoc method\n    * @methodOf QuickAddNodeController\n    * @param {string} message The error message\n    */\n    $scope.errorHandler = function(message) {\n      growl.error(message, {ttl: 10000});\n    };\n\n    /**\n    * @description Adds a new requisition\n    *\n    * @name QuickAddNodeController:addRequisition\n    * @ngdoc method\n    * @methodOf QuickAddNodeController\n    */\n    $scope.addRequisition = function() {\n      bootbox.prompt('A requisition is required, please enter the name for a new requisition', function(foreignSource) {\n        if (foreignSource) {\n          RequisitionsService.addRequisition(foreignSource).then(\n            function() { // success\n              RequisitionsService.synchronizeRequisition(foreignSource, false).then(\n                function() {\n                  growl.success('The requisition ' + _.escape(foreignSource) + ' has been created and synchronized.');\n                  $scope.foreignSources.push(foreignSource);\n                },\n                $scope.errorHandler\n              );\n            },\n            $scope.errorHandler\n          );\n        } else {\n          window.location.href = Util.getBaseHref() + 'admin/opennms/index.jsp'; // TODO Is this the best way ?\n        }\n      });\n    };\n\n    // Initialize categories\n    RequisitionsService.getAvailableCategories().then(\n      function(categories) { // success\n        $scope.availableCategories = categories;\n      },\n      $scope.errorHandler\n    );\n\n    // Initialize requisitions\n    if (!foreignSources) {\n      RequisitionsService.getRequisitionNames().then(\n        function(requisitions) { // success\n          $scope.foreignSources = requisitions;\n          // If there is NO requisitions, the user has to create a new one\n          if ($scope.foreignSources.length === 0) {\n            $scope.addRequisition();\n          }\n        },\n        $scope.errorHandler\n      );\n    } else {\n      $scope.foreignSources = foreignSources;\n    }\n\n  }]);\n\n}());\n","require('../services/Requisitions');\n\n/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\n(function() {\n\n  'use strict';\n\n  const quickAddPanelBasicView = require('../../views/quick-add-panel-basic.html');\n  const quickAddPanelSnmpView = require('../../views/quick-add-panel-snmp.html');\n  const quickAddPanelCategoriesView = require('../../views/quick-add-panel-categories.html');\n  const quickAddPanelCliView = require('../../views/quick-add-panel-cli.html');\n  const quickAddPanelHelpView = require('../../views/quick-add-panel-help.html');\n\n  angular.module('onms-requisitions')\n\n  /**\n  * @ngdoc controller\n  * @name QuickAddNodeModalController\n  * @module onms-requisitions\n  *\n  * @requires $controller Angular controller\n  * @requires $scope Angular local scope\n  * @requires $uibModalInstance Angular UI modal instance\n  * @requires foreignSources The list of available requisitions (a.k.a. foreign source)\n  * @requires RequisitionsService The requisitions service\n  * @requires growl The growl plugin for instant notifications\n  *\n  * @description The controller for manage the modal dialog for quick add a node to an existing requisition.\n  */\n  .controller('QuickAddNodeModalController', ['$controller', '$scope', '$uibModalInstance', 'foreignSources', 'RequisitionsService', 'growl', function($controller, $scope, $uibModalInstance, foreignSources, RequisitionsService, growl) {\n    $scope.quickAddPanelBasicView = quickAddPanelBasicView;\n    $scope.quickAddPanelSnmpView = quickAddPanelSnmpView;\n    $scope.quickAddPanelCategoriesView = quickAddPanelCategoriesView;\n    $scope.quickAddPanelCliView = quickAddPanelCliView;\n    $scope.quickAddPanelHelpView = quickAddPanelHelpView;\n\n    /**\n    * @description Provision the current node and close the modal operation\n    *\n    * @name QuickAddNodeModalController:modalProvision\n    * @ngdoc method\n    * @methodOf QuickAddNodeModalController\n    */\n    $scope.modalProvision = function() {\n      $scope.provision();\n      $uibModalInstance.close($scope.node);\n    };\n\n    /**\n    * @description Cancels current modal operation\n    *\n    * @name QuickAddNodeModalController:modalCancel\n    * @ngdoc method\n    * @methodOf QuickAddNodeModalController\n    */\n    $scope.modalCancel = function() {\n      $uibModalInstance.dismiss('cancel');\n    };\n\n    // Extending QuickAddNodeController\n    // eslint-disable-next-line no-invalid-this\n    angular.extend(this, $controller('QuickAddNodeController', {\n      $scope: $scope,\n      foreignSources: foreignSources,\n      RequisitionsService: RequisitionsService,\n      growl: growl\n    }));\n\n  }]);\n\n}());\n","const bootbox = require('bootbox');\n\nconst Requisition = require('../model/Requisition');\n\nrequire('../services/Requisitions');\nrequire('../services/Synchronize');\n\n/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\n(function() {\n\n  'use strict';\n\n  angular.module('onms-requisitions')\n\n  /**\n  * @ngdoc controller\n  * @name RequisitionController\n  * @module onms-requisitions\n  *\n  * @description The controller for manage a single requisition (add/edit)\n  *\n  * @requires $scope Angular local scope\n  * @requires $filter Angular filter\n  * @requires $cookies Angular cookies\n  * @requires $window Document window\n  * @requires $routeParams Angular route parameters\n  * @required Configuration The configuration object\n  * @requires RequisitionsService The requisitions service\n  * @requires SynchronizeService The synchronize service\n  * @requires growl The growl plugin for instant notifications\n  */\n  .controller('RequisitionController', ['$scope', '$filter', '$cookies', '$window', '$routeParams', 'Configuration', 'RequisitionsService', 'SynchronizeService', 'growl', function($scope, $filter, $cookies, $window, $routeParams, Configuration, RequisitionsService, SynchronizeService, growl) {\n\n    /**\n    * @description The timing status.\n    *\n    * @ngdoc property\n    * @name RequisitionController#timingStatus\n    * @propertyOf RequisitionController\n    * @returns {object} The timing status object\n    */\n    $scope.timingStatus = RequisitionsService.getTiming();\n\n    /**\n    * @description The foreign source (a.k.a the name of the requisition).\n    * The default value is obtained from the $routeParams.\n    *\n    * @ngdoc property\n    * @name RequisitionController#foreignSource\n    * @propertyOf RequisitionController\n    * @returns {string} The foreign source\n    */\n    $scope.foreignSource = $routeParams.foreignSource;\n\n    /**\n    * @description The requisition object\n    *\n    * @ngdoc property\n    * @name RequisitionController#requisition\n    * @propertyOf RequisitionController\n    * @returns {object} The requisition object\n    */\n    $scope.requisition = new Requisition({});\n\n    /**\n    * @description The filtered list of nodes\n    *\n    * @ngdoc property\n    * @name RequisitionController#filteredNodes\n    * @propertyOf RequisitionController\n    * @returns {array} The filtered array\n    */\n    $scope.filteredNodes = [];\n\n    /**\n    * @description The amount of items per page for pagination (defaults to 10)\n    *\n    * @ngdoc property\n    * @name RequisitionController#pageSize\n    * @propertyOf RequisitionController\n    * @returns {integer} The page size\n    */\n    $scope.pageSize = 10;\n\n    /**\n    * @description The maximum size of pages for pagination (defaults to 5)\n    *\n    * @ngdoc property\n    * @name RequisitionController#maxSize\n    * @propertyOf RequisitionController\n    * @returns {integer} The maximum size\n    */\n    $scope.maxSize = 5;\n\n    /**\n    * @description The total amount of items for pagination (defaults to 0)\n    *\n    * @ngdoc property\n    * @name RequisitionController#totalItems\n    * @propertyOf RequisitionController\n    * @returns {integer} The total items\n    */\n    $scope.totalItems = 0;\n\n    /**\n    * @description Goes back to requisitions list (navigation)\n    *\n    * @name RequisitionController:goBack\n    * @ngdoc method\n    * @methodOf RequisitionController\n    */\n    // FIXME Should be called getTop to be consistent with the rest of the controllers\n    $scope.goBack = function() {\n      $window.location.href = Configuration.baseHref + '#/requisitions';\n    };\n\n    /**\n    * @description Goes to the edition page for the foreign source definition of the requisition (navigation)\n    *\n    * @name RequisitionController:editForeignSource\n    * @ngdoc method\n    * @methodOf RequisitionController\n    */\n    $scope.editForeignSource = function() {\n      $window.location.href = Configuration.baseHref + '#/requisitions/' + encodeURIComponent($scope.foreignSource) + '/foreignSource';\n    };\n\n    /**\n    * @description Shows an error to the user\n    *\n    * @name RequisitionController:errorHandler\n    * @ngdoc method\n    * @methodOf RequisitionController\n    * @param {string} message The error message\n    */\n    $scope.errorHandler = function(message) {\n      growl.error(message, {ttl: 10000});\n    };\n\n    /**\n    * @description Requests the synchronization/import of a requisition on the server\n    *\n    * A dialog box is displayed to request to the user if the scan phase should be triggered or not.\n    *\n    * @name RequisitionController:synchronize\n    * @ngdoc method\n    * @methodOf RequisitionController\n    */\n    $scope.synchronize = function() {\n      SynchronizeService.synchronize($scope.requisition, $scope.errorHandler);\n    };\n\n    /**\n    * @description Returns the vertical layout suffix for nodes if enabled\n    *\n    * @name RequisitionController:getVerticalLayout\n    * @ngdoc method\n    * @methodOf RequisitionController\n    * @returns {string} URL suffix for vertical layout if enabled.\n    */\n    $scope.getVerticalLayout = function() {\n      var isVertical = $cookies.get('use_requisitions_node_vertical_layout');\n      return isVertical === 'true' ? '/vertical' : '';\n    };\n\n    /**\n    * @description Goes to the page for adding a new node to the requisition (navigation)\n    *\n    * @name RequisitionController:addNode\n    * @ngdoc method\n    * @methodOf RequisitionController\n    */\n    $scope.addNode = function() {\n      $window.location.href = Configuration.baseHref + '#/requisitions/' + encodeURIComponent($scope.foreignSource) + '/nodes/__new__' + $scope.getVerticalLayout();\n    };\n\n    /**\n    * @description Goes to the page for editing an existing node of the requisition (navigation)\n    * @description\n    *\n    * @name RequisitionController:editNode\n    * @ngdoc method\n    * @methodOf RequisitionController\n    * @param {object} The node's object to edit\n    */\n    $scope.editNode = function(node) {\n      $window.location.href = Configuration.baseHref + '#/requisitions/' + encodeURIComponent($scope.foreignSource) + '/nodes/' + encodeURIComponent(node.foreignId) + $scope.getVerticalLayout();\n    };\n\n    /**\n    * @description Deletes a node from the requisition on the server and refresh the local nodes list\n    *\n    * @name RequisitionController:deleteNode\n    * @ngdoc method\n    * @methodOf RequisitionController\n    * @param {object} The node's object to delete\n    */\n    $scope.deleteNode = function(node) {\n      bootbox.confirm('Are you sure you want to remove the node ' + _.escape(node.nodeLabel) + '?', function(ok) {\n        if (ok) {\n          RequisitionsService.startTiming();\n          RequisitionsService.deleteNode(node).then(\n            function() { // success\n              var index = -1;\n              for(var i = 0; i < $scope.filteredNodes.length; i++) {\n                if ($scope.filteredNodes[i].foreignId === node.foreignId) {\n                  index = i;\n                }\n              }\n              if (index > -1) {\n                $scope.filteredNodes.splice(index,1);\n              }\n              growl.success('The node ' + _.escape(node.nodeLabel) + ' has been deleted.');\n            },\n            $scope.errorHandler\n          );\n        }\n      });\n    };\n\n   /**\n    * @description Updates the pagination variables for the nodes.\n    *\n    * @name RequisitionController:updateFilteredNodes\n    * @ngdoc method\n    * @methodOf RequisitionController\n    */\n    $scope.updateFilteredNodes = function() {\n      $scope.currentPage = 1;\n      $scope.totalItems = $scope.filteredNodes.length;\n    };\n\n    /**\n    * @description Refreshes the deployed statistics for the requisition from the server\n    *\n    * @name RequisitionController:refreshDeployedStats\n    * @ngdoc method\n    * @methodOf RequisitionController\n    */\n    $scope.refreshDeployedStats = function() {\n      RequisitionsService.startTiming();\n      RequisitionsService.updateDeployedStatsForRequisition($scope.requisition).then(\n        function() { // success\n          growl.success('The deployed statistics has been updated.');\n        },\n        $scope.errorHandler\n      );\n    };\n\n    /**\n    * @description Refreshes the currently loaded requisition from the server\n    *\n    * @name RequisitionController:refreshRequisition\n    * @ngdoc method\n    * @methodOf RequisitionController\n    */\n    $scope.refreshRequisition = function() {\n      bootbox.confirm('Are you sure you want to reload the requisition?<br/>All current changes will be lost.', function(ok) {\n        if (ok) {\n          RequisitionsService.startTiming();\n          $scope.requisition = new Requisition({});\n          RequisitionsService.removeRequisitionFromCache();\n          $scope.initialize(function() {\n            $scope.refreshDeployedStats();\n          });\n        }\n      });\n    };\n\n   /**\n    * @description Saves the page size on a cookie\n    *\n    * @name RequisitionController:savePageSize\n    * @ngdoc method\n    * @methodOf RequisitionController\n    */\n    $scope.savePageSize = function() {\n      $cookies.put('requisitions_page_size', $scope.pageSize);\n    }\n\n    /**\n    * @description Initializes the local requisition from the server\n    *\n    * @name RequisitionController:initialize\n    * @ngdoc method\n    * @methodOf RequisitionController\n    * @param {function} customHandler An optional method to be called after the initialization is done.\n    */\n    $scope.initialize = function(customHandler) {\n      var value = $cookies.get('requisitions_page_size');\n      if (value) {\n        $scope.pageSize = value;\n      }\n      growl.success('Retrieving requisition ' + _.escape($scope.foreignSource) + '...');\n      RequisitionsService.getRequisition($scope.foreignSource).then(\n        function(requisition) { // success\n          $scope.requisition = requisition;\n          $scope.filteredNodes = requisition.nodes;\n          $scope.updateFilteredNodes();\n          if (customHandler) {\n            customHandler();\n          }\n        },\n        $scope.errorHandler\n      );\n    };\n\n    /**\n    * @description Watch for filter changes in order to update the nodes list and updates the pagination control\n    *\n    * @name RequisitionController:reqFilter\n    * @ngdoc event\n    * @methodOf RequisitionController\n    */\n    $scope.$watch('reqFilter', function() {\n      $scope.filteredNodes = $filter('filter')($scope.requisition.nodes, $scope.reqFilter);\n      $scope.updateFilteredNodes();\n    });\n\n    // Initialization\n\n    if ($scope.foreignSource) {\n      $scope.initialize();\n    }\n\n  }]);\n\n}());\n","const bootbox = require('bootbox');\n\nrequire('../services/Requisitions');\nrequire('../services/Synchronize');\n\n/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\n(function() {\n\n  'use strict';\n\n  const quickAddNodeView = require('../../views/quick-add-node.html');\n  const cloneForeignsourceView = require('../../views/clone-foreignsource.html');\n\n  angular.module('onms-requisitions')\n\n  /**\n  * @ngdoc controller\n  * @name RequisitionsController\n  * @module onms-requisitions\n  *\n  * @description The controller for manage all the requisitions (list/add/remove/synchronize)\n  *\n  * @requires $scope Angular local scope\n  * @requires $filter Angular filter\n  * @requires $cookies Angular cookies\n  * @requires $window Document window\n  * @requires $uibModal Angular UI modal\n  * @required Configuration The configuration object\n  * @requires RequisitionsService The requisitions service\n  * @requires SynchronizeService The synchronize service\n  * @requires growl The growl plugin for instant notifications\n  */\n  .controller('RequisitionsController', ['$scope', '$filter', '$cookies', '$window', '$uibModal', 'Configuration', 'DateFormatterService', 'RequisitionsService', 'SynchronizeService', 'growl', function($scope, $filter, $cookies, $window, $uibModal, Configuration, DateFormatterService, RequisitionsService, SynchronizeService, growl) {\n\n    /**\n    * @description The timing status.\n    *\n    * @ngdoc property\n    * @name RequisitionsController#timingStatus\n    * @propertyOf RequisitionsController\n    * @returns {object} The timing status object\n    */\n    $scope.timingStatus = RequisitionsService.getTiming();\n\n    /**\n    * @description The load flag.\n    *\n    * @ngdoc property\n    * @name RequisitionsController#loaded\n    * @propertyOf RequisitionsController\n    * @returns {boolean} True, if the requisitions have been loaded.\n    */\n    $scope.loaded = false;\n\n    /**\n    * @description The requisitions data\n    *\n    * @ngdoc property\n    * @name RequisitionsController#requisitionsData\n    * @propertyOf RequisitionsController\n    * @returns {object} The requisitions data\n    */\n    $scope.requisitionsData = { requisitions: [] };\n\n    /**\n    * @description The filtered version of the requisitions list\n    *\n    * @ngdoc property\n    * @name RequisitionsController#filteredRequisitions\n    * @propertyOf RequisitionsController\n    * @returns {array} The filtered array\n    */\n    $scope.filteredRequisitions = [];\n\n    /**\n    * @description The amount of items per page for pagination (defaults to 10)\n    *\n    * @ngdoc property\n    * @name RequisitionsController#pageSize\n    * @propertyOf RequisitionsController\n    * @returns {integer} The page size\n    */\n    $scope.pageSize = 10;\n\n    /**\n    * @description The maximum size of pages for pagination (defaults to 5)\n    *\n    * @ngdoc property\n    * @name RequisitionControllers#maxSize\n    * @propertyOf RequisitionsController\n    * @returns {integer} The maximum size\n    */\n    $scope.maxSize = 5;\n\n    /**\n    * @description The total amount of items for pagination (defaults to 0)\n    *\n    * @ngdoc property\n    * @name RequisitionControllers#maxSize\n    * @propertyOf RequisitionsController\n    * @returns {integer} The total items\n    */\n    $scope.totalItems = 0;\n\n    /**\n    * @description Shows an error to the user\n    *\n    * @name RequisitionsController:errorHandler\n    * @ngdoc method\n    * @methodOf RequisitionsController\n    * @param {string} message The error message\n    */\n    $scope.errorHandler = function(message) {\n      growl.error(message, {ttl: 10000});\n    };\n\n    /**\n    * @description Quick add a new node\n    *\n    * @name RequisitionsController:quickAddNode\n    * @ngdoc method\n    * @methodOf RequisitionsController\n    */\n    $scope.quickAddNode = function() {\n      var availableForeignSources = [];\n      angular.forEach($scope.requisitionsData.requisitions, function(r) {\n        availableForeignSources.push(r.foreignSource);\n      });\n      var modalInstance = $uibModal.open({\n        backdrop: 'static',\n        keyboard: false,\n        controller: 'QuickAddNodeModalController',\n        templateUrl: quickAddNodeView,\n        size: 'lg',\n        resolve: {\n          foreignSources: function() { return availableForeignSources; }\n        }\n      });\n      modalInstance.result.then(function(node) {\n        var r = $scope.requisitionsData.getRequisition(node.foreignSource);\n        r.setNode(node);\n      });\n    };\n\n    /**\n    * @description Clones the detectors and policies of a specific requisition\n    *\n    * @name RequisitionsController:clone\n    * @ngdoc method\n    * @methodOf RequisitionsController\n    * @param {string} foreignSource The name of the requisition\n    */\n    $scope.clone = function(foreignSource) {\n      var availableForeignSources = [];\n      angular.forEach($scope.requisitionsData.requisitions, function(r) {\n        if (r.foreignSource !== foreignSource) {\n          availableForeignSources.push(r.foreignSource);\n        }\n      });\n      var modalInstance = $uibModal.open({\n        backdrop: 'static',\n        keyboard: false,\n        controller: 'CloneForeignSourceController',\n        templateUrl: cloneForeignsourceView,\n        resolve: {\n          foreignSource: function() { return foreignSource; },\n          availableForeignSources: function() { return availableForeignSources; }\n        }\n      });\n      modalInstance.result.then(function(targetForeignSource) {\n        bootbox.confirm('This action will override the existing foreign source definition for the requisition named ' + _.escape(targetForeignSource) + ', using ' + _.escape(foreignSource) + ' as a template. Are you sure you want to continue ? This cannot be undone.', function(ok) {\n          if (!ok) {\n            return;\n          }\n          RequisitionsService.startTiming();\n          RequisitionsService.cloneForeignSourceDefinition(foreignSource, targetForeignSource).then(\n            function() { // success\n              growl.success('The foreign source definition for ' + _.escape(foreignSource) + ' has been cloned to ' + _.escape(targetForeignSource));\n            },\n            $scope.errorHandler\n          );\n        });\n      });\n    };\n\n    /**\n    * @description Adds a new requisition on the server.\n    *\n    * A dialog box will be displayed to request the name of the requisition to the user.\n    *\n    * @name RequisitionsController:add\n    * @ngdoc method\n    * @methodOf RequisitionsController\n    */\n    $scope.add = function() {\n      bootbox.prompt('Please enter the name for the new requisition', function(foreignSource) {\n        if (foreignSource) {\n          // Validate Requisition\n          if (foreignSource.match(/[/\\\\?:&*'\"]/)) {\n            bootbox.alert('Cannot add the requisition ' + _.escape(foreignSource) + ' because the following characters are invalid:<br/>:, /, \\\\, ?, &, *, \\', \"');\n            return;\n          }\n          var r = $scope.requisitionsData.getRequisition(foreignSource);\n          if (r) {\n            bootbox.alert('Cannot add the requisition ' + _.escape(foreignSource) + ' because there is already a requisition with that name');\n            return;\n          }\n          // Create Requisition\n          RequisitionsService.addRequisition(foreignSource).then(\n            function(r) { // success\n              growl.success('The requisition ' + _.escape(r.foreignSource) + ' has been created.');\n            },\n            $scope.errorHandler\n          );\n        }\n      });\n    };\n\n    /**\n    * @description Edits the foreign source definition of an existing requisition\n    *\n    * @name RequisitionsController:editForeignSource\n    * @ngdoc method\n    * @methodOf RequisitionsController\n    * @param {string} foreignSource The name of the requisition\n    */\n    $scope.editForeignSource = function(foreignSource) {\n      $window.location.href = Configuration.baseHref + '#/requisitions/' + encodeURIComponent(foreignSource) + '/foreignSource';\n    };\n\n    /**\n    * @description Goes to the edit page of an existing requisition (navigation)\n    *\n    * @name RequisitionsController:edit\n    * @ngdoc method\n    * @methodOf RequisitionsController\n    * @param {string} foreignSource The name of the requisition\n    */\n    $scope.edit = function(foreignSource) {\n      $window.location.href = Configuration.baseHref + '#/requisitions/' + encodeURIComponent(foreignSource);\n    };\n\n    /**\n    * @description Requests the synchronization/import of a requisition on the server\n    *\n    * A dialog box is displayed to request to the user if the scan phase should be triggered or not.\n    *\n    * @name RequisitionsController:synchronize\n    * @ngdoc method\n    * @methodOf RequisitionsController\n    * @param {object} requisition The requisition object\n    */\n    $scope.synchronize = function(requisition) {\n      RequisitionsService.startTiming();\n      SynchronizeService.synchronize(requisition, $scope.errorHandler);\n    };\n\n    /**\n    * @description Refreshes the deployed statistics of a requisition on the server\n    *\n    * @name RequisitionsController:refresh\n    * @ngdoc method\n    * @methodOf RequisitionsController\n    * @param {object} requisition The requisition object\n    */\n    $scope.refresh = function(requisition) {\n      RequisitionsService.startTiming();\n      RequisitionsService.updateDeployedStatsForRequisition(requisition).then(\n        function() { // success\n          growl.success('The deployed statistics for ' + _.escape(requisition.foreignSource) + ' has been updated.');\n        },\n        $scope.errorHandler\n      );\n    };\n\n    /**\n    * @description Removes all the nodes form the requisition on the server\n    *\n    * @name RequisitionsController:removeAllNodes\n    * @ngdoc method\n    * @methodOf RequisitionsController\n    * @param {string} foreignSource The name of the requisition\n    */\n    $scope.removeAllNodes = function(foreignSource) {\n      bootbox.confirm('Are you sure you want to remove all the nodes from ' + _.escape(foreignSource) + '?', function(ok) {\n        if (ok) {\n          RequisitionsService.startTiming();\n          RequisitionsService.removeAllNodesFromRequisition(foreignSource).then(\n            function() { // success\n              growl.success('All the nodes from ' + _.escape(foreignSource) + ' have been removed, and the requisition has been synchronized.');\n              var req = $scope.requisitionsData.getRequisition(foreignSource);\n              req.reset();\n            },\n            $scope.errorHandler\n          );\n        }\n      });\n    };\n\n    /**\n    * @description Removes a requisition on the server\n    *\n    * @name RequisitionsController:delete\n    * @ngdoc method\n    * @methodOf RequisitionsController\n    * @param {string} foreignSource The name of the requisition\n    */\n    $scope.delete = function(foreignSource) {\n      bootbox.confirm('Are you sure you want to remove the requisition ' + _.escape(foreignSource) + '?', function(ok) {\n        if (ok) {\n          RequisitionsService.startTiming();\n          RequisitionsService.deleteRequisition(foreignSource).then(\n            function() { // success\n              growl.success('The requisition ' + _.escape(foreignSource) + ' has been deleted.');\n            },\n            $scope.errorHandler\n          );\n        }\n      });\n    };\n\n    /**\n    * @description Edits the default foreign source definition (navigation)\n    *\n    * @name RequisitionsController:editDefaultForeignSource\n    * @ngdoc method\n    * @methodOf RequisitionsController\n    */\n    $scope.editDefaultForeignSource = function() {\n      $window.location.href = Configuration.baseHref + '#/requisitions/default/foreignSource';\n    };\n\n    /**\n    * @description Resets the default set of detectors and policies\n    *\n    * @name RequisitionsController:resetDefaultForeignSource\n    * @ngdoc method\n    * @methodOf RequisitionsController\n    */\n    $scope.resetDefaultForeignSource = function() {\n      bootbox.confirm('Are you sure you want to reset the default foreign source definition ?', function(ok) {\n        if (ok) {\n          RequisitionsService.startTiming();\n          RequisitionsService.deleteForeignSourceDefinition('default').then(\n            function() { // success\n              growl.success('The default foreign source definition has been reseted.');\n              $scope.initialize();\n            },\n            $scope.errorHandler\n          );\n        }\n      });\n    };\n\n    /**\n    * @description Refreshes the requisitions from the server\n    *\n    * There are two main actions:\n    * - Retrieve all the requisitions from the server ignoring the current state.\n    * - Retrieve only the deployed statistics, and update the current requisitions.\n    *\n    * @name RequisitionsController:refreshData\n    * @ngdoc method\n    * @methodOf RequisitionsController\n    */\n    $scope.refreshData = function() {\n      bootbox.dialog({\n        message: 'Are you sure you want to refresh the content of the page ?<br/><hr/>' +\n                 'Choose <b>Reload Everything</b> to retrieve all the requisitions from the server (any existing unsaved change will be lost).<br/>' +\n                 'Choose <b>Reload Deployed Data</b> to retrieve the deployed statistics and update the UI.<br/>' +\n                 'Choose <b>Cancel</b> to abort the request.',\n        title: 'Refresh',\n        buttons: {\n          reloadAll: {\n            label: 'Reload Everything',\n            className: 'btn-primary',\n            callback: function() {\n              $scope.refreshRequisitions();\n            }\n          },\n          reloadDeployed: {\n            label: 'Reload Deployed Data',\n            className: 'btn-secondary',\n            callback: function() {\n              $scope.refreshDeployedStats();\n            }\n          },\n          main: {\n            label: 'Cancel',\n            className: 'btn-secondary'\n          }\n        }\n      });\n    };\n\n    /**\n    * @description Refreshes the deployed statistics for all the requisitions from the server\n    *\n    * @name RequisitionsController:refreshDeployedStats\n    * @ngdoc method\n    * @methodOf RequisitionsController\n    */\n    $scope.refreshDeployedStats = function() {\n      RequisitionsService.startTiming();\n      growl.success('Refreshing deployed statistics...');\n      RequisitionsService.updateDeployedStats($scope.requisitionsData).then(\n        function() { // success\n          growl.success('The deployed statistics has been updated.');\n        },\n        $scope.errorHandler\n      );\n    };\n\n    /**\n    * @description Refreshes all the requisitions from the server\n    *\n    * @name RequisitionsController:refreshRequisitions\n    * @ngdoc method\n    * @methodOf RequisitionsController\n    */\n    $scope.refreshRequisitions = function() {\n      bootbox.confirm('Are you sure you want to reload all the requisitions?<br/>All current changes will be lost.', function(ok) {\n        if (ok) {\n          RequisitionsService.startTiming();\n          growl.success('Refreshing requisitions...');\n          RequisitionsService.clearCache();\n          $scope.requisitionsData = { requisitions : [] };\n          $scope.initialize();\n        }\n      });\n    };\n\n   /**\n    * @description Updates the pagination variables for the requisitions.\n    *\n    * @name RequisitionsController:updateFilteredNodes\n    * @ngdoc method\n    * @methodOf RequisitionsController\n    */\n    $scope.updateFilteredRequisitions = function() {\n      $scope.currentPage = 1;\n      $scope.totalItems = $scope.filteredRequisitions.length;\n    };\n\n   /**\n    * @description Saves the page size on a cookie\n    *\n    * @name RequisitionController:savePageSize\n    * @ngdoc method\n    * @methodOf RequisitionController\n    */\n    $scope.savePageSize = function() {\n      $cookies.put('requisitions_page_size', $scope.pageSize);\n    }\n\n    /**\n    * @description Initializes the local requisitions list from the server\n    *\n    * @name RequisitionsController:initialize\n    * @ngdoc method\n    * @methodOf RequisitionsController\n    */\n    $scope.initialize = function() {\n      var value = $cookies.get('requisitions_page_size');\n      if (value) {\n        $scope.pageSize = value;\n      }\n      $scope.loaded = false;\n      DateFormatterService.formatter.finally(function() {\n        RequisitionsService.getRequisitions().then(\n          function(data) { // success\n            $scope.requisitionsData = data;\n            $scope.filteredRequisitions = $scope.requisitionsData.requisitions;\n            $scope.updateFilteredRequisitions();\n            $scope.loaded = true;\n            growl.success('Loaded ' + $scope.requisitionsData.requisitions.length + ' requisitions...');\n          },\n          $scope.errorHandler\n        );\n      });\n    };\n\n    /**\n    * @description Watch for filter changes in order to update the requisitions list and updates the pagination control\n    *\n    * @name RequisitionsController:reqFilter\n    * @ngdoc event\n    * @methodOf RequisitionsController\n    */\n    $scope.$watch('reqFilter', function() {\n      $scope.filteredRequisitions = $filter('filter')($scope.requisitionsData.requisitions, $scope.reqFilter);\n      $scope.updateFilteredRequisitions();\n    });\n\n    // Initialization\n\n    if ($scope.filteredRequisitions.length === 0) {\n      $scope.initialize();\n    }\n\n  }]);\n\n}());\n","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/quick-add-node.html';\nvar html = \"<div> <div class=modal-header> <h3 class=modal-title>Quick-Add Node</h3> </div> <div class=modal-body> <form name=quickAddNodeForm> <uib-tabset> <uib-tab heading=\\\"Basic Attributes\\\" id=tab-basic-information> <ng-include src=quickAddPanelBasicView /> </uib-tab> <uib-tab heading=\\\"SNMP Parameters\\\" id=tab-snmp-parameters> <ng-include src=quickAddPanelSnmpView /> </uib-tab> <uib-tab heading=\\\"Surveillance Categories\\\" id=tab-categories> <ng-include src=quickAddPanelCategoriesView /> </uib-tab> <uib-tab heading=\\\"CLI Authentication\\\" id=tab-cli-auth-parameters> <ng-include src=quickAddPanelCliView /> </uib-tab> <uib-tab heading=Help id=tab-help> <ng-include src=quickAddPanelHelpView /> </uib-tab> </uib-tabset> </form> </div> <div class=modal-footer> <button type=button class=\\\"btn btn-primary\\\" id=provision ng-click=modalProvision() ng-disabled=isInvalid()>Provision</button> <button type=button class=\\\"btn btn-secondary\\\" id=cancel ng-click=modalCancel()>Cancel</button> </div> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/clone-foreignsource.html';\nvar html = \"<div> <div class=modal-header> <h3 class=modal-title>Clone Foreign Source Definition</h3> </div> <div class=modal-body> <form name=cloneForm> <div class=form-group> <div class=form-group> <label class=col-form-label for=sourceFS>Source Foreign Source</label> <input class=form-control type=text name=sourceFS ng-disabled=true ng-model=foreignSource> </div> <div class=form-group> <label class=col-form-label for=targetFS>Target Foreign Source</label> <input class=form-control type=text name=targetFS placeholder=\\\"Target Foreign Source to override (hit space bar to see the options)\\\" ng-model=targetForeignSource typeahead-min-length=0 typeahead-editable=false uib-typeahead=\\\"fs for fs in availableForeignSources | filter:$viewValue\\\" required> </div> </div> </form> </div> <div class=modal-footer> <button type=button class=\\\"btn btn-primary\\\" ng-click=save() ng-disabled=cloneForm.$invalid>Clone</button> <button type=button class=\\\"btn btn-secondary\\\" ng-click=cancel()>Cancel</button> </div> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","const ip = require('vendor/ipaddress-js');\nconst Address4 = ip.Address4;\nconst Address6 = ip.Address6;\nconst _ = require('lodash');\n\n/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\n(function() {\n\n  'use strict';\n\n  angular.module('onms-requisitions')\n\n  /**\n  * @ngdoc directive\n  * @name validIpAddress\n  * @module onms-requisitions\n  *\n  * @description A directive to verify IPv4 and IPv6 addresses using a regular expression.\n  * Also verifies if the given IP is unique on the node (to avoid duplicates). For this purpose,\n  * it requires an array defined on the controller scope called ipBlackList if you want to make\n  * the field invalid if the value is listed.\n  */\n  .directive('validIpAddress', function() {\n    return {\n      restrict: 'A',\n      require: 'ngModel',\n      link: function(scope, element, attrs, ctrl) {\n        ctrl.$parsers.unshift(function(ipAddress) {\n          var found = scope.ipBlackList && scope.ipBlackList.indexOf(ipAddress) !== -1;\n          if (found) { // It has to be unique\n            ctrl.$setValidity('valid', false);\n            return undefined;\n          }\n          var isValid = false;\n          var ipv4 = new Address4(ipAddress);\n          if (ipv4.isValid()) {\n            isValid = true;\n          } else {\n            var ipv6 = new Address6(ipAddress);\n            if (ipv6.isValid()) {\n                isValid = true;\n            }\n          }\n          if (!isValid) {\n            ctrl.$setValidity('valid', false);\n            return undefined;\n          }\n          ctrl.$setValidity('valid', true);\n          return ipAddress;\n        });\n      }\n    };\n  })\n\n  /**\n  * @ngdoc directive\n  * @name validService\n  * @module onms-requisitions\n  *\n  * @description A directive to verify if the given service is unique on the IP Interface.\n  * This must be used on interface.html in conjunction with InterfaceController\n  */\n  .directive('validService', function() {\n    return {\n      restrict: 'A',\n      require: 'ngModel',\n      link: function(scope, element, attrs, ctrl) {\n        ctrl.$parsers.unshift(function(serviceName) {\n          var found = false;\n          if (scope.requisitionInterface && scope.requisitionInterface.services) {\n            angular.forEach(scope.requisitionInterface.services, function(s) {\n              if (s.$$hashKey !== scope.service.$$hashKey && s.name === serviceName) {\n                found = true;\n              }\n            });\n          }\n          if (found) {\n            ctrl.$setValidity('unique', false);\n            return undefined;\n          }\n\n          ctrl.$setValidity('unique', true);\n          return serviceName;\n        });\n      }\n    };\n  })\n\n /**\n  * @ngdoc directive\n  * @name validForeignId\n  * @module onms-requisitions\n  *\n  * @description A directive to verify if the given foreign ID is unique on the requisition.\n  * This must be used on node.html in conjunction with NodeController.\n  * It requires an array defined on the controller scope called foreignIdBlackList if you want to make the field invalid if the value is listed.\n  */\n  .directive('validForeignId', function() {\n    return {\n      restrict: 'A',\n      require: 'ngModel',\n      link: function(scope, element, attrs, ctrl) {\n        ctrl.$parsers.unshift(function(foreignId) {\n          var found = scope.foreignIdBlackList && scope.foreignIdBlackList.indexOf(foreignId) !== -1;\n          if (found || foreignId.match(/[/\\\\?:&*'\"]/)) {\n            ctrl.$setValidity('valid', false);\n            return undefined;\n          }\n\n          ctrl.$setValidity('valid', true);\n          return foreignId;\n        });\n      }\n    };\n  })\n\n  /**\n  * @ngdoc directive\n  * @name validCategory\n  * @module onms-requisitions\n  *\n  * @description A directive to verify if the given category is unique on the node.\n  * This must be used on node.html in conjunction with NodeController\n  */\n  .directive('validCategory', function() {\n    return {\n      restrict: 'A',\n      require: 'ngModel',\n      transclude: true,\n      scope: { 'category': '=validCategory' },\n      link: function(scope, element, attrs, ctrl) {\n        ctrl.$parsers.unshift(function(categoryName) {\n          if (!categoryName || categoryName.trim() === '') {\n            ctrl.$setValidity('unique', false);\n            return undefined;\n          }\n          var found = false;\n          angular.forEach(scope.$parent.node.categories, function(c) {\n            if (c.$$hashKey !== scope.category.$$hashKey && c.name === categoryName) {\n              found = true;\n            }\n          });\n          if (found) {\n            ctrl.$setValidity('unique', false);\n            return undefined;\n          }\n\n          ctrl.$setValidity('unique', true);\n          return categoryName;\n        });\n      }\n    };\n  })\n\n  /**\n   * @ngdoc directive\n   * @name validMetaDataKey\n   * @module onms-requisitions\n   *\n   * @description A directive to verify if the meta-data key is unique with\n   * a specific scope & context.\n   *\n   * This directive is intended to be used in the modal dialog used to edit\n   * meta-data entries.\n   *\n   */\n  .directive('validMetaDataKey', function() {\n    return {\n      restrict: 'A',\n      require: 'ngModel',\n      transclude: true,\n      scope: { 'entry': '=validMetaDataKey' },\n      link: function(scope, element, attrs, ctrl) {\n        ctrl.$parsers.unshift(function(keyName) {\n          let isUnique = true;\n          if (keyName !== scope.$parent.originalKey) {\n            // The key has changed, we need to validate it's uniqueness\n            scope.$parent.resolveScopeReferences(scope.entry);\n            const existingKeys = scope.$parent.node.metaData.getKeysInScopeOf(scope.entry);\n            isUnique = _.indexOf(existingKeys, keyName) < 0;\n          }\n\n          if (!isUnique) {\n            ctrl.$setValidity('unique', false);\n            return undefined;\n          }\n\n          ctrl.$setValidity('unique', true);\n          return keyName;\n        });\n      }\n    };\n  });\n\n\n\n}());\n","/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\n(function() {\n\n  'use strict';\n\n  angular.module('onms-requisitions')\n\n  /**\n  * @ngdoc filter\n  * @name startFrom\n  * @module onms-requisitions\n  *\n  * @description A filter for paginated content\n  *\n  * @param {array} input The source array to filter\n  * @param {integer} start The position index to start from\n  *\n  * @returns {array} the filtered array\n  */\n  .filter('startFrom', function() {\n    return function(input, start) {\n      const s = Number(start);\n      if (input) {\n        return input.length < s ? input : input.slice(s);\n      }\n      return [];\n    };\n  });\n\n}());\n","/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2016-2017 The OpenNMS Group, Inc.\n*/\n\n'use strict';\n\nconst angular = require('vendor/angular-js');\nrequire('lib/onms-http');\n\nconst kscTemplate = require('./template.ksc.html');\nconst nodesTemplate = require('./template.nodes.html');\n\nimport Util from 'lib/util';\n\nangular.module('onms-search', [\n  'onms.http',\n  'ui.bootstrap'\n])\n\n.directive('onmsSearchNodes', function() {\n  return {\n    restrict: 'E',\n    transclude: true,\n    templateUrl: nodesTemplate,\n    controller: 'NodeSearchCtrl'\n  };\n})\n\n.directive('onmsSearchKsc', function() {\n  return {\n    restrict: 'E',\n    transclude: true,\n    templateUrl: kscTemplate,\n    controller: 'KscSearchCtrl'\n  };\n})\n\n.controller('NodeSearchCtrl', ['$scope', '$window', '$http', function($scope, $window, $http) {\n\n  $scope.getNodes = function(criteria) {\n    return $http({\n      url: 'rest/nodes',\n      method: 'GET',\n      params: { label: criteria, comparator: 'contains' }\n    }).then(function(response) {\n      return response.data.node;\n    });\n  };\n\n  $scope.goToChooseResources = function(node) {\n    $window.location.href = Util.getBaseHref() + 'graph/chooseresource.jsp?node=' + node.id;\n  }\n\n}])\n\n.controller('KscSearchCtrl', ['$scope', '$window', '$http', '$filter', function($scope, $window, $http, $filter) {\n\n  $scope.getKscReports = function(criteria) {\n    return $http({\n      url: 'rest/ksc',\n      method: 'GET'\n    }).then(function(response) {\n       return $filter('filter')(response.data.kscReport, criteria);\n    });\n  };\n\n  $scope.goToKscReport = function(ksc) {\n    $window.location.href = Util.getBaseHref() + 'KSC/customView.htm?type=custom&report=' + ksc.id;\n  }\n\n}]);","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/search/template.ksc.html';\nvar html = \"<div class=form-group> <div class=input-group> <input type=text class=form-control ng-model=asyncKsc placeholder=\\\"Type the KSC report name\\\" uib-typeahead=\\\"ksc as ksc.label for ksc in getKscReports($viewValue)\\\" typeahead-editable=false typeahead-loading=kscLoadingNodes typeahead-no-results=kscNoResults typeahead-min-length=1 typeahead-on-select=goToKscReport($item) /> <div class=input-group-append> <span class=input-group-text><i class=\\\"fa fa-search\\\"></i></span> </div> </div> <i ng-show=kscLoadingNodes class=\\\"fa fa-refresh\\\"></i> <p class=\\\"form-text text-muted\\\" ng-show=kscNoResults> <i class=\\\"fa fa-remove\\\"></i> No Results Found </p> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","/* Angular Core */\nconst angular = require('angular');\nrequire('angular-animate');\nrequire('angular-cookies');\nrequire('angular-route');\nrequire('angular-resource');\nrequire('angular-sanitize');\n\n/* 3rd-Party Modules */\nrequire('angular-growl-v2');\nrequire('angular-loading-bar');\n\nrequire('angular-growl-v2/build/angular-growl.css');\nrequire('angular-loading-bar/build/loading-bar.css');\n\n/* Bootstrap UI */\nrequire('vendor/bootstrap-js');\nrequire('angular-bootstrap-checkbox');\nrequire('ui-bootstrap4'); // angular-ui-boostrap for bootstrap 4\n\nconsole.log('init: angular-js'); // eslint-disable-line no-console\n\nmodule.exports = window['angular'] = angular;","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/search/template.nodes.html';\nvar html = \"<div class=form-group> <div class=input-group> <input type=text class=form-control ng-model=asyncNode placeholder=\\\"Type the node label\\\" uib-typeahead=\\\"node as node.label for node in getNodes($viewValue)\\\" typeahead-editable=false typeahead-loading=nodeLoadingNodes typeahead-no-results=nodeNoResults typeahead-min-length=1 typeahead-on-select=goToChooseResources($item) /> <div class=input-group-append> <span class=input-group-text><i class=\\\"fa fa-search\\\"></i></span> </div> </div> <i ng-show=nodeLoadingNodes class=\\\"fa fa-refresh\\\"></i> <p class=\\\"form-text text-muted\\\" ng-show=nodeNoResults> <i class=\\\"fa fa-remove\\\"></i> No Results Found </p> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","const angular = require('vendor/angular-js');\nrequire('../../lib/onms-http');\nrequire('angular-bootstrap-toggle/dist/angular-bootstrap-toggle');\nrequire('angular-bootstrap-toggle/dist/angular-bootstrap-toggle.css');\nrequire('angular-ui-router');\n\nconst quickSearchTemplate  = require('./quicksearch.html');\n\nconst globalErrorHandling = function(scope, errorResponse) {\n    if (errorResponse.data) {\n        scope.error = errorResponse.data;\n    } else {\n        scope.error = \"An unexpected error occurred while handling the request\";\n    }\n};\n\n(function() {\n    'use strict';\n\n    var MODULE_NAME = 'onms.central.search';\n\n    angular.module(MODULE_NAME, [\n        'angular-loading-bar',\n        'ngResource',\n        'ui.router',\n        'onms.http',\n    ])\n        .directive('onmsCentralSearch', function() {\n            return {\n                restrict: 'E',\n                transclude: false,\n                templateUrl: quickSearchTemplate,\n                controller: 'QuickSearchController'\n            };\n        })\n        .factory('SearchResource', function($resource) {\n            return $resource('api/v2/search', {}, {\n                'query':      { method: 'GET', isArray: true, cancellable: true },\n            });\n        })\n        .controller('QuickSearchController', ['$scope', 'SearchResource', '$timeout', '$document', function($scope, SearchResource, $timeout, $document) {\n            var KeyCodes = {\n                ENTER: 13,\n                SHIFT: 16,\n                ESC: 27,\n                KEY_LEFT: 37,\n                KEY_UP: 38,\n                KEY_RIGHT: 39,\n                KEY_DOWN: 40,\n            };\n\n            var Types = {\n                Group: 'Group',\n                Item: 'Item',\n                More: 'More'\n            };\n\n            $scope.query = '';\n            $scope.results = {};\n            $scope.performSearchExecuted = false;\n            $scope.showLoadingIndicator = false;\n            $scope.showLoadingIndicatorDelay = 250;\n            $scope.performSearchDelay = 500; // in ms\n            $scope.performSearchPromise = undefined;\n            $scope.performSearchHandle = undefined;\n            $scope.showLoadingIndicatorPromise = undefined;\n            $scope.shiftLastPressed = undefined;\n            $scope.selectedIndex = 0;\n\n            $document.bind('mousedown', function(event) {\n                var isChild = $('#onms-search-form').has(event.target).length > 0;\n                var isSelf = $('#onms-search-form').is(event.target);\n                var isInside = isChild || isSelf;\n                if (!isInside) {\n                    $timeout(function() {\n                        $scope.resetQuery();\n                        $scope.cancelRequest();\n                    });\n                }\n            });\n\n            $document.bind('keyup', function(e) {\n                // Search Focus Field\n                $timeout(function() {\n                    if (e.keyCode === KeyCodes.SHIFT && new Date() - $scope.shiftLastPressed <= 350) {\n                        angular.element('#onms-search-query').focus();\n                        angular.element('#onms-search-query').select();\n                        $scope.shiftLastPressed = undefined;\n                    } else if(e.keyCode === KeyCodes.SHIFT) {\n                        $scope.shiftLastPressed = new Date();\n                    }\n\n                    // Reset Search\n                    if (e.keyCode === KeyCodes.ESC) {\n                        $scope.resetQuery();\n                        $scope.cancelRequest();\n                    }\n                });\n            });\n\n            $document.bind('keydown', function(e) {\n                $timeout(function() {\n                    if ($scope.results.length > 0) {\n                        var element = document.getElementById('onms-search-result-item-' + $scope.selectedIndex);\n                        if (e.keyCode === KeyCodes.KEY_UP || e.keyCode === KeyCodes.KEY_DOWN) {\n                            $scope.navigateSearchResult(e.keyCode);\n\n                            // Ideally we would use scrollToView(), but that will also scroll the body, which\n                            // results in the header scrolling down slightly, which looks weird when using the search\n                            // So instead scrolling is implemented manually\n                            var parentComponent = document.getElementById('onms-search-result');\n                            var parentHeight = parentComponent.clientHeight;\n                            var resultHeight = element.clientHeight;\n                            var resultOffset = element.offsetTop;\n                            var padding = 25;\n\n                            // Scroll down\n                            if (resultOffset + resultHeight + padding >= parentHeight + parentComponent.scrollTop) {\n                                parentComponent.scrollTop = resultOffset;\n                            }\n                            // Scroll up\n                            if (parentComponent.scrollTop !== 0\n                                && parentComponent.scrollTop > resultOffset - resultHeight) {\n                                parentComponent.scrollTop = resultOffset - resultHeight;\n                            }\n                        }\n                        if (e.keyCode === KeyCodes.ENTER) {\n                            if ($scope.results[$scope.selectedIndex].type === Types.More) {\n                                // Ensure next action is run in angular context\n                                // Do not use angular.$apply here, as it may fail on angular sites,\n                                // such as the requisition ui\n                                $timeout(function() {\n                                    angular.element(element).triggerHandler('click');\n                                }, 0);\n                            } else {\n                                $scope.resetQuery();\n                                $scope.cancelRequest();\n                                element.click();\n                            }\n                        }\n                    }\n                });\n            });\n\n            $scope.navigateSearchResult = function(keyCode) {\n                $scope.results[$scope.selectedIndex].selected = false;\n                switch(keyCode) {\n                    case KeyCodes.KEY_UP:\n                        $scope.selectedIndex--;\n                        break;\n                    case KeyCodes.KEY_DOWN:\n                        $scope.selectedIndex++;\n                        break;\n                    default:\n                        break;\n                }\n                if ($scope.selectedIndex < 1) {\n                    $scope.selectedIndex = 1;\n                }\n                if ($scope.selectedIndex >= $scope.results.length) {\n                    $scope.selectedIndex = $scope.results.length - 1;\n                }\n                if ($scope.results[$scope.selectedIndex].type === Types.Group) {\n                    $scope.navigateSearchResult(keyCode); // Skip group element\n                } else {\n                    $scope.results[$scope.selectedIndex].selected = true;\n                }\n            };\n\n            $scope.resetQuery = function() {\n                $scope.query = '';\n                $scope.results = [];\n                $scope.performSearchExecuted = false;\n                if ($scope.performSearchHandle) {\n                    $scope.performSearchHandle.$cancelRequest();\n                }\n            };\n\n            $scope.cancelRequest = function() {\n                if ($scope.performSearchHandle) {\n                    $scope.performSearchHandle.$cancelRequest();\n                }\n                $scope.showLoadingIndicator = false;\n                $timeout.cancel($scope.showLoadingIndicatorPromise);\n            };\n\n            // Ensure there is no difference between selected and mouseover\n            $scope.select = function(index) {\n                var selectIndex = index || 1;\n                if ($scope.selectedIndex >= 1) {\n                    $scope.results[$scope.selectedIndex].selected = false;\n                }\n                $scope.selectedIndex = selectIndex;\n                $scope.results[$scope.selectedIndex].selected = true;\n            };\n\n            $scope.onQueryChange = function() {\n                if ($scope.query.length == 0) {\n                    $scope.resetQuery();\n                    return;\n                }\n                if ($scope.query.length < 3) {\n                    return;\n                }\n\n                // Stop any previous loading\n                $timeout.cancel($scope.performSearchPromise);\n                $scope.results = [];\n                $scope.performSearchExecuted = false;\n\n                // Start timeout before actually searching, this will allow for not invoking when the user\n                // is still typing. Fiddle with $scope.loadingDelay to make it resolve faster\n                $scope.performSearchPromise = $timeout(function() {\n                    // Stop any previously started delay\n                    $timeout.cancel($scope.showLoadingIndicatorPromise);\n\n                    // Kick of loading indicator\n                    $scope.showLoadingIndicatorPromise = $timeout(function() {\n                        $scope.showLoadingIndicator = true;\n                    }, $scope.showLoadingIndicatorDelay);\n\n                    // Cancel any previous request\n                    if ($scope.performSearchHandle) {\n                        $scope.performSearchHandle.$cancelRequest();\n                    }\n\n                    // Kick of the search\n                    $scope.error = undefined;\n                    $scope.performSearchHandle = SearchResource.query({'_s' : $scope.query},\n                        function(data) {\n                            $scope.cancelRequest();\n                            $scope.performSearchExecuted = true;\n\n                            var results = [];\n                            data.forEach(function(eachResult) {\n                                // Create the header\n                                results.push({\n                                        context: eachResult.context.name,\n                                        // Make the label have an s at the end if it has multiple items\n                                        label: eachResult.results.length > 1 ? eachResult.context.name + 's' : eachResult.context.name,\n                                        type: Types.Group,\n                                        count: eachResult.results.length,\n                                        more: eachResult.more\n                                    }\n                                );\n\n                                eachResult.results.forEach(function(item) {\n                                    item.type = Types.Item;\n                                    results.push(item);\n                                });\n\n                                if (eachResult.more === true) {\n                                    var showMoreElement = {\n                                        context: eachResult.context.name,\n                                        count: eachResult.results.length,\n                                        type: Types.More,\n                                        loadMore: function() {\n                                            $scope.error = undefined;\n                                            SearchResource.query({'_s': $scope.query, '_l': this.count + 10, '_c' : this.context}, function(response) {\n                                                var endIndex = $scope.results.indexOf(showMoreElement);\n\n                                                // The result is context focused, so there is only one search result anyways\n                                                var searchResult = response[0];\n                                                var results = searchResult.results.slice(endIndex - 1); // Remove first elements, as they are already being showed\n                                                results.forEach(function(item, i) {\n                                                    // Add item\n                                                    item.type = Types.Item;\n                                                    $scope.results.splice(endIndex + i, 0, item);\n                                                    showMoreElement.count++;\n                                                });\n                                                // Toggle Selection\n                                                showMoreElement.selected = false;\n                                                $scope.results[$scope.selectedIndex].selected = true;\n\n                                                // Hide element\n                                                if (searchResult.more === false) {\n                                                    $scope.results.splice($scope.results.indexOf(showMoreElement), 1);\n                                                }\n                                            }, function(response) {\n                                                $scope.performSearchExecuted = true;\n                                                globalErrorHandling($scope, response);\n                                            });\n                                        },\n                                        selected: false\n                                    };\n                                    results.push(showMoreElement);\n                                }\n                            });\n                            $scope.results = results;\n                            if ($scope.results.length != 0) {\n                                $scope.selectedIndex = 1;\n                                $scope.results[$scope.selectedIndex].selected = true;\n                            }\n                        },\n                        function(response) {\n                            if (response.status >= 0) {\n                                $scope.performSearchExecuted = true;\n                                globalErrorHandling($scope, response);\n                                $scope.cancelRequest();\n                            } else {\n                                // Request cancelled\n                            }\n                        }\n                    );\n                }, $scope.performSearchDelay);\n            };\n        }])\n    ;\n}());\n","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-central-search/quicksearch.html';\nvar html = \"<style type=text/css>.search-result{max-height:700px;min-width:280px;max-width:60%;position:absolute;top:100%;z-index:100000;overflow:auto;border:#343a40 solid 1px}.search-result .list-group-item{padding:.25rem .75rem;font-size:90%}.search-result .list-group-item:last-child{border-bottom-right-radius:0;border-bottom-left-radius:0}.search-bar .form-control{border:none;outline:0;box-shadow:none;border-radius:1rem;padding:0}.search-bar .input-group-text{border-top-left-radius:1rem;border-bottom-left-radius:1rem;background-color:#fff;border-color:#fff}.search-result .list-group-item:hover{background-color:#e9ecef}.selected{background-color:#e9ecef}</style> <form id=onms-search-form autocomplete=off novalidate class=form-inline> <input autocomplete=false name=hidden type=text style=display:none> <div class=\\\"input-group search-bar\\\"> <div class=input-group-prepend> <div class=input-group-text><i class=\\\"fa fa-search\\\"></i></div> </div> <label class=form-control> <input id=onms-search-query ng-change=onQueryChange() ng-focus=\\\"input.focus=true\\\" ng-blur=\\\"input.focus=false\\\" ng-model=query type=text class=form-control placeholder=Search... aria-label=Search> <small class=\\\"text-muted mr-4\\\" ng-show=!input.focus>2x </small> </label> <div ng-if=showLoadingIndicator class=\\\"btn btn-secondary rounded-0\\\"> <div class=\\\"spinner-border spinner-border-sm text-white\\\" role=status /> <span class=sr-only>Loading...</span> </div> <div ng-if=\\\"performSearchExecuted === true && !showLoadingIndicator\\\" class=input-group-append> <button class=\\\"btn btn-secondary\\\" type=button title=\\\"Reset Search\\\" ng-click=resetQuery()><i class=\\\"fa fa-times\\\"></i></button> </div> <div ng-if=showLoadingIndicator class=input-group-append> <button class=\\\"btn btn-secondary\\\" type=button title=\\\"Cancel Request\\\" ng-click=cancelRequest()><i class=\\\"fa fa-times\\\"></i></button> </div> </div> <div ng-if=\\\"performSearchExecuted === true\\\" class=\\\"bg-dark search-result rounded-bottom\\\" id=onms-search-result> <div class=list-group ng-if=\\\"results.length > 0\\\"> <div id=onms-search-result-item-{{$index}} ng-repeat-start=\\\"item in results track by $index\\\" ng-if=\\\"item.type === 'Group'\\\" class=\\\"list-group-item bg-dark text-grey border-0 pl-2\\\"> <span ng-if=!item.t>{{item.label}}</span> </div> <a id=onms-search-result-item-{{$index}} ng-class=\\\"{'selected': item.selected}\\\" ng-if=\\\"item.type === 'More'\\\" ng-click=item.loadMore() class=\\\"list-group-item list-group-item-action\\\" href ng-mouseover=select($index)>more...</a> <a id=onms-search-result-item-{{$index}} ng-class=\\\"{'selected': item.selected}\\\" ng-repeat-end ng-if=\\\"item.type === 'Item'\\\" href={{item.url}} class=\\\"list-group-item list-group-item-action\\\" ng-mouseover=select($index) ng-click=resetQuery()> <h6 class=mb-0><i class={{item.icon}} ng-if=item.icon>&nbsp;</i>{{item.label}} <i style=-webkit-transform:scaleY(-1);transform:scaleY(-1) class=\\\"fa fa-reply pull-right\\\" ng-if=item.selected></i></h6> <small class=mr-4 ng-class=\\\"{'text-muted': !item.selected}\\\" ng-repeat=\\\"match in item.matches\\\">{{match.label}}: {{match.value}}</small> </a> </div> <div ng-if=\\\"!error && results.length === 0\\\" class=text-grey> <span>No Results found</span> </div> <div ng-if=error class=\\\"alert alert-danger mx-2 my-2\\\"> <span>{{error}}</span> </div> </div> </form> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;","const angular = require('vendor/angular-js');\nconst search = require('apps/search');\nconst centralSearch = require('apps/onms-central-search');\n\nconst MODULE_NAME = 'onms.default.apps';\n\nangular.module(MODULE_NAME, [ 'onms.central.search', 'onms-search' ]);\n","console.log('init: jquery-js'); // eslint-disable-line no-console\n\nconst jQuery = require('jquery');\nmodule.exports = jQuery;\n","/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\nconst RequisitionInterface = require('./RequisitionInterface');\nconst RequisitionMetaData = require('./RequisitionMetaData');\n\n// Internal function for initialization purposes\nconst isEmpty = function(str) {\n  return (str === null || str === undefined || str.length === 0);\n};\n\n/**\n* @ngdoc object\n* @name RequisitionNode\n* @module onms-requisitions\n* @param {string} foreignSource the name of the foreign source (a.k.a. provisioning group)\n* @param {Object} node an OpenNMS node JSON object\n* @param {boolean} isDeployed true if the node has been deployed\n* @constructor\n*/\nconst RequisitionNode = function RequisitionNode(foreignSource, node, isDeployed) {\n\n  'use strict';\n\n  const self = this;\n\n  /**\n   * @description the foreign source\n   * @ngdoc property\n   * @name RequisitionNode#foreignSource\n   * @propertyOf RequisitionNode\n   * @returns {string} the foreign source\n   */\n  self.foreignSource = foreignSource;\n\n  /**\n   * @description The deployed flag\n   * @ngdoc property\n   * @name RequisitionNode#deployed\n   * @propertyOf RequisitionNode\n   * @returns {boolean} true, if the node has been deployed\n   */\n  self.deployed = isDeployed;\n\n  /**\n   * @description The modified flag\n   * @ngdoc property\n   * @name RequisitionNode#modified\n   * @propertyOf RequisitionNode\n   * @returns {boolean} true, if the node has been modified\n   */\n  self.modified = false;\n\n  /**\n   * @description The foreign Id\n   * @ngdoc property\n   * @name RequisitionNode#foreignId\n   * @propertyOf RequisitionNode\n   * @returns {string} The foreign Id\n   */\n  self.foreignId = node['foreign-id'];\n  if (isEmpty(self.foreignId)) {\n    self.foreignId = String(new Date().getTime());\n  }\n\n  /**\n   * @description The node's label\n   * @ngdoc property\n   * @name RequisitionNode#nodeLabel\n   * @propertyOf RequisitionNode\n   * @returns {string} the node's label\n   */\n  self.nodeLabel = node['node-label'];\n\n  /**\n   * @description The location of the node\n   * @ngdoc property\n   * @name RequisitionNode#location\n   * @propertyOf RequisitionNode\n   * @returns {string} The location\n   */\n  self.location = node['location'];\n\n  /**\n   * @description The city where the node is located\n   * @ngdoc property\n   * @name RequisitionNode#city\n   * @propertyOf RequisitionNode\n   * @returns {string} The city\n   */\n  self.city = node['city'];\n\n  /**\n   * @description The building where the node is located\n   * @ngdoc property\n   * @name RequisitionNode#building\n   * @propertyOf RequisitionNode\n   * @returns {string} The building\n   */\n  self.building = node['building'];\n\n  /**\n   * @description The parent foreign source (for path outages), required if the parent node exist on a different requisition.\n   * @ngdoc property\n   * @name RequisitionNode#parentForeignSource\n   * @propertyOf RequisitionNode\n   * @returns {string} The parent foreign source\n   */\n  self.parentForeignSource = node['parent-foreign-source'];\n\n  /**\n   * @description The parent foreign ID (for path outages), to uniquely identify the parent node (can not be used if parentNodeLabel is defined)\n   * @ngdoc property\n   * @name RequisitionNode#parentForeignId\n   * @propertyOf RequisitionNode\n   * @returns {string} The parent foreign ID\n   */\n  var _parentForeignId = node['parent-foreign-id'];\n  self.parentForeignId = isEmpty(_parentForeignId) ? null : _parentForeignId;\n\n  /**\n   * @description The parent node label (for path outages), to uniquely identify the parent node (can not be used if parentForeignId is defined)\n   * @ngdoc property\n   * @name RequisitionNode#parentNodeLabel\n   * @propertyOf RequisitionNode\n   * @returns {string} The parent foreign Label\n   */\n  var _parentNodeLabel = node['parent-node-label'];\n  self.parentNodeLabel = isEmpty(_parentNodeLabel) ? null : _parentNodeLabel;\n\n  /**\n   * @description The array of interfaces\n   * @ngdoc property\n   * @name RequisitionNode#interfaces\n   * @propertyOf RequisitionNode\n   * @returns {array} The interfaces\n   */\n  self.interfaces = [];\n\n  /**\n   * @description The array of categories\n   * @ngdoc property\n   * @name RequisitionNode#categories\n   * @propertyOf RequisitionNode\n   * @returns {array} The categories\n   */\n  self.categories = [];\n\n  /**\n   * @description The array of assets\n   * @ngdoc property\n   * @name RequisitionNode#assets\n   * @propertyOf RequisitionNode\n   * @returns {array} The assets\n   */\n  self.assets = [];\n\n  angular.forEach(node['interface'], function(intf) {\n      self.interfaces.push(new RequisitionInterface(intf));\n  });\n\n  angular.forEach(node['asset'], function(asset) {\n    self.assets.push(asset);\n  });\n\n  angular.forEach(node['category'], function(category) {\n    self.categories.push(category);\n  });\n\n  /**\n   * Initialize the meta-data *after* the interfaces are set.\n   *\n   * @description The meta-data entries\n   * @ngdoc property\n   * @name RequisitionNode#metaData\n   * @propertyOf RequisitionNode\n   * @returns {object} The meta-data entries\n   */\n  self.metaData = new RequisitionMetaData(node, this);\n\n  /**\n  * @description Check if the node has been changed\n  *\n  * @name RequisitionNode:isModified\n  * @ngdoc method\n  * @methodOf RequisitionNode\n  * @returns {boolean} true if the node has been changed or modified.\n  */\n  self.isModified = function() {\n    if (self.modified) {\n      return true;\n    }\n    return ! self.deployed;\n  };\n\n  /**\n  * @description Adds a new interface to the node\n  *\n  * @name RequisitionNode:addNewInterface\n  * @ngdoc method\n  * @methodOf RequisitionNode\n  * @returns {object} the new interface Object\n  */\n  self.addNewInterface = function() {\n    var found = false;\n    angular.forEach(self.interfaces, function(intf) {\n      if (intf.snmpPrimary === 'P') {\n        found = true;\n      }\n    });\n    self.interfaces.push(new RequisitionInterface({\n      'snmp-primary': (found ? 'N' : 'P')\n    }));\n    return self.interfaces.length - 1;\n  };\n\n  /**\n  * @description Adds a new asset to the node\n  *\n  * @name RequisitionNode:addNewAsset\n  * @ngdoc method\n  * @methodOf RequisitionNode\n  * @returns {object} the new service Object\n  */\n  self.addNewAsset = function() {\n    self.assets.push({\n      name: '',\n      value: ''\n    });\n    return self.assets.length -1;\n  };\n\n  /**\n  * @description Adds a new category to the node\n  *\n  * @name RequisitionNode:addNewCategory\n  * @ngdoc method\n  * @methodOf RequisitionNode\n  * @returns {object} the new service Object\n  */\n  self.addNewCategory = function() {\n    self.categories.push({\n      name: ''\n    });\n    return self.categories.length -1;\n  };\n\n  /**\n  * @description Gets the primary IP address if exist.\n  *\n  * @name RequisitionNode:getPrimaryIpAddress\n  * @ngdoc method\n  * @methodOf RequisitionNode\n  * @returns {string} the primary IP address (null if it doesn't exist)\n  */\n  self.getPrimaryIpAddress = function() {\n    var ip = null;\n    angular.forEach(self.interfaces, function(intf) {\n      if (intf.snmpPrimary === 'P') {\n        ip = intf.ipAddress;\n      }\n    });\n    return ip;\n  };\n\n  /**\n  * @description Checks if the node has parent information (for path outages).\n  *\n  * @name RequisitionNode:hasParentInformation\n  * @ngdoc method\n  * @methodOf RequisitionNode\n  * @returns {boolean} true, if the node has parent information.\n  */\n  self.hasParentInformation = function() {\n    if (self.parentForeignSource && self.parentForeignSource.trim() !== '') {\n      return true;\n    }\n    if (self.parentForeignId && self.parentForeignId.trim() !== '') {\n      return true;\n    }\n    if (self.parentNodeLabel && self.parentNodeLabel.trim() !== '') {\n      return true;\n    }\n    return false;\n  };\n\n  /**\n  * @description Gets the OpenNMS representation of the requisitioned node\n  *\n  * @name RequisitionNode:getOnmsRequisitionNode\n  * @ngdoc method\n  * @methodOf RequisitionNode\n  * @returns {object} the requisition Object\n  */\n  self.getOnmsRequisitionNode = function() {\n    var nodeObject = {\n      'foreign-id': self.foreignId,\n      'node-label': self.nodeLabel,\n      'location': self.location,\n      'city': self.city,\n      'building': self.building,\n      'interface': [],\n      'parent-foreign-source': self.parentForeignSource,\n      'parent-foreign-id': self.parentForeignId,\n      'parent-node-label': self.parentNodeLabel,\n      'asset': [],\n      'meta-data': self.metaData.getOnmsMetaDataForNode(),\n      'category': []\n    };\n\n    angular.forEach(self.interfaces, function(intf) {\n      var interfaceObject = {\n        'ip-addr': intf.ipAddress,\n        'descr': intf.description,\n        'snmp-primary': intf.snmpPrimary,\n        'status': (intf.status || intf.status === 'managed') ? '1' : '3',\n        'meta-data': self.metaData.getOnmsMetaDataForInterface(intf),\n        'monitored-service': []\n      };\n\n      angular.forEach(intf.services, function(service) {\n        var serviceObject = {\n          'service-name': service.name,\n          'meta-data': self.metaData.getOnmsMetaDataForService(intf, service)\n        };\n        interfaceObject['monitored-service'].push(serviceObject);\n      });\n\n      nodeObject['interface'].push(interfaceObject);\n    });\n\n    angular.forEach(self.assets, function(asset) {\n      nodeObject['asset'].push(asset);\n    });\n\n    angular.forEach(self.categories, function(category) {\n      nodeObject['category'].push(category);\n    });\n\n    return nodeObject;\n  };\n\n  self.className = 'RequisitionNode';\n\n  return self;\n};\n\nmodule.exports = RequisitionNode;\n","/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2014 The OpenNMS Group, Inc.\n*/\n\n/**\n* @ngdoc object\n* @name RequisitionService\n* @module onms-requisitions\n* @param {Object} svc an OpenNMS service JSON object\n* @constructor\n*/\nconst RequisitionService = function RequisitionService(svc) {\n  'use strict';\n\n  const self = this;\n\n  /**\n   * @description The name of the service\n   * @ngdoc property\n   * @name RequisitionService#name\n   * @propertyOf RequisitionService\n   * @returns {string} The name of the service\n   */\n  self.name = svc['service-name'];\n\n  self.className = 'RequisitionService';\n\n  return self;\n};\n\nmodule.exports = RequisitionService;\n","'use strict';\n\nconst angular = require('vendor/angular-js');\n\nconst permissionDeniedTemplate  = require('./403-permission-denied.html');\n\nangular.module('onms.http', ['ui.bootstrap'])\n    .factory('InterceptorService',['$q', '$rootScope', function($q, $rootScope) {\n        return {\n            responseError: function (rejection) {\n                if (rejection.status === 401) {\n                    if (rejection.config && rejection.config.url\n                        && (rejection.config.url.startsWith('rest/')\n                            || rejection.config.url.startsWith('api/v2/'))\n                    ) {\n                        console.error('Login Required', rejection, rejection.headers); // eslint-disable-line no-console\n                        $rootScope.$emit('loginRequired');\n                    }\n                }\n                if (rejection.status === 403) {\n                    $rootScope.$emit('permissionDenied');\n                }\n                return $q.reject(rejection);\n            }\n        }\n    }])\n    .config(['$httpProvider',\n        function ($httpProvider) {\n            $httpProvider.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';\n            $httpProvider.interceptors.push('InterceptorService');\n        }\n    ])\n    .run(['$rootScope', '$uibModal', function($rootScope, $uibModal) {\n        $rootScope.$on('loginRequired', function() {\n            var baseTags = document.getElementsByTagName('base');\n            if (baseTags && baseTags.length > 0 && baseTags[0].href) {\n                window.location.href = baseTags[0].href + 'login.jsp?session_expired=true';\n            } else {\n                console.warn('Login is required, but cannot forward to login page due to missing base tag.'); // eslint-disable-line no-console\n            }\n        });\n\n        $rootScope.$on('permissionDenied', function() {\n            $uibModal.open({\n                templateUrl: permissionDeniedTemplate,\n                controller: function($scope, $uibModalInstance) {\n                    $scope.reload = function () {\n                        $uibModalInstance.dismiss();\n                        window.location.reload();\n                    };\n                },\n                size: '',\n                backdrop: 'static',\n                keyboard  : false\n            });\n        });\n    }])\n;\n\nmodule.exports = angular;","const angular = require('vendor/angular-js');\n\nrequire('./main');\nrequire('../requisitions-core/index');","/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2016 The OpenNMS Group, Inc.\n*/\n\n(function() {\n\n  'use strict';\n\n  const quickAddNodeStandaloneView = require('../lib/views/quick-add-node-standalone.html');\n\n  angular.module('onms-requisitions', [\n    'onms.http',\n    'onms.default.apps',\n    'ngRoute',\n    'ngAnimate',\n    'ui.bootstrap',\n    'angular-growl',\n    'angular-loading-bar',\n    'ngSanitize',\n    'onmsDateFormatter'\n  ])\n\n  .config(['$routeProvider', function ($routeProvider) {\n    $routeProvider\n    .when('/', {\n      templateUrl: quickAddNodeStandaloneView,\n      controller: 'QuickAddNodeController',\n      resolve: {\n        foreignSources: function() { return null; }\n      }\n    })\n    .otherwise({\n      redirectTo: '/'\n    });\n  }])\n\n  .config(['growlProvider', function(growlProvider) {\n    growlProvider.globalTimeToLive(3000);\n    growlProvider.globalPosition('bottom-center');\n  }]);\n\n}());\n","var path = '/home/kevlin/dhimantibranch/core/web-assets/src/main/assets/js/apps/onms-requisitions/lib/views/quick-add-node-standalone.html';\nvar html = \"<div> <ol class=breadcrumb> <li class=breadcrumb-item><a href=/opennms/index.jsp>Home</a></li> <li class=breadcrumb-item><a href=/opennms/admin/index.jsp>Admin</a></li> <li class=breadcrumb-item><a href=/opennms/admin/ng-requisitions/index.jsp>Provisioning Requisitions</a></li> <li class=\\\"breadcrumb-item active\\\">Quick-Add Node</li> </ol> <div class=row> <div class=col-md-6> <form name=quickAddNodeForm> <fieldset ng-disabled=isSaving> <div class=card> <div class=card-header><span>Basic Attributes (required)</span></div> <div class=card-body ng-include=quickAddPanelBasicView></div> </div> <div class=card> <div class=card-header><span>SNMP Parameters (optional)</span></div> <div class=card-body ng-include=quickAddPanelSnmpView></div> </div> <div class=card> <div class=card-header><span>Surveillance Category Memberships (optional)</span></div> <div class=card-body ng-include=quickAddPanelCategoriesView></div> </div> <div class=card> <div class=card-header><span>CLI Authentication Parameters (optional)</span></div> <div class=card-body ng-include=quickAddPanelCliView></div> </div> <div class=form-group> <button type=button class=\\\"btn btn-primary\\\" id=provision ng-click=provision() ng-disabled=isInvalid()>Provision</button> <button type=button class=\\\"btn btn-primary\\\" id=reset ng-click=reset()>Reset</button> </div> </fieldset> </form> </div> <div class=col-md-6> <div class=card> <div class=card-header><span>Node Quick-Add Help</span></div> <div class=card-body ng-include=quickAddPanelHelpView></div> </div> </div> </div> </div> \";\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;"],"sourceRoot":""}