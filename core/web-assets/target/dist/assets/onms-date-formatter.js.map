{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///./src/main/assets/js/apps/onms-date-formatter/index.js","webpack:///./src/main/assets/js/vendor/angular-js.js","webpack:///./src/main/assets/js/vendor/bootstrap-js.js","webpack:///./src/main/assets/js/vendor/jquery-js.js"],"names":["angular","require","moment","OnmsDateFormatter","prototype","init","readyCallback","self","defaultFormat","window","_onmsZoneId","undefined","xhr","XMLHttpRequest","onreadystatechange","readystatechange","readyState","DONE","status","config","JSON","parse","responseText","datetimeformatConfig","datetimeformat","_onmsDateTimeFormat","zoneId","console","log","statusText","e","open","setRequestHeader","send","assertInitialized","Error","getZoneId","_zoneId","warn","tz","guess","format","date","momentDate","formatJavaDTF","jest","f","_onmsFormatter","module","factory","DateFormatterService","$interval","$q","deferred","defer","count","i","resolve","cancel","raw","formatter","promise","then","$filter","onmsDate","input","ifEmpty","ret","directive","dateFormatterService","restrict","compile","element","text","formatted","replaceWith","catch","error","exports","jQuery"],"mappings":"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","file":"onms-date-formatter.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn ","/* eslint no-console: 0 */\n\nconst angular = require('vendor/angular-js');\nconst moment = require('moment-timezone');\nrequire('@rangerrick/moment-javaformat/dist/moment-javaformat');\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nfunction OnmsDateFormatter() {\n}\n\nOnmsDateFormatter.prototype.init = function init(readyCallback) {\n\tvar self = this;\n\tvar defaultFormat = \"yyyy-MM-dd'T'HH:mm:ssxxx\"; // eslint-disable-line quotes\n\twindow._onmsZoneId = undefined;\n\n\tvar xhr = new XMLHttpRequest();\n\txhr.onreadystatechange = function readystatechange() {\n\t\ttry {\n\t\t\tif (xhr.readyState === XMLHttpRequest.DONE) {\n\t\t\t\tif (xhr.status === 200) {\n\t\t\t\t\tvar config = JSON.parse(xhr.responseText);\n\t\t\t\t\tif (config.datetimeformatConfig && config.datetimeformatConfig.datetimeformat) {\n\t\t\t\t\t\twindow._onmsDateTimeFormat = config.datetimeformatConfig.datetimeformat || defaultFormat;\n\t\t\t\t\t\twindow._onmsZoneId = config.datetimeformatConfig.zoneId;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log('Error: datetimeformatConfig property not found:',config);\n\t\t\t\t\t\twindow._onmsDateTimeFormat = defaultFormat;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('Error: failed to request format info: ' + xhr.status + ' ' + xhr.statusText);\n\t\t\t\t\twindow._onmsDateTimeFormat = defaultFormat;\n\t\t\t\t}\n\t\t\t\treadyCallback(self, xhr.status);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log('Error: failed to request format info: ', e);\n\t\t\twindow._onmsDateTimeFormat = defaultFormat;\n\t\t\treadyCallback(self, xhr.status);\n\t\t}\n\t};\n\txhr.open('GET', 'rest/info');\n\txhr.setRequestHeader('Accept', 'application/json');\n\txhr.send();\n};\n\nOnmsDateFormatter.prototype.assertInitialized = function assertInitialized() {\n\tif (!window._onmsDateTimeFormat) {\n\t\tconsole.log('OnmsDateFormatter.init() must complete before using!');\n\t\tthrow new Error('OnmsDateFormatter.init() must complete before using!');\n\t}\n};\n\nOnmsDateFormatter.prototype.getZoneId = function getZoneId() {\n\tthis.assertInitialized();\n\n\tif (!this._zoneId) {\n\t\tif (window._onmsZoneId) {\n\t\t\tthis._zoneId = window._onmsZoneId;\n\t\t} else {\n\t\t\tconsole.warn('No zone ID specified from the server; guessing based on browser.');\n\t\t\tthis._zoneId = moment.tz.guess();\n\t\t}\n\t}\n\treturn this._zoneId;\n};\n\nOnmsDateFormatter.prototype.format = function format(date) {\n\tthis.assertInitialized();\n\n\tif (date === undefined || date === null) {\n\t\treturn date;\n\t}\n\n\tconst zoneId = this.getZoneId();\n\tconst momentDate = moment.tz(date, zoneId);\n\treturn momentDate.formatJavaDTF(window._onmsDateTimeFormat);\n};\n\n(function() {\n\t'use strict';\n\tif (typeof jest === 'undefined') {\n\t\tvar f = new OnmsDateFormatter();\n\t\tf.init(function() {\n\t\t\twindow._onmsFormatter = f;\n\t\t});\n\t} else {\n\t\tconsole.log('Running in a test environment. Skipping automatic initialization.');\n\t}\n})();\n\n(function() {\n\t'use strict';\n\n\tif (window.angular) {\n\t\tangular.module('onmsDateFormatter', ['ng']).factory('DateFormatterService', ['$interval', '$q', function DateFormatterService($interval, $q) {\n\t\t\tconsole.log('Initializing DateFormatterService');\n\n\t\t\tvar deferred = $q.defer();\n\n\t\t\tvar count = 0;\n\t\t\tvar i = $interval(function() {\n\t\t\t\tif (window._onmsFormatter) {\n\t\t\t\t\tconsole.log('Global formatter found: ' + window._onmsDateTimeFormat);\n\t\t\t\t\tdeferred.resolve(window._onmsFormatter);\n\t\t\t\t\t$interval.cancel(i);\n\t\t\t\t}\n\t\t\t\tif (count++ > 300) {\n\t\t\t\t\tconsole.log('DateFormatterService: giving up waiting for global formatter.');\n\t\t\t\t\t$interval.cancel(i);\n\t\t\t\t}\n\t\t\t}, 100);\n\n\t\t\treturn {\n\t\t\t\traw: window._onmsFormatter,\n\t\t\t\tformatter: deferred.promise,\n\t\t\t\tformat: function(date) {\n\t\t\t\t\treturn deferred.promise.then(function(f) {\n\t\t\t\t\t\treturn f.format(date);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\n\t\tangular.module('onmsDateFormatter').filter('onmsDate', ['$filter', 'DateFormatterService', function($filter, DateFormatterService) {\n\t\t\treturn function onmsDate(input, ifEmpty) {\n\t\t\t\tvar ret;\n\t\t\t\tif (window._onmsFormatter) {\n\t\t\t\t\t// If the formatter has finished initializing, use it\n\t\t\t\t\tret = window._onmsFormatter.format(input);\n\t\t\t\t\t//console.log('onmsDate: formatter returned: ' + ret);\n\t\t\t\t} else {\n\t\t\t\t\t// Otherwise, use ISO format\n\t\t\t\t\tret = $filter('date')(input, 'yyyy-MM-ddTHH:mm:ss.sssZ');\n\t\t\t\t\t//console.log('onmsDate: $filter(date) returned: ' + ret);\n\t\t\t\t}\n\t\t\t\tif (ret !== undefined && ret !== null) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t\treturn ifEmpty;\n\t\t\t}\n\t\t}]);\n\n\t\tangular.module('onmsDateFormatter').directive('onmsDate', ['DateFormatterService', function(dateFormatterService) {\n\t\t\treturn {\n\t\t\t\trestrict: 'E',\n\t\t\t\tcompile: function(element) {\n\t\t\t\t\tdateFormatterService.format(element.text()).then(function(formatted) {\n\t\t\t\t\t\telement.replaceWith(formatted);\n\t\t\t\t\t}).catch(function(e) {\n\t\t\t\t\t\tconsole.error('Failed to format ' + element.text(), e);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}]);\n\t} else {\n\t\tconsole.log('Angular not found.  Not initializing OnmsDateFormatter Angular components.');\n\t}\n})();\n\nmodule.exports = OnmsDateFormatter;","/* Angular Core */\nconst angular = require('angular');\nrequire('angular-animate');\nrequire('angular-cookies');\nrequire('angular-route');\nrequire('angular-resource');\nrequire('angular-sanitize');\n\n/* 3rd-Party Modules */\nrequire('angular-growl-v2');\nrequire('angular-loading-bar');\n\nrequire('angular-growl-v2/build/angular-growl.css');\nrequire('angular-loading-bar/build/loading-bar.css');\n\n/* Bootstrap UI */\nrequire('vendor/bootstrap-js');\nrequire('angular-bootstrap-checkbox');\nrequire('ui-bootstrap4'); // angular-ui-boostrap for bootstrap 4\n\nconsole.log('init: angular-js'); // eslint-disable-line no-console\n\nmodule.exports = window['angular'] = angular;","console.log('init: bootstrap-js'); // eslint-disable-line no-console\n\nconst jQuery = require('vendor/jquery-js');\nrequire('bootstrap/dist/js/bootstrap');\n\nmodule.exports = jQuery;\n","console.log('init: jquery-js'); // eslint-disable-line no-console\n\nconst jQuery = require('jquery');\nmodule.exports = jQuery;\n"],"sourceRoot":""}